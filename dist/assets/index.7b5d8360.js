var qC=Object.defineProperty,YC=Object.defineProperties;var XC=Object.getOwnPropertyDescriptors;var gu=Object.getOwnPropertySymbols;var v0=Object.prototype.hasOwnProperty,y0=Object.prototype.propertyIsEnumerable;var g0=(t,e,r)=>e in t?qC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ts=(t,e)=>{for(var r in e||(e={}))v0.call(e,r)&&g0(t,r,e[r]);if(gu)for(var r of gu(e))y0.call(e,r)&&g0(t,r,e[r]);return t},Ws=(t,e)=>YC(t,XC(e));var co=(t,e)=>{var r={};for(var n in t)v0.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&gu)for(var n of gu(t))e.indexOf(n)<0&&y0.call(t,n)&&(r[n]=t[n]);return r};const QC=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}};QC();var JC=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ZC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ll=Symbol.for("react.element"),eI=Symbol.for("react.portal"),tI=Symbol.for("react.fragment"),rI=Symbol.for("react.strict_mode"),nI=Symbol.for("react.profiler"),iI=Symbol.for("react.provider"),sI=Symbol.for("react.context"),aI=Symbol.for("react.forward_ref"),oI=Symbol.for("react.suspense"),lI=Symbol.for("react.memo"),uI=Symbol.for("react.lazy"),E0=Symbol.iterator;function cI(t){return t===null||typeof t!="object"?null:(t=E0&&t[E0]||t["@@iterator"],typeof t=="function"?t:null)}var _w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bw=Object.assign,Cw={};function Ha(t,e,r){this.props=t,this.context=e,this.refs=Cw,this.updater=r||_w}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Iw(){}Iw.prototype=Ha.prototype;function vm(t,e,r){this.props=t,this.context=e,this.refs=Cw,this.updater=r||_w}var ym=vm.prototype=new Iw;ym.constructor=vm;bw(ym,Ha.prototype);ym.isPureReactComponent=!0;var w0=Array.isArray,Aw=Object.prototype.hasOwnProperty,Em={current:null},Rw={key:!0,ref:!0,__self:!0,__source:!0};function kw(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Aw.call(e,n)&&!Rw.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];i.children=d}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Ll,type:t,key:s,ref:a,props:i,_owner:Em.current}}function fI(t,e){return{$$typeof:Ll,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ll}function dI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var x0=/\/+/g;function _d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dI(""+t.key):e.toString(36)}function Xu(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ll:case eI:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+_d(a,0):n,w0(i)?(r="",t!=null&&(r=t.replace(x0,"$&/")+"/"),Xu(i,e,r,"",function(u){return u})):i!=null&&(wm(i)&&(i=fI(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(x0,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",w0(t))for(var l=0;l<t.length;l++){s=t[l];var d=n+_d(s,l);a+=Xu(s,e,r,d,i)}else if(d=cI(t),typeof d=="function")for(t=d.call(t),l=0;!(s=t.next()).done;)s=s.value,d=n+_d(s,l++),a+=Xu(s,e,r,d,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function vu(t,e,r){if(t==null)return t;var n=[],i=0;return Xu(t,n,"","",function(s){return e.call(r,s,i++)}),n}function hI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pr={current:null},Qu={transition:null},pI={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:Qu,ReactCurrentOwner:Em};ct.Children={map:vu,forEach:function(t,e,r){vu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vu(t,function(){e++}),e},toArray:function(t){return vu(t,function(e){return e})||[]},only:function(t){if(!wm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Ha;ct.Fragment=tI;ct.Profiler=nI;ct.PureComponent=vm;ct.StrictMode=rI;ct.Suspense=oI;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pI;ct.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=bw({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Em.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(d in e)Aw.call(e,d)&&!Rw.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ll,type:t.type,key:i,ref:s,props:n,_owner:a}};ct.createContext=function(t){return t={$$typeof:sI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iI,_context:t},t.Consumer=t};ct.createElement=kw;ct.createFactory=function(t){var e=kw.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:aI,render:t}};ct.isValidElement=wm;ct.lazy=function(t){return{$$typeof:uI,_payload:{_status:-1,_result:t},_init:hI}};ct.memo=function(t,e){return{$$typeof:lI,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Qu.transition;Qu.transition={};try{t()}finally{Qu.transition=e}};ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ct.useCallback=function(t,e){return Pr.current.useCallback(t,e)};ct.useContext=function(t){return Pr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return Pr.current.useDeferredValue(t)};ct.useEffect=function(t,e){return Pr.current.useEffect(t,e)};ct.useId=function(){return Pr.current.useId()};ct.useImperativeHandle=function(t,e,r){return Pr.current.useImperativeHandle(t,e,r)};ct.useInsertionEffect=function(t,e){return Pr.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return Pr.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return Pr.current.useMemo(t,e)};ct.useReducer=function(t,e,r){return Pr.current.useReducer(t,e,r)};ct.useRef=function(t){return Pr.current.useRef(t)};ct.useState=function(t){return Pr.current.useState(t)};ct.useSyncExternalStore=function(t,e,r){return Pr.current.useSyncExternalStore(t,e,r)};ct.useTransition=function(){return Pr.current.useTransition()};ct.version="18.0.0-fc46dba67-20220329";J.exports=ct;var E=J.exports,xm={exports:{}},ln={},Lw={exports:{}},Dw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(oe,xe){var fe=oe.length;oe.push(xe);e:for(;0<fe;){var Le=fe-1>>>1,ye=oe[Le];if(0<i(ye,xe))oe[Le]=xe,oe[fe]=ye,fe=Le;else break e}}function r(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var xe=oe[0],fe=oe.pop();if(fe!==xe){oe[0]=fe;e:for(var Le=0,ye=oe.length,Ze=ye>>>1;Le<Ze;){var Ce=2*(Le+1)-1,it=oe[Ce],ft=Ce+1,Be=oe[ft];if(0>i(it,fe))ft<ye&&0>i(Be,it)?(oe[Le]=Be,oe[ft]=fe,Le=ft):(oe[Le]=it,oe[Ce]=fe,Le=Ce);else if(ft<ye&&0>i(Be,fe))oe[Le]=Be,oe[ft]=fe,Le=ft;else break e}}return xe}function i(oe,xe){var fe=oe.sortIndex-xe.sortIndex;return fe!==0?fe:oe.id-xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],u=[],h=1,w=null,g=3,S=!1,C=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(oe){for(var xe=r(u);xe!==null;){if(xe.callback===null)n(u);else if(xe.startTime<=oe)n(u),xe.sortIndex=xe.expirationTime,e(d,xe);else break;xe=r(u)}}function M(oe){if(R=!1,D(oe),!C)if(r(d)!==null)C=!0,Ne(j);else{var xe=r(u);xe!==null&&Ue(M,xe.startTime-oe)}}function j(oe,xe){C=!1,R&&(R=!1,T(K),K=-1),S=!0;var fe=g;try{for(D(xe),w=r(d);w!==null&&(!(w.expirationTime>xe)||oe&&!ce());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,g=w.priorityLevel;var ye=Le(w.expirationTime<=xe);xe=t.unstable_now(),typeof ye=="function"?w.callback=ye:w===r(d)&&n(d),D(xe)}else n(d);w=r(d)}if(w!==null)var Ze=!0;else{var Ce=r(u);Ce!==null&&Ue(M,Ce.startTime-xe),Ze=!1}return Ze}finally{w=null,g=fe,S=!1}}var B=!1,z=null,K=-1,ee=5,Z=-1;function ce(){return!(t.unstable_now()-Z<ee)}function le(){if(z!==null){var oe=t.unstable_now();Z=oe;var xe=!0;try{xe=z(!0,oe)}finally{xe?Te():(B=!1,z=null)}}else B=!1}var Te;if(typeof I=="function")Te=function(){I(le)};else if(typeof MessageChannel!="undefined"){var _e=new MessageChannel,We=_e.port2;_e.port1.onmessage=le,Te=function(){We.postMessage(null)}}else Te=function(){O(le,0)};function Ne(oe){z=oe,B||(B=!0,Te())}function Ue(oe,xe){K=O(function(){oe(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,Ne(j))},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(d)},t.unstable_next=function(oe){switch(g){case 1:case 2:case 3:var xe=3;break;default:xe=g}var fe=g;g=xe;try{return oe()}finally{g=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(oe,xe){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var fe=g;g=oe;try{return xe()}finally{g=fe}},t.unstable_scheduleCallback=function(oe,xe,fe){var Le=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Le+fe:Le):fe=Le,oe){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=fe+ye,oe={id:h++,callback:xe,priorityLevel:oe,startTime:fe,expirationTime:ye,sortIndex:-1},fe>Le?(oe.sortIndex=fe,e(u,oe),r(d)===null&&oe===r(u)&&(R?(T(K),K=-1):R=!0,Ue(M,fe-Le))):(oe.sortIndex=ye,e(d,oe),C||S||(C=!0,Ne(j))),oe},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(oe){var xe=g;return function(){var fe=g;g=xe;try{return oe.apply(this,arguments)}finally{g=fe}}}})(Dw);Lw.exports=Dw;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=J.exports,nn=Lw.exports;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pw=new Set,qo={};function Os(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(qo[t]=e,t=0;t<e.length;t++)Pw.add(e[t])}var ni=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Lh=Object.prototype.hasOwnProperty,mI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S0={},T0={};function gI(t){return Lh.call(T0,t)?!0:Lh.call(S0,t)?!1:mI.test(t)?T0[t]=!0:(S0[t]=!0,!1)}function vI(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yI(t,e,r,n){if(e===null||typeof e=="undefined"||vI(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nr(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hr[t]=new Nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hr[e]=new Nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hr[t]=new Nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hr[t]=new Nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hr[t]=new Nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hr[t]=new Nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hr[t]=new Nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hr[t]=new Nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hr[t]=new Nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sm=/[\-:]([a-z])/g;function Tm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sm,Tm);hr[e]=new Nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sm,Tm);hr[e]=new Nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sm,Tm);hr[e]=new Nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hr[t]=new Nr(t,1,!1,t.toLowerCase(),null,!1,!1)});hr.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hr[t]=new Nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function _m(t,e,r,n){var i=hr.hasOwnProperty(e)?hr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yI(e,r,i,n)&&(r=null),n||i===null?gI(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ui=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yu=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),bm=Symbol.for("react.strict_mode"),Dh=Symbol.for("react.profiler"),Nw=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),Oh=Symbol.for("react.suspense"),Ph=Symbol.for("react.suspense_list"),Im=Symbol.for("react.memo"),hi=Symbol.for("react.lazy"),Fw=Symbol.for("react.offscreen"),_0=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=_0&&t[_0]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,bd;function To(t){if(bd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var Cd=!1;function Id(t,e){if(!t||Cd)return"";Cd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=l);break}}}finally{Cd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?To(t):""}function EI(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=Id(t.type,!1),t;case 11:return t=Id(t.type.render,!1),t;case 1:return t=Id(t.type,!0),t;default:return""}}function Nh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case Js:return"Portal";case Dh:return"Profiler";case bm:return"StrictMode";case Oh:return"Suspense";case Ph:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mw:return(t.displayName||"Context")+".Consumer";case Nw:return(t._context.displayName||"Context")+".Provider";case Cm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Im:return e=t.displayName||null,e!==null?e:Nh(t.type)||"Memo";case hi:e=t._payload,t=t._init;try{return Nh(t(e))}catch{}}return null}function wI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nh(e);case 8:return e===bm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Uw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xI(t){var e=Uw(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eu(t){t._valueTracker||(t._valueTracker=xI(t))}function Bw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Uw(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function vc(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mh(t,e){var r=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function b0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ni(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $w(t,e){e=e.checked,e!=null&&_m(t,"checked",e,!1)}function Fh(t,e){$w(t,e);var r=Ni(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Uh(t,e.type,Ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function C0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Uh(t,e,r){(e!=="number"||vc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var _o=Array.isArray;function fa(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ni(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(we(92));if(_o(r)){if(1<r.length)throw Error(we(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ni(r)}}function Vw(t,e){var r=Ni(e.value),n=Ni(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function A0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $h(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wu,Gw=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wu=wu||document.createElement("div"),wu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SI=["Webkit","ms","Moz","O"];Object.keys(ko).forEach(function(t){SI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ko[e]=ko[t]})});function Hw(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ko.hasOwnProperty(t)&&ko[t]?(""+e).trim():e+"px"}function zw(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Hw(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var TI=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(TI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function jh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gh=null;function Am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hh=null,da=null,ha=null;function R0(t){if(t=Pl(t)){if(typeof Hh!="function")throw Error(we(280));var e=t.stateNode;e&&(e=vf(e),Hh(t.stateNode,t.type,e))}}function Kw(t){da?ha?ha.push(t):ha=[t]:da=t}function Ww(){if(da){var t=da,e=ha;if(ha=da=null,R0(t),e)for(t=0;t<e.length;t++)R0(e[t])}}function qw(t,e){return t(e)}function Yw(){}var Ad=!1;function Xw(t,e,r){if(Ad)return t(e,r);Ad=!0;try{return qw(t,e,r)}finally{Ad=!1,(da!==null||ha!==null)&&(Yw(),Ww())}}function Xo(t,e){var r=t.stateNode;if(r===null)return null;var n=vf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(we(231,e,typeof r));return r}var zh=!1;if(ni)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){zh=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{zh=!1}function _I(t,e,r,n,i,s,a,l,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Lo=!1,yc=null,Ec=!1,Kh=null,bI={onError:function(t){Lo=!0,yc=t}};function CI(t,e,r,n,i,s,a,l,d){Lo=!1,yc=null,_I.apply(bI,arguments)}function II(t,e,r,n,i,s,a,l,d){if(CI.apply(this,arguments),Lo){if(Lo){var u=yc;Lo=!1,yc=null}else throw Error(we(198));Ec||(Ec=!0,Kh=u)}}function Ps(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Qw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k0(t){if(Ps(t)!==t)throw Error(we(188))}function AI(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(we(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return k0(i),t;if(s===n)return k0(i),e;s=s.sibling}throw Error(we(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(we(189))}}if(r.alternate!==n)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?t:e}function Jw(t){return t=AI(t),t!==null?Zw(t):null}function Zw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zw(t);if(e!==null)return e;t=t.sibling}return null}var ex=nn.unstable_scheduleCallback,L0=nn.unstable_cancelCallback,RI=nn.unstable_shouldYield,kI=nn.unstable_requestPaint,$t=nn.unstable_now,LI=nn.unstable_getCurrentPriorityLevel,Rm=nn.unstable_ImmediatePriority,tx=nn.unstable_UserBlockingPriority,wc=nn.unstable_NormalPriority,DI=nn.unstable_LowPriority,rx=nn.unstable_IdlePriority,hf=null,Pn=null;function OI(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(hf,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:MI,PI=Math.log,NI=Math.LN2;function MI(t){return t>>>=0,t===0?32:31-(PI(t)/NI|0)|0}var xu=64,Su=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~i;l!==0?n=bo(l):(s&=a,s!==0&&(n=bo(s)))}else a=r&~i,a!==0?n=bo(a):s!==0&&(n=bo(s));if(n===0)return 0;if(e!==0&&e!==n&&(e&i)===0&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((n&4)!==0&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Cn(e),i=1<<r,n|=t[r],e&=~i;return n}function FI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UI(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Cn(s),l=1<<a,d=i[a];d===-1?((l&r)===0||(l&n)!==0)&&(i[a]=FI(l,e)):d<=e&&(t.expiredLanes|=l),s&=~l}}function Wh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Dl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=r}function BI(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Cn(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function km(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Cn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var xt=0;function nx(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ix,Lm,sx,ax,ox,qh=!1,Tu=[],Ci=null,Ii=null,Ai=null,Qo=new Map,Jo=new Map,gi=[],$I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D0(t,e){switch(t){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":Qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(e.pointerId)}}function po(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pl(e),e!==null&&Lm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function VI(t,e,r,n,i){switch(e){case"focusin":return Ci=po(Ci,t,e,r,n,i),!0;case"dragenter":return Ii=po(Ii,t,e,r,n,i),!0;case"mouseover":return Ai=po(Ai,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Qo.set(s,po(Qo.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Jo.set(s,po(Jo.get(s)||null,t,e,r,n,i)),!0}return!1}function lx(t){var e=ss(t.target);if(e!==null){var r=Ps(e);if(r!==null){if(e=r.tag,e===13){if(e=Qw(r),e!==null){t.blockedOn=e,ox(t.priority,function(){sx(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Gh=n,r.target.dispatchEvent(n),Gh=null}else return e=Pl(r),e!==null&&Lm(e),t.blockedOn=r,!1;e.shift()}return!0}function O0(t,e,r){Ju(t)&&r.delete(e)}function jI(){qh=!1,Ci!==null&&Ju(Ci)&&(Ci=null),Ii!==null&&Ju(Ii)&&(Ii=null),Ai!==null&&Ju(Ai)&&(Ai=null),Qo.forEach(O0),Jo.forEach(O0)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,jI)))}function Zo(t){function e(i){return mo(i,t)}if(0<Tu.length){mo(Tu[0],t);for(var r=1;r<Tu.length;r++){var n=Tu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ci!==null&&mo(Ci,t),Ii!==null&&mo(Ii,t),Ai!==null&&mo(Ai,t),Qo.forEach(e),Jo.forEach(e),r=0;r<gi.length;r++)n=gi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<gi.length&&(r=gi[0],r.blockedOn===null);)lx(r),r.blockedOn===null&&gi.shift()}var pa=ui.ReactCurrentBatchConfig;function GI(t,e,r,n){var i=xt,s=pa.transition;pa.transition=null;try{xt=1,Dm(t,e,r,n)}finally{xt=i,pa.transition=s}}function HI(t,e,r,n){var i=xt,s=pa.transition;pa.transition=null;try{xt=4,Dm(t,e,r,n)}finally{xt=i,pa.transition=s}}function Dm(t,e,r,n){var i=Yh(t,e,r,n);if(i===null)Bd(t,e,n,Sc,r),D0(t,n);else if(VI(i,t,e,r,n))n.stopPropagation();else if(D0(t,n),e&4&&-1<$I.indexOf(t)){for(;i!==null;){var s=Pl(i);if(s!==null&&ix(s),s=Yh(t,e,r,n),s===null&&Bd(t,e,n,Sc,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Bd(t,e,n,null,r)}var Sc=null;function Yh(t,e,r,n){if(Sc=null,t=Am(n),t=ss(t),t!==null)if(e=Ps(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Qw(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function ux(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LI()){case Rm:return 1;case tx:return 4;case wc:case DI:return 16;case rx:return 536870912;default:return 16}default:return 16}}var xi=null,Om=null,Zu=null;function cx(){if(Zu)return Zu;var t,e=Om,r=e.length,n,i="value"in xi?xi.value:xi.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return Zu=i.slice(t,1<n?1-n:void 0)}function ec(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _u(){return!0}function P0(){return!1}function un(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_u:P0,this.isPropagationStopped=P0,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),e}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pm=un(za),Ol=Mt({},za,{view:0,detail:0}),zI=un(Ol),kd,Ld,go,pf=Mt({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(kd=t.screenX-go.screenX,Ld=t.screenY-go.screenY):Ld=kd=0,go=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:Ld}}),N0=un(pf),KI=Mt({},pf,{dataTransfer:0}),WI=un(KI),qI=Mt({},Ol,{relatedTarget:0}),Dd=un(qI),YI=Mt({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),XI=un(YI),QI=Mt({},za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JI=un(QI),ZI=Mt({},za,{data:0}),M0=un(ZI),eA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rA[t])?!!e[t]:!1}function Nm(){return nA}var iA=Mt({},Ol,{key:function(t){if(t.key){var e=eA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ec(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nm,charCode:function(t){return t.type==="keypress"?ec(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ec(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sA=un(iA),aA=Mt({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F0=un(aA),oA=Mt({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nm}),lA=un(oA),uA=Mt({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),cA=un(uA),fA=Mt({},pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dA=un(fA),hA=[9,13,27,32],Mm=ni&&"CompositionEvent"in window,Do=null;ni&&"documentMode"in document&&(Do=document.documentMode);var pA=ni&&"TextEvent"in window&&!Do,fx=ni&&(!Mm||Do&&8<Do&&11>=Do),U0=String.fromCharCode(32),B0=!1;function dx(t,e){switch(t){case"keyup":return hA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ea=!1;function mA(t,e){switch(t){case"compositionend":return hx(e);case"keypress":return e.which!==32?null:(B0=!0,U0);case"textInput":return t=e.data,t===U0&&B0?null:t;default:return null}}function gA(t,e){if(ea)return t==="compositionend"||!Mm&&dx(t,e)?(t=cx(),Zu=Om=xi=null,ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fx&&e.locale!=="ko"?null:e.data;default:return null}}var vA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vA[t.type]:e==="textarea"}function px(t,e,r,n){Kw(n),e=Tc(e,"onChange"),0<e.length&&(r=new Pm("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Oo=null,el=null;function yA(t){bx(t,0)}function mf(t){var e=na(t);if(Bw(e))return t}function EA(t,e){if(t==="change")return e}var mx=!1;if(ni){var Od;if(ni){var Pd="oninput"in document;if(!Pd){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),Pd=typeof V0.oninput=="function"}Od=Pd}else Od=!1;mx=Od&&(!document.documentMode||9<document.documentMode)}function j0(){Oo&&(Oo.detachEvent("onpropertychange",gx),el=Oo=null)}function gx(t){if(t.propertyName==="value"&&mf(el)){var e=[];px(e,el,t,Am(t)),Xw(yA,e)}}function wA(t,e,r){t==="focusin"?(j0(),Oo=e,el=r,Oo.attachEvent("onpropertychange",gx)):t==="focusout"&&j0()}function xA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mf(el)}function SA(t,e){if(t==="click")return mf(e)}function TA(t,e){if(t==="input"||t==="change")return mf(e)}function _A(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:_A;function tl(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Lh.call(e,i)||!Un(t[i],e[i]))return!1}return!0}function G0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H0(t,e){var r=G0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=G0(r)}}function vx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function yx(){for(var t=window,e=vc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=vc(t.document)}return e}function Fm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bA(t){var e=yx(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&vx(r.ownerDocument.documentElement,r)){if(n!==null&&Fm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=H0(r,s);var a=H0(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CA=ni&&"documentMode"in document&&11>=document.documentMode,ta=null,Xh=null,Po=null,Qh=!1;function z0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qh||ta==null||ta!==vc(n)||(n=ta,"selectionStart"in n&&Fm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Po&&tl(Po,n)||(Po=n,n=Tc(Xh,"onSelect"),0<n.length&&(e=new Pm("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ta)))}function bu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ra={animationend:bu("Animation","AnimationEnd"),animationiteration:bu("Animation","AnimationIteration"),animationstart:bu("Animation","AnimationStart"),transitionend:bu("Transition","TransitionEnd")},Nd={},Ex={};ni&&(Ex=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function gf(t){if(Nd[t])return Nd[t];if(!ra[t])return t;var e=ra[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Ex)return Nd[t]=e[r];return t}var wx=gf("animationend"),xx=gf("animationiteration"),Sx=gf("animationstart"),Tx=gf("transitionend"),_x=new Map,K0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(t,e){_x.set(t,e),Os(e,[t])}for(var Md=0;Md<K0.length;Md++){var Fd=K0[Md],IA=Fd.toLowerCase(),AA=Fd[0].toUpperCase()+Fd.slice(1);ji(IA,"on"+AA)}ji(wx,"onAnimationEnd");ji(xx,"onAnimationIteration");ji(Sx,"onAnimationStart");ji("dblclick","onDoubleClick");ji("focusin","onFocus");ji("focusout","onBlur");ji(Tx,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function W0(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,II(n,e,void 0,t),t.currentTarget=null}function bx(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==s&&i.isPropagationStopped())break e;W0(i,l,u),s=d}else for(a=0;a<n.length;a++){if(l=n[a],d=l.instance,u=l.currentTarget,l=l.listener,d!==s&&i.isPropagationStopped())break e;W0(i,l,u),s=d}}}if(Ec)throw t=Kh,Ec=!1,Kh=null,t}function Ct(t,e){var r=e[tp];r===void 0&&(r=e[tp]=new Set);var n=t+"__bubble";r.has(n)||(Cx(e,t,2,!1),r.add(n))}function Ud(t,e,r){var n=0;e&&(n|=4),Cx(r,t,n,e)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function rl(t){if(!t[Cu]){t[Cu]=!0,Pw.forEach(function(r){r!=="selectionchange"&&(RA.has(r)||Ud(r,!1,t),Ud(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cu]||(e[Cu]=!0,Ud("selectionchange",!1,e))}}function Cx(t,e,r,n){switch(ux(e)){case 1:var i=GI;break;case 4:i=HI;break;default:i=Dm}r=i.bind(null,e,r,t),i=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Bd(t,e,r,n,i){var s=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ss(l),a===null)return;if(d=a.tag,d===5||d===6){n=s=a;continue e}l=l.parentNode}}n=n.return}Xw(function(){var u=s,h=Am(r),w=[];e:{var g=_x.get(t);if(g!==void 0){var S=Pm,C=t;switch(t){case"keypress":if(ec(r)===0)break e;case"keydown":case"keyup":S=sA;break;case"focusin":C="focus",S=Dd;break;case"focusout":C="blur",S=Dd;break;case"beforeblur":case"afterblur":S=Dd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=N0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=WI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=lA;break;case wx:case xx:case Sx:S=XI;break;case Tx:S=cA;break;case"scroll":S=zI;break;case"wheel":S=dA;break;case"copy":case"cut":case"paste":S=JI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=F0}var R=(e&4)!==0,O=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var I=u,D;I!==null;){D=I;var M=D.stateNode;if(D.tag===5&&M!==null&&(D=M,T!==null&&(M=Xo(I,T),M!=null&&R.push(nl(I,M,D)))),O)break;I=I.return}0<R.length&&(g=new S(g,C,null,r,h),w.push({event:g,listeners:R}))}}if((e&7)===0){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&r!==Gh&&(C=r.relatedTarget||r.fromElement)&&(ss(C)||C[ii]))break e;if((S||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,S?(C=r.relatedTarget||r.toElement,S=u,C=C?ss(C):null,C!==null&&(O=Ps(C),C!==O||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=u),S!==C)){if(R=N0,M="onMouseLeave",T="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(R=F0,M="onPointerLeave",T="onPointerEnter",I="pointer"),O=S==null?g:na(S),D=C==null?g:na(C),g=new R(M,I+"leave",S,r,h),g.target=O,g.relatedTarget=D,M=null,ss(h)===u&&(R=new R(T,I+"enter",C,r,h),R.target=D,R.relatedTarget=O,M=R),O=M,S&&C)t:{for(R=S,T=C,I=0,D=R;D;D=qs(D))I++;for(D=0,M=T;M;M=qs(M))D++;for(;0<I-D;)R=qs(R),I--;for(;0<D-I;)T=qs(T),D--;for(;I--;){if(R===T||T!==null&&R===T.alternate)break t;R=qs(R),T=qs(T)}R=null}else R=null;S!==null&&q0(w,g,S,R,!1),C!==null&&O!==null&&q0(w,O,C,R,!0)}}e:{if(g=u?na(u):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var j=EA;else if($0(g))if(mx)j=TA;else{j=xA;var B=wA}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=SA);if(j&&(j=j(t,u))){px(w,j,r,h);break e}B&&B(t,g,u),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Uh(g,"number",g.value)}switch(B=u?na(u):window,t){case"focusin":($0(B)||B.contentEditable==="true")&&(ta=B,Xh=u,Po=null);break;case"focusout":Po=Xh=ta=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,z0(w,r,h);break;case"selectionchange":if(CA)break;case"keydown":case"keyup":z0(w,r,h)}var z;if(Mm)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else ea?dx(t,r)&&(K="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(fx&&r.locale!=="ko"&&(ea||K!=="onCompositionStart"?K==="onCompositionEnd"&&ea&&(z=cx()):(xi=h,Om="value"in xi?xi.value:xi.textContent,ea=!0)),B=Tc(u,K),0<B.length&&(K=new M0(K,t,null,r,h),w.push({event:K,listeners:B}),z?K.data=z:(z=hx(r),z!==null&&(K.data=z)))),(z=pA?mA(t,r):gA(t,r))&&(u=Tc(u,"onBeforeInput"),0<u.length&&(h=new M0("onBeforeInput","beforeinput",null,r,h),w.push({event:h,listeners:u}),h.data=z))}bx(w,e)})}function nl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Tc(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xo(t,r),s!=null&&n.unshift(nl(t,s,i)),s=Xo(t,e),s!=null&&n.push(nl(t,s,i))),t=t.return}return n}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q0(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var l=r,d=l.alternate,u=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&u!==null&&(l=u,i?(d=Xo(r,s),d!=null&&a.unshift(nl(r,d,l))):i||(d=Xo(r,s),d!=null&&a.push(nl(r,d,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var kA=/\r\n?/g,LA=/\u0000|\uFFFD/g;function Y0(t){return(typeof t=="string"?t:""+t).replace(kA,`
`).replace(LA,"")}function Iu(t,e,r){if(e=Y0(e),Y0(t)!==e&&r)throw Error(we(425))}function _c(){}var Jh=null;function Zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ep=typeof setTimeout=="function"?setTimeout:void 0,DA=typeof clearTimeout=="function"?clearTimeout:void 0,X0=typeof Promise=="function"?Promise:void 0,OA=typeof queueMicrotask=="function"?queueMicrotask:typeof X0!="undefined"?function(t){return X0.resolve(null).then(t).catch(PA)}:ep;function PA(t){setTimeout(function(){throw t})}function $d(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Zo(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Zo(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Ka,il="__reactProps$"+Ka,ii="__reactContainer$"+Ka,tp="__reactEvents$"+Ka,NA="__reactListeners$"+Ka,MA="__reactHandles$"+Ka;function ss(t){var e=t[Ln];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ii]||r[Ln]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Q0(t);t!==null;){if(r=t[Ln])return r;t=Q0(t)}return e}t=r,r=t.parentNode}return null}function Pl(t){return t=t[Ln]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function vf(t){return t[il]||null}var rp=[],ia=-1;function Gi(t){return{current:t}}function It(t){0>ia||(t.current=rp[ia],rp[ia]=null,ia--)}function Tt(t,e){ia++,rp[ia]=t.current,t.current=e}var Mi={},Tr=Gi(Mi),Hr=Gi(!1),ws=Mi;function ba(t,e){var r=t.type.contextTypes;if(!r)return Mi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zr(t){return t=t.childContextTypes,t!=null}function bc(){It(Hr),It(Tr)}function J0(t,e,r){if(Tr.current!==Mi)throw Error(we(168));Tt(Tr,e),Tt(Hr,r)}function Ix(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(we(108,wI(t)||"Unknown",i));return Mt({},r,n)}function Cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ws=Tr.current,Tt(Tr,t),Tt(Hr,Hr.current),!0}function Z0(t,e,r){var n=t.stateNode;if(!n)throw Error(we(169));r?(t=Ix(t,e,ws),n.__reactInternalMemoizedMergedChildContext=t,It(Hr),It(Tr),Tt(Tr,t)):It(Hr),Tt(Hr,r)}var Wn=null,yf=!1,Vd=!1;function Ax(t){Wn===null?Wn=[t]:Wn.push(t)}function FA(t){yf=!0,Ax(t)}function Hi(){if(!Vd&&Wn!==null){Vd=!0;var t=0,e=xt;try{var r=Wn;for(xt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Wn=null,yf=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),ex(Rm,Hi),i}finally{xt=e,Vd=!1}}return null}var UA=ui.ReactCurrentBatchConfig;function _n(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Ic=Gi(null),Ac=null,sa=null,Um=null;function Bm(){Um=sa=Ac=null}function $m(t){var e=Ic.current;It(Ic),t._currentValue=e}function np(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ma(t,e){Ac=t,Um=sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(en=!0),t.firstContext=null)}function vn(t){var e=t._currentValue;if(Um!==t)if(t={context:t,memoizedValue:e,next:null},sa===null){if(Ac===null)throw Error(we(308));sa=t,Ac.dependencies={lanes:0,firstContext:t}}else sa=sa.next=t;return e}var Dn=null,pi=!1;function Vm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ti(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e){var r=t.updateQueue;r!==null&&(r=r.shared,Kt!==null&&(t.mode&1)!==0&&(pt&2)===0?(t=r.interleaved,t===null?(e.next=e,Dn===null?Dn=[r]:Dn.push(r)):(e.next=t.next,t.next=e),r.interleaved=e):(t=r.pending,t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e))}function tc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,km(t,r)}}function ey(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Rc(t,e,r,n){var i=t.updateQueue;pi=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var d=l,u=d.next;d.next=null,a===null?s=u:a.next=u,a=d;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=d))}if(s!==null){var w=i.baseState;a=0,h=u=d=null,l=s;do{var g=l.lane,S=l.eventTime;if((n&g)===g){h!==null&&(h=h.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,R=l;switch(g=e,S=r,R.tag){case 1:if(C=R.payload,typeof C=="function"){w=C.call(S,w,g);break e}w=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,g=typeof C=="function"?C.call(S,w,g):C,g==null)break e;w=Mt({},w,g);break e;case 2:pi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=S,d=w):h=h.next=S,a|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(1);if(h===null&&(d=w),i.baseState=d,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ka|=a,t.lanes=a,t.memoizedState=w}}function ty(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(we(191,i));i.call(n)}}}var kx=new Ow.Component().refs;function ip(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Mt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ef={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Dr(),i=Li(t),s=ti(n,i);s.payload=e,r!=null&&(s.callback=r),Ri(t,s),e=gn(t,i,n),e!==null&&tc(e,t,i)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Dr(),i=Li(t),s=ti(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),Ri(t,s),e=gn(t,i,n),e!==null&&tc(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Dr(),n=Li(t),i=ti(r,n);i.tag=2,e!=null&&(i.callback=e),Ri(t,i),e=gn(t,n,r),e!==null&&tc(e,t,n)}};function ry(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!tl(r,n)||!tl(i,s):!0}function Lx(t,e,r){var n=!1,i=Mi,s=e.contextType;return typeof s=="object"&&s!==null?s=vn(s):(i=zr(e)?ws:Tr.current,n=e.contextTypes,s=(n=n!=null)?ba(t,i):Mi),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ef,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ny(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ef.enqueueReplaceState(e,e.state,null)}function sp(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=kx,Vm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vn(s):(s=zr(e)?ws:Tr.current,i.context=ba(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ip(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ef.enqueueReplaceState(i,i.state,null),Rc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}var aa=[],oa=0,kc=null,Lc=0,fn=[],dn=0,xs=null,Xn=1,Qn="";function rs(t,e){aa[oa++]=Lc,aa[oa++]=kc,kc=t,Lc=e}function Dx(t,e,r){fn[dn++]=Xn,fn[dn++]=Qn,fn[dn++]=xs,xs=t;var n=Xn;t=Qn;var i=32-Cn(n)-1;n&=~(1<<i),r+=1;var s=32-Cn(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Xn=1<<32-Cn(e)+i|r<<i|n,Qn=s+t}else Xn=1<<s|r<<i|n,Qn=t}function jm(t){t.return!==null&&(rs(t,1),Dx(t,1,0))}function Gm(t){for(;t===kc;)kc=aa[--oa],aa[oa]=null,Lc=aa[--oa],aa[oa]=null;for(;t===xs;)xs=fn[--dn],fn[dn]=null,Qn=fn[--dn],fn[dn]=null,Xn=fn[--dn],fn[dn]=null}var tn=null,Br=null,Lt=!1,bn=null;function Ox(t,e){var r=hn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function iy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Br=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Br=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xs!==null?{id:Xn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,tn=t,Br=null,!0):!1;default:return!1}}function ap(t){return(t.mode&1)!==0&&(t.flags&128)===0}function op(t){if(Lt){var e=Br;if(e){var r=e;if(!iy(t,e)){if(ap(t))throw Error(we(418));e=Yn(r.nextSibling);var n=tn;e&&iy(t,e)?Ox(n,r):(t.flags=t.flags&-4097|2,Lt=!1,tn=t)}}else{if(ap(t))throw Error(we(418));t.flags=t.flags&-4097|2,Lt=!1,tn=t}}}function sy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function vo(t){if(t!==tn)return!1;if(!Lt)return sy(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zh(t.type,t.memoizedProps)),e&&(e=Br)){if(ap(t)){for(t=Br;t;)t=Yn(t.nextSibling);throw Error(we(418))}for(;e;)Ox(t,e),e=Yn(e.nextSibling)}if(sy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Br=Yn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Br=null}}else Br=tn?Yn(t.stateNode.nextSibling):null;return!0}function Ca(){Br=tn=null,Lt=!1}function Hm(t){bn===null?bn=[t]:bn.push(t)}function yo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var n=r.stateNode}if(!n)throw Error(we(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;l===kx&&(l=i.refs={}),a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,t))}return t}function Au(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ay(t){var e=t._init;return e(t._payload)}function Px(t){function e(T,I){if(t){var D=T.deletions;D===null?(T.deletions=[I],T.flags|=16):D.push(I)}}function r(T,I){if(!t)return null;for(;I!==null;)e(T,I),I=I.sibling;return null}function n(T,I){for(T=new Map;I!==null;)I.key!==null?T.set(I.key,I):T.set(I.index,I),I=I.sibling;return T}function i(T,I){return T=Fi(T,I),T.index=0,T.sibling=null,T}function s(T,I,D){return T.index=D,t?(D=T.alternate,D!==null?(D=D.index,D<I?(T.flags|=2,I):D):(T.flags|=2,I)):(T.flags|=1048576,I)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,I,D,M){return I===null||I.tag!==6?(I=Wd(D,T.mode,M),I.return=T,I):(I=i(I,D),I.return=T,I)}function d(T,I,D,M){var j=D.type;return j===Zs?h(T,I,D.props.children,M,D.key):I!==null&&(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===hi&&ay(j)===I.type)?(M=i(I,D.props),M.ref=yo(T,I,D),M.return=T,M):(M=ac(D.type,D.key,D.props,null,T.mode,M),M.ref=yo(T,I,D),M.return=T,M)}function u(T,I,D,M){return I===null||I.tag!==4||I.stateNode.containerInfo!==D.containerInfo||I.stateNode.implementation!==D.implementation?(I=qd(D,T.mode,M),I.return=T,I):(I=i(I,D.children||[]),I.return=T,I)}function h(T,I,D,M,j){return I===null||I.tag!==7?(I=ms(D,T.mode,M,j),I.return=T,I):(I=i(I,D),I.return=T,I)}function w(T,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Wd(""+I,T.mode,D),I.return=T,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case yu:return D=ac(I.type,I.key,I.props,null,T.mode,D),D.ref=yo(T,null,I),D.return=T,D;case Js:return I=qd(I,T.mode,D),I.return=T,I;case hi:var M=I._init;return w(T,M(I._payload),D)}if(_o(I)||fo(I))return I=ms(I,T.mode,D,null),I.return=T,I;Au(T,I)}return null}function g(T,I,D,M){var j=I!==null?I.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return j!==null?null:l(T,I,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case yu:return D.key===j?d(T,I,D,M):null;case Js:return D.key===j?u(T,I,D,M):null;case hi:return j=D._init,g(T,I,j(D._payload),M)}if(_o(D)||fo(D))return j!==null?null:h(T,I,D,M,null);Au(T,D)}return null}function S(T,I,D,M,j){if(typeof M=="string"&&M!==""||typeof M=="number")return T=T.get(D)||null,l(I,T,""+M,j);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case yu:return T=T.get(M.key===null?D:M.key)||null,d(I,T,M,j);case Js:return T=T.get(M.key===null?D:M.key)||null,u(I,T,M,j);case hi:var B=M._init;return S(T,I,D,B(M._payload),j)}if(_o(M)||fo(M))return T=T.get(D)||null,h(I,T,M,j,null);Au(I,M)}return null}function C(T,I,D,M){for(var j=null,B=null,z=I,K=I=0,ee=null;z!==null&&K<D.length;K++){z.index>K?(ee=z,z=null):ee=z.sibling;var Z=g(T,z,D[K],M);if(Z===null){z===null&&(z=ee);break}t&&z&&Z.alternate===null&&e(T,z),I=s(Z,I,K),B===null?j=Z:B.sibling=Z,B=Z,z=ee}if(K===D.length)return r(T,z),Lt&&rs(T,K),j;if(z===null){for(;K<D.length;K++)z=w(T,D[K],M),z!==null&&(I=s(z,I,K),B===null?j=z:B.sibling=z,B=z);return Lt&&rs(T,K),j}for(z=n(T,z);K<D.length;K++)ee=S(z,T,K,D[K],M),ee!==null&&(t&&ee.alternate!==null&&z.delete(ee.key===null?K:ee.key),I=s(ee,I,K),B===null?j=ee:B.sibling=ee,B=ee);return t&&z.forEach(function(ce){return e(T,ce)}),Lt&&rs(T,K),j}function R(T,I,D,M){var j=fo(D);if(typeof j!="function")throw Error(we(150));if(D=j.call(D),D==null)throw Error(we(151));for(var B=j=null,z=I,K=I=0,ee=null,Z=D.next();z!==null&&!Z.done;K++,Z=D.next()){z.index>K?(ee=z,z=null):ee=z.sibling;var ce=g(T,z,Z.value,M);if(ce===null){z===null&&(z=ee);break}t&&z&&ce.alternate===null&&e(T,z),I=s(ce,I,K),B===null?j=ce:B.sibling=ce,B=ce,z=ee}if(Z.done)return r(T,z),Lt&&rs(T,K),j;if(z===null){for(;!Z.done;K++,Z=D.next())Z=w(T,Z.value,M),Z!==null&&(I=s(Z,I,K),B===null?j=Z:B.sibling=Z,B=Z);return Lt&&rs(T,K),j}for(z=n(T,z);!Z.done;K++,Z=D.next())Z=S(z,T,K,Z.value,M),Z!==null&&(t&&Z.alternate!==null&&z.delete(Z.key===null?K:Z.key),I=s(Z,I,K),B===null?j=Z:B.sibling=Z,B=Z);return t&&z.forEach(function(le){return e(T,le)}),Lt&&rs(T,K),j}function O(T,I,D,M){if(typeof D=="object"&&D!==null&&D.type===Zs&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case yu:e:{for(var j=D.key,B=I;B!==null;){if(B.key===j){if(j=D.type,j===Zs){if(B.tag===7){r(T,B.sibling),I=i(B,D.props.children),I.return=T,T=I;break e}}else if(B.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===hi&&ay(j)===B.type){r(T,B.sibling),I=i(B,D.props),I.ref=yo(T,B,D),I.return=T,T=I;break e}r(T,B);break}else e(T,B);B=B.sibling}D.type===Zs?(I=ms(D.props.children,T.mode,M,D.key),I.return=T,T=I):(M=ac(D.type,D.key,D.props,null,T.mode,M),M.ref=yo(T,I,D),M.return=T,T=M)}return a(T);case Js:e:{for(B=D.key;I!==null;){if(I.key===B)if(I.tag===4&&I.stateNode.containerInfo===D.containerInfo&&I.stateNode.implementation===D.implementation){r(T,I.sibling),I=i(I,D.children||[]),I.return=T,T=I;break e}else{r(T,I);break}else e(T,I);I=I.sibling}I=qd(D,T.mode,M),I.return=T,T=I}return a(T);case hi:return B=D._init,O(T,I,B(D._payload),M)}if(_o(D))return C(T,I,D,M);if(fo(D))return R(T,I,D,M);Au(T,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,I!==null&&I.tag===6?(r(T,I.sibling),I=i(I,D),I.return=T,T=I):(r(T,I),I=Wd(D,T.mode,M),I.return=T,T=I),a(T)):r(T,I)}return O}var Ia=Px(!0),Nx=Px(!1),Nl={},Nn=Gi(Nl),sl=Gi(Nl),al=Gi(Nl);function as(t){if(t===Nl)throw Error(we(174));return t}function zm(t,e){switch(Tt(al,e),Tt(sl,t),Tt(Nn,Nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$h(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$h(e,t)}It(Nn),Tt(Nn,e)}function Aa(){It(Nn),It(sl),It(al)}function Mx(t){as(al.current);var e=as(Nn.current),r=$h(e,t.type);e!==r&&(Tt(sl,t),Tt(Nn,r))}function Km(t){sl.current===t&&(It(Nn),It(sl))}var Nt=Gi(0);function Dc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jd=[];function Wm(){for(var t=0;t<jd.length;t++)jd[t]._workInProgressVersionPrimary=null;jd.length=0}var rc=ui.ReactCurrentDispatcher,pn=ui.ReactCurrentBatchConfig,Ra=0,Bt=null,yr=null,Zt=null,Oc=!1,No=!1,ol=0,BA=0;function gr(){throw Error(we(321))}function qm(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Un(t[r],e[r]))return!1;return!0}function Ym(t,e,r,n,i,s){if(Ra=s,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rc.current=t===null||t.memoizedState===null?GA:HA,t=r(n,i),No){s=0;do{if(No=!1,ol=0,25<=s)throw Error(we(301));s+=1,Zt=yr=null,e.updateQueue=null,rc.current=zA,t=r(n,i)}while(No)}if(rc.current=Pc,e=yr!==null&&yr.next!==null,Ra=0,Zt=yr=Bt=null,Oc=!1,e)throw Error(we(300));return t}function Xm(){var t=ol!==0;return ol=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Bt.memoizedState=Zt=t:Zt=Zt.next=t,Zt}function jn(){if(yr===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=yr.next;var e=Zt===null?Bt.memoizedState:Zt.next;if(e!==null)Zt=e,yr=t;else{if(t===null)throw Error(we(310));yr=t,t={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},Zt===null?Bt.memoizedState=Zt=t:Zt=Zt.next=t}return Zt}function hs(t,e){return typeof e=="function"?e(t):e}function Ru(t){var e=jn(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=t;var n=yr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var l=a=null,d=null,u=s;do{var h=u.lane;if((Ra&h)===h)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var w={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=w,a=n):d=d.next=w,Bt.lanes|=h,ka|=h}u=u.next}while(u!==null&&u!==s);d===null?a=n:d.next=l,Un(n,e.memoizedState)||(en=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=d,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Bt.lanes|=s,ka|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ku(t){var e=jn(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Un(s,e.memoizedState)||(en=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Fx(){}function Ux(t,e){var r=Bt,n=jn(),i=e(),s=!Un(n.memoizedState,i);if(s&&(n.memoizedState=i,en=!0),n=n.queue,ul(Vx.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Zt!==null&&Zt.memoizedState.tag&1){if(r.flags|=2048,ll(9,$x.bind(null,r,n,i,e),void 0,null),Kt===null)throw Error(we(349));(Ra&30)!==0||Bx(r,e,i)}return i}function Bx(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function $x(t,e,r,n){e.value=r,e.getSnapshot=n,jx(e)&&gn(t,1,-1)}function Vx(t,e,r){return r(function(){jx(e)&&gn(t,1,-1)})}function jx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Un(t,r)}catch{return!0}}function Gd(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:t},e.queue=t,t=t.dispatch=jA.bind(null,Bt,t),[e.memoizedState,t]}function ll(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Gx(){return jn().memoizedState}function nc(t,e,r,n){var i=Kn();Bt.flags|=t,i.memoizedState=ll(1|e,r,void 0,n===void 0?null:n)}function wf(t,e,r,n){var i=jn();n=n===void 0?null:n;var s=void 0;if(yr!==null){var a=yr.memoizedState;if(s=a.destroy,n!==null&&qm(n,a.deps)){i.memoizedState=ll(e,r,s,n);return}}Bt.flags|=t,i.memoizedState=ll(1|e,r,s,n)}function Hd(t,e){return nc(8390656,8,t,e)}function ul(t,e){return wf(2048,8,t,e)}function Hx(t,e){return wf(4,2,t,e)}function zx(t,e){return wf(4,4,t,e)}function Kx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wx(t,e,r){return r=r!=null?r.concat([t]):null,wf(4,4,Kx.bind(null,e,t),r)}function Qm(){}function qx(t,e){var r=jn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&qm(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Yx(t,e){var r=jn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&qm(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $A(t,e){var r=xt;xt=r!==0&&4>r?r:4,t(!0);var n=pn.transition;pn.transition={};try{t(!1),e()}finally{xt=r,pn.transition=n}}function Xx(){return jn().memoizedState}function VA(t,e,r){var n=Li(t);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qx(t)?Jx(e,r):(Zx(t,e,r),r=Dr(),t=gn(t,n,r),t!==null&&eS(t,e,n))}function jA(t,e,r){var n=Li(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qx(t))Jx(e,i);else{Zx(t,e,i);var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(i.hasEagerState=!0,i.eagerState=l,Un(l,a))return}catch{}finally{}r=Dr(),t=gn(t,n,r),t!==null&&eS(t,e,n)}}function Qx(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function Jx(t,e){No=Oc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Zx(t,e,r){Kt!==null&&(t.mode&1)!==0&&(pt&2)===0?(t=e.interleaved,t===null?(r.next=r,Dn===null?Dn=[e]:Dn.push(e)):(r.next=t.next,t.next=r),e.interleaved=r):(t=e.pending,t===null?r.next=r:(r.next=t.next,t.next=r),e.pending=r)}function eS(t,e,r){if((r&4194240)!==0){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,km(t,r)}}var Pc={readContext:vn,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},GA={readContext:vn,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:Hd,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,nc(4194308,4,Kx.bind(null,e,t),r)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var r=Kn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Kn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=VA.bind(null,Bt,t),[n.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:Gd,useDebugValue:Qm,useDeferredValue:function(t){var e=Gd(t),r=e[0],n=e[1];return Hd(function(){var i=pn.transition;pn.transition={};try{n(t)}finally{pn.transition=i}},[t]),r},useTransition:function(){var t=Gd(!1),e=t[0];return t=$A.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Bt,i=Kn();if(Lt){if(r===void 0)throw Error(we(407));r=r()}else{if(r=e(),Kt===null)throw Error(we(349));(Ra&30)!==0||Bx(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Hd(Vx.bind(null,n,s,t),[t]),n.flags|=2048,ll(9,$x.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Kn(),e=Kt.identifierPrefix;if(Lt){var r=Qn,n=Xn;r=(n&~(1<<32-Cn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ol++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=BA++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HA={readContext:vn,useCallback:qx,useContext:vn,useEffect:ul,useImperativeHandle:Wx,useInsertionEffect:Hx,useLayoutEffect:zx,useMemo:Yx,useReducer:Ru,useRef:Gx,useState:function(){return Ru(hs)},useDebugValue:Qm,useDeferredValue:function(t){var e=Ru(hs),r=e[0],n=e[1];return ul(function(){var i=pn.transition;pn.transition={};try{n(t)}finally{pn.transition=i}},[t]),r},useTransition:function(){var t=Ru(hs)[0],e=jn().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Ux,useId:Xx,unstable_isNewReconciler:!1},zA={readContext:vn,useCallback:qx,useContext:vn,useEffect:ul,useImperativeHandle:Wx,useInsertionEffect:Hx,useLayoutEffect:zx,useMemo:Yx,useReducer:ku,useRef:Gx,useState:function(){return ku(hs)},useDebugValue:Qm,useDeferredValue:function(t){var e=ku(hs),r=e[0],n=e[1];return ul(function(){var i=pn.transition;pn.transition={};try{n(t)}finally{pn.transition=i}},[t]),r},useTransition:function(){var t=ku(hs)[0],e=jn().memoizedState;return[t,e]},useMutableSource:Fx,useSyncExternalStore:Ux,useId:Xx,unstable_isNewReconciler:!1};function Jm(t,e){try{var r="",n=e;do r+=EI(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function lp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var KA=typeof WeakMap=="function"?WeakMap:Map;function tS(t,e,r){r=ti(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Fc||(Fc=!0,vp=n),lp(t,e)},r}function rS(t,e,r){r=ti(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){lp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){lp(t,e),typeof n!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function oy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new KA;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=aR.bind(null,t,e,r),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,r,n,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ti(-1,1),e.tag=2,Ri(r,e))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var nS,up,iS,sS;nS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};up=function(){};iS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,as(Nn.current);var s=null;switch(r){case"input":i=Mh(t,i),n=Mh(t,n),s=[];break;case"select":i=Mt({},i,{value:void 0}),n=Mt({},n,{value:void 0}),s=[];break;case"textarea":i=Bh(t,i),n=Bh(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_c)}Vh(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var d=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in d)d.hasOwnProperty(a)&&l[a]!==d[a]&&(r||(r={}),r[a]=d[a])}else r||(s||(s=[]),s.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(s=s||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qo.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Ct("scroll",t),s||l===d||(s=[])):(s=s||[]).push(u,d))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};sS=function(t,e,r,n){r!==n&&(e.flags|=4)};function Eo(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function WA(t,e,r){var n=e.pendingProps;switch(Gm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(e),null;case 1:return zr(e.type)&&bc(),vr(e),null;case 3:return n=e.stateNode,Aa(),It(Hr),It(Tr),Wm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,bn!==null&&(wp(bn),bn=null))),up(t,e),vr(e),null;case 5:Km(e);var i=as(al.current);if(r=e.type,t!==null&&e.stateNode!=null)iS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(we(166));return vr(e),null}if(t=as(Nn.current),vo(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ln]=e,n[il]=s,t=(e.mode&1)!==0,r){case"dialog":Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":case"embed":Ct("load",n);break;case"video":case"audio":for(i=0;i<Co.length;i++)Ct(Co[i],n);break;case"source":Ct("error",n);break;case"img":case"image":case"link":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"input":b0(n,s),Ct("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",n);break;case"textarea":I0(n,s),Ct("invalid",n)}Vh(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?n.textContent!==l&&(Iu(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(Iu(n.textContent,l,t),i=["children",""+l]):qo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ct("scroll",n)}switch(r){case"input":Eu(n),C0(n,s,!0);break;case"textarea":Eu(n),A0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=_c)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jw(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Ln]=e,t[il]=n,nS(t,e,!1,!1),e.stateNode=t;e:{switch(a=jh(r,n),r){case"dialog":Ct("cancel",t),Ct("close",t),i=n;break;case"iframe":case"object":case"embed":Ct("load",t),i=n;break;case"video":case"audio":for(i=0;i<Co.length;i++)Ct(Co[i],t);i=n;break;case"source":Ct("error",t),i=n;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=n;break;case"details":Ct("toggle",t),i=n;break;case"input":b0(t,n),i=Mh(t,n),Ct("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Mt({},n,{value:void 0}),Ct("invalid",t);break;case"textarea":I0(t,n),i=Bh(t,n),Ct("invalid",t);break;default:i=n}Vh(r,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];s==="style"?zw(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Gw(t,d)):s==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Yo(t,d):typeof d=="number"&&Yo(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qo.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Ct("scroll",t):d!=null&&_m(t,s,d,a))}switch(r){case"input":Eu(t),C0(t,n,!1);break;case"textarea":Eu(t),A0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ni(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?fa(t,!!n.multiple,s,!1):n.defaultValue!=null&&fa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_c)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vr(e),null;case 6:if(t&&e.stateNode!=null)sS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(we(166));if(r=as(al.current),as(Nn.current),vo(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ln]=e,(s=n.nodeValue!==r)&&(t=tn,t!==null))switch(a=(t.mode&1)!==0,t.tag){case 3:Iu(n.nodeValue,r,a);break;case 5:t.memoizedProps[void 0]!==!0&&Iu(n.nodeValue,r,a)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ln]=e,e.stateNode=n}return vr(e),null;case 13:if(It(Nt),n=e.memoizedState,Lt&&Br!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(n=Br;n;)n=Yn(n.nextSibling);return Ca(),e.flags|=98560,e}if(n!==null&&n.dehydrated!==null){if(n=vo(e),t===null){if(!n)throw Error(we(318));if(n=e.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(we(317));n[Ln]=e}else Ca(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return vr(e),null}return bn!==null&&(wp(bn),bn=null),(e.flags&128)!==0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?vo(e):r=t.memoizedState!==null,n&&!r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Nt.current&1)!==0?Yt===0&&(Yt=3):ig())),e.updateQueue!==null&&(e.flags|=4),vr(e),null);case 4:return Aa(),up(t,e),t===null&&rl(e.stateNode.containerInfo),vr(e),null;case 10:return $m(e.type._context),vr(e),null;case 17:return zr(e.type)&&bc(),vr(e),null;case 19:if(It(Nt),s=e.memoizedState,s===null)return vr(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Eo(s,!1);else{if(Yt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=Dc(t),a!==null){for(e.flags|=128,Eo(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Tt(Nt,Nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&$t()>La&&(e.flags|=128,n=!0,Eo(s,!1),e.lanes=4194304)}else{if(!n)if(t=Dc(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Lt)return vr(e),null}else 2*$t()-s.renderingStartTime>La&&r!==1073741824&&(e.flags|=128,n=!0,Eo(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,r=Nt.current,Tt(Nt,n?r&1|2:r&1),e):(vr(e),null);case 22:case 23:return ng(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(Qr&1073741824)!==0&&(vr(e),e.subtreeFlags&6&&(e.flags|=8192)):vr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}var qA=ui.ReactCurrentOwner,en=!1;function Cr(t,e,r,n){e.child=t===null?Nx(e,null,r,n):Ia(e,t.child,r,n)}function cy(t,e,r,n,i){r=r.render;var s=e.ref;return ma(e,i),n=Ym(t,e,r,n,s,i),r=Xm(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,si(t,e,i)):(Lt&&r&&jm(e),e.flags|=1,Cr(t,e,n,i),e.child)}function fy(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!sg(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,aS(t,e,s,n,i)):(t=ac(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:tl,r(a,n)&&t.ref===e.ref)return si(t,e,i)}return e.flags|=1,t=Fi(s,n),t.ref=e.ref,t.return=e,e.child=t}function aS(t,e,r,n,i){if(t!==null&&tl(t.memoizedProps,n)&&t.ref===e.ref)if(en=!1,(t.lanes&i)!==0)(t.flags&131072)!==0&&(en=!0);else return e.lanes=t.lanes,si(t,e,i);return cp(t,e,r,n,i)}function oS(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null},Tt(la,Qr),Qr|=r;else if((r&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null},n=s!==null?s.baseLanes:r,Tt(la,Qr),Qr|=n;else return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,Tt(la,Qr),Qr|=t,null;else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Tt(la,Qr),Qr|=n;return Cr(t,e,i,r),e.child}function lS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function cp(t,e,r,n,i){var s=zr(r)?ws:Tr.current;return s=ba(e,s),ma(e,i),r=Ym(t,e,r,n,s,i),n=Xm(),t!==null&&!en?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,si(t,e,i)):(Lt&&n&&jm(e),e.flags|=1,Cr(t,e,r,i),e.child)}function dy(t,e,r,n,i){if(zr(r)){var s=!0;Cc(e)}else s=!1;if(ma(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),Lx(e,r,n),sp(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var d=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=vn(u):(u=zr(r)?ws:Tr.current,u=ba(e,u));var h=r.getDerivedStateFromProps,w=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";w||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||d!==u)&&ny(e,a,n,u),pi=!1;var g=e.memoizedState;a.state=g,Rc(e,n,a,i),d=e.memoizedState,l!==n||g!==d||Hr.current||pi?(typeof h=="function"&&(ip(e,r,h,n),d=e.memoizedState),(l=pi||ry(e,r,l,n,g,d,u))?(w||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=d),a.props=n,a.state=d,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Rx(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:_n(e.type,l),a.props=u,w=e.pendingProps,g=a.context,d=r.contextType,typeof d=="object"&&d!==null?d=vn(d):(d=zr(r)?ws:Tr.current,d=ba(e,d));var S=r.getDerivedStateFromProps;(h=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==w||g!==d)&&ny(e,a,n,d),pi=!1,g=e.memoizedState,a.state=g,Rc(e,n,a,i);var C=e.memoizedState;l!==w||g!==C||Hr.current||pi?(typeof S=="function"&&(ip(e,r,S,n),C=e.memoizedState),(u=pi||ry(e,r,u,n,g,C,d)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,C,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,C,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=C),a.props=n,a.state=C,a.context=d,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return fp(t,e,r,n,s,i)}function fp(t,e,r,n,i,s){lS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Z0(e,r,!1),si(t,e,s);n=e.stateNode,qA.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ia(e,t.child,null,s),e.child=Ia(e,null,l,s)):Cr(t,e,l,s),e.memoizedState=n.state,i&&Z0(e,r,!0),e.child}function uS(t){var e=t.stateNode;e.pendingContext?J0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J0(t,e.context,!1),zm(t,e.containerInfo)}function hy(t,e,r,n,i){return Ca(),Hm(i),e.flags|=256,Cr(t,e,r,n),e.child}var Lu={dehydrated:null,treeContext:null,retryLane:0};function Du(t){return{baseLanes:t,cachePool:null}}function cS(t,e,r){var n=e.pendingProps,i=Nt.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Tt(Nt,i&1),t===null)return op(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=i):s=$c(i,n,0,null),t=ms(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Du(r),e.memoizedState=Lu,t):dp(e,i));if(i=t.memoizedState,i!==null){if(l=i.dehydrated,l!==null){if(a)return e.flags&256?(e.flags&=-257,Ou(t,e,r,Error(we(422)))):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=$c({mode:"visible",children:n.children},i,0,null),s=ms(s,i,r,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,(e.mode&1)!==0&&Ia(e,t.child,null,r),e.child.memoizedState=Du(r),e.memoizedState=Lu,s);if((e.mode&1)===0)e=Ou(t,e,r,null);else if(l.data==="$!")e=Ou(t,e,r,Error(we(419)));else if(n=(r&t.childLanes)!==0,en||n){if(n=Kt,n!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}n=(s&(n.suspendedLanes|r))!==0?0:s,n!==0&&n!==i.retryLane&&(i.retryLane=n,gn(t,n,-1))}ig(),e=Ou(t,e,r,Error(we(421)))}else l.data==="$?"?(e.flags|=128,e.child=t.child,e=oR.bind(null,t),l._reactRetry=e,e=null):(r=i.treeContext,Br=Yn(l.nextSibling),tn=e,Lt=!0,bn=null,r!==null&&(fn[dn++]=Xn,fn[dn++]=Qn,fn[dn++]=xs,Xn=r.id,Qn=r.overflow,xs=e),e=dp(e,e.pendingProps.children),e.flags|=4096);return e}return s?(n=my(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?Du(r):{baseLanes:i.baseLanes|r,cachePool:null},s.childLanes=t.childLanes&~r,e.memoizedState=Lu,n):(r=py(t,e,n.children,r),e.memoizedState=null,r)}return s?(n=my(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?Du(r):{baseLanes:i.baseLanes|r,cachePool:null},s.childLanes=t.childLanes&~r,e.memoizedState=Lu,n):(r=py(t,e,n.children,r),e.memoizedState=null,r)}function dp(t,e){return e=$c({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function py(t,e,r,n){var i=t.child;return t=i.sibling,r=Fi(i,{mode:"visible",children:r}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r}function my(t,e,r,n,i){var s=e.mode;t=t.child;var a=t.sibling,l={mode:"hidden",children:r};return(s&1)===0&&e.child!==t?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fi(t,l),r.subtreeFlags=t.subtreeFlags&14680064),a!==null?n=Fi(a,n):(n=ms(n,s,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function Ou(t,e,r,n){return n!==null&&Hm(n),Ia(e,t.child,null,r),t=dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),np(t.return,e,r)}function zd(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function fS(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Cr(t,e,n.children,r),n=Nt.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,r,e);else if(t.tag===19)gy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Tt(Nt,n),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Dc(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),zd(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dc(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}zd(e,!0,r,null,s);break;case"together":zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function si(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ka|=e.lanes,(r&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,r=Fi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function YA(t,e,r){switch(e.tag){case 3:uS(e),Ca();break;case 5:Mx(e);break;case 1:zr(e.type)&&Cc(e);break;case 4:zm(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Tt(Ic,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Tt(Nt,Nt.current&1),e.flags|=128,null):(r&e.child.childLanes)!==0?cS(t,e,r):(Tt(Nt,Nt.current&1),t=si(t,e,r),t!==null?t.sibling:null);Tt(Nt,Nt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,(t.flags&128)!==0){if(n)return fS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Nt,Nt.current),n)break;return null;case 22:case 23:return e.lanes=0,oS(t,e,r)}return si(t,e,r)}function XA(t,e){switch(Gm(e),e.tag){case 1:return zr(e.type)&&bc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Aa(),It(Hr),It(Tr),Wm(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Km(e),null;case 13:if(It(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));Ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Nt),null;case 4:return Aa(),null;case 10:return $m(e.type._context),null;case 22:case 23:return ng(),null;case 24:return null;default:return null}}var Pu=!1,os=!1,QA=typeof WeakSet=="function"?WeakSet:Set,ke=null;function Nc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$r(t,e,n)}else r.current=null}function hp(t,e,r){try{r()}catch(n){$r(t,e,n)}}var vy=!1;function JA(t,e){if(t=yx(),Fm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,d=-1,u=0,h=0,w=t,g=null;t:for(;;){for(var S;w!==r||i!==0&&w.nodeType!==3||(l=a+i),w!==s||n!==0&&w.nodeType!==3||(d=a+n),w.nodeType===3&&(a+=w.nodeValue.length),(S=w.firstChild)!==null;)g=w,w=S;for(;;){if(w===t)break t;if(g===r&&++u===i&&(l=a),g===s&&++h===n&&(d=a),(S=w.nextSibling)!==null)break;w=g,g=w.parentNode}w=S}r=l===-1||d===-1?null:{start:l,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jh={focusedElem:t,selectionRange:r},ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var C=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,O=C.memoizedState,T=e.stateNode,I=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:_n(e.type,R),O);T.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var D=e.stateNode.containerInfo;if(D.nodeType===1)D.textContent="";else if(D.nodeType===9){var M=D.body;M!=null&&(M.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(j){$r(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return C=vy,vy=!1,C}function cl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&hp(e,r,s)}i=i.next}while(i!==n)}}function xf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function pp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function yy(t,e,r){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(hf,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var i=n,s=i.destroy;i=i.tag,s!==void 0&&((i&2)!==0||(i&4)!==0)&&hp(e,r,s),n=n.next}while(n!==t)}break;case 1:if(Nc(e,r),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){$r(e,r,a)}break;case 5:Nc(e,r);break;case 4:pS(t,e,r)}}function dS(t){var e=t.alternate;e!==null&&(t.alternate=null,dS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[il],delete e[tp],delete e[NA],delete e[MA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hS(t){return t.tag===5||t.tag===3||t.tag===4}function Ey(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wy(t){e:{for(var e=t.return;e!==null;){if(hS(e))break e;e=e.return}throw Error(we(160))}var r=e;switch(r.tag){case 5:e=r.stateNode,r.flags&32&&(Yo(e,""),r.flags&=-33),r=Ey(t),gp(t,r,e);break;case 3:case 4:e=r.stateNode.containerInfo,r=Ey(t),mp(t,r,e);break;default:throw Error(we(161))}}function mp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_c));else if(n!==4&&(t=t.child,t!==null))for(mp(t,e,r),t=t.sibling;t!==null;)mp(t,e,r),t=t.sibling}function gp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(gp(t,e,r),t=t.sibling;t!==null;)gp(t,e,r),t=t.sibling}function pS(t,e,r){for(var n=e,i=!1,s,a;;){if(!i){i=n.return;e:for(;;){if(i===null)throw Error(we(160));switch(s=i.stateNode,i.tag){case 5:a=!1;break e;case 3:s=s.containerInfo,a=!0;break e;case 4:s=s.containerInfo,a=!0;break e}i=i.return}i=!0}if(n.tag===5||n.tag===6){e:for(var l=t,d=n,u=r,h=d;;)if(yy(l,h,u),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a?(l=s,d=n.stateNode,l.nodeType===8?l.parentNode.removeChild(d):l.removeChild(d)):s.removeChild(n.stateNode)}else if(n.tag===18)a?(l=s,d=n.stateNode,l.nodeType===8?$d(l.parentNode,d):l.nodeType===1&&$d(l,d),Zo(l)):$d(s,n.stateNode);else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(yy(t,n,r),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(i=!1)}n.sibling.return=n.return,n=n.sibling}}function Kd(t,e){switch(e.tag){case 0:case 11:case 14:case 15:cl(3,e,e.return),xf(3,e),cl(5,e,e.return);return;case 1:return;case 5:var r=e.stateNode;if(r!=null){var n=e.memoizedProps,i=t!==null?t.memoizedProps:n;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(t==="input"&&n.type==="radio"&&n.name!=null&&$w(r,n),jh(t,i),e=jh(t,n),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];a==="style"?zw(r,l):a==="dangerouslySetInnerHTML"?Gw(r,l):a==="children"?Yo(r,l):_m(r,a,l,e)}switch(t){case"input":Fh(r,n);break;case"textarea":Vw(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,s=n.value,s!=null?fa(r,!!n.multiple,s,!1):t!==!!n.multiple&&(n.defaultValue!=null?fa(r,!!n.multiple,n.defaultValue,!0):fa(r,!!n.multiple,n.multiple?[]:"",!1))}r[il]=n}}return;case 6:if(e.stateNode===null)throw Error(we(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t!==null&&t.memoizedState.isDehydrated&&Zo(e.stateNode.containerInfo);return;case 12:return;case 13:xy(e);return;case 19:xy(e);return;case 17:return}throw Error(we(163))}function xy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new QA),e.forEach(function(n){var i=lR.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ZA(t,e){for(ke=e;ke!==null;){e=ke;var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{pS(t,i,e);var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(K){$r(i,e,K)}}if(r=e.child,(e.subtreeFlags&12854)!==0&&r!==null)r.return=e,ke=r;else for(;ke!==null;){e=ke;try{var a=e.flags;if(a&32&&Yo(e.stateNode,""),a&512){var l=e.alternate;if(l!==null){var d=l.ref;d!==null&&(typeof d=="function"?d(null):d.current=null)}}if(a&8192)switch(e.tag){case 13:if(e.memoizedState!==null){var u=e.alternate;(u===null||u.memoizedState===null)&&(tg=$t())}break;case 22:var h=e.memoizedState!==null,w=e.alternate,g=w!==null&&w.memoizedState!==null;r=e;e:{n=r,i=h;for(var S=null,C=n;;){if(C.tag===5){if(S===null){S=C;var R=C.stateNode;if(i){var O=R.style;typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"}else{var T=C.stateNode,I=C.memoizedProps.style,D=I!=null&&I.hasOwnProperty("display")?I.display:null;T.style.display=Hw("display",D)}}}else if(C.tag===6)S===null&&(C.stateNode.nodeValue=i?"":C.memoizedProps);else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===n)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===n)break;for(;C.sibling===null;){if(C.return===null||C.return===n)break e;S===C&&(S=null),C=C.return}S===C&&(S=null),C.sibling.return=C.return,C=C.sibling}}if(h&&!g&&(r.mode&1)!==0){ke=r;for(var M=r.child;M!==null;){for(r=ke=M;ke!==null;){n=ke;var j=n.child;switch(n.tag){case 0:case 11:case 14:case 15:cl(4,n,n.return);break;case 1:Nc(n,n.return);var B=n.stateNode;if(typeof B.componentWillUnmount=="function"){var z=n.return;try{B.props=n.memoizedProps,B.state=n.memoizedState,B.componentWillUnmount()}catch(K){$r(n,z,K)}}break;case 5:Nc(n,n.return);break;case 22:if(n.memoizedState!==null){Ty(r);continue}}j!==null?(j.return=n,ke=j):Ty(r)}M=M.sibling}}}switch(a&4102){case 2:wy(e),e.flags&=-3;break;case 6:wy(e),e.flags&=-3,Kd(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,Kd(e.alternate,e);break;case 4:Kd(e.alternate,e)}}catch(K){$r(e,e.return,K)}if(r=e.sibling,r!==null){r.return=e.return,ke=r;break}ke=e.return}}}function eR(t,e,r){ke=t,mS(t)}function mS(t,e,r){for(var n=(t.mode&1)!==0;ke!==null;){var i=ke,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Pu;if(!a){var l=i.alternate,d=l!==null&&l.memoizedState!==null||os;l=Pu;var u=os;if(Pu=a,(os=d)&&!u)for(ke=i;ke!==null;)a=ke,d=a.child,a.tag===22&&a.memoizedState!==null?_y(i):d!==null?(d.return=a,ke=d):_y(i);for(;s!==null;)ke=s,mS(s),s=s.sibling;ke=i,Pu=l,os=u}Sy(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,ke=s):Sy(t)}}function Sy(t){for(;ke!==null;){var e=ke;if((e.flags&8772)!==0){var r=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:os||xf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!os)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:_n(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ty(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ty(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var w=h.dehydrated;w!==null&&Zo(w)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(we(163))}os||e.flags&512&&pp(e)}catch(g){$r(e,e.return,g)}}if(e===t){ke=null;break}if(r=e.sibling,r!==null){r.return=e.return,ke=r;break}ke=e.return}}function Ty(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ke=r;break}ke=e.return}}function _y(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{xf(4,e)}catch(d){$r(e,r,d)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(d){$r(e,i,d)}}var s=e.return;try{pp(e)}catch(d){$r(e,s,d)}break;case 5:var a=e.return;try{pp(e)}catch(d){$r(e,a,d)}}}catch(d){$r(e,e.return,d)}if(e===t){ke=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ke=l;break}ke=e.return}}var tR=Math.ceil,Mc=ui.ReactCurrentDispatcher,Zm=ui.ReactCurrentOwner,mn=ui.ReactCurrentBatchConfig,pt=0,Kt=null,zt=null,ur=0,Qr=0,la=Gi(0),Yt=0,fl=null,ka=0,Sf=0,eg=0,Mo=null,Ur=null,tg=0,La=1/0,Fc=!1,vp=null,ki=null,Nu=!1,Si=null,Uc=0,Fo=0,yp=null,ic=-1,sc=0;function Dr(){return(pt&6)!==0?$t():ic!==-1?ic:ic=$t()}function Li(t){return(t.mode&1)===0?1:(pt&2)!==0&&ur!==0?ur&-ur:UA.transition!==null?(sc===0&&(t=xu,xu<<=1,(xu&4194240)===0&&(xu=64),sc=t),sc):(t=xt,t!==0||(t=window.event,t=t===void 0?16:ux(t.type)),t)}function gn(t,e,r){if(50<Fo)throw Fo=0,yp=null,Error(we(185));var n=Tf(t,e);return n===null?null:(Dl(n,e,r),((pt&2)===0||n!==Kt)&&(n===Kt&&((pt&2)===0&&(Sf|=e),Yt===4&&vi(n,ur)),Kr(n,r),e===1&&pt===0&&(t.mode&1)===0&&(La=$t()+500,yf&&Hi())),n)}function Tf(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Kr(t,e){var r=t.callbackNode;UI(t,e);var n=xc(t,t===Kt?ur:0);if(n===0)r!==null&&L0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&L0(r),e===1)t.tag===0?FA(by.bind(null,t)):Ax(by.bind(null,t)),OA(function(){pt===0&&Hi()}),r=null;else{switch(nx(n)){case 1:r=Rm;break;case 4:r=tx;break;case 16:r=wc;break;case 536870912:r=rx;break;default:r=wc}r=TS(r,gS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function gS(t,e){if(ic=-1,sc=0,(pt&6)!==0)throw Error(we(327));var r=t.callbackNode;if(ga()&&t.callbackNode!==r)return null;var n=xc(t,t===Kt?ur:0);if(n===0)return null;if((n&30)!==0||(n&t.expiredLanes)!==0||e)e=Bc(t,n);else{e=n;var i=pt;pt|=2;var s=yS();(Kt!==t||ur!==e)&&(La=$t()+500,ps(t,e));do try{iR();break}catch(l){vS(t,l)}while(1);Bm(),Mc.current=s,pt=i,zt!==null?e=0:(Kt=null,ur=0,e=Yt)}if(e!==0){if(e===2&&(i=Wh(t),i!==0&&(n=i,e=Ep(t,i))),e===1)throw r=fl,ps(t,0),vi(t,n),Kr(t,$t()),r;if(e===6)vi(t,n);else{if(i=t.current.alternate,(n&30)===0&&!rR(i)&&(e=Bc(t,n),e===2&&(s=Wh(t),s!==0&&(n=s,e=Ep(t,s))),e===1))throw r=fl,ps(t,0),vi(t,n),Kr(t,$t()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(we(345));case 2:ns(t,Ur);break;case 3:if(vi(t,n),(n&130023424)===n&&(e=tg+500-$t(),10<e)){if(xc(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Dr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ep(ns.bind(null,t,Ur),e);break}ns(t,Ur);break;case 4:if(vi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Cn(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=$t()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tR(n/1960))-n,10<n){t.timeoutHandle=ep(ns.bind(null,t,Ur),n);break}ns(t,Ur);break;case 5:ns(t,Ur);break;default:throw Error(we(329))}}}return Kr(t,$t()),t.callbackNode===r?gS.bind(null,t):null}function Ep(t,e){var r=Mo;return t.current.memoizedState.isDehydrated&&(ps(t,e).flags|=256),t=Bc(t,e),t!==2&&(e=Ur,Ur=r,e!==null&&wp(e)),t}function wp(t){Ur===null?Ur=t:Ur.push.apply(Ur,t)}function rR(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Un(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~eg,e&=~Sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Cn(e),n=1<<r;t[r]=-1,e&=~n}}function by(t){if((pt&6)!==0)throw Error(we(327));ga();var e=xc(t,0);if((e&1)===0)return Kr(t,$t()),null;var r=Bc(t,e);if(t.tag!==0&&r===2){var n=Wh(t);n!==0&&(e=n,r=Ep(t,n))}if(r===1)throw r=fl,ps(t,0),vi(t,e),Kr(t,$t()),r;if(r===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ns(t,Ur),Kr(t,$t()),null}function rg(t,e){var r=pt;pt|=1;try{return t(e)}finally{pt=r,pt===0&&(La=$t()+500,yf&&Hi())}}function Ss(t){Si!==null&&Si.tag===0&&(pt&6)===0&&ga();var e=pt;pt|=1;var r=mn.transition,n=xt;try{if(mn.transition=null,xt=1,t)return t()}finally{xt=n,mn.transition=r,pt=e,(pt&6)===0&&Hi()}}function ng(){Qr=la.current,It(la)}function ps(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,DA(r)),zt!==null)for(r=zt.return;r!==null;){var n=r;switch(Gm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bc();break;case 3:Aa(),It(Hr),It(Tr),Wm();break;case 5:Km(n);break;case 4:Aa();break;case 13:It(Nt);break;case 19:It(Nt);break;case 10:$m(n.type._context);break;case 22:case 23:ng()}r=r.return}if(Kt=t,zt=t=Fi(t.current,null),ur=Qr=e,Yt=0,fl=null,eg=Sf=ka=0,Ur=Mo=null,Dn!==null){for(e=0;e<Dn.length;e++)if(r=Dn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Dn=null}return t}function vS(t,e){do{var r=zt;try{if(Bm(),rc.current=Pc,Oc){for(var n=Bt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Oc=!1}if(Ra=0,Zt=yr=Bt=null,No=!1,ol=0,Zm.current=null,r===null||r.return===null){Yt=1,fl=e,zt=null;break}e:{var s=t,a=r.return,l=r,d=e;if(e=ur,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,h=l,w=h.tag;if((h.mode&1)===0&&(w===0||w===11||w===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var S=ly(a);if(S!==null){S.flags&=-257,uy(S,a,l,s,e),S.mode&1&&oy(s,u,e),e=S,d=u;var C=e.updateQueue;if(C===null){var R=new Set;R.add(d),e.updateQueue=R}else C.add(d);break e}else{if((e&1)===0){oy(s,u,e),ig();break e}d=Error(we(426))}}else if(Lt&&l.mode&1){var O=ly(a);if(O!==null){(O.flags&65536)===0&&(O.flags|=256),uy(O,a,l,s,e),Hm(d);break e}}s=d,Yt!==4&&(Yt=2),Mo===null?Mo=[s]:Mo.push(s),d=Jm(d,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var T=tS(l,d,e);ey(l,T);break e;case 1:s=d;var I=l.type,D=l.stateNode;if((l.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(ki===null||!ki.has(D)))){l.flags|=65536,e&=-e,l.lanes|=e;var M=rS(l,s,e);ey(l,M);break e}}l=l.return}while(l!==null)}wS(r)}catch(j){e=j,zt===r&&r!==null&&(zt=r=r.return);continue}break}while(1)}function yS(){var t=Mc.current;return Mc.current=Pc,t===null?Pc:t}function ig(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),Kt===null||(ka&268435455)===0&&(Sf&268435455)===0||vi(Kt,ur)}function Bc(t,e){var r=pt;pt|=2;var n=yS();Kt===t&&ur===e||ps(t,e);do try{nR();break}catch(i){vS(t,i)}while(1);if(Bm(),pt=r,Mc.current=n,zt!==null)throw Error(we(261));return Kt=null,ur=0,Yt}function nR(){for(;zt!==null;)ES(zt)}function iR(){for(;zt!==null&&!RI();)ES(zt)}function ES(t){var e=SS(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,e===null?wS(t):zt=e,Zm.current=null}function wS(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&32768)===0){if(r=WA(r,e,Qr),r!==null){zt=r;return}}else{if(r=XA(r,e),r!==null){r.flags&=32767,zt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,zt=null;return}}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Yt===0&&(Yt=5)}function ns(t,e){var r=xt,n=mn.transition;try{mn.transition=null,xt=1,sR(t,e,r)}finally{mn.transition=n,xt=r}return null}function sR(t,e,r){do ga();while(Si!==null);if((pt&6)!==0)throw Error(we(327));var n=t.finishedWork,i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(BI(t,s),t===Kt&&(zt=Kt=null,ur=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Nu||(Nu=!0,TS(wc,function(){return ga(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=mn.transition,mn.transition=null;var a=xt;xt=1;var l=pt;pt|=4,Zm.current=null,JA(t,n),ZA(t,n),bA(Jh),Jh=null,t.current=n,eR(n),kI(),pt=l,xt=a,mn.transition=s}else t.current=n;if(Nu&&(Nu=!1,Si=t,Uc=i),s=t.pendingLanes,s===0&&(ki=null),OI(n.stateNode),Kr(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)r(e[n]);if(Fc)throw Fc=!1,t=vp,vp=null,t;return(Uc&1)!==0&&t.tag!==0&&ga(),s=t.pendingLanes,(s&1)!==0?t===yp?Fo++:(Fo=0,yp=t):Fo=0,Hi(),null}function ga(){if(Si!==null){var t=nx(Uc),e=mn.transition,r=xt;try{if(mn.transition=null,xt=16>t?16:t,Si===null)var n=!1;else{if(t=Si,Si=null,Uc=0,(pt&6)!==0)throw Error(we(331));var i=pt;for(pt|=4,ke=t.current;ke!==null;){var s=ke,a=s.child;if((ke.flags&16)!==0){var l=s.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(ke=u;ke!==null;){var h=ke;switch(h.tag){case 0:case 11:case 15:cl(8,h,s)}var w=h.child;if(w!==null)w.return=h,ke=w;else for(;ke!==null;){h=ke;var g=h.sibling,S=h.return;if(dS(h),h===u){ke=null;break}if(g!==null){g.return=S,ke=g;break}ke=S}}}var C=s.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var O=R.sibling;R.sibling=null,R=O}while(R!==null)}}ke=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,ke=a;else e:for(;ke!==null;){if(s=ke,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:cl(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,ke=T;break e}ke=s.return}}var I=t.current;for(ke=I;ke!==null;){a=ke;var D=a.child;if((a.subtreeFlags&2064)!==0&&D!==null)D.return=a,ke=D;else e:for(a=I;ke!==null;){if(l=ke,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:xf(9,l)}}catch(j){$r(l,l.return,j)}if(l===a){ke=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,ke=M;break e}ke=l.return}}if(pt=i,Hi(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(hf,t)}catch{}n=!0}return n}finally{xt=r,mn.transition=e}}return!1}function Cy(t,e,r){e=Jm(r,e),e=tS(t,e,1),Ri(t,e),e=Dr(),t=Tf(t,1),t!==null&&(Dl(t,1,e),Kr(t,e))}function $r(t,e,r){if(t.tag===3)Cy(t,t,r);else for(;e!==null;){if(e.tag===3){Cy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ki===null||!ki.has(n))){t=Jm(r,t),t=rS(e,t,1),Ri(e,t),t=Dr(),e=Tf(e,1),e!==null&&(Dl(e,1,t),Kr(e,t));break}}e=e.return}}function aR(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Dr(),t.pingedLanes|=t.suspendedLanes&r,Kt===t&&(ur&r)===r&&(Yt===4||Yt===3&&(ur&130023424)===ur&&500>$t()-tg?ps(t,0):eg|=r),Kr(t,e)}function xS(t,e){e===0&&((t.mode&1)===0?e=1:(e=Su,Su<<=1,(Su&130023424)===0&&(Su=4194304)));var r=Dr();t=Tf(t,e),t!==null&&(Dl(t,e,r),Kr(t,r))}function oR(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),xS(t,r)}function lR(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(we(314))}n!==null&&n.delete(e),xS(t,r)}var SS;SS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hr.current)en=!0;else{if((t.lanes&r)===0&&(e.flags&128)===0)return en=!1,YA(t,e,r);en=(t.flags&131072)!==0}else en=!1,Lt&&(e.flags&1048576)!==0&&Dx(e,Lc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=ba(e,Tr.current);ma(e,r),i=Ym(null,e,n,t,i,r);var s=Xm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zr(n)?(s=!0,Cc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vm(e),i.updater=Ef,e.stateNode=i,i._reactInternals=e,sp(e,n,t,r),e=fp(null,e,n,!0,s,r)):(e.tag=0,Lt&&s&&jm(e),Cr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=cR(n),t=_n(n,t),i){case 0:e=cp(null,e,n,t,r);break e;case 1:e=dy(null,e,n,t,r);break e;case 11:e=cy(null,e,n,t,r);break e;case 14:e=fy(null,e,n,_n(n.type,t),r);break e}throw Error(we(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_n(n,i),cp(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_n(n,i),dy(t,e,n,i,r);case 3:e:{if(uS(e),t===null)throw Error(we(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Rx(t,e),Rc(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Error(we(423)),e=hy(t,e,n,r,i);break e}else if(n!==i){i=Error(we(424)),e=hy(t,e,n,r,i);break e}else for(Br=Yn(e.stateNode.containerInfo.firstChild),tn=e,Lt=!0,bn=null,r=Nx(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ca(),n===i){e=si(t,e,r);break e}Cr(t,e,n,r)}e=e.child}return e;case 5:return Mx(e),t===null&&op(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Zh(n,i)?a=null:s!==null&&Zh(n,s)&&(e.flags|=32),lS(t,e),Cr(t,e,a,r),e.child;case 6:return t===null&&op(e),null;case 13:return cS(t,e,r);case 4:return zm(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ia(e,null,n,r):Cr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_n(n,i),cy(t,e,n,i,r);case 7:return Cr(t,e,e.pendingProps,r),e.child;case 8:return Cr(t,e,e.pendingProps.children,r),e.child;case 12:return Cr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Tt(Ic,n._currentValue),n._currentValue=a,s!==null)if(Un(s.value,a)){if(s.children===i.children&&!Hr.current){e=si(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(s.tag===1){d=ti(-1,r&-r),d.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?d.next=d:(d.next=h.next,h.next=d),u.pending=d}}s.lanes|=r,d=s.alternate,d!==null&&(d.lanes|=r),np(s.return,r,e),l.lanes|=r;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(we(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),np(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Cr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ma(e,r),i=vn(i),n=n(i),e.flags|=1,Cr(t,e,n,r),e.child;case 14:return n=e.type,i=_n(n,e.pendingProps),i=_n(n.type,i),fy(t,e,n,i,r);case 15:return aS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:_n(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,zr(n)?(t=!0,Cc(e)):t=!1,ma(e,r),Lx(e,n,i),sp(e,n,i,r),fp(null,e,n,!0,t,r);case 19:return fS(t,e,r);case 22:return oS(t,e,r)}throw Error(we(156,e.tag))};function TS(t,e){return ex(t,e)}function uR(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,r,n){return new uR(t,e,r,n)}function sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cR(t){if(typeof t=="function")return sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cm)return 11;if(t===Im)return 14}return 2}function Fi(t,e){var r=t.alternate;return r===null?(r=hn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ac(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")sg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Zs:return ms(r.children,i,s,e);case bm:a=8,i|=8;break;case Dh:return t=hn(12,r,e,i|2),t.elementType=Dh,t.lanes=s,t;case Oh:return t=hn(13,r,e,i),t.elementType=Oh,t.lanes=s,t;case Ph:return t=hn(19,r,e,i),t.elementType=Ph,t.lanes=s,t;case Fw:return $c(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nw:a=10;break e;case Mw:a=9;break e;case Cm:a=11;break e;case Im:a=14;break e;case hi:a=16,n=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=hn(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function ms(t,e,r,n){return t=hn(7,t,n,e),t.lanes=r,t}function $c(t,e,r,n){return t=hn(22,t,n,e),t.elementType=Fw,t.lanes=r,t.stateNode={},t}function Wd(t,e,r){return t=hn(6,t,null,e),t.lanes=r,t}function qd(t,e,r){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fR(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rd(0),this.expirationTimes=Rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rd(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ag(t,e,r,n,i,s,a,l,d){return t=new fR(t,e,r,l,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null},Vm(s),t}function dR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function _S(t){if(!t)return Mi;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var r=t.type;if(zr(r))return Ix(t,r,e)}return e}function bS(t,e,r,n,i,s,a,l,d){return t=ag(r,n,!0,t,i,s,a,l,d),t.context=_S(null),r=t.current,n=Dr(),i=Li(r),s=ti(n,i),s.callback=e!=null?e:null,Ri(r,s),t.current.lanes=i,Dl(t,i,n),Kr(t,n),t}function _f(t,e,r,n){var i=e.current,s=Dr(),a=Li(i);return r=_S(r),e.context===null?e.context=r:e.pendingContext=r,e=ti(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Ri(i,e),t=gn(i,a,s),t!==null&&tc(t,i,a),a}function Vc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function og(t,e){Iy(t,e),(t=t.alternate)&&Iy(t,e)}function hR(){return null}var CS=typeof reportError=="function"?reportError:function(t){console.error(t)};function lg(t){this._internalRoot=t}bf.prototype.render=lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));_f(t,e,null,null)};bf.prototype.unmount=lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){_f(null,t,null,null)}),e[ii]=null}};function bf(t){this._internalRoot=t}bf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ax();t={blockedOn:null,target:t,priority:e};for(var r=0;r<gi.length&&e!==0&&e<gi[r].priority;r++);gi.splice(r,0,t),r===0&&lx(t)}};function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ay(){}function pR(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Vc(a);s.call(u)}}var a=bS(e,n,t,0,null,!1,!1,"",Ay);return t._reactRootContainer=a,t[ii]=a.current,rl(t.nodeType===8?t.parentNode:t),Ss(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Vc(d);l.call(u)}}var d=ag(t,0,!1,null,null,!1,!1,"",Ay);return t._reactRootContainer=d,t[ii]=d.current,rl(t.nodeType===8?t.parentNode:t),Ss(function(){_f(e,d,r,n)}),d}function If(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var d=Vc(a);l.call(d)}}_f(e,a,t,i)}else a=pR(r,e,t,i,n);return Vc(a)}ix=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=bo(e.pendingLanes);r!==0&&(km(e,r|1),Kr(e,$t()),(pt&6)===0&&(La=$t()+500,Hi()))}break;case 13:var n=Dr();Ss(function(){return gn(t,1,n)}),og(t,1)}};Lm=function(t){if(t.tag===13){var e=Dr();gn(t,134217728,e),og(t,134217728)}};sx=function(t){if(t.tag===13){var e=Dr(),r=Li(t);gn(t,r,e),og(t,r)}};ax=function(){return xt};ox=function(t,e){var r=xt;try{return xt=t,e()}finally{xt=r}};Hh=function(t,e,r){switch(e){case"input":if(Fh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=vf(n);if(!i)throw Error(we(90));Bw(n),Fh(n,i)}}}break;case"textarea":Vw(t,r);break;case"select":e=r.value,e!=null&&fa(t,!!r.multiple,e,!1)}};qw=rg;Yw=Ss;var mR={usingClientEntryPoint:!1,Events:[Pl,na,vf,Kw,Ww,rg]},wo={findFiberByHostInstance:ss,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},gR={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jw(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||hR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{hf=Mu.inject(gR),Pn=Mu}catch{}}ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mR;ln.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(e))throw Error(we(200));return dR(t,e,null,r)};ln.createRoot=function(t,e){if(!ug(t))throw Error(we(299));var r=!1,n="",i=CS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ag(t,1,!1,null,null,r,!1,n,i),t[ii]=e.current,rl(t.nodeType===8?t.parentNode:t),new lg(e)};ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=Jw(e),t=t===null?null:t.stateNode,t};ln.flushSync=function(t){return Ss(t)};ln.hydrate=function(t,e,r){if(!Cf(e))throw Error(we(200));return If(null,t,e,!0,r)};ln.hydrateRoot=function(t,e,r){if(!ug(t))throw Error(we(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=CS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=bS(e,null,t,1,r!=null?r:null,i,!1,s,a),t[ii]=e.current,rl(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new bf(e)};ln.render=function(t,e,r){if(!Cf(e))throw Error(we(200));return If(null,t,e,!1,r)};ln.unmountComponentAtNode=function(t){if(!Cf(t))throw Error(we(40));return t._reactRootContainer?(Ss(function(){If(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1};ln.unstable_batchedUpdates=rg;ln.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Cf(r))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return If(t,e,r,!1,n)};ln.version="18.0.0-fc46dba67-20220329";function IS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IS)}catch(t){console.error(t)}}IS(),xm.exports=ln;var vR=xm.exports;function jc(){return jc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jc.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));var Ry=function(t){return t},ky="beforeunload",yR="popstate";function ER(t){t===void 0&&(t={});var e=t,r=e.window,n=r===void 0?document.defaultView:r,i=n.history;function s(){var z=n.location,K=z.pathname,ee=z.search,Z=z.hash,ce=i.state||{};return[ce.idx,Ry({pathname:K,search:ee,hash:Z,state:ce.usr||null,key:ce.key||"default"})]}var a=null;function l(){if(a)S.call(a),a=null;else{var z=ls.Pop,K=s(),ee=K[0],Z=K[1];if(S.length){if(ee!=null){var ce=h-ee;ce&&(a={action:z,location:Z,retry:function(){j(ce*-1)}},j(ce))}}else I(z)}}n.addEventListener(yR,l);var d=ls.Pop,u=s(),h=u[0],w=u[1],g=Dy(),S=Dy();h==null&&(h=0,i.replaceState(jc({},i.state,{idx:h}),""));function C(z){return typeof z=="string"?z:xp(z)}function R(z,K){return K===void 0&&(K=null),Ry(jc({pathname:w.pathname,hash:"",search:""},typeof z=="string"?Ns(z):z,{state:K,key:wR()}))}function O(z,K){return[{usr:z.state,key:z.key,idx:K},C(z)]}function T(z,K,ee){return!S.length||(S.call({action:z,location:K,retry:ee}),!1)}function I(z){d=z;var K=s();h=K[0],w=K[1],g.call({action:d,location:w})}function D(z,K){var ee=ls.Push,Z=R(z,K);function ce(){D(z,K)}if(T(ee,Z,ce)){var le=O(Z,h+1),Te=le[0],_e=le[1];try{i.pushState(Te,"",_e)}catch{n.location.assign(_e)}I(ee)}}function M(z,K){var ee=ls.Replace,Z=R(z,K);function ce(){M(z,K)}if(T(ee,Z,ce)){var le=O(Z,h),Te=le[0],_e=le[1];i.replaceState(Te,"",_e),I(ee)}}function j(z){i.go(z)}var B={get action(){return d},get location(){return w},createHref:C,push:D,replace:M,go:j,back:function(){j(-1)},forward:function(){j(1)},listen:function(K){return g.push(K)},block:function(K){var ee=S.push(K);return S.length===1&&n.addEventListener(ky,Ly),function(){ee(),S.length||n.removeEventListener(ky,Ly)}}};return B}function Ly(t){t.preventDefault(),t.returnValue=""}function Dy(){var t=[];return{get length(){return t.length},push:function(r){return t.push(r),function(){t=t.filter(function(n){return n!==r})}},call:function(r){t.forEach(function(n){return n&&n(r)})}}}function wR(){return Math.random().toString(36).substr(2,8)}function xp(t){var e=t.pathname,r=e===void 0?"/":e,n=t.search,i=n===void 0?"":n,s=t.hash,a=s===void 0?"":s;return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Ns(t){var e={};if(t){var r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));var n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const cg=J.exports.createContext(null),fg=J.exports.createContext(null),Ml=J.exports.createContext({outlet:null,matches:[]});function In(t,e){if(!t)throw new Error(e)}function xR(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Ns(e):e,i=kS(n.pathname||"/",r);if(i==null)return null;let s=AS(t);SR(s);let a=null;for(let l=0;a==null&&l<s.length;++l)a=LR(s[l],i);return a}function AS(t,e,r,n){return e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n=""),t.forEach((i,s)=>{let a={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(n)||In(!1),a.relativePath=a.relativePath.slice(n.length));let l=Di([n,a.relativePath]),d=r.concat(a);i.children&&i.children.length>0&&(i.index===!0&&In(!1),AS(i.children,e,d,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:RR(l,i.index),routesMeta:d})}),e}function SR(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:kR(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const TR=/^:\w+$/,_R=3,bR=2,CR=1,IR=10,AR=-2,Oy=t=>t==="*";function RR(t,e){let r=t.split("/"),n=r.length;return r.some(Oy)&&(n+=AR),e&&(n+=bR),r.filter(i=>!Oy(i)).reduce((i,s)=>i+(TR.test(s)?_R:s===""?CR:IR),n)}function kR(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function LR(t,e){let{routesMeta:r}=t,n={},i="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],d=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=DR({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u);if(!h)return null;Object.assign(n,h.params);let w=l.route;s.push({params:n,pathname:Di([i,h.pathname]),pathnameBase:LS(Di([i,h.pathnameBase])),route:w}),h.pathnameBase!=="/"&&(i=Di([i,h.pathnameBase]))}return s}function DR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=OR(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,h,w)=>{if(h==="*"){let g=l[w]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}return u[h]=PR(l[w]||""),u},{}),pathname:s,pathnameBase:a,pattern:t}}function OR(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,l)=>(n.push(l),"([^\\/]+)"));return t.endsWith("*")?(n.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=r?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),n]}function PR(t,e){try{return decodeURIComponent(t)}catch{return t}}function NR(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Ns(t):t;return{pathname:r?r.startsWith("/")?r:MR(r,e):e,search:UR(n),hash:BR(i)}}function MR(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function RS(t,e,r){let n=typeof t=="string"?Ns(t):t,i=t===""||n.pathname===""?"/":n.pathname,s;if(i==null)s=r;else{let l=e.length-1;if(i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),l-=1;n.pathname=d.join("/")}s=l>=0?e[l]:"/"}let a=NR(n,s);return i&&i!=="/"&&i.endsWith("/")&&!a.pathname.endsWith("/")&&(a.pathname+="/"),a}function FR(t){return t===""||t.pathname===""?"/":typeof t=="string"?Ns(t).pathname:t.pathname}function kS(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=t.charAt(e.length);return r&&r!=="/"?null:t.slice(e.length)||"/"}const Di=t=>t.join("/").replace(/\/\/+/g,"/"),LS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $R(t){Wa()||In(!1);let{basename:e,navigator:r}=J.exports.useContext(cg),{hash:n,pathname:i,search:s}=DS(t),a=i;if(e!=="/"){let l=FR(t),d=l!=null&&l.endsWith("/");a=i==="/"?e+(d?"/":""):Di([e,i])}return r.createHref({pathname:a,search:s,hash:n})}function Wa(){return J.exports.useContext(fg)!=null}function An(){return Wa()||In(!1),J.exports.useContext(fg).location}function dg(){Wa()||In(!1);let{basename:t,navigator:e}=J.exports.useContext(cg),{matches:r}=J.exports.useContext(Ml),{pathname:n}=An(),i=JSON.stringify(r.map(l=>l.pathnameBase)),s=J.exports.useRef(!1);return J.exports.useEffect(()=>{s.current=!0}),J.exports.useCallback(function(l,d){if(d===void 0&&(d={}),!s.current)return;if(typeof l=="number"){e.go(l);return}let u=RS(l,JSON.parse(i),n);t!=="/"&&(u.pathname=Di([t,u.pathname])),(d.replace?e.replace:e.push)(u,d.state)},[t,e,i,n])}function hg(){let{matches:t}=J.exports.useContext(Ml),e=t[t.length-1];return e?e.params:{}}function DS(t){let{matches:e}=J.exports.useContext(Ml),{pathname:r}=An(),n=JSON.stringify(e.map(i=>i.pathnameBase));return J.exports.useMemo(()=>RS(t,JSON.parse(n),r),[t,n,r])}function VR(t,e){Wa()||In(!1);let{matches:r}=J.exports.useContext(Ml),n=r[r.length-1],i=n?n.params:{};n&&n.pathname;let s=n?n.pathnameBase:"/";n&&n.route;let a=An(),l;if(e){var d;let g=typeof e=="string"?Ns(e):e;s==="/"||((d=g.pathname)==null?void 0:d.startsWith(s))||In(!1),l=g}else l=a;let u=l.pathname||"/",h=s==="/"?u:u.slice(s.length)||"/",w=xR(t,{pathname:h});return jR(w&&w.map(g=>Object.assign({},g,{params:Object.assign({},i,g.params),pathname:Di([s,g.pathname]),pathnameBase:g.pathnameBase==="/"?s:Di([s,g.pathnameBase])})),r)}function jR(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((r,n,i)=>J.exports.createElement(Ml.Provider,{children:n.route.element!==void 0?n.route.element:r,value:{outlet:r,matches:e.concat(t.slice(0,i+1))}}),null)}function GR(t){let{to:e,replace:r,state:n}=t;Wa()||In(!1);let i=dg();return J.exports.useEffect(()=>{i(e,{replace:r,state:n})}),null}function Tn(t){In(!1)}function HR(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ls.Pop,navigator:s,static:a=!1}=t;Wa()&&In(!1);let l=LS(e),d=J.exports.useMemo(()=>({basename:l,navigator:s,static:a}),[l,s,a]);typeof n=="string"&&(n=Ns(n));let{pathname:u="/",search:h="",hash:w="",state:g=null,key:S="default"}=n,C=J.exports.useMemo(()=>{let R=kS(u,l);return R==null?null:{pathname:R,search:h,hash:w,state:g,key:S}},[l,u,h,w,g,S]);return C==null?null:J.exports.createElement(cg.Provider,{value:d},J.exports.createElement(fg.Provider,{children:r,value:{location:C,navigationType:i}}))}function zR(t){let{children:e,location:r}=t;return VR(Sp(e),r)}function Sp(t){let e=[];return J.exports.Children.forEach(t,r=>{if(!J.exports.isValidElement(r))return;if(r.type===J.exports.Fragment){e.push.apply(e,Sp(r.props.children));return}r.type!==Tn&&In(!1);let n={caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path};r.props.children&&(n.children=Sp(r.props.children)),e.push(n)}),e}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tp(){return Tp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tp.apply(this,arguments)}function KR(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}const WR=["onClick","reloadDocument","replace","state","target","to"];function qR(t){let{basename:e,children:r,window:n}=t,i=J.exports.useRef();i.current==null&&(i.current=ER({window:n}));let s=i.current,[a,l]=J.exports.useState({action:s.action,location:s.location});return J.exports.useLayoutEffect(()=>s.listen(l),[s]),J.exports.createElement(HR,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:s})}function YR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const St=J.exports.forwardRef(function(e,r){let{onClick:n,reloadDocument:i,replace:s=!1,state:a,target:l,to:d}=e,u=KR(e,WR),h=$R(d),w=XR(d,{replace:s,state:a,target:l});function g(S){n&&n(S),!S.defaultPrevented&&!i&&w(S)}return J.exports.createElement("a",Tp({},u,{href:h,onClick:g,ref:r,target:l}))});function XR(t,e){let{target:r,replace:n,state:i}=e===void 0?{}:e,s=dg(),a=An(),l=DS(t);return J.exports.useCallback(d=>{if(d.button===0&&(!r||r==="_self")&&!YR(d)){d.preventDefault();let u=!!n||xp(a)===xp(l);s(t,{replace:u,state:i})}},[a,s,l,n,i,r,t])}const Bn=()=>{const t=An();return E.createElement("div",{className:"flex flex-col gap-4 min-h-screen justify-center items-center"},E.createElement("img",{className:"w-full max-w-[200px] h-auto",src:"/error.png",alt:"Error"}),E.createElement("p",{className:"text-xl"},"Something went wrong!"),t.pathname!=="/"&&E.createElement(St,{className:"text-primary",to:"/"},"Return home"))};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function OS(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(h){try{u(n.next(h))}catch(w){a(w)}}function d(h){try{u(n.throw(h))}catch(w){a(w)}}function u(h){h.done?s(h.value):i(h.value).then(l,d)}u((n=n.apply(t,e||[])).next())})}function PS(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(h){return d([u,h])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var On=function(){},wr=On(),Uo=Object,Ir=function(t){return t===wr},Ti=function(t){return typeof t=="function"},ai=function(t,e){return Uo.assign({},t,e)},pg="undefined",mg=function(){return typeof window!=pg},QR=function(){return typeof document!=pg},JR=function(){return mg()&&typeof window.requestAnimationFrame!=pg},Fu=new WeakMap,ZR=0,dl=function(t){var e=typeof t,r=t&&t.constructor,n=r==Date,i,s;if(Uo(t)===t&&!n&&r!=RegExp){if(i=Fu.get(t),i)return i;if(i=++ZR+"~",Fu.set(t,i),r==Array){for(i="@",s=0;s<t.length;s++)i+=dl(t[s])+",";Fu.set(t,i)}if(r==Uo){i="#";for(var a=Uo.keys(t).sort();!Ir(s=a.pop());)Ir(t[s])||(i+=s+":"+dl(t[s])+",");Fu.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},_p=!0,ek=function(){return _p},NS=mg(),gg=QR(),bp=NS&&window.addEventListener?window.addEventListener.bind(window):On,tk=gg?document.addEventListener.bind(document):On,Cp=NS&&window.removeEventListener?window.removeEventListener.bind(window):On,rk=gg?document.removeEventListener.bind(document):On,nk=function(){var t=gg&&document.visibilityState;return Ir(t)||t!=="hidden"},ik=function(t){return tk("visibilitychange",t),bp("focus",t),function(){rk("visibilitychange",t),Cp("focus",t)}},sk=function(t){var e=function(){_p=!0,t()},r=function(){_p=!1};return bp("online",e),bp("offline",r),function(){Cp("online",e),Cp("offline",r)}},ak={isOnline:ek,isVisible:nk},ok={initFocus:ik,initReconnect:sk},Af=!mg()||"Deno"in window,lk=function(t){return JR()?window.requestAnimationFrame(t):setTimeout(t,1)},Bo=Af?J.exports.useEffect:J.exports.useLayoutEffect,Yd=typeof navigator!="undefined"&&navigator.connection,Py=!Af&&Yd&&(["slow-2g","2g"].includes(Yd.effectiveType)||Yd.saveData),MS=function(t){if(Ti(t))try{t=t()}catch{t=""}var e=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?dl(t):"";var r=t?"$swr$"+t:"";return[t,e,r]},us=new WeakMap,FS=0,US=1,BS=2,$o=function(t,e,r,n,i,s,a){a===void 0&&(a=!0);var l=us.get(t),d=l[0],u=l[1],h=l[3],w=d[e],g=u[e];if(a&&g)for(var S=0;S<g.length;++S)g[S](r,n,i);return s&&(delete h[e],w&&w[0])?w[0](BS).then(function(){return t.get(e)}):t.get(e)},uk=0,Ip=function(){return++uk},$S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return OS(void 0,void 0,void 0,function(){var r,n,i,s,a,l,d,u,h,w,g,S,C,R,O,T,I,D,M,j,B;return PS(this,function(z){switch(z.label){case 0:if(r=t[0],n=t[1],i=t[2],s=t[3],a=typeof s=="boolean"?{revalidate:s}:s||{},l=Ir(a.populateCache)?!0:a.populateCache,d=a.revalidate!==!1,u=a.rollbackOnError!==!1,h=a.optimisticData,w=MS(n),g=w[0],S=w[2],!g)return[2];if(C=us.get(r),R=C[2],t.length<3)return[2,$o(r,g,r.get(g),wr,wr,d,!0)];if(O=i,I=Ip(),R[g]=[I,0],D=!Ir(h),M=r.get(g),D&&(j=Ti(h)?h(M):h,r.set(g,j),$o(r,g,j)),Ti(O))try{O=O(r.get(g))}catch(K){T=K}return O&&Ti(O.then)?[4,O.catch(function(K){T=K})]:[3,2];case 1:if(O=z.sent(),I!==R[g][0]){if(T)throw T;return[2,O]}else T&&D&&u&&(l=!0,O=M,r.set(g,M));z.label=2;case 2:return l&&(T||(Ti(l)&&(O=l(O,M)),r.set(g,O)),r.set(S,ai(r.get(S),{error:T}))),R[g][1]=Ip(),[4,$o(r,g,O,T,wr,d,!!l)];case 3:if(B=z.sent(),T)throw T;return[2,l?B:O]}})})},Ny=function(t,e){for(var r in t)t[r][0]&&t[r][0](e)},VS=function(t,e){if(!us.has(t)){var r=ai(ok,e),n={},i=$S.bind(wr,t),s=On;if(us.set(t,[n,{},{},{},i]),!Af){var a=r.initFocus(setTimeout.bind(wr,Ny.bind(wr,n,FS))),l=r.initReconnect(setTimeout.bind(wr,Ny.bind(wr,n,US)));s=function(){a&&a(),l&&l(),us.delete(t)}}return[t,i,s]}return[t,us.get(t)[4]]},ck=function(t,e,r,n,i){var s=r.errorRetryCount,a=i.retryCount,l=~~((Math.random()+.5)*(1<<(a<8?a:8)))*r.errorRetryInterval;!Ir(s)&&a>s||setTimeout(n,l,i)},jS=VS(new Map),GS=jS[0],fk=jS[1],HS=ai({onLoadingSlow:On,onSuccess:On,onError:On,onErrorRetry:ck,onDiscarded:On,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Py?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Py?5e3:3e3,compare:function(t,e){return dl(t)==dl(e)},isPaused:function(){return!1},cache:GS,mutate:fk,fallback:{}},ak),zS=function(t,e){var r=ai(t,e);if(e){var n=t.use,i=t.fallback,s=e.use,a=e.fallback;n&&s&&(r.use=n.concat(s)),i&&a&&(r.fallback=ai(i,a))}return r},Ap=J.exports.createContext({}),dk=function(t){var e=t.value,r=zS(J.exports.useContext(Ap),e),n=e&&e.provider,i=J.exports.useState(function(){return n?VS(n(r.cache||GS),e):wr})[0];return i&&(r.cache=i[0],r.mutate=i[1]),Bo(function(){return i?i[2]:wr},[]),J.exports.createElement(Ap.Provider,ai(t,{value:r}))},hk=function(t,e){var r=J.exports.useState({})[1],n=J.exports.useRef(t),i=J.exports.useRef({data:!1,error:!1,isValidating:!1}),s=J.exports.useCallback(function(a){var l=!1,d=n.current;for(var u in a){var h=u;d[h]!==a[h]&&(d[h]=a[h],i.current[h]&&(l=!0))}l&&!e.current&&r({})},[]);return Bo(function(){n.current=t}),[n,i.current,s]},pk=function(t){return Ti(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},mk=function(){return ai(HS,J.exports.useContext(Ap))},gk=function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=mk(),s=pk(r),a=s[0],l=s[1],d=s[2],u=zS(i,d),h=t,w=u.use;if(w)for(var g=w.length;g-- >0;)h=w[g](h);return h(a,l||u.fetcher,u)}},My=function(t,e,r){var n=e[t]||(e[t]=[]);return n.push(r),function(){var i=n.indexOf(r);i>=0&&(n[i]=n[n.length-1],n.pop())}},Xd={dedupe:!0},vk=function(t,e,r){var n=r.cache,i=r.compare,s=r.fallbackData,a=r.suspense,l=r.revalidateOnMount,d=r.refreshInterval,u=r.refreshWhenHidden,h=r.refreshWhenOffline,w=us.get(n),g=w[0],S=w[1],C=w[2],R=w[3],O=MS(t),T=O[0],I=O[1],D=O[2],M=J.exports.useRef(!1),j=J.exports.useRef(!1),B=J.exports.useRef(T),z=J.exports.useRef(e),K=J.exports.useRef(r),ee=function(){return K.current},Z=function(){return ee().isVisible()&&ee().isOnline()},ce=function(Be){return n.set(D,ai(n.get(D),Be))},le=n.get(T),Te=Ir(s)?r.fallback[T]:s,_e=Ir(le)?Te:le,We=n.get(D)||{},Ne=We.error,Ue=!M.current,oe=function(){return Ue&&!Ir(l)?l:ee().isPaused()?!1:a?Ir(_e)?!1:r.revalidateIfStale:Ir(_e)||r.revalidateIfStale},xe=function(){return!T||!e?!1:We.isValidating?!0:Ue&&oe()},fe=xe(),Le=hk({data:_e,error:Ne,isValidating:fe},j),ye=Le[0],Ze=Le[1],Ce=Le[2],it=J.exports.useCallback(function(Be){return OS(void 0,void 0,void 0,function(){var ot,Xe,Ke,mt,Pt,gt,vt,tt,Rt,kt,lt,ir,G;return PS(this,function(Q){switch(Q.label){case 0:if(ot=z.current,!T||!ot||j.current||ee().isPaused())return[2,!1];mt=!0,Pt=Be||{},gt=!R[T]||!Pt.dedupe,vt=function(){return!j.current&&T===B.current&&M.current},tt=function(){var $=R[T];$&&$[1]===Ke&&delete R[T]},Rt={isValidating:!1},kt=function(){ce({isValidating:!1}),vt()&&Ce(Rt)},ce({isValidating:!0}),Ce({isValidating:!0}),Q.label=1;case 1:return Q.trys.push([1,3,,4]),gt&&($o(n,T,ye.current.data,ye.current.error,!0),r.loadingTimeout&&!n.get(T)&&setTimeout(function(){mt&&vt()&&ee().onLoadingSlow(T,r)},r.loadingTimeout),R[T]=[ot.apply(void 0,I),Ip()]),G=R[T],Xe=G[0],Ke=G[1],[4,Xe];case 2:return Xe=Q.sent(),gt&&setTimeout(tt,r.dedupingInterval),!R[T]||R[T][1]!==Ke?(gt&&vt()&&ee().onDiscarded(T),[2,!1]):(ce({error:wr}),Rt.error=wr,lt=C[T],!Ir(lt)&&(Ke<=lt[0]||Ke<=lt[1]||lt[1]===0)?(kt(),gt&&vt()&&ee().onDiscarded(T),[2,!1]):(i(ye.current.data,Xe)?Rt.data=ye.current.data:Rt.data=Xe,i(n.get(T),Xe)||n.set(T,Xe),gt&&vt()&&ee().onSuccess(Xe,T,r),[3,4]));case 3:return ir=Q.sent(),tt(),ee().isPaused()||(ce({error:ir}),Rt.error=ir,gt&&vt()&&(ee().onError(ir,T,r),(typeof r.shouldRetryOnError=="boolean"&&r.shouldRetryOnError||Ti(r.shouldRetryOnError)&&r.shouldRetryOnError(ir))&&Z()&&ee().onErrorRetry(ir,T,r,it,{retryCount:(Pt.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return mt=!1,kt(),vt()&&gt&&$o(n,T,Rt.data,Rt.error,!1),[2,!0]}})})},[T]),ft=J.exports.useCallback($S.bind(wr,n,function(){return B.current}),[]);if(Bo(function(){z.current=e,K.current=r}),Bo(function(){if(!!T){var Be=T!==B.current,ot=it.bind(wr,Xd),Xe=function(vt,tt,Rt){Ce(ai({error:tt,isValidating:Rt},i(ye.current.data,vt)?wr:{data:vt}))},Ke=0,mt=function(vt){if(vt==FS){var tt=Date.now();ee().revalidateOnFocus&&tt>Ke&&Z()&&(Ke=tt+ee().focusThrottleInterval,ot())}else if(vt==US)ee().revalidateOnReconnect&&Z()&&ot();else if(vt==BS)return it()},Pt=My(T,S,Xe),gt=My(T,g,mt);return j.current=!1,B.current=T,M.current=!0,Be&&Ce({data:_e,error:Ne,isValidating:fe}),oe()&&(Ir(_e)||Af?ot():lk(ot)),function(){j.current=!0,Pt(),gt()}}},[T,it]),Bo(function(){var Be;function ot(){var Ke=Ti(d)?d(_e):d;Ke&&Be!==-1&&(Be=setTimeout(Xe,Ke))}function Xe(){!ye.current.error&&(u||ee().isVisible())&&(h||ee().isOnline())?it(Xd).then(ot):ot()}return ot(),function(){Be&&(clearTimeout(Be),Be=-1)}},[d,u,h,it]),J.exports.useDebugValue(_e),a&&Ir(_e)&&T)throw z.current=e,K.current=r,j.current=!1,Ir(Ne)?it(Xd):Ne;return{mutate:ft,get data(){return Ze.data=!0,_e},get error(){return Ze.error=!0,Ne},get isValidating(){return Ze.isValidating=!0,fe}}},yk=Uo.defineProperty(dk,"default",{value:HS}),Ms=gk(vk);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Rp=function(t,e){return Rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Rp(t,e)};function Ek(t,e){Rp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Vo=function(){return Vo=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vo.apply(this,arguments)};function wk(t,e,r,n){var i,s=!1,a=0;function l(){i&&clearTimeout(i)}function d(){l(),s=!0}typeof e!="boolean"&&(n=r,r=e,e=void 0);function u(){var h=this,w=Date.now()-a,g=arguments;if(s)return;function S(){a=Date.now(),r.apply(h,g)}function C(){i=void 0}n&&!i&&S(),l(),n===void 0&&w>t?S():e!==!0&&(i=setTimeout(n?C:S,n===void 0?t-w:t))}return u.cancel=d,u}var va={Pixel:"Pixel",Percent:"Percent"},Fy={unit:va.Percent,value:.8};function Uy(t){return typeof t=="number"?{unit:va.Percent,value:t*100}:typeof t=="string"?t.match(/^(\d*(\.\d+)?)px$/)?{unit:va.Pixel,value:parseFloat(t)}:t.match(/^(\d*(\.\d+)?)%$/)?{unit:va.Percent,value:parseFloat(t)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),Fy):(console.warn("scrollThreshold should be string or number"),Fy)}var Rf=function(t){Ek(e,t);function e(r){var n=t.call(this,r)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:typeof n.props.scrollableTarget=="string"?document.getElementById(n.props.scrollableTarget):(n.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},n.onStart=function(i){n.lastScrollTop||(n.dragging=!0,i instanceof MouseEvent?n.startY=i.pageY:i instanceof TouchEvent&&(n.startY=i.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(i){!n.dragging||(i instanceof MouseEvent?n.currentY=i.pageY:i instanceof TouchEvent&&(n.currentY=i.touches[0].pageY),!(n.currentY<n.startY)&&(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),!(n.currentY-n.startY>n.maxPullDownDistance*1.5)&&n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")})},n.onScrollListener=function(i){typeof n.props.onScroll=="function"&&setTimeout(function(){return n.props.onScroll&&n.props.onScroll(i)},0);var s=n.props.height||n._scrollableNode?i.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!n.actionTriggered){var a=n.props.inverse?n.isElementAtTop(s,n.props.scrollThreshold):n.isElementAtBottom(s,n.props.scrollThreshold);a&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=s.scrollTop}},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:r.dataLength},n.throttledOnScrollListener=wk(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return e.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},e.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},e.prototype.componentDidUpdate=function(r){this.props.dataLength!==r.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},e.getDerivedStateFromProps=function(r,n){var i=r.dataLength!==n.prevDataLength;return i?Vo(Vo({},n),{prevDataLength:r.dataLength}):null},e.prototype.isElementAtTop=function(r,n){n===void 0&&(n=.8);var i=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,s=Uy(n);return s.unit===va.Pixel?r.scrollTop<=s.value+i-r.scrollHeight+1:r.scrollTop<=s.value/100+i-r.scrollHeight+1},e.prototype.isElementAtBottom=function(r,n){n===void 0&&(n=.8);var i=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,s=Uy(n);return s.unit===va.Pixel?r.scrollTop+i>=r.scrollHeight-s.value:r.scrollTop+i>=s.value/100*r.scrollHeight},e.prototype.render=function(){var r=this,n=Vo({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),i=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),s=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return E.createElement("div",{style:s,className:"infinite-scroll-component__outerdiv"},E.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(a){return r._infScroll=a},style:n},this.props.pullDownToRefresh&&E.createElement("div",{style:{position:"relative"},ref:function(a){return r._pullDown=a}},E.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!i&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},e}(J.exports.Component),zi={exports:{}};(()=>{var t={296:(i,s,a)=>{var l=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,h=/^0o[0-7]+$/i,w=parseInt,g=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,S=typeof self=="object"&&self&&self.Object===Object&&self,C=g||S||Function("return this")(),R=Object.prototype.toString,O=Math.max,T=Math.min,I=function(){return C.Date.now()};function D(j){var B=typeof j;return!!j&&(B=="object"||B=="function")}function M(j){if(typeof j=="number")return j;if(function(K){return typeof K=="symbol"||function(ee){return!!ee&&typeof ee=="object"}(K)&&R.call(K)=="[object Symbol]"}(j))return NaN;if(D(j)){var B=typeof j.valueOf=="function"?j.valueOf():j;j=D(B)?B+"":B}if(typeof j!="string")return j===0?j:+j;j=j.replace(l,"");var z=u.test(j);return z||h.test(j)?w(j.slice(2),z?2:8):d.test(j)?NaN:+j}i.exports=function(j,B,z){var K,ee,Z,ce,le,Te,_e=0,We=!1,Ne=!1,Ue=!0;if(typeof j!="function")throw new TypeError("Expected a function");function oe(Ce){var it=K,ft=ee;return K=ee=void 0,_e=Ce,ce=j.apply(ft,it)}function xe(Ce){return _e=Ce,le=setTimeout(Le,B),We?oe(Ce):ce}function fe(Ce){var it=Ce-Te;return Te===void 0||it>=B||it<0||Ne&&Ce-_e>=Z}function Le(){var Ce=I();if(fe(Ce))return ye(Ce);le=setTimeout(Le,function(it){var ft=B-(it-Te);return Ne?T(ft,Z-(it-_e)):ft}(Ce))}function ye(Ce){return le=void 0,Ue&&K?oe(Ce):(K=ee=void 0,ce)}function Ze(){var Ce=I(),it=fe(Ce);if(K=arguments,ee=this,Te=Ce,it){if(le===void 0)return xe(Te);if(Ne)return le=setTimeout(Le,B),oe(Te)}return le===void 0&&(le=setTimeout(Le,B)),ce}return B=M(B)||0,D(z)&&(We=!!z.leading,Z=(Ne="maxWait"in z)?O(M(z.maxWait)||0,B):Z,Ue="trailing"in z?!!z.trailing:Ue),Ze.cancel=function(){le!==void 0&&clearTimeout(le),_e=0,K=Te=ee=le=void 0},Ze.flush=function(){return le===void 0?ce:ye(I())},Ze}},96:(i,s,a)=>{var l="Expected a function",d=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,w=/^0o[0-7]+$/i,g=parseInt,S=typeof a.g=="object"&&a.g&&a.g.Object===Object&&a.g,C=typeof self=="object"&&self&&self.Object===Object&&self,R=S||C||Function("return this")(),O=Object.prototype.toString,T=Math.max,I=Math.min,D=function(){return R.Date.now()};function M(B){var z=typeof B;return!!B&&(z=="object"||z=="function")}function j(B){if(typeof B=="number")return B;if(function(ee){return typeof ee=="symbol"||function(Z){return!!Z&&typeof Z=="object"}(ee)&&O.call(ee)=="[object Symbol]"}(B))return NaN;if(M(B)){var z=typeof B.valueOf=="function"?B.valueOf():B;B=M(z)?z+"":z}if(typeof B!="string")return B===0?B:+B;B=B.replace(d,"");var K=h.test(B);return K||w.test(B)?g(B.slice(2),K?2:8):u.test(B)?NaN:+B}i.exports=function(B,z,K){var ee=!0,Z=!0;if(typeof B!="function")throw new TypeError(l);return M(K)&&(ee="leading"in K?!!K.leading:ee,Z="trailing"in K?!!K.trailing:Z),function(ce,le,Te){var _e,We,Ne,Ue,oe,xe,fe=0,Le=!1,ye=!1,Ze=!0;if(typeof ce!="function")throw new TypeError(l);function Ce(Ke){var mt=_e,Pt=We;return _e=We=void 0,fe=Ke,Ue=ce.apply(Pt,mt)}function it(Ke){return fe=Ke,oe=setTimeout(Be,le),Le?Ce(Ke):Ue}function ft(Ke){var mt=Ke-xe;return xe===void 0||mt>=le||mt<0||ye&&Ke-fe>=Ne}function Be(){var Ke=D();if(ft(Ke))return ot(Ke);oe=setTimeout(Be,function(mt){var Pt=le-(mt-xe);return ye?I(Pt,Ne-(mt-fe)):Pt}(Ke))}function ot(Ke){return oe=void 0,Ze&&_e?Ce(Ke):(_e=We=void 0,Ue)}function Xe(){var Ke=D(),mt=ft(Ke);if(_e=arguments,We=this,xe=Ke,mt){if(oe===void 0)return it(xe);if(ye)return oe=setTimeout(Be,le),Ce(xe)}return oe===void 0&&(oe=setTimeout(Be,le)),Ue}return le=j(le)||0,M(Te)&&(Le=!!Te.leading,Ne=(ye="maxWait"in Te)?T(j(Te.maxWait)||0,le):Ne,Ze="trailing"in Te?!!Te.trailing:Ze),Xe.cancel=function(){oe!==void 0&&clearTimeout(oe),fe=0,_e=xe=We=oe=void 0},Xe.flush=function(){return oe===void 0?Ue:ot(D())},Xe}(B,z,{leading:ee,maxWait:z,trailing:Z})}},703:(i,s,a)=>{var l=a(414);function d(){}function u(){}u.resetWarningCache=d,i.exports=function(){function h(S,C,R,O,T,I){if(I!==l){var D=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw D.name="Invariant Violation",D}}function w(){return h}h.isRequired=h;var g={array:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:w,element:h,elementType:h,instanceOf:w,node:h,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w,checkPropTypes:u,resetWarningCache:d};return g.PropTypes=g,g}},697:(i,s,a)=>{i.exports=a(703)()},414:i=>{i.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},e={};function r(i){var s=e[i];if(s!==void 0)return s.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return r.d(s,{a:s}),s},r.d=(i,s)=>{for(var a in s)r.o(s,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:s[a]})},r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),r.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{LazyLoadComponent:()=>Rt,LazyLoadImage:()=>V,trackWindowScroll:()=>Le});const i=J.exports;var s=r.n(i),a=r(697);const l=xm.exports;var d=r.n(l);function u(){return typeof window!="undefined"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function h(P){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}function w(P,k){var H=Object.keys(P);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(P);k&&(W=W.filter(function(se){return Object.getOwnPropertyDescriptor(P,se).enumerable})),H.push.apply(H,W)}return H}function g(P,k,H){return k in P?Object.defineProperty(P,k,{value:H,enumerable:!0,configurable:!0,writable:!0}):P[k]=H,P}function S(P,k){for(var H=0;H<k.length;H++){var W=k[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function C(P,k){return(C=Object.setPrototypeOf||function(H,W){return H.__proto__=W,H})(P,k)}function R(P,k){if(k&&(h(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}(P)}function O(P){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var T=function(P){P.forEach(function(k){k.isIntersecting&&k.target.onVisible()})},I={},D=function(P){(function(q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Y&&Y.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Y&&C(q,Y)})(re,P);var k,H,W,se,ue=(W=re,se=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var q,Y=O(W);if(se){var ie=O(this).constructor;q=Reflect.construct(Y,arguments,ie)}else q=Y.apply(this,arguments);return R(this,q)});function re(q){var Y;if(function(te,de){if(!(te instanceof de))throw new TypeError("Cannot call a class as a function")}(this,re),(Y=ue.call(this,q)).supportsObserver=!q.scrollPosition&&q.useIntersectionObserver&&u(),Y.supportsObserver){var ie=q.threshold;Y.observer=function(te){return I[te]=I[te]||new IntersectionObserver(T,{rootMargin:te+"px"}),I[te]}(ie)}return Y}return k=re,(H=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,Y=this.placeholder.getBoundingClientRect(),ie=d().findDOMNode(this.placeholder).style,te={left:parseInt(ie.getPropertyValue("margin-left"),10)||0,top:parseInt(ie.getPropertyValue("margin-top"),10)||0};return{bottom:q.y+Y.bottom+te.top,left:q.x+Y.left+te.left,right:q.x+Y.right+te.left,top:q.y+Y.top+te.top}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window=="undefined"||!this.placeholder)return!1;var q=this.props,Y=q.scrollPosition,ie=q.threshold,te=this.getPlaceholderBoundingBox(Y),de=Y.y+window.innerHeight,ge=Y.x,Ae=Y.x+window.innerWidth,Me=Y.y;return Boolean(Me-ie<=te.bottom&&de+ie>=te.top&&ge-ie<=te.right&&Ae+ie>=te.left)}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var q=this,Y=this.props,ie=Y.className,te=Y.height,de=Y.placeholder,ge=Y.style,Ae=Y.width;if(de&&typeof de.type!="function")return s().cloneElement(de,{ref:function(Re){return q.placeholder=Re}});var Me=function(Re){for(var ve=1;ve<arguments.length;ve++){var me=arguments[ve]!=null?arguments[ve]:{};ve%2?w(Object(me),!0).forEach(function(he){g(Re,he,me[he])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Re,Object.getOwnPropertyDescriptors(me)):w(Object(me)).forEach(function(he){Object.defineProperty(Re,he,Object.getOwnPropertyDescriptor(me,he))})}return Re}({display:"inline-block"},ge);return Ae!==void 0&&(Me.width=Ae),te!==void 0&&(Me.height=te),s().createElement("span",{className:ie,ref:function(Re){return q.placeholder=Re},style:Me},de)}}])&&S(k.prototype,H),re}(s().Component);D.propTypes={onVisible:a.PropTypes.func.isRequired,className:a.PropTypes.string,height:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.string]),placeholder:a.PropTypes.element,threshold:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool,scrollPosition:a.PropTypes.shape({x:a.PropTypes.number.isRequired,y:a.PropTypes.number.isRequired}),width:a.PropTypes.oneOfType([a.PropTypes.number,a.PropTypes.string])},D.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const M=D;var j=r(296),B=r.n(j),z=r(96),K=r.n(z),ee=function(P){var k=getComputedStyle(P,null);return k.getPropertyValue("overflow")+k.getPropertyValue("overflow-y")+k.getPropertyValue("overflow-x")};const Z=function(P){if(!(P instanceof HTMLElement))return window;for(var k=P;k&&k instanceof HTMLElement;){if(/(scroll|auto)/.test(ee(k)))return k;k=k.parentNode}return window};function ce(P){return(ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}var le=["delayMethod","delayTime"];function Te(){return(Te=Object.assign||function(P){for(var k=1;k<arguments.length;k++){var H=arguments[k];for(var W in H)Object.prototype.hasOwnProperty.call(H,W)&&(P[W]=H[W])}return P}).apply(this,arguments)}function _e(P,k){for(var H=0;H<k.length;H++){var W=k[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function We(P,k){return(We=Object.setPrototypeOf||function(H,W){return H.__proto__=W,H})(P,k)}function Ne(P,k){if(k&&(ce(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ue(P)}function Ue(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function oe(P){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var xe=function(){return typeof window=="undefined"?0:window.scrollX||window.pageXOffset},fe=function(){return typeof window=="undefined"?0:window.scrollY||window.pageYOffset};const Le=function(P){var k=function(H){(function(ie,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(te&&te.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),te&&We(ie,te)})(Y,H);var W,se,ue,re,q=(ue=Y,re=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ie,te=oe(ue);if(re){var de=oe(this).constructor;ie=Reflect.construct(te,arguments,de)}else ie=te.apply(this,arguments);return Ne(this,ie)});function Y(ie){var te;if(function(ge,Ae){if(!(ge instanceof Ae))throw new TypeError("Cannot call a class as a function")}(this,Y),(te=q.call(this,ie)).useIntersectionObserver=ie.useIntersectionObserver&&u(),te.useIntersectionObserver)return Ne(te);var de=te.onChangeScroll.bind(Ue(te));return ie.delayMethod==="debounce"?te.delayedScroll=B()(de,ie.delayTime):ie.delayMethod==="throttle"&&(te.delayedScroll=K()(de,ie.delayTime)),te.state={scrollPosition:{x:xe(),y:fe()}},te.baseComponentRef=s().createRef(),te}return W=Y,(se=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window=="undefined"||this.useIntersectionObserver||Z(d().findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window=="undefined"||this.useIntersectionObserver||(this.scrollElement=Z(d().findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window=="undefined"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:xe(),y:fe()}})}},{key:"render",value:function(){var ie=this.props,te=(ie.delayMethod,ie.delayTime,function(ge,Ae){if(ge==null)return{};var Me,Re,ve=function(he,Ie){if(he==null)return{};var $e,st,wt={},dt=Object.keys(he);for(st=0;st<dt.length;st++)$e=dt[st],Ie.indexOf($e)>=0||(wt[$e]=he[$e]);return wt}(ge,Ae);if(Object.getOwnPropertySymbols){var me=Object.getOwnPropertySymbols(ge);for(Re=0;Re<me.length;Re++)Me=me[Re],Ae.indexOf(Me)>=0||Object.prototype.propertyIsEnumerable.call(ge,Me)&&(ve[Me]=ge[Me])}return ve}(ie,le)),de=this.useIntersectionObserver?null:this.state.scrollPosition;return s().createElement(P,Te({forwardRef:this.baseComponentRef,scrollPosition:de},te))}}])&&_e(W.prototype,se),Y}(s().Component);return k.propTypes={delayMethod:a.PropTypes.oneOf(["debounce","throttle"]),delayTime:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool},k.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},k};function ye(P){return(ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}function Ze(P,k){for(var H=0;H<k.length;H++){var W=k[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function Ce(P,k){return(Ce=Object.setPrototypeOf||function(H,W){return H.__proto__=W,H})(P,k)}function it(P,k){if(k&&(ye(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}(P)}function ft(P){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var Be=function(P){(function(q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Y&&Y.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Y&&Ce(q,Y)})(re,P);var k,H,W,se,ue=(W=re,se=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var q,Y=ft(W);if(se){var ie=ft(this).constructor;q=Reflect.construct(Y,arguments,ie)}else q=Y.apply(this,arguments);return it(this,q)});function re(q){return function(Y,ie){if(!(Y instanceof ie))throw new TypeError("Cannot call a class as a function")}(this,re),ue.call(this,q)}return k=re,(H=[{key:"render",value:function(){return s().createElement(M,this.props)}}])&&Ze(k.prototype,H),re}(s().Component);const ot=Le(Be);function Xe(P){return(Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}function Ke(P,k){for(var H=0;H<k.length;H++){var W=k[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function mt(P,k){return(mt=Object.setPrototypeOf||function(H,W){return H.__proto__=W,H})(P,k)}function Pt(P,k){if(k&&(Xe(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gt(P)}function gt(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function vt(P){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var tt=function(P){(function(q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Y&&Y.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Y&&mt(q,Y)})(re,P);var k,H,W,se,ue=(W=re,se=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var q,Y=vt(W);if(se){var ie=vt(this).constructor;q=Reflect.construct(Y,arguments,ie)}else q=Y.apply(this,arguments);return Pt(this,q)});function re(q){var Y;(function(Ae,Me){if(!(Ae instanceof Me))throw new TypeError("Cannot call a class as a function")})(this,re),Y=ue.call(this,q);var ie=q.afterLoad,te=q.beforeLoad,de=q.scrollPosition,ge=q.visibleByDefault;return Y.state={visible:ge},ge&&(te(),ie()),Y.onVisible=Y.onVisible.bind(gt(Y)),Y.isScrollTracked=Boolean(de&&Number.isFinite(de.x)&&de.x>=0&&Number.isFinite(de.y)&&de.y>=0),Y}return k=re,(H=[{key:"componentDidUpdate",value:function(q,Y){Y.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var q=this.props,Y=q.className,ie=q.delayMethod,te=q.delayTime,de=q.height,ge=q.placeholder,Ae=q.scrollPosition,Me=q.style,Re=q.threshold,ve=q.useIntersectionObserver,me=q.width;return this.isScrollTracked||ve&&u()?s().createElement(M,{className:Y,height:de,onVisible:this.onVisible,placeholder:ge,scrollPosition:Ae,style:Me,threshold:Re,useIntersectionObserver:ve,width:me}):s().createElement(ot,{className:Y,delayMethod:ie,delayTime:te,height:de,onVisible:this.onVisible,placeholder:ge,style:Me,threshold:Re,width:me})}}])&&Ke(k.prototype,H),re}(s().Component);tt.propTypes={afterLoad:a.PropTypes.func,beforeLoad:a.PropTypes.func,useIntersectionObserver:a.PropTypes.bool,visibleByDefault:a.PropTypes.bool},tt.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Rt=tt;function kt(P){return(kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(P)}var lt=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function ir(){return(ir=Object.assign||function(P){for(var k=1;k<arguments.length;k++){var H=arguments[k];for(var W in H)Object.prototype.hasOwnProperty.call(H,W)&&(P[W]=H[W])}return P}).apply(this,arguments)}function G(P,k){for(var H=0;H<k.length;H++){var W=k[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(P,W.key,W)}}function Q(P,k){return(Q=Object.setPrototypeOf||function(H,W){return H.__proto__=W,H})(P,k)}function $(P,k){if(k&&(kt(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}(P)}function A(P){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(P)}var N=function(P){(function(q,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Y&&Y.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Y&&Q(q,Y)})(re,P);var k,H,W,se,ue=(W=re,se=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var q,Y=A(W);if(se){var ie=A(this).constructor;q=Reflect.construct(Y,arguments,ie)}else q=Y.apply(this,arguments);return $(this,q)});function re(q){var Y;return function(ie,te){if(!(ie instanceof te))throw new TypeError("Cannot call a class as a function")}(this,re),(Y=ue.call(this,q)).state={loaded:!1},Y}return k=re,(H=[{key:"onImageLoad",value:function(){var q=this;return this.state.loaded?null:function(){q.props.afterLoad(),q.setState({loaded:!0})}}},{key:"getImg",value:function(){var q=this.props,Y=(q.afterLoad,q.beforeLoad,q.delayMethod,q.delayTime,q.effect,q.placeholder,q.placeholderSrc,q.scrollPosition,q.threshold,q.useIntersectionObserver,q.visibleByDefault,q.wrapperClassName,q.wrapperProps,function(ie,te){if(ie==null)return{};var de,ge,Ae=function(Re,ve){if(Re==null)return{};var me,he,Ie={},$e=Object.keys(Re);for(he=0;he<$e.length;he++)me=$e[he],ve.indexOf(me)>=0||(Ie[me]=Re[me]);return Ie}(ie,te);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(ie);for(ge=0;ge<Me.length;ge++)de=Me[ge],te.indexOf(de)>=0||Object.prototype.propertyIsEnumerable.call(ie,de)&&(Ae[de]=ie[de])}return Ae}(q,lt));return s().createElement("img",ir({onLoad:this.onImageLoad()},Y))}},{key:"getLazyLoadImage",value:function(){var q=this.props,Y=q.beforeLoad,ie=q.className,te=q.delayMethod,de=q.delayTime,ge=q.height,Ae=q.placeholder,Me=q.scrollPosition,Re=q.style,ve=q.threshold,me=q.useIntersectionObserver,he=q.visibleByDefault,Ie=q.width;return s().createElement(Rt,{beforeLoad:Y,className:ie,delayMethod:te,delayTime:de,height:ge,placeholder:Ae,scrollPosition:Me,style:Re,threshold:ve,useIntersectionObserver:me,visibleByDefault:he,width:Ie},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(q){var Y=this.props,ie=Y.effect,te=Y.height,de=Y.placeholderSrc,ge=Y.width,Ae=Y.wrapperClassName,Me=Y.wrapperProps,Re=this.state.loaded,ve=Re?" lazy-load-image-loaded":"";return s().createElement("span",ir({className:Ae+" lazy-load-image-background "+ie+ve,style:{backgroundImage:Re||!de?"":"url(".concat(de,")"),backgroundSize:Re||!de?"":"100% 100%",color:"transparent",display:"inline-block",height:te,width:ge}},Me),q)}},{key:"render",value:function(){var q=this.props,Y=q.effect,ie=q.placeholderSrc,te=q.visibleByDefault,de=q.wrapperClassName,ge=q.wrapperProps,Ae=this.getLazyLoadImage();return(Y||ie)&&!te||de||ge?this.getWrappedLazyLoadImage(Ae):Ae}}])&&G(k.prototype,H),re}(s().Component);N.propTypes={afterLoad:a.PropTypes.func,beforeLoad:a.PropTypes.func,delayMethod:a.PropTypes.string,delayTime:a.PropTypes.number,effect:a.PropTypes.string,placeholderSrc:a.PropTypes.string,threshold:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool,visibleByDefault:a.PropTypes.bool,wrapperClassName:a.PropTypes.string,wrapperProps:a.PropTypes.object},N.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const V=N})(),zi.exports=n})();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gc=function(){return Gc=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gc.apply(this,arguments)};function xk(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(h){try{u(n.next(h))}catch(w){a(w)}}function d(h){try{u(n.throw(h))}catch(w){a(w)}}function u(h){h.done?s(h.value):i(h.value).then(l,d)}u((n=n.apply(t,e||[])).next())})}function Sk(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(h){return d([u,h])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Tk=function(){},KS=Tk(),Qd=Object,mi=function(t){return t===KS},vg=function(t){return typeof t=="function"},_k="undefined",bk=function(){return typeof window!=_k},Ck=!bk()||"Deno"in window,By=Ck?J.exports.useEffect:J.exports.useLayoutEffect,Uu=new WeakMap,Ik=0,kp=function(t){var e=typeof t,r=t&&t.constructor,n=r==Date,i,s;if(Qd(t)===t&&!n&&r!=RegExp){if(i=Uu.get(t),i)return i;if(i=++Ik+"~",Uu.set(t,i),r==Array){for(i="@",s=0;s<t.length;s++)i+=kp(t[s])+",";Uu.set(t,i)}if(r==Qd){i="#";for(var a=Qd.keys(t).sort();!mi(s=a.pop());)mi(t[s])||(i+=s+":"+kp(t[s])+",");Uu.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},Lp=function(t){if(vg(t))try{t=t()}catch{t=""}var e=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?kp(t):"";var r=t?"$swr$"+t:"";return[t,e,r]},Ak=function(t){return vg(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},Rk=function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=Ak(r),s=i[0],a=i[1],l=i[2],d=(l.use||[]).concat(e);return t(s,a,Gc(Gc({},l),{use:d}))}},kk="$inf$",Lk=function(t){return Lp(t?t(0,null):null)[0]},Dk=function(t){return function(e,r,n){var i=J.exports.useState({})[1],s=J.exports.useRef(!1),a=J.exports.useRef(),l=n.cache,d=n.initialSize,u=d===void 0?1:d,h=n.revalidateAll,w=h===void 0?!1:h,g=n.persistSize,S=g===void 0?!1:g,C=n.revalidateFirstPage,R=C===void 0?!0:C,O=n.revalidateOnMount,T=O===void 0?!1:O,I=null;try{I=Lk(e)}catch{}var D=null,M=null;I&&(D="$ctx$"+I,M="$len$"+I);var j=J.exports.useCallback(function(){var le=l.get(M);return mi(le)?u:le},[M,u]),B=J.exports.useRef(j());By(function(){if(!s.current){s.current=!0;return}I&&l.set(M,S?B.current:u)},[I]);var z=T&&!s.current,K=t(I?kk+I:null,function(){return xk(void 0,void 0,void 0,function(){var le,Te,_e,We,Ne,Ue,oe,xe,fe,Le,ye,Ze;return Sk(this,function(Ce){switch(Ce.label){case 0:le=l.get(D)||[],Te=le[0],_e=le[1],We=[],Ne=j(),Ue=null,oe=0,Ce.label=1;case 1:return oe<Ne?(xe=Lp(e(oe,Ue)),fe=xe[0],Le=xe[1],fe?(ye=l.get(fe),Ze=w||Te||mi(ye)||R&&!oe&&!mi(a.current)||z||_e&&!mi(_e[oe])&&!n.compare(_e[oe],ye),r&&Ze?[4,r.apply(void 0,Le)]:[3,3]):[3,5]):[3,5];case 2:ye=Ce.sent(),l.set(fe,ye),Ce.label=3;case 3:We.push(ye),Ue=ye,Ce.label=4;case 4:return++oe,[3,1];case 5:return l.delete(D),[2,We]}})})},n);By(function(){a.current=K.data},[K.data]);var ee=J.exports.useCallback(function(){for(var le=[],Te=0;Te<arguments.length;Te++)le[Te]=arguments[Te];var _e=le[0],We=le[1]!==!1;if(!!D){if(We)if(mi(_e))l.set(D,[!0]);else{var Ne=a.current;l.set(D,[!1,Ne])}return le.length?K.mutate(_e,We):K.mutate()}},[D]),Z=function(le){for(var Te=[],_e=null,We=0;We<le;++We){var Ne=Lp(e(We,_e))[0],Ue=Ne?l.get(Ne):KS;if(mi(Ue))return a.current;Te.push(Ue),_e=Ue}return Te},ce=J.exports.useCallback(function(le){if(!!M){var Te;if(vg(le)?Te=le(j()):typeof le=="number"&&(Te=le),typeof Te=="number")return l.set(M,Te),B.current=Te,i({}),ee(Z(Te))}},[M,j,ee]);return{size:j(),setSize:ce,mutate:ee,get error(){return K.error},get data(){return K.data},get isValidating(){return K.isValidating}}}},kf=Rk(Ms,Dk),yg={exports:{}},WS=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},Ok=WS,Ki=Object.prototype.toString;function Eg(t){return Array.isArray(t)}function Dp(t){return typeof t=="undefined"}function Pk(t){return t!==null&&!Dp(t)&&t.constructor!==null&&!Dp(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function qS(t){return Ki.call(t)==="[object ArrayBuffer]"}function Nk(t){return Ki.call(t)==="[object FormData]"}function Mk(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qS(t.buffer),e}function Fk(t){return typeof t=="string"}function Uk(t){return typeof t=="number"}function YS(t){return t!==null&&typeof t=="object"}function oc(t){if(Ki.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Bk(t){return Ki.call(t)==="[object Date]"}function $k(t){return Ki.call(t)==="[object File]"}function Vk(t){return Ki.call(t)==="[object Blob]"}function XS(t){return Ki.call(t)==="[object Function]"}function jk(t){return YS(t)&&XS(t.pipe)}function Gk(t){return Ki.call(t)==="[object URLSearchParams]"}function Hk(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function zk(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function wg(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Eg(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Op(){var t={};function e(i,s){oc(t[s])&&oc(i)?t[s]=Op(t[s],i):oc(i)?t[s]=Op({},i):Eg(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)wg(arguments[r],e);return t}function Kk(t,e,r){return wg(e,function(i,s){r&&typeof i=="function"?t[s]=Ok(i,r):t[s]=i}),t}function Wk(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Wr={isArray:Eg,isArrayBuffer:qS,isBuffer:Pk,isFormData:Nk,isArrayBufferView:Mk,isString:Fk,isNumber:Uk,isObject:YS,isPlainObject:oc,isUndefined:Dp,isDate:Bk,isFile:$k,isBlob:Vk,isFunction:XS,isStream:jk,isURLSearchParams:Gk,isStandardBrowserEnv:zk,forEach:wg,merge:Op,extend:Kk,trim:Hk,stripBOM:Wk},Ys=Wr;function $y(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var QS=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Ys.isURLSearchParams(r))i=r.toString();else{var s=[];Ys.forEach(r,function(d,u){d===null||typeof d=="undefined"||(Ys.isArray(d)?u=u+"[]":d=[d],Ys.forEach(d,function(w){Ys.isDate(w)?w=w.toISOString():Ys.isObject(w)&&(w=JSON.stringify(w)),s.push($y(u)+"="+$y(w))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},qk=Wr;function Lf(){this.handlers=[]}Lf.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Lf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Lf.prototype.forEach=function(e){qk.forEach(this.handlers,function(n){n!==null&&e(n)})};var Yk=Lf,Xk=Wr,Qk=function(e,r){Xk.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},JS=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},ZS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jk=JS,e1=function(e,r,n,i,s){var a=new Error(e);return Jk(a,r,n,i,s)},Zk=e1,eL=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(Zk("Request failed with status code "+n.status,n.config,null,n.request,n))},Bu=Wr,tL=Bu.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,a,l){var d=[];d.push(r+"="+encodeURIComponent(n)),Bu.isNumber(i)&&d.push("expires="+new Date(i).toGMTString()),Bu.isString(s)&&d.push("path="+s),Bu.isString(a)&&d.push("domain="+a),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),rL=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},nL=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},iL=rL,sL=nL,aL=function(e,r){return e&&!iL(r)?sL(e,r):r},Jd=Wr,oL=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],lL=function(e){var r={},n,i,s;return e&&Jd.forEach(e.split(`
`),function(l){if(s=l.indexOf(":"),n=Jd.trim(l.substr(0,s)).toLowerCase(),i=Jd.trim(l.substr(s+1)),n){if(r[n]&&oL.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},Vy=Wr,uL=Vy.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){var l=Vy.isString(a)?i(a):a;return l.protocol===n.protocol&&l.host===n.host}}():function(){return function(){return!0}}();function xg(t){this.message=t}xg.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};xg.prototype.__CANCEL__=!0;var Df=xg,$u=Wr,cL=eL,fL=tL,dL=QS,hL=aL,pL=lL,mL=uL,Zd=e1,gL=ZS,vL=Df,jy=function(e){return new Promise(function(n,i){var s=e.data,a=e.headers,l=e.responseType,d;function u(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}$u.isFormData(s)&&delete a["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(w+":"+g)}var S=hL(e.baseURL,e.url);h.open(e.method.toUpperCase(),dL(S,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function C(){if(!!h){var O="getAllResponseHeaders"in h?pL(h.getAllResponseHeaders()):null,T=!l||l==="text"||l==="json"?h.responseText:h.response,I={data:T,status:h.status,statusText:h.statusText,headers:O,config:e,request:h};cL(function(M){n(M),u()},function(M){i(M),u()},I),h=null}}if("onloadend"in h?h.onloadend=C:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(C)},h.onabort=function(){!h||(i(Zd("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){i(Zd("Network Error",e,null,h)),h=null},h.ontimeout=function(){var T=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",I=e.transitional||gL;e.timeoutErrorMessage&&(T=e.timeoutErrorMessage),i(Zd(T,e,I.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},$u.isStandardBrowserEnv()){var R=(e.withCredentials||mL(S))&&e.xsrfCookieName?fL.read(e.xsrfCookieName):void 0;R&&(a[e.xsrfHeaderName]=R)}"setRequestHeader"in h&&$u.forEach(a,function(T,I){typeof s=="undefined"&&I.toLowerCase()==="content-type"?delete a[I]:h.setRequestHeader(I,T)}),$u.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),l&&l!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(O){!h||(i(!O||O&&O.type?new vL("canceled"):O),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),s||(s=null),h.send(s)})},or=Wr,Gy=Qk,yL=JS,EL=ZS,wL={"Content-Type":"application/x-www-form-urlencoded"};function Hy(t,e){!or.isUndefined(t)&&or.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function xL(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=jy),t}function SL(t,e,r){if(or.isString(t))try{return(e||JSON.parse)(t),or.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Of={transitional:EL,adapter:xL(),transformRequest:[function(e,r){return Gy(r,"Accept"),Gy(r,"Content-Type"),or.isFormData(e)||or.isArrayBuffer(e)||or.isBuffer(e)||or.isStream(e)||or.isFile(e)||or.isBlob(e)?e:or.isArrayBufferView(e)?e.buffer:or.isURLSearchParams(e)?(Hy(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):or.isObject(e)||r&&r["Content-Type"]==="application/json"?(Hy(r,"application/json"),SL(e)):e}],transformResponse:[function(e){var r=this.transitional||Of.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&or.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?yL(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};or.forEach(["delete","get","head"],function(e){Of.headers[e]={}});or.forEach(["post","put","patch"],function(e){Of.headers[e]=or.merge(wL)});var Sg=Of,TL=Wr,_L=Sg,bL=function(e,r,n){var i=this||_L;return TL.forEach(n,function(a){e=a.call(i,e,r)}),e},t1=function(e){return!!(e&&e.__CANCEL__)},zy=Wr,eh=bL,CL=t1,IL=Sg,AL=Df;function th(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new AL("canceled")}var RL=function(e){th(e),e.headers=e.headers||{},e.data=eh.call(e,e.data,e.headers,e.transformRequest),e.headers=zy.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),zy.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||IL.adapter;return r(e).then(function(i){return th(e),i.data=eh.call(e,i.data,i.headers,e.transformResponse),i},function(i){return CL(i)||(th(e),i&&i.response&&(i.response.data=eh.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Xr=Wr,r1=function(e,r){r=r||{};var n={};function i(h,w){return Xr.isPlainObject(h)&&Xr.isPlainObject(w)?Xr.merge(h,w):Xr.isPlainObject(w)?Xr.merge({},w):Xr.isArray(w)?w.slice():w}function s(h){if(Xr.isUndefined(r[h])){if(!Xr.isUndefined(e[h]))return i(void 0,e[h])}else return i(e[h],r[h])}function a(h){if(!Xr.isUndefined(r[h]))return i(void 0,r[h])}function l(h){if(Xr.isUndefined(r[h])){if(!Xr.isUndefined(e[h]))return i(void 0,e[h])}else return i(void 0,r[h])}function d(h){if(h in r)return i(e[h],r[h]);if(h in e)return i(void 0,e[h])}var u={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d};return Xr.forEach(Object.keys(e).concat(Object.keys(r)),function(w){var g=u[w]||s,S=g(w);Xr.isUndefined(S)&&g!==d||(n[w]=S)}),n},n1={version:"0.26.1"},kL=n1.version,Tg={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Tg[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Ky={};Tg.transitional=function(e,r,n){function i(s,a){return"[Axios v"+kL+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,l){if(e===!1)throw new Error(i(a," has been removed"+(r?" in "+r:"")));return r&&!Ky[a]&&(Ky[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,l):!0}};function LL(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var l=t[s],d=l===void 0||a(l,s,t);if(d!==!0)throw new TypeError("option "+s+" must be "+d);continue}if(r!==!0)throw Error("Unknown option "+s)}}var DL={assertOptions:LL,validators:Tg},i1=Wr,OL=QS,Wy=Yk,qy=RL,Pf=r1,s1=DL,Xs=s1.validators;function Fl(t){this.defaults=t,this.interceptors={request:new Wy,response:new Wy}}Fl.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Pf(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&s1.assertOptions(n,{silentJSONParsing:Xs.transitional(Xs.boolean),forcedJSONParsing:Xs.transitional(Xs.boolean),clarifyTimeoutError:Xs.transitional(Xs.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(s=s&&S.synchronous,i.unshift(S.fulfilled,S.rejected))});var a=[];this.interceptors.response.forEach(function(S){a.push(S.fulfilled,S.rejected)});var l;if(!s){var d=[qy,void 0];for(Array.prototype.unshift.apply(d,i),d=d.concat(a),l=Promise.resolve(r);d.length;)l=l.then(d.shift(),d.shift());return l}for(var u=r;i.length;){var h=i.shift(),w=i.shift();try{u=h(u)}catch(g){w(g);break}}try{l=qy(u)}catch(g){return Promise.reject(g)}for(;a.length;)l=l.then(a.shift(),a.shift());return l};Fl.prototype.getUri=function(e){return e=Pf(this.defaults,e),OL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};i1.forEach(["delete","get","head","options"],function(e){Fl.prototype[e]=function(r,n){return this.request(Pf(n||{},{method:e,url:r,data:(n||{}).data}))}});i1.forEach(["post","put","patch"],function(e){Fl.prototype[e]=function(r,n,i){return this.request(Pf(i||{},{method:e,url:r,data:n}))}});var PL=Fl,NL=Df;function Da(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(a){r.subscribe(a),i=a}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new NL(i),e(r.reason))})}Da.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Da.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Da.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Da.source=function(){var e,r=new Da(function(i){e=i});return{token:r,cancel:e}};var ML=Da,FL=function(e){return function(n){return e.apply(null,n)}},UL=Wr,BL=function(e){return UL.isObject(e)&&e.isAxiosError===!0},Yy=Wr,$L=WS,lc=PL,VL=r1,jL=Sg;function a1(t){var e=new lc(t),r=$L(lc.prototype.request,e);return Yy.extend(r,lc.prototype,e),Yy.extend(r,e),r.create=function(i){return a1(VL(t,i))},r}var Gn=a1(jL);Gn.Axios=lc;Gn.Cancel=Df;Gn.CancelToken=ML;Gn.isCancel=t1;Gn.VERSION=n1.version;Gn.all=function(e){return Promise.all(e)};Gn.spread=FL;Gn.isAxiosError=BL;yg.exports=Gn;yg.exports.default=Gn;var GL=yg.exports;const sn=GL.create({baseURL:"https://ga-mobile-api.loklok.tv/cms/app",headers:{lang:"en",versioncode:11,clienttype:"ios_jike_default"}}),HL=async(t,e)=>(await sn.post("search/v1/search",{size:20,params:"",categoryId:t,sort:e})).data.data.searchResults,an=(t,e="",r="")=>t.startsWith("https://graph.facebook.com/")?t:`https://images.weserv.nl/?url=${encodeURIComponent(t)}&w=${e}&h=${r}$fit=outside`,zL=t=>`https://srt-to-vtt.vercel.app?url=${encodeURIComponent(t)}`,xo={0:{width:200,height:100},1:{width:175,height:246}},KL="https://ezexpress.tk/",Ui=({value:t})=>(J.exports.useEffect(()=>{document.title=t},[t]),E.createElement(E.Fragment,null)),WL=({id:t,categoryName:e})=>{var a;const r=(l,d)=>{var u,h;return d&&d.length===0?null:`$id-${((h=(u=d==null?void 0:d.slice(-1))==null?void 0:u[0])==null?void 0:h.sort)||""}`},{data:n,error:i,setSize:s}=kf(r,l=>HL(t,l.split("-").slice(-1)[0]));return i?E.createElement(Bn,null):E.createElement(J.exports.Fragment,null,E.createElement(Ui,{value:`Category ${e} - FilmHot`}),E.createElement(Rf,{dataLength:(n==null?void 0:n.length)||0,next:()=>s(l=>l+1),hasMore:!i&&((a=n==null?void 0:n.slice(-1))==null?void 0:a[0].length)!==0,loader:E.createElement("div",{className:"flex justify-center w-full"},E.createElement("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent animate-spin rounded-full my-10"})),endMessage:E.createElement("p",{className:"text-center mt-6"},"Nothing more to see")},E.createElement("div",{className:"flex justify-center mx-[7vw]"},E.createElement("div",{className:"w-full grid grid-cols-sm md:grid-cols-lg gap-6"},n==null?void 0:n.reduce((l,d)=>(l.push(...d),l),[]).map(l=>E.createElement(St,{title:l.name,to:l.domainType===0?`/movie/${l.id}`:`/tv/${l.id}`,key:l.id,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group"},E.createElement("div",{className:"absolute w-full h-full top-0 left-0 flex flex-col items-stretch"},E.createElement("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300"},E.createElement(zi.exports.LazyLoadImage,{src:an(l.coverVerticalUrl,"250"),effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover"})),E.createElement("div",{className:"flex flex-grow items-center"},E.createElement("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300"},l.name)))))))))},qL=async t=>(await sn.post("search/searchLenovo",{searchKeyWord:t,size:10})).data.data.searchResults,YL=async t=>(await sn.post("search/v1/searchWithKeyWord",{searchKeyWord:t,size:50,sort:"",searchType:""})).data.data.searchResults,XL=t=>{const e=document.createElement("div");return e.innerHTML=t,e.textContent},QL=t=>{const e={year:94608e7,month:2592e6,week:6048e5,day:864e5,hour:36e5,minute:6e4};let r=Date.now()-t;for(const n in e)if(r>=e[n]){const i=Math.floor(r/e[n]);return`${i} ${i===1?n:n+"s"} ago`}return"Just now"},_g=({autoFocus:t})=>{const[e,r]=J.exports.useState(""),[n,i]=J.exports.useState([]),s=J.exports.useRef(null),a=dg();J.exports.useEffect(()=>{s.current&&clearTimeout(s.current),i([]),e.trim()&&(s.current=setTimeout(async()=>{const d=await qL(e.trim());i(d.map(u=>XL(u)))},500))},[e]);const l=d=>{d.preventDefault(),e.trim()&&a(`/search?q=${encodeURIComponent(e.trim())}`)};return E.createElement("div",{className:"relative w-full group"},E.createElement("form",{onSubmit:l,className:"relative"},E.createElement("input",{value:e,onKeyDown:d=>d.stopPropagation(),onKeyUp:d=>d.stopPropagation(),onKeyPress:d=>d.stopPropagation(),onChange:d=>r(d.target.value),className:"w-full bg-transparent outline-none border border-gray-600 rounded-full py-2 pl-4 pr-8",type:"text",placeholder:"Search...",autoFocus:t}),E.createElement("button",{className:"absolute right-2 top-1/2 -translate-y-1/2"},E.createElement("i",{className:"fas fa-search text-xl"}))),n.length>0&&E.createElement("div",{className:"absolute top-full left-0 w-full z-10 bg-dark-lighten rounded overflow-x-hidden overflow-y-auto max-h-[200px] flex-col items-stretch hidden group-focus-within:flex"},n.map((d,u)=>E.createElement(St,{key:u,to:`/search?q=${encodeURIComponent(d)}`},E.createElement("button",{className:`text-left p-2 w-full ${u!==n.length-1?"border-b border-gray-500":""}`},d)))))},Ul=()=>E.createElement("div",{className:"flex justify-between items-center my-7"},E.createElement(St,{className:"flex items-center gap-2",to:"/"},E.createElement("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),E.createElement("span",{className:"text-xl font-medium"},"FilmHot")),E.createElement(St,{className:"block md:hidden",to:"/search"},E.createElement("i",{className:"fas fa-search text-2xl"})),E.createElement("div",{className:"max-w-[500px] hidden md:block"},E.createElement(_g,null))),o1=async()=>(await sn.get("search/list")).data.data,JL=async(t,e,r)=>(await sn.post("search/v1/search",Ws(ts({size:20,params:t},e),{sort:r}))).data.data.searchResults,ZL=()=>{var i,s;const{id:t}=hg(),{data:e,error:r}=Ms("search-config",()=>o1());if(r)return E.createElement(Bn,null);if(!e)return E.createElement("div",{className:"flex flex-grow justify-center items-center"},E.createElement("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent rounded-full animate-spin"}));const n=(s=(i=e[0].screeningItems.find(a=>a.id===5))==null?void 0:i.items.find(a=>a.params===t))==null?void 0:s.name;return n?E.createElement("div",null,E.createElement("div",{className:"mx-[7vw]"},E.createElement(Ul,null),E.createElement("h1",{className:"text-2xl my-6"},'Category "',n,'"')),E.createElement(WL,{id:t,categoryName:n})):E.createElement(Bn,null)},eD=({params:t,configs:e,sectionIndex:r})=>{var l,d;const n=(u,h)=>{var w,g;return h&&h.length===0?null:`explore-${r}-${JSON.stringify(e)}-${((g=(w=h==null?void 0:h.slice(-1))==null?void 0:w[0])==null?void 0:g.sort)||""}`},{data:i,error:s,setSize:a}=kf(n,u=>JL(t,e,u.split("-").slice(-1)[0]),{revalidateFirstPage:!1});return s?E.createElement(Bn,null):E.createElement(Rf,{dataLength:(i==null?void 0:i.length)||0,next:()=>a(u=>u+1),hasMore:!s&&((d=(l=i==null?void 0:i.slice(-1))==null?void 0:l[0])==null?void 0:d.length)!==0,loader:E.createElement("div",{className:"flex justify-center w-full"},E.createElement("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent rounded-full animate-spin my-10"})),endMessage:E.createElement("p",{className:"text-center mt-6"},"Nothing more to see")},E.createElement("div",{className:"w-full grid grid-cols-sm md:grid-cols-lg gap-6"},i==null?void 0:i.reduce((u,h)=>[...u,...h],[]).map(u=>E.createElement(St,{title:u.name,to:u.domainType===0?`/movie/${u.id}`:`/tv/${u.id}`,key:u.id,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group"},E.createElement("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch"},E.createElement("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300"},E.createElement(zi.exports.LazyLoadImage,{src:an(u.coverVerticalUrl,"250"),className:"absolute top-0 left-0 w-full h-full object-cover",effect:"opacity",alt:""})),E.createElement("div",{className:"flex flex-grow items-center"},E.createElement("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300"},u.name)))))))},tD=({config:t,sectionIndex:e})=>{const r={},[n,i]=J.exports.useState(t.screeningItems.reduce((a,l)=>(a[l.items[0].screeningType]=l.items[0].params,a),r)),s=(a,l)=>{const d=JSON.parse(JSON.stringify(n));d[a]=l,i(d)};return E.createElement(J.exports.Fragment,null,E.createElement("div",{className:"flex flex-wrap gap-3 my-6"},t.screeningItems.map((a,l)=>E.createElement("select",{className:"outline-none bg-dark-lighten px-3 py-2 rounded",key:l,value:n[a.items[0].screeningType],onChange:d=>s(a.items[0].screeningType,d.target.value)},a.items.map(d=>E.createElement("option",{className:"outline-none bg-dark-lighten px-3 py-2",key:d.params,value:d.params},d.name))))),E.createElement(eD,{params:t.params,configs:n,sectionIndex:e}))},rD=()=>{const{data:t,error:e}=Ms("search-config",()=>o1()),[r,n]=J.exports.useState(0);return e?E.createElement(Bn,null):E.createElement(J.exports.Fragment,null,E.createElement(Ui,{value:"Explore - FilmHot"}),E.createElement("div",{className:"flex flex-col items-stretch min-h-screen mx-[7vw]"},E.createElement(Ul,null),t?E.createElement("div",{className:"mb-6"},E.createElement("div",{className:"flex gap-3"},t.map((i,s)=>E.createElement("button",{key:s,className:`transition relative after:absolute after:top-[110%] after:left-0 after:w-full after:h-[2px] after:bg-transparent after:rounded after:transition ${r===s?"text-primary after:bg-primary":""}`,onClick:()=>{n(s)}},i.name))),E.createElement(tD,{config:t[r],sectionIndex:r})):E.createElement("div",{className:"flex flex-grow justify-center items-center"},E.createElement("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"}))))};function Xy(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function bg(t={},e={}){Object.keys(e).forEach(r=>{typeof t[r]=="undefined"?t[r]=e[r]:Xy(e[r])&&Xy(t[r])&&Object.keys(e[r]).length>0&&bg(t[r],e[r])})}const l1={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function qr(){const t=typeof document!="undefined"?document:{};return bg(t,l1),t}const nD={document:l1,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout=="undefined"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout!="undefined"&&clearTimeout(t)}};function nr(){const t=typeof window!="undefined"?window:{};return bg(t,nD),t}function iD(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get(){return e},set(r){e.__proto__=r}})}class _i extends Array{constructor(e){typeof e=="number"?super(e):(super(...e||[]),iD(this))}}function Bl(t=[]){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Bl(r)):e.push(r)}),e}function u1(t,e){return Array.prototype.filter.call(t,e)}function sD(t){const e=[];for(let r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function aD(t,e){if(typeof t!="string")return[t];const r=[],n=e.querySelectorAll(t);for(let i=0;i<n.length;i+=1)r.push(n[i]);return r}function Fe(t,e){const r=nr(),n=qr();let i=[];if(!e&&t instanceof _i)return t;if(!t)return new _i(i);if(typeof t=="string"){const s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let a="div";s.indexOf("<li")===0&&(a="ul"),s.indexOf("<tr")===0&&(a="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(a="tr"),s.indexOf("<tbody")===0&&(a="table"),s.indexOf("<option")===0&&(a="select");const l=n.createElement(a);l.innerHTML=s;for(let d=0;d<l.childNodes.length;d+=1)i.push(l.childNodes[d])}else i=aD(t.trim(),e||n)}else if(t.nodeType||t===r||t===n)i.push(t);else if(Array.isArray(t)){if(t instanceof _i)return t;i=t}return new _i(sD(i))}Fe.fn=_i.prototype;function oD(...t){const e=Bl(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...e)}),this}function lD(...t){const e=Bl(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...e)}),this}function uD(...t){const e=Bl(t.map(r=>r.split(" ")));this.forEach(r=>{e.forEach(n=>{r.classList.toggle(n)})})}function cD(...t){const e=Bl(t.map(r=>r.split(" ")));return u1(this,r=>e.filter(n=>r.classList.contains(n)).length>0).length>0}function fD(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(const n in t)this[r][n]=t[n],this[r].setAttribute(n,t[n]);return this}function dD(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function hD(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function pD(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?`${t}ms`:t;return this}function mD(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);function s(u){const h=u.target;if(!h)return;const w=u.target.dom7EventData||[];if(w.indexOf(u)<0&&w.unshift(u),Fe(h).is(r))n.apply(h,w);else{const g=Fe(h).parents();for(let S=0;S<g.length;S+=1)Fe(g[S]).is(r)&&n.apply(g[S],w)}}function a(u){const h=u&&u.target?u.target.dom7EventData||[]:[];h.indexOf(u)<0&&h.unshift(u),n.apply(this,h)}const l=e.split(" ");let d;for(let u=0;u<this.length;u+=1){const h=this[u];if(r)for(d=0;d<l.length;d+=1){const w=l[d];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[w]||(h.dom7LiveListeners[w]=[]),h.dom7LiveListeners[w].push({listener:n,proxyListener:s}),h.addEventListener(w,s,i)}else for(d=0;d<l.length;d+=1){const w=l[d];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[w]||(h.dom7Listeners[w]=[]),h.dom7Listeners[w].push({listener:n,proxyListener:a}),h.addEventListener(w,a,i)}}return this}function gD(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);const s=e.split(" ");for(let a=0;a<s.length;a+=1){const l=s[a];for(let d=0;d<this.length;d+=1){const u=this[d];let h;if(!r&&u.dom7Listeners?h=u.dom7Listeners[l]:r&&u.dom7LiveListeners&&(h=u.dom7LiveListeners[l]),h&&h.length)for(let w=h.length-1;w>=0;w-=1){const g=h[w];n&&g.listener===n||n&&g.listener&&g.listener.dom7proxy&&g.listener.dom7proxy===n?(u.removeEventListener(l,g.proxyListener,i),h.splice(w,1)):n||(u.removeEventListener(l,g.proxyListener,i),h.splice(w,1))}}}return this}function vD(...t){const e=nr(),r=t[0].split(" "),n=t[1];for(let i=0;i<r.length;i+=1){const s=r[i];for(let a=0;a<this.length;a+=1){const l=this[a];if(e.CustomEvent){const d=new e.CustomEvent(s,{detail:n,bubbles:!0,cancelable:!0});l.dom7EventData=t.filter((u,h)=>h>0),l.dispatchEvent(d),l.dom7EventData=[],delete l.dom7EventData}}}return this}function yD(t){const e=this;function r(n){n.target===this&&(t.call(this,n),e.off("transitionend",r))}return t&&e.on("transitionend",r),this}function ED(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function wD(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function xD(){if(this.length>0){const t=nr(),e=qr(),r=this[0],n=r.getBoundingClientRect(),i=e.body,s=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,l=r===t?t.scrollY:r.scrollTop,d=r===t?t.scrollX:r.scrollLeft;return{top:n.top+l-s,left:n.left+d-a}}return null}function SD(){const t=nr();return this[0]?t.getComputedStyle(this[0],null):{}}function TD(t,e){const r=nr();let n;if(arguments.length===1)if(typeof t=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(n=0;n<this.length;n+=1)for(const i in t)this[n].style[i]=t[i];return this}if(arguments.length===2&&typeof t=="string"){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this}function _D(t){return t?(this.forEach((e,r)=>{t.apply(e,[e,r])}),this):this}function bD(t){const e=u1(this,t);return Fe(e)}function CD(t){if(typeof t=="undefined")return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function ID(t){if(typeof t=="undefined")return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function AD(t){const e=nr(),r=qr(),n=this[0];let i,s;if(!n||typeof t=="undefined")return!1;if(typeof t=="string"){if(n.matches)return n.matches(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);for(i=Fe(t),s=0;s<i.length;s+=1)if(i[s]===n)return!0;return!1}if(t===r)return n===r;if(t===e)return n===e;if(t.nodeType||t instanceof _i){for(i=t.nodeType?[t]:t,s=0;s<i.length;s+=1)if(i[s]===n)return!0;return!1}return!1}function RD(){let t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function kD(t){if(typeof t=="undefined")return this;const e=this.length;if(t>e-1)return Fe([]);if(t<0){const r=e+t;return r<0?Fe([]):Fe([this[r]])}return Fe([this[t]])}function LD(...t){let e;const r=qr();for(let n=0;n<t.length;n+=1){e=t[n];for(let i=0;i<this.length;i+=1)if(typeof e=="string"){const s=r.createElement("div");for(s.innerHTML=e;s.firstChild;)this[i].appendChild(s.firstChild)}else if(e instanceof _i)for(let s=0;s<e.length;s+=1)this[i].appendChild(e[s]);else this[i].appendChild(e)}return this}function DD(t){const e=qr();let r,n;for(r=0;r<this.length;r+=1)if(typeof t=="string"){const i=e.createElement("div");for(i.innerHTML=t,n=i.childNodes.length-1;n>=0;n-=1)this[r].insertBefore(i.childNodes[n],this[r].childNodes[0])}else if(t instanceof _i)for(n=0;n<t.length;n+=1)this[r].insertBefore(t[n],this[r].childNodes[0]);else this[r].insertBefore(t,this[r].childNodes[0]);return this}function OD(t){return this.length>0?t?this[0].nextElementSibling&&Fe(this[0].nextElementSibling).is(t)?Fe([this[0].nextElementSibling]):Fe([]):this[0].nextElementSibling?Fe([this[0].nextElementSibling]):Fe([]):Fe([])}function PD(t){const e=[];let r=this[0];if(!r)return Fe([]);for(;r.nextElementSibling;){const n=r.nextElementSibling;t?Fe(n).is(t)&&e.push(n):e.push(n),r=n}return Fe(e)}function ND(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&Fe(e.previousElementSibling).is(t)?Fe([e.previousElementSibling]):Fe([]):e.previousElementSibling?Fe([e.previousElementSibling]):Fe([])}return Fe([])}function MD(t){const e=[];let r=this[0];if(!r)return Fe([]);for(;r.previousElementSibling;){const n=r.previousElementSibling;t?Fe(n).is(t)&&e.push(n):e.push(n),r=n}return Fe(e)}function FD(t){const e=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(t?Fe(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return Fe(e)}function UD(t){const e=[];for(let r=0;r<this.length;r+=1){let n=this[r].parentNode;for(;n;)t?Fe(n).is(t)&&e.push(n):e.push(n),n=n.parentNode}return Fe(e)}function BD(t){let e=this;return typeof t=="undefined"?Fe([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function $D(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].querySelectorAll(t);for(let i=0;i<n.length;i+=1)e.push(n[i])}return Fe(e)}function VD(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].children;for(let i=0;i<n.length;i+=1)(!t||Fe(n[i]).is(t))&&e.push(n[i])}return Fe(e)}function jD(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}const Qy={addClass:oD,removeClass:lD,hasClass:cD,toggleClass:uD,attr:fD,removeAttr:dD,transform:hD,transition:pD,on:mD,off:gD,trigger:vD,transitionEnd:yD,outerWidth:ED,outerHeight:wD,styles:SD,offset:xD,css:TD,each:_D,html:CD,text:ID,is:AD,index:RD,eq:kD,append:LD,prepend:DD,next:OD,nextAll:PD,prev:ND,prevAll:MD,parent:FD,parents:UD,closest:BD,find:$D,children:VD,filter:bD,remove:jD};Object.keys(Qy).forEach(t=>{Object.defineProperty(Fe.fn,t,{value:Qy[t],writable:!0})});function GD(t){const e=t;Object.keys(e).forEach(r=>{try{e[r]=null}catch{}try{delete e[r]}catch{}})}function Pp(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function hl(){return Date.now()}function HD(t){const e=nr();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function zD(t,e){e===void 0&&(e="x");const r=nr();let n,i,s;const a=HD(t);return r.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(l=>l.replace(",",".")).join(", ")),s=new r.WebKitCSSMatrix(i==="none"?"":i)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?i=s.m41:n.length===16?i=parseFloat(n[12]):i=parseFloat(n[4])),e==="y"&&(r.WebKitCSSMatrix?i=s.m42:n.length===16?i=parseFloat(n[13]):i=parseFloat(n[5])),i||0}function Vu(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function KD(t){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function Jr(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const n=r<0||arguments.length<=r?void 0:arguments[r];if(n!=null&&!KD(n)){const i=Object.keys(Object(n)).filter(s=>e.indexOf(s)<0);for(let s=0,a=i.length;s<a;s+=1){const l=i[s],d=Object.getOwnPropertyDescriptor(n,l);d!==void 0&&d.enumerable&&(Vu(t[l])&&Vu(n[l])?n[l].__swiper__?t[l]=n[l]:Jr(t[l],n[l]):!Vu(t[l])&&Vu(n[l])?(t[l]={},n[l].__swiper__?t[l]=n[l]:Jr(t[l],n[l])):t[l]=n[l])}}}return t}function ju(t,e,r){t.style.setProperty(e,r)}function c1(t){let{swiper:e,targetPosition:r,side:n}=t;const i=nr(),s=-e.translate;let a=null,l;const d=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const u=r>s?"next":"prev",h=(g,S)=>u==="next"&&g>=S||u==="prev"&&g<=S,w=()=>{l=new Date().getTime(),a===null&&(a=l);const g=Math.max(Math.min((l-a)/d,1),0),S=.5-Math.cos(g*Math.PI)/2;let C=s+S*(r-s);if(h(C,r)&&(C=r),e.wrapperEl.scrollTo({[n]:C}),h(C,r)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:C})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(w)};w()}let rh;function WD(){const t=nr(),e=qr();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let n=!1;try{const i=Object.defineProperty({},"passive",{get(){n=!0}});t.addEventListener("testPassiveListener",null,i)}catch{}return n}(),gestures:function(){return"ongesturestart"in t}()}}function f1(){return rh||(rh=WD()),rh}let nh;function qD(t){let{userAgent:e}=t===void 0?{}:t;const r=f1(),n=nr(),i=n.navigator.platform,s=e||n.navigator.userAgent,a={ios:!1,android:!1},l=n.screen.width,d=n.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let h=s.match(/(iPad).*OS\s([\d_]+)/);const w=s.match(/(iPod)(.*OS\s([\d_]+))?/),g=!h&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),S=i==="Win32";let C=i==="MacIntel";const R=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&C&&r.touch&&R.indexOf(`${l}x${d}`)>=0&&(h=s.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),C=!1),u&&!S&&(a.os="android",a.android=!0),(h||g||w)&&(a.os="ios",a.ios=!0),a}function YD(t){return t===void 0&&(t={}),nh||(nh=qD(t)),nh}let ih;function XD(){const t=nr();function e(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function QD(){return ih||(ih=XD()),ih}function JD(t){let{swiper:e,on:r,emit:n}=t;const i=nr();let s=null,a=null;const l=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},d=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(w=>{a=i.requestAnimationFrame(()=>{const{width:g,height:S}=e;let C=g,R=S;w.forEach(O=>{let{contentBoxSize:T,contentRect:I,target:D}=O;D&&D!==e.el||(C=I?I.width:(T[0]||T).inlineSize,R=I?I.height:(T[0]||T).blockSize)}),(C!==g||R!==S)&&l()})}),s.observe(e.el))},u=()=>{a&&i.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},h=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};r("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver!="undefined"){d();return}i.addEventListener("resize",l),i.addEventListener("orientationchange",h)}),r("destroy",()=>{u(),i.removeEventListener("resize",l),i.removeEventListener("orientationchange",h)})}function ZD(t){let{swiper:e,extendParams:r,on:n,emit:i}=t;const s=[],a=nr(),l=function(h,w){w===void 0&&(w={});const g=a.MutationObserver||a.WebkitMutationObserver,S=new g(C=>{if(C.length===1){i("observerUpdate",C[0]);return}const R=function(){i("observerUpdate",C[0])};a.requestAnimationFrame?a.requestAnimationFrame(R):a.setTimeout(R,0)});S.observe(h,{attributes:typeof w.attributes=="undefined"?!0:w.attributes,childList:typeof w.childList=="undefined"?!0:w.childList,characterData:typeof w.characterData=="undefined"?!0:w.characterData}),s.push(S)},d=()=>{if(!!e.params.observer){if(e.params.observeParents){const h=e.$el.parents();for(let w=0;w<h.length;w+=1)l(h[w])}l(e.$el[0],{childList:e.params.observeSlideChildren}),l(e.$wrapperEl[0],{attributes:!1})}},u=()=>{s.forEach(h=>{h.disconnect()}),s.splice(0,s.length)};r({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",d),n("destroy",u)}var eO={on(t,e,r){const n=this;if(typeof e!="function")return n;const i=r?"unshift":"push";return t.split(" ").forEach(s=>{n.eventsListeners[s]||(n.eventsListeners[s]=[]),n.eventsListeners[s][i](e)}),n},once(t,e,r){const n=this;if(typeof e!="function")return n;function i(){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];e.apply(n,a)}return i.__emitterProxy=e,n.on(t,i,r)},onAny(t,e){const r=this;if(typeof t!="function")return r;const n=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[n](t),r},offAny(t){const e=this;if(!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return r.eventsListeners&&t.split(" ").forEach(n=>{typeof e=="undefined"?r.eventsListeners[n]=[]:r.eventsListeners[n]&&r.eventsListeners[n].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&r.eventsListeners[n].splice(s,1)})}),r},emit(){const t=this;if(!t.eventsListeners)return t;let e,r,n;for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],r=s.slice(1,s.length),n=t):(e=s[0].events,r=s[0].data,n=s[0].context||t),r.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(d=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(n,[d,...r])}),t.eventsListeners&&t.eventsListeners[d]&&t.eventsListeners[d].forEach(u=>{u.apply(n,r)})}),t}};function tO(){const t=this;let e,r;const n=t.$el;typeof t.params.width!="undefined"&&t.params.width!==null?e=t.params.width:e=n[0].clientWidth,typeof t.params.height!="undefined"&&t.params.height!==null?r=t.params.height:r=n[0].clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),r=r-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function rO(){const t=this;function e(Z){return t.isHorizontal()?Z:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Z]}function r(Z,ce){return parseFloat(Z.getPropertyValue(e(ce))||0)}const n=t.params,{$wrapperEl:i,size:s,rtlTranslate:a,wrongRTL:l}=t,d=t.virtual&&n.virtual.enabled,u=d?t.virtual.slides.length:t.slides.length,h=i.children(`.${t.params.slideClass}`),w=d?t.virtual.slides.length:h.length;let g=[];const S=[],C=[];let R=n.slidesOffsetBefore;typeof R=="function"&&(R=n.slidesOffsetBefore.call(t));let O=n.slidesOffsetAfter;typeof O=="function"&&(O=n.slidesOffsetAfter.call(t));const T=t.snapGrid.length,I=t.slidesGrid.length;let D=n.spaceBetween,M=-R,j=0,B=0;if(typeof s=="undefined")return;typeof D=="string"&&D.indexOf("%")>=0&&(D=parseFloat(D.replace("%",""))/100*s),t.virtualSize=-D,a?h.css({marginLeft:"",marginBottom:"",marginTop:""}):h.css({marginRight:"",marginBottom:"",marginTop:""}),n.centeredSlides&&n.cssMode&&(ju(t.wrapperEl,"--swiper-centered-offset-before",""),ju(t.wrapperEl,"--swiper-centered-offset-after",""));const z=n.grid&&n.grid.rows>1&&t.grid;z&&t.grid.initSlides(w);let K;const ee=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(Z=>typeof n.breakpoints[Z].slidesPerView!="undefined").length>0;for(let Z=0;Z<w;Z+=1){K=0;const ce=h.eq(Z);if(z&&t.grid.updateSlide(Z,ce,w,e),ce.css("display")!=="none"){if(n.slidesPerView==="auto"){ee&&(h[Z].style[e("width")]="");const le=getComputedStyle(ce[0]),Te=ce[0].style.transform,_e=ce[0].style.webkitTransform;if(Te&&(ce[0].style.transform="none"),_e&&(ce[0].style.webkitTransform="none"),n.roundLengths)K=t.isHorizontal()?ce.outerWidth(!0):ce.outerHeight(!0);else{const We=r(le,"width"),Ne=r(le,"padding-left"),Ue=r(le,"padding-right"),oe=r(le,"margin-left"),xe=r(le,"margin-right"),fe=le.getPropertyValue("box-sizing");if(fe&&fe==="border-box")K=We+oe+xe;else{const{clientWidth:Le,offsetWidth:ye}=ce[0];K=We+Ne+Ue+oe+xe+(ye-Le)}}Te&&(ce[0].style.transform=Te),_e&&(ce[0].style.webkitTransform=_e),n.roundLengths&&(K=Math.floor(K))}else K=(s-(n.slidesPerView-1)*D)/n.slidesPerView,n.roundLengths&&(K=Math.floor(K)),h[Z]&&(h[Z].style[e("width")]=`${K}px`);h[Z]&&(h[Z].swiperSlideSize=K),C.push(K),n.centeredSlides?(M=M+K/2+j/2+D,j===0&&Z!==0&&(M=M-s/2-D),Z===0&&(M=M-s/2-D),Math.abs(M)<1/1e3&&(M=0),n.roundLengths&&(M=Math.floor(M)),B%n.slidesPerGroup===0&&g.push(M),S.push(M)):(n.roundLengths&&(M=Math.floor(M)),(B-Math.min(t.params.slidesPerGroupSkip,B))%t.params.slidesPerGroup===0&&g.push(M),S.push(M),M=M+K+D),t.virtualSize+=K+D,j=K,B+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+O,a&&l&&(n.effect==="slide"||n.effect==="coverflow")&&i.css({width:`${t.virtualSize+n.spaceBetween}px`}),n.setWrapperSize&&i.css({[e("width")]:`${t.virtualSize+n.spaceBetween}px`}),z&&t.grid.updateWrapperSize(K,g,e),!n.centeredSlides){const Z=[];for(let ce=0;ce<g.length;ce+=1){let le=g[ce];n.roundLengths&&(le=Math.floor(le)),g[ce]<=t.virtualSize-s&&Z.push(le)}g=Z,Math.floor(t.virtualSize-s)-Math.floor(g[g.length-1])>1&&g.push(t.virtualSize-s)}if(g.length===0&&(g=[0]),n.spaceBetween!==0){const Z=t.isHorizontal()&&a?"marginLeft":e("marginRight");h.filter((ce,le)=>n.cssMode?le!==h.length-1:!0).css({[Z]:`${D}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let Z=0;C.forEach(le=>{Z+=le+(n.spaceBetween?n.spaceBetween:0)}),Z-=n.spaceBetween;const ce=Z-s;g=g.map(le=>le<0?-R:le>ce?ce+O:le)}if(n.centerInsufficientSlides){let Z=0;if(C.forEach(ce=>{Z+=ce+(n.spaceBetween?n.spaceBetween:0)}),Z-=n.spaceBetween,Z<s){const ce=(s-Z)/2;g.forEach((le,Te)=>{g[Te]=le-ce}),S.forEach((le,Te)=>{S[Te]=le+ce})}}if(Object.assign(t,{slides:h,snapGrid:g,slidesGrid:S,slidesSizesGrid:C}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){ju(t.wrapperEl,"--swiper-centered-offset-before",`${-g[0]}px`),ju(t.wrapperEl,"--swiper-centered-offset-after",`${t.size/2-C[C.length-1]/2}px`);const Z=-t.snapGrid[0],ce=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(le=>le+Z),t.slidesGrid=t.slidesGrid.map(le=>le+ce)}if(w!==u&&t.emit("slidesLengthChange"),g.length!==T&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),S.length!==I&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),!d&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const Z=`${n.containerModifierClass}backface-hidden`,ce=t.$el.hasClass(Z);w<=n.maxBackfaceHiddenSlides?ce||t.$el.addClass(Z):ce&&t.$el.removeClass(Z)}}function nO(t){const e=this,r=[],n=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=l=>n?e.slides.filter(d=>parseInt(d.getAttribute("data-swiper-slide-index"),10)===l)[0]:e.slides.eq(l)[0];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)e.visibleSlides.each(l=>{r.push(l)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const l=e.activeIndex+s;if(l>e.slides.length&&!n)break;r.push(a(l))}else r.push(a(e.activeIndex));for(s=0;s<r.length;s+=1)if(typeof r[s]!="undefined"){const l=r[s].offsetHeight;i=l>i?l:i}(i||i===0)&&e.$wrapperEl.css("height",`${i}px`)}function iO(){const t=this,e=t.slides;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function sO(t){t===void 0&&(t=this&&this.translate||0);const e=this,r=e.params,{slides:n,rtlTranslate:i,snapGrid:s}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset=="undefined"&&e.updateSlidesOffset();let a=-t;i&&(a=t),n.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let l=0;l<n.length;l+=1){const d=n[l];let u=d.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(u-=n[0].swiperSlideOffset);const h=(a+(r.centeredSlides?e.minTranslate():0)-u)/(d.swiperSlideSize+r.spaceBetween),w=(a-s[0]+(r.centeredSlides?e.minTranslate():0)-u)/(d.swiperSlideSize+r.spaceBetween),g=-(a-u),S=g+e.slidesSizesGrid[l];(g>=0&&g<e.size-1||S>1&&S<=e.size||g<=0&&S>=e.size)&&(e.visibleSlides.push(d),e.visibleSlidesIndexes.push(l),n.eq(l).addClass(r.slideVisibleClass)),d.progress=i?-h:h,d.originalProgress=i?-w:w}e.visibleSlides=Fe(e.visibleSlides)}function aO(t){const e=this;if(typeof t=="undefined"){const u=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*u||0}const r=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:a}=e;const l=s,d=a;n===0?(i=0,s=!0,a=!0):(i=(t-e.minTranslate())/n,s=i<=0,a=i>=1),Object.assign(e,{progress:i,isBeginning:s,isEnd:a}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),a&&!d&&e.emit("reachEnd toEdge"),(l&&!s||d&&!a)&&e.emit("fromEdge"),e.emit("progress",i)}function oO(){const t=this,{slides:e,params:r,$wrapperEl:n,activeIndex:i,realIndex:s}=t,a=t.virtual&&r.virtual.enabled;e.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let l;a?l=t.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${i}"]`):l=e.eq(i),l.addClass(r.slideActiveClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(r.slideDuplicateActiveClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(r.slideDuplicateActiveClass));let d=l.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&d.length===0&&(d=e.eq(0),d.addClass(r.slideNextClass));let u=l.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&u.length===0&&(u=e.eq(-1),u.addClass(r.slidePrevClass)),r.loop&&(d.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${d.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${d.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),u.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()}function lO(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:n,snapGrid:i,params:s,activeIndex:a,realIndex:l,snapIndex:d}=e;let u=t,h;if(typeof u=="undefined"){for(let g=0;g<n.length;g+=1)typeof n[g+1]!="undefined"?r>=n[g]&&r<n[g+1]-(n[g+1]-n[g])/2?u=g:r>=n[g]&&r<n[g+1]&&(u=g+1):r>=n[g]&&(u=g);s.normalizeSlideIndex&&(u<0||typeof u=="undefined")&&(u=0)}if(i.indexOf(r)>=0)h=i.indexOf(r);else{const g=Math.min(s.slidesPerGroupSkip,u);h=g+Math.floor((u-g)/s.slidesPerGroup)}if(h>=i.length&&(h=i.length-1),u===a){h!==d&&(e.snapIndex=h,e.emit("snapIndexChange"));return}const w=parseInt(e.slides.eq(u).attr("data-swiper-slide-index")||u,10);Object.assign(e,{snapIndex:h,realIndex:w,previousIndex:a,activeIndex:u}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),l!==w&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function uO(t){const e=this,r=e.params,n=Fe(t).closest(`.${r.slideClass}`)[0];let i=!1,s;if(n){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===n){i=!0,s=a;break}}if(n&&i)e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(Fe(n).attr("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var cO={updateSize:tO,updateSlides:rO,updateAutoHeight:nO,updateSlidesOffset:iO,updateSlidesProgress:sO,updateProgress:aO,updateSlidesClasses:oO,updateActiveIndex:lO,updateClickedSlide:uO};function fO(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:r,rtlTranslate:n,translate:i,$wrapperEl:s}=e;if(r.virtualTranslate)return n?-i:i;if(r.cssMode)return i;let a=zD(s[0],t);return n&&(a=-a),a||0}function dO(t,e){const r=this,{rtlTranslate:n,params:i,$wrapperEl:s,wrapperEl:a,progress:l}=r;let d=0,u=0;const h=0;r.isHorizontal()?d=n?-t:t:u=t,i.roundLengths&&(d=Math.floor(d),u=Math.floor(u)),i.cssMode?a[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-d:-u:i.virtualTranslate||s.transform(`translate3d(${d}px, ${u}px, ${h}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?d:u;let w;const g=r.maxTranslate()-r.minTranslate();g===0?w=0:w=(t-r.minTranslate())/g,w!==l&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function hO(){return-this.snapGrid[0]}function pO(){return-this.snapGrid[this.snapGrid.length-1]}function mO(t,e,r,n,i){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0),n===void 0&&(n=!0);const s=this,{params:a,wrapperEl:l}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const d=s.minTranslate(),u=s.maxTranslate();let h;if(n&&t>d?h=d:n&&t<u?h=u:h=t,s.updateProgress(h),a.cssMode){const w=s.isHorizontal();if(e===0)l[w?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return c1({swiper:s,targetPosition:-h,side:w?"left":"top"}),!0;l.scrollTo({[w?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(h),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(h),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(g){!s||s.destroyed||g.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,r&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}var gO={getTranslate:fO,setTranslate:dO,minTranslate:hO,maxTranslate:pO,translateTo:mO};function vO(t,e){const r=this;r.params.cssMode||r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function d1(t){let{swiper:e,runCallbacks:r,direction:n,step:i}=t;const{activeIndex:s,previousIndex:a}=e;let l=n;if(l||(s>a?l="next":s<a?l="prev":l="reset"),e.emit(`transition${i}`),r&&s!==a){if(l==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),l==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function yO(t,e){t===void 0&&(t=!0);const r=this,{params:n}=r;n.cssMode||(n.autoHeight&&r.updateAutoHeight(),d1({swiper:r,runCallbacks:t,direction:e,step:"Start"}))}function EO(t,e){t===void 0&&(t=!0);const r=this,{params:n}=r;r.animating=!1,!n.cssMode&&(r.setTransition(0),d1({swiper:r,runCallbacks:t,direction:e,step:"End"}))}var wO={setTransition:vO,transitionStart:yO,transitionEnd:EO};function xO(t,e,r,n,i){if(t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0),typeof t!="number"&&typeof t!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if(typeof t=="string"){const D=parseInt(t,10);if(!isFinite(D))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=D}const s=this;let a=t;a<0&&(a=0);const{params:l,snapGrid:d,slidesGrid:u,previousIndex:h,activeIndex:w,rtlTranslate:g,wrapperEl:S,enabled:C}=s;if(s.animating&&l.preventInteractionOnTransition||!C&&!n&&!i)return!1;const R=Math.min(s.params.slidesPerGroupSkip,a);let O=R+Math.floor((a-R)/s.params.slidesPerGroup);O>=d.length&&(O=d.length-1),(w||l.initialSlide||0)===(h||0)&&r&&s.emit("beforeSlideChangeStart");const T=-d[O];if(s.updateProgress(T),l.normalizeSlideIndex)for(let D=0;D<u.length;D+=1){const M=-Math.floor(T*100),j=Math.floor(u[D]*100),B=Math.floor(u[D+1]*100);typeof u[D+1]!="undefined"?M>=j&&M<B-(B-j)/2?a=D:M>=j&&M<B&&(a=D+1):M>=j&&(a=D)}if(s.initialized&&a!==w&&(!s.allowSlideNext&&T<s.translate&&T<s.minTranslate()||!s.allowSlidePrev&&T>s.translate&&T>s.maxTranslate()&&(w||0)!==a))return!1;let I;if(a>w?I="next":a<w?I="prev":I="reset",g&&-T===s.translate||!g&&T===s.translate)return s.updateActiveIndex(a),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),l.effect!=="slide"&&s.setTranslate(T),I!=="reset"&&(s.transitionStart(r,I),s.transitionEnd(r,I)),!1;if(l.cssMode){const D=s.isHorizontal(),M=g?T:-T;if(e===0){const j=s.virtual&&s.params.virtual.enabled;j&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),S[D?"scrollLeft":"scrollTop"]=M,j&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1})}else{if(!s.support.smoothScroll)return c1({swiper:s,targetPosition:M,side:D?"left":"top"}),!0;S.scrollTo({[D?"left":"top"]:M,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(T),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,n),s.transitionStart(r,I),e===0?s.transitionEnd(r,I):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(M){!s||s.destroyed||M.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(r,I))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0}function SO(t,e,r,n){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0);const i=this;let s=t;return i.params.loop&&(s+=i.loopedSlides),i.slideTo(s,e,r,n)}function TO(t,e,r){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);const n=this,{animating:i,enabled:s,params:a}=n;if(!s)return n;let l=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(l=Math.max(n.slidesPerViewDynamic("current",!0),1));const d=n.activeIndex<a.slidesPerGroupSkip?1:l;if(a.loop){if(i&&a.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return a.rewind&&n.isEnd?n.slideTo(0,t,e,r):n.slideTo(n.activeIndex+d,t,e,r)}function _O(t,e,r){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);const n=this,{params:i,animating:s,snapGrid:a,slidesGrid:l,rtlTranslate:d,enabled:u}=n;if(!u)return n;if(i.loop){if(s&&i.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}const h=d?n.translate:-n.translate;function w(O){return O<0?-Math.floor(Math.abs(O)):Math.floor(O)}const g=w(h),S=a.map(O=>w(O));let C=a[S.indexOf(g)-1];if(typeof C=="undefined"&&i.cssMode){let O;a.forEach((T,I)=>{g>=T&&(O=I)}),typeof O!="undefined"&&(C=a[O>0?O-1:O])}let R=0;if(typeof C!="undefined"&&(R=l.indexOf(C),R<0&&(R=n.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(R=R-n.slidesPerViewDynamic("previous",!0)+1,R=Math.max(R,0))),i.rewind&&n.isBeginning){const O=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(O,t,e,r)}return n.slideTo(R,t,e,r)}function bO(t,e,r){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);const n=this;return n.slideTo(n.activeIndex,t,e,r)}function CO(t,e,r,n){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0),n===void 0&&(n=.5);const i=this;let s=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,s),l=a+Math.floor((s-a)/i.params.slidesPerGroup),d=i.rtlTranslate?i.translate:-i.translate;if(d>=i.snapGrid[l]){const u=i.snapGrid[l],h=i.snapGrid[l+1];d-u>(h-u)*n&&(s+=i.params.slidesPerGroup)}else{const u=i.snapGrid[l-1],h=i.snapGrid[l];d-u<=(h-u)*n&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,r)}function IO(){const t=this,{params:e,$wrapperEl:r}=t,n=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;if(e.loop){if(t.animating)return;s=parseInt(Fe(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-n/2||i>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${s}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Pp(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-n?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${s}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Pp(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var AO={slideTo:xO,slideToLoop:SO,slideNext:TO,slidePrev:_O,slideReset:bO,slideToClosest:CO,slideToClickedSlide:IO};function RO(){const t=this,e=qr(),{params:r,$wrapperEl:n}=t,i=n.children().length>0?Fe(n.children()[0].parentNode):n;i.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let s=i.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const d=r.slidesPerGroup-s.length%r.slidesPerGroup;if(d!==r.slidesPerGroup){for(let u=0;u<d;u+=1){const h=Fe(e.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);i.append(h)}s=i.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=s.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>s.length&&(t.loopedSlides=s.length);const a=[],l=[];s.each((d,u)=>{const h=Fe(d);u<t.loopedSlides&&l.push(d),u<s.length&&u>=s.length-t.loopedSlides&&a.push(d),h.attr("data-swiper-slide-index",u)});for(let d=0;d<l.length;d+=1)i.append(Fe(l[d].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let d=a.length-1;d>=0;d-=1)i.prepend(Fe(a[d].cloneNode(!0)).addClass(r.slideDuplicateClass))}function kO(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:r,loopedSlides:n,allowSlidePrev:i,allowSlideNext:s,snapGrid:a,rtlTranslate:l}=t;let d;t.allowSlidePrev=!0,t.allowSlideNext=!0;const h=-a[e]-t.getTranslate();e<n?(d=r.length-n*3+e,d+=n,t.slideTo(d,0,!1,!0)&&h!==0&&t.setTranslate((l?-t.translate:t.translate)-h)):e>=r.length-n&&(d=-r.length+e+n,d+=n,t.slideTo(d,0,!1,!0)&&h!==0&&t.setTranslate((l?-t.translate:t.translate)-h)),t.allowSlidePrev=i,t.allowSlideNext=s,t.emit("loopFix")}function LO(){const t=this,{$wrapperEl:e,params:r,slides:n}=t;e.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}var DO={loopCreate:RO,loopFix:kO,loopDestroy:LO};function OO(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;r.style.cursor="move",r.style.cursor=t?"grabbing":"grab"}function PO(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var NO={setGrabCursor:OO,unsetGrabCursor:PO};function MO(t,e){e===void 0&&(e=this);function r(n){return!n||n===qr()||n===nr()?null:(n.assignedSlot&&(n=n.assignedSlot),n.closest(t)||r(n.getRootNode().host))}return r(e)}function FO(t){const e=this,r=qr(),n=nr(),i=e.touchEventsData,{params:s,touches:a,enabled:l}=e;if(!l||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let d=t;d.originalEvent&&(d=d.originalEvent);let u=Fe(d.target);if(s.touchEventsTarget==="wrapper"&&!u.closest(e.wrapperEl).length||(i.isTouchEvent=d.type==="touchstart",!i.isTouchEvent&&"which"in d&&d.which===3)||!i.isTouchEvent&&"button"in d&&d.button>0||i.isTouched&&i.isMoved)return;!!s.noSwipingClass&&s.noSwipingClass!==""&&d.target&&d.target.shadowRoot&&t.path&&t.path[0]&&(u=Fe(t.path[0]));const w=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,g=!!(d.target&&d.target.shadowRoot);if(s.noSwiping&&(g?MO(w,d.target):u.closest(w)[0])){e.allowClick=!0;return}if(s.swipeHandler&&!u.closest(s.swipeHandler)[0])return;a.currentX=d.type==="touchstart"?d.targetTouches[0].pageX:d.pageX,a.currentY=d.type==="touchstart"?d.targetTouches[0].pageY:d.pageY;const S=a.currentX,C=a.currentY,R=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,O=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(R&&(S<=O||S>=n.innerWidth-O))if(R==="prevent")t.preventDefault();else return;if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=S,a.startY=C,i.touchStartTime=hl(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1),d.type!=="touchstart"){let T=!0;u.is(i.focusableElements)&&(T=!1,u[0].nodeName==="SELECT"&&(i.isTouched=!1)),r.activeElement&&Fe(r.activeElement).is(i.focusableElements)&&r.activeElement!==u[0]&&r.activeElement.blur();const I=T&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||I)&&!u[0].isContentEditable&&d.preventDefault()}e.params.freeMode&&e.params.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",d)}function UO(t){const e=qr(),r=this,n=r.touchEventsData,{params:i,touches:s,rtlTranslate:a,enabled:l}=r;if(!l)return;let d=t;if(d.originalEvent&&(d=d.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",d);return}if(n.isTouchEvent&&d.type!=="touchmove")return;const u=d.type==="touchmove"&&d.targetTouches&&(d.targetTouches[0]||d.changedTouches[0]),h=d.type==="touchmove"?u.pageX:d.pageX,w=d.type==="touchmove"?u.pageY:d.pageY;if(d.preventedByNestedSwiper){s.startX=h,s.startY=w;return}if(!r.allowTouchMove){Fe(d.target).is(n.focusableElements)||(r.allowClick=!1),n.isTouched&&(Object.assign(s,{startX:h,startY:w,currentX:h,currentY:w}),n.touchStartTime=hl());return}if(n.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop){if(r.isVertical()){if(w<s.startY&&r.translate<=r.maxTranslate()||w>s.startY&&r.translate>=r.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(h<s.startX&&r.translate<=r.maxTranslate()||h>s.startX&&r.translate>=r.minTranslate())return}if(n.isTouchEvent&&e.activeElement&&d.target===e.activeElement&&Fe(d.target).is(n.focusableElements)){n.isMoved=!0,r.allowClick=!1;return}if(n.allowTouchCallbacks&&r.emit("touchMove",d),d.targetTouches&&d.targetTouches.length>1)return;s.currentX=h,s.currentY=w;const g=s.currentX-s.startX,S=s.currentY-s.startY;if(r.params.threshold&&Math.sqrt(g**2+S**2)<r.params.threshold)return;if(typeof n.isScrolling=="undefined"){let T;r.isHorizontal()&&s.currentY===s.startY||r.isVertical()&&s.currentX===s.startX?n.isScrolling=!1:g*g+S*S>=25&&(T=Math.atan2(Math.abs(S),Math.abs(g))*180/Math.PI,n.isScrolling=r.isHorizontal()?T>i.touchAngle:90-T>i.touchAngle)}if(n.isScrolling&&r.emit("touchMoveOpposite",d),typeof n.startMoving=="undefined"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(n.startMoving=!0),n.isScrolling){n.isTouched=!1;return}if(!n.startMoving)return;r.allowClick=!1,!i.cssMode&&d.cancelable&&d.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&d.stopPropagation(),n.isMoved||(i.loop&&!i.cssMode&&r.loopFix(),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,i.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",d)),r.emit("sliderMove",d),n.isMoved=!0;let C=r.isHorizontal()?g:S;s.diff=C,C*=i.touchRatio,a&&(C=-C),r.swipeDirection=C>0?"prev":"next",n.currentTranslate=C+n.startTranslate;let R=!0,O=i.resistanceRatio;if(i.touchReleaseOnEdges&&(O=0),C>0&&n.currentTranslate>r.minTranslate()?(R=!1,i.resistance&&(n.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+n.startTranslate+C)**O)):C<0&&n.currentTranslate<r.maxTranslate()&&(R=!1,i.resistance&&(n.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-n.startTranslate-C)**O)),R&&(d.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(n.currentTranslate=n.startTranslate),i.threshold>0)if(Math.abs(C)>i.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,n.currentTranslate=n.startTranslate,s.diff=r.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{n.currentTranslate=n.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&r.freeMode||i.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&i.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}function BO(t){const e=this,r=e.touchEventsData,{params:n,touches:i,rtlTranslate:s,slidesGrid:a,enabled:l}=e;if(!l)return;let d=t;if(d.originalEvent&&(d=d.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",d),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&n.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}n.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=hl(),h=u-r.touchStartTime;if(e.allowClick){const I=d.path||d.composedPath&&d.composedPath();e.updateClickedSlide(I&&I[0]||d.target),e.emit("tap click",d),h<300&&u-r.lastClickTime<300&&e.emit("doubleTap doubleClick",d)}if(r.lastClickTime=hl(),Pp(()=>{e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||i.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let w;if(n.followFinger?w=s?e.translate:-e.translate:w=-r.currentTranslate,n.cssMode)return;if(e.params.freeMode&&n.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:w});return}let g=0,S=e.slidesSizesGrid[0];for(let I=0;I<a.length;I+=I<n.slidesPerGroupSkip?1:n.slidesPerGroup){const D=I<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;typeof a[I+D]!="undefined"?w>=a[I]&&w<a[I+D]&&(g=I,S=a[I+D]-a[I]):w>=a[I]&&(g=I,S=a[a.length-1]-a[a.length-2])}let C=null,R=null;n.rewind&&(e.isBeginning?R=e.params.virtual&&e.params.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(C=0));const O=(w-a[g])/S,T=g<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(h>n.longSwipesMs){if(!n.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(O>=n.longSwipesRatio?e.slideTo(n.rewind&&e.isEnd?C:g+T):e.slideTo(g)),e.swipeDirection==="prev"&&(O>1-n.longSwipesRatio?e.slideTo(g+T):R!==null&&O<0&&Math.abs(O)>n.longSwipesRatio?e.slideTo(R):e.slideTo(g))}else{if(!n.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(d.target===e.navigation.nextEl||d.target===e.navigation.prevEl)?d.target===e.navigation.nextEl?e.slideTo(g+T):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(C!==null?C:g+T),e.swipeDirection==="prev"&&e.slideTo(R!==null?R:g))}}function Jy(){const t=this,{params:e,el:r}=t;if(r&&r.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:i,snapGrid:s}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=i,t.allowSlideNext=n,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function $O(t){const e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function VO(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:n}=t;if(!n)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let Zy=!1;function jO(){}const h1=(t,e)=>{const r=qr(),{params:n,touchEvents:i,el:s,wrapperEl:a,device:l,support:d}=t,u=!!n.nested,h=e==="on"?"addEventListener":"removeEventListener",w=e;if(!d.touch)s[h](i.start,t.onTouchStart,!1),r[h](i.move,t.onTouchMove,u),r[h](i.end,t.onTouchEnd,!1);else{const g=i.start==="touchstart"&&d.passiveListener&&n.passiveListeners?{passive:!0,capture:!1}:!1;s[h](i.start,t.onTouchStart,g),s[h](i.move,t.onTouchMove,d.passiveListener?{passive:!1,capture:u}:u),s[h](i.end,t.onTouchEnd,g),i.cancel&&s[h](i.cancel,t.onTouchEnd,g)}(n.preventClicks||n.preventClicksPropagation)&&s[h]("click",t.onClick,!0),n.cssMode&&a[h]("scroll",t.onScroll),n.updateOnWindowResize?t[w](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",Jy,!0):t[w]("observerUpdate",Jy,!0)};function GO(){const t=this,e=qr(),{params:r,support:n}=t;t.onTouchStart=FO.bind(t),t.onTouchMove=UO.bind(t),t.onTouchEnd=BO.bind(t),r.cssMode&&(t.onScroll=VO.bind(t)),t.onClick=$O.bind(t),n.touch&&!Zy&&(e.addEventListener("touchstart",jO),Zy=!0),h1(t,"on")}function HO(){h1(this,"off")}var zO={attachEvents:GO,detachEvents:HO};const eE=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function KO(){const t=this,{activeIndex:e,initialized:r,loopedSlides:n=0,params:i,$el:s}=t,a=i.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=t.getBreakpoint(a,t.params.breakpointsBase,t.el);if(!l||t.currentBreakpoint===l)return;const u=(l in a?a[l]:void 0)||t.originalParams,h=eE(t,i),w=eE(t,u),g=i.enabled;h&&!w?(s.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!h&&w&&(s.addClass(`${i.containerModifierClass}grid`),(u.grid.fill&&u.grid.fill==="column"||!u.grid.fill&&i.grid.fill==="column")&&s.addClass(`${i.containerModifierClass}grid-column`),t.emitContainerClasses());const S=u.direction&&u.direction!==i.direction,C=i.loop&&(u.slidesPerView!==i.slidesPerView||S);S&&r&&t.changeDirection(),Jr(t.params,u);const R=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),g&&!R?t.disable():!g&&R&&t.enable(),t.currentBreakpoint=l,t.emit("_beforeBreakpoint",u),C&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-n+t.loopedSlides,0,!1)),t.emit("breakpoint",u)}function WO(t,e,r){if(e===void 0&&(e="window"),!t||e==="container"&&!r)return;let n=!1;const i=nr(),s=e==="window"?i.innerHeight:r.clientHeight,a=Object.keys(t).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const d=parseFloat(l.substr(1));return{value:s*d,point:l}}return{value:l,point:l}});a.sort((l,d)=>parseInt(l.value,10)-parseInt(d.value,10));for(let l=0;l<a.length;l+=1){const{point:d,value:u}=a[l];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(n=d):u<=r.clientWidth&&(n=d)}return n||"max"}var qO={setBreakpoint:KO,getBreakpoint:WO};function YO(t,e){const r=[];return t.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(i=>{n[i]&&r.push(e+i)}):typeof n=="string"&&r.push(e+n)}),r}function XO(){const t=this,{classNames:e,params:r,rtl:n,$el:i,device:s,support:a}=t,l=YO(["initialized",r.direction,{"pointer-events":!a.touch},{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:n},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides}],r.containerModifierClass);e.push(...l),i.addClass([...e].join(" ")),t.emitContainerClasses()}function QO(){const t=this,{$el:e,classNames:r}=t;e.removeClass(r.join(" ")),t.emitContainerClasses()}var JO={addClasses:XO,removeClasses:QO};function ZO(t,e,r,n,i,s){const a=nr();let l;function d(){s&&s()}!Fe(t).parent("picture")[0]&&(!t.complete||!i)&&e?(l=new a.Image,l.onload=d,l.onerror=d,n&&(l.sizes=n),r&&(l.srcset=r),e&&(l.src=e)):d()}function eP(){const t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t=="undefined"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(let r=0;r<t.imagesToLoad.length;r+=1){const n=t.imagesToLoad[r];t.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,e)}}var tP={loadImage:ZO,preloadImages:eP};function rP(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:n}=r;if(n){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+n*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;r.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),r.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var nP={checkOverflow:rP},tE={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function iP(t,e){return function(n){n===void 0&&(n={});const i=Object.keys(n)[0],s=n[i];if(typeof s!="object"||s===null){Jr(e,n);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in s)){Jr(e,n);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),Jr(e,n)}}const sh={eventsEmitter:eO,update:cO,translate:gO,transition:wO,slide:AO,loop:DO,grabCursor:NO,events:zO,breakpoints:qO,checkOverflow:nP,classes:JO,images:tP},ah={};class Ar{constructor(){let e,r;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];if(i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?r=i[0]:[e,r]=i,r||(r={}),r=Jr({},r),e&&!r.el&&(r.el=e),r.el&&Fe(r.el).length>1){const u=[];return Fe(r.el).each(h=>{const w=Jr({},r,{el:h});u.push(new Ar(w))}),u}const a=this;a.__swiper__=!0,a.support=f1(),a.device=YD({userAgent:r.userAgent}),a.browser=QD(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],r.modules&&Array.isArray(r.modules)&&a.modules.push(...r.modules);const l={};a.modules.forEach(u=>{u({swiper:a,extendParams:iP(r,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const d=Jr({},tE,l);return a.params=Jr({},d,ah,r),a.originalParams=Jr({},a.params),a.passedParams=Jr({},r),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),a.$=Fe,Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:Fe(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEvents:function(){const h=["touchstart","touchmove","touchend","touchcancel"],w=["pointerdown","pointermove","pointerup"];return a.touchEventsTouch={start:h[0],move:h[1],end:h[2],cancel:h[3]},a.touchEventsDesktop={start:w[0],move:w[1],end:w[2]},a.support.touch||!a.params.simulateTouch?a.touchEventsTouch:a.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:hl(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;!e.enabled||(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,r){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),a=(n.maxTranslate()-i)*e+i;n.translateTo(a,typeof r=="undefined"?0:r),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",r.join(" "))}getSlideClasses(e){const r=this;return e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=[];e.slides.each(n=>{const i=e.getSlideClasses(n);r.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)}),e.emit("_slideClasses",r)}slidesPerViewDynamic(e,r){e===void 0&&(e="current"),r===void 0&&(r=!1);const n=this,{params:i,slides:s,slidesGrid:a,slidesSizesGrid:l,size:d,activeIndex:u}=n;let h=1;if(i.centeredSlides){let w=s[u].swiperSlideSize,g;for(let S=u+1;S<s.length;S+=1)s[S]&&!g&&(w+=s[S].swiperSlideSize,h+=1,w>d&&(g=!0));for(let S=u-1;S>=0;S-=1)s[S]&&!g&&(w+=s[S].swiperSlideSize,h+=1,w>d&&(g=!0))}else if(e==="current")for(let w=u+1;w<s.length;w+=1)(r?a[w]+l[w]-a[u]<d:a[w]-a[u]<d)&&(h+=1);else for(let w=u-1;w>=0;w-=1)a[u]-a[w]<d&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:r,params:n}=e;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const a=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||i()),n.watchOverflow&&r!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,r){r===void 0&&(r=!0);const n=this,i=n.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(n.$el.removeClass(`${n.params.containerModifierClass}${i}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each(s=>{e==="vertical"?s.style.width="":s.style.height=""}),n.emit("changeDirection"),r&&n.update()),n}mount(e){const r=this;if(r.mounted)return!0;const n=Fe(e||r.params.el);if(e=n[0],!e)return!1;e.swiper=r;const i=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const l=Fe(e.shadowRoot.querySelector(i()));return l.children=d=>n.children(d),l}return n.children(i())})();if(a.length===0&&r.params.createElements){const d=qr().createElement("div");a=Fe(d),d.className=r.params.wrapperClass,n.append(d),n.children(`.${r.params.slideClass}`).each(u=>{a.append(u)})}return Object.assign(r,{$el:n,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl"),wrongRTL:a.css("display")==="-webkit-box"}),!0}init(e){const r=this;return r.initialized||r.mount(e)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(e,r){e===void 0&&(e=!0),r===void 0&&(r=!0);const n=this,{params:i,$el:s,$wrapperEl:a,slides:l}=n;return typeof n.params=="undefined"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),r&&(n.removeClasses(),s.removeAttr("style"),a.removeAttr("style"),l&&l.length&&l.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(d=>{n.off(d)}),e!==!1&&(n.$el[0].swiper=null,GD(n)),n.destroyed=!0),null}static extendDefaults(e){Jr(ah,e)}static get extendedDefaults(){return ah}static get defaults(){return tE}static installModule(e){Ar.prototype.__modules__||(Ar.prototype.__modules__=[]);const r=Ar.prototype.__modules__;typeof e=="function"&&r.indexOf(e)<0&&r.push(e)}static use(e){return Array.isArray(e)?(e.forEach(r=>Ar.installModule(r)),Ar):(Ar.installModule(e),Ar)}}Object.keys(sh).forEach(t=>{Object.keys(sh[t]).forEach(e=>{Ar.prototype[e]=sh[t][e]})});Ar.use([JD,ZD]);function sP(t,e,r,n){const i=qr();return t.params.createElements&&Object.keys(n).forEach(s=>{if(!r[s]&&r.auto===!0){let a=t.$el.children(`.${n[s]}`)[0];a||(a=i.createElement("div"),a.className=n[s],t.$el.append(a)),r[s]=a,e[s]=a}}),r}function Cg(t){let{swiper:e,extendParams:r,on:n,emit:i}=t;r({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}}),e.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function s(g){let S;return g&&(S=Fe(g),e.params.uniqueNavElements&&typeof g=="string"&&S.length>1&&e.$el.find(g).length===1&&(S=e.$el.find(g))),S}function a(g,S){const C=e.params.navigation;g&&g.length>0&&(g[S?"addClass":"removeClass"](C.disabledClass),g[0]&&g[0].tagName==="BUTTON"&&(g[0].disabled=S),e.params.watchOverflow&&e.enabled&&g[e.isLocked?"addClass":"removeClass"](C.lockClass))}function l(){if(e.params.loop)return;const{$nextEl:g,$prevEl:S}=e.navigation;a(S,e.isBeginning&&!e.params.rewind),a(g,e.isEnd&&!e.params.rewind)}function d(g){g.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&e.slidePrev()}function u(g){g.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&e.slideNext()}function h(){const g=e.params.navigation;if(e.params.navigation=sP(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;const S=s(g.nextEl),C=s(g.prevEl);S&&S.length>0&&S.on("click",u),C&&C.length>0&&C.on("click",d),Object.assign(e.navigation,{$nextEl:S,nextEl:S&&S[0],$prevEl:C,prevEl:C&&C[0]}),e.enabled||(S&&S.addClass(g.lockClass),C&&C.addClass(g.lockClass))}function w(){const{$nextEl:g,$prevEl:S}=e.navigation;g&&g.length&&(g.off("click",u),g.removeClass(e.params.navigation.disabledClass)),S&&S.length&&(S.off("click",d),S.removeClass(e.params.navigation.disabledClass))}n("init",()=>{h(),l()}),n("toEdge fromEdge lock unlock",()=>{l()}),n("destroy",()=>{w()}),n("enable disable",()=>{const{$nextEl:g,$prevEl:S}=e.navigation;g&&g[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),S&&S[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)}),n("click",(g,S)=>{const{$nextEl:C,$prevEl:R}=e.navigation,O=S.target;if(e.params.navigation.hideOnClick&&!Fe(O).is(R)&&!Fe(O).is(C)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===O||e.pagination.el.contains(O)))return;let T;C?T=C.hasClass(e.params.navigation.hiddenClass):R&&(T=R.hasClass(e.params.navigation.hiddenClass)),i(T===!0?"navigationShow":"navigationHide"),C&&C.toggleClass(e.params.navigation.hiddenClass),R&&R.toggleClass(e.params.navigation.hiddenClass)}}),Object.assign(e.navigation,{update:l,init:h,destroy:w})}function Ts(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function bi(t,e){const r=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>r.indexOf(n)<0).forEach(n=>{typeof t[n]=="undefined"?t[n]=e[n]:Ts(e[n])&&Ts(t[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?t[n]=e[n]:bi(t[n],e[n]):t[n]=e[n]})}function p1(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl=="undefined"&&typeof t.navigation.prevEl=="undefined"}function m1(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el=="undefined"}function g1(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el=="undefined"}function v1(t){t===void 0&&(t="");const e=t.split(" ").map(n=>n.trim()).filter(n=>!!n),r=[];return e.forEach(n=>{r.indexOf(n)<0&&r.push(n)}),r.join(" ")}const y1=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function aP(t){t===void 0&&(t={});const e={on:{}},r={},n={};bi(e,Ar.defaults),bi(e,Ar.extendedDefaults),e._emitClasses=!0,e.init=!1;const i={},s=y1.map(a=>a.replace(/_/,""));return Object.keys(t).forEach(a=>{s.indexOf(a)>=0?Ts(t[a])?(e[a]={},n[a]={},bi(e[a],t[a]),bi(n[a],t[a])):(e[a]=t[a],n[a]=t[a]):a.search(/on[A-Z]/)===0&&typeof t[a]=="function"?r[`${a[2].toLowerCase()}${a.substr(3)}`]=t[a]:i[a]=t[a]}),["navigation","pagination","scrollbar"].forEach(a=>{e[a]===!0&&(e[a]={}),e[a]===!1&&delete e[a]}),{params:e,passedParams:n,rest:i,events:r}}function oP(t,e){let{el:r,nextEl:n,prevEl:i,paginationEl:s,scrollbarEl:a,swiper:l}=t;p1(e)&&n&&i&&(l.params.navigation.nextEl=n,l.originalParams.navigation.nextEl=n,l.params.navigation.prevEl=i,l.originalParams.navigation.prevEl=i),m1(e)&&s&&(l.params.pagination.el=s,l.originalParams.pagination.el=s),g1(e)&&a&&(l.params.scrollbar.el=a,l.originalParams.scrollbar.el=a),l.init(r)}function E1(t,e){let r=e.slidesPerView;if(e.breakpoints){const i=Ar.prototype.getBreakpoint(e.breakpoints),s=i in e.breakpoints?e.breakpoints[i]:void 0;s&&s.slidesPerView&&(r=s.slidesPerView)}let n=Math.ceil(parseFloat(e.loopedSlides||r,10));return n+=e.loopAdditionalSlides,n>t.length&&(n=t.length),n}function lP(t,e,r){const n=e.map((d,u)=>E.cloneElement(d,{swiper:t,"data-swiper-slide-index":u}));function i(d,u,h){return E.cloneElement(d,{key:`${d.key}-duplicate-${u}-${h}`,className:`${d.props.className||""} ${r.slideDuplicateClass}`})}if(r.loopFillGroupWithBlank){const d=r.slidesPerGroup-n.length%r.slidesPerGroup;if(d!==r.slidesPerGroup)for(let u=0;u<d;u+=1){const h=E.createElement("div",{className:`${r.slideClass} ${r.slideBlankClass}`});n.push(h)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=n.length);const s=E1(n,r),a=[],l=[];return n.forEach((d,u)=>{u<s&&l.push(i(d,u,"prepend")),u<n.length&&u>=n.length-s&&a.push(i(d,u,"append"))}),t&&(t.loopedSlides=s),[...a,...n,...l]}function uP(t,e,r,n){const i=[];if(!e)return i;const s=u=>{i.indexOf(u)<0&&i.push(u)},a=n.map(u=>u.key),l=r.map(u=>u.key);return a.join("")!==l.join("")&&s("children"),n.length!==r.length&&s("children"),y1.filter(u=>u[0]==="_").map(u=>u.replace(/_/,"")).forEach(u=>{if(u in t&&u in e)if(Ts(t[u])&&Ts(e[u])){const h=Object.keys(t[u]),w=Object.keys(e[u]);h.length!==w.length?s(u):(h.forEach(g=>{t[u][g]!==e[u][g]&&s(u)}),w.forEach(g=>{t[u][g]!==e[u][g]&&s(u)}))}else t[u]!==e[u]&&s(u)}),i}function w1(t){const e=[];return E.Children.toArray(t).forEach(r=>{r.type&&r.type.displayName==="SwiperSlide"?e.push(r):r.props&&r.props.children&&w1(r.props.children).forEach(n=>e.push(n))}),e}function cP(t){const e=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return E.Children.toArray(t).forEach(n=>{if(n.type&&n.type.displayName==="SwiperSlide")e.push(n);else if(n.props&&n.props.slot&&r[n.props.slot])r[n.props.slot].push(n);else if(n.props&&n.props.children){const i=w1(n.props.children);i.length>0?i.forEach(s=>e.push(s)):r["container-end"].push(n)}else r["container-end"].push(n)}),{slides:e,slots:r}}function fP(t){let{swiper:e,slides:r,passedParams:n,changedParams:i,nextEl:s,prevEl:a,scrollbarEl:l,paginationEl:d}=t;const u=i.filter(B=>B!=="children"&&B!=="direction"),{params:h,pagination:w,navigation:g,scrollbar:S,virtual:C,thumbs:R}=e;let O,T,I,D,M;i.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&h.thumbs&&!h.thumbs.swiper&&(O=!0),i.includes("controller")&&n.controller&&n.controller.control&&h.controller&&!h.controller.control&&(T=!0),i.includes("pagination")&&n.pagination&&(n.pagination.el||d)&&(h.pagination||h.pagination===!1)&&w&&!w.el&&(I=!0),i.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||l)&&(h.scrollbar||h.scrollbar===!1)&&S&&!S.el&&(D=!0),i.includes("navigation")&&n.navigation&&(n.navigation.prevEl||a)&&(n.navigation.nextEl||s)&&(h.navigation||h.navigation===!1)&&g&&!g.prevEl&&!g.nextEl&&(M=!0);const j=B=>{!e[B]||(e[B].destroy(),B==="navigation"?(h[B].prevEl=void 0,h[B].nextEl=void 0,e[B].prevEl=void 0,e[B].nextEl=void 0):(h[B].el=void 0,e[B].el=void 0))};u.forEach(B=>{if(Ts(h[B])&&Ts(n[B]))bi(h[B],n[B]);else{const z=n[B];(z===!0||z===!1)&&(B==="navigation"||B==="pagination"||B==="scrollbar")?z===!1&&j(B):h[B]=n[B]}}),u.includes("controller")&&!T&&e.controller&&e.controller.control&&h.controller&&h.controller.control&&(e.controller.control=h.controller.control),i.includes("children")&&C&&h.virtual.enabled?(C.slides=r,C.update(!0)):i.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),O&&R.init()&&R.update(!0),T&&(e.controller.control=h.controller.control),I&&(d&&(h.pagination.el=d),w.init(),w.render(),w.update()),D&&(l&&(h.scrollbar.el=l),S.init(),S.updateSize(),S.setTranslate()),M&&(s&&(h.navigation.nextEl=s),a&&(h.navigation.prevEl=a),g.init(),g.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),i.includes("direction")&&e.changeDirection(n.direction,!1),e.update()}function dP(t){!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())}function hP(t,e,r){if(!r)return null;const n=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return e.filter((i,s)=>s>=r.from&&s<=r.to).map(i=>E.cloneElement(i,{swiper:t,style:n}))}function jo(t,e){return typeof window=="undefined"?J.exports.useEffect(t,e):J.exports.useLayoutEffect(t,e)}const pP=J.exports.createContext(null),mP=J.exports.createContext(null);function Np(){return Np=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Np.apply(this,arguments)}const Nf=J.exports.forwardRef(function(t,e){let xe=t===void 0?{}:t,{className:r,tag:n="div",wrapperTag:i="div",children:s,onSwiper:a}=xe,l=co(xe,["className","tag","wrapperTag","children","onSwiper"]),d=!1;const[u,h]=J.exports.useState("swiper"),[w,g]=J.exports.useState(null),[S,C]=J.exports.useState(!1),R=J.exports.useRef(!1),O=J.exports.useRef(null),T=J.exports.useRef(null),I=J.exports.useRef(null),D=J.exports.useRef(null),M=J.exports.useRef(null),j=J.exports.useRef(null),B=J.exports.useRef(null),z=J.exports.useRef(null),{params:K,passedParams:ee,rest:Z,events:ce}=aP(l),{slides:le,slots:Te}=cP(s),_e=()=>{C(!S)};Object.assign(K.on,{_containerClasses(fe,Le){h(Le)}});const We=()=>{if(Object.assign(K.on,ce),d=!0,T.current=new Ar(K),T.current.loopCreate=()=>{},T.current.loopDestroy=()=>{},K.loop&&(T.current.loopedSlides=E1(le,K)),T.current.virtual&&T.current.params.virtual.enabled){T.current.virtual.slides=le;const fe={cache:!1,slides:le,renderExternal:g,renderExternalUpdate:!1};bi(T.current.params.virtual,fe),bi(T.current.originalParams.virtual,fe)}};O.current||We(),T.current&&T.current.on("_beforeBreakpoint",_e);const Ne=()=>{d||!ce||!T.current||Object.keys(ce).forEach(fe=>{T.current.on(fe,ce[fe])})},Ue=()=>{!ce||!T.current||Object.keys(ce).forEach(fe=>{T.current.off(fe,ce[fe])})};J.exports.useEffect(()=>()=>{T.current&&T.current.off("_beforeBreakpoint",_e)}),J.exports.useEffect(()=>{!R.current&&T.current&&(T.current.emitSlidesClasses(),R.current=!0)}),jo(()=>{if(e&&(e.current=O.current),!!O.current)return T.current.destroyed&&We(),oP({el:O.current,nextEl:M.current,prevEl:j.current,paginationEl:B.current,scrollbarEl:z.current,swiper:T.current},K),a&&a(T.current),()=>{T.current&&!T.current.destroyed&&T.current.destroy(!0,!1)}},[]),jo(()=>{Ne();const fe=uP(ee,I.current,le,D.current);return I.current=ee,D.current=le,fe.length&&T.current&&!T.current.destroyed&&fP({swiper:T.current,slides:le,passedParams:ee,changedParams:fe,nextEl:M.current,prevEl:j.current,scrollbarEl:z.current,paginationEl:B.current}),()=>{Ue()}}),jo(()=>{dP(T.current)},[w]);function oe(){return K.virtual?hP(T.current,le,w):!K.loop||T.current&&T.current.destroyed?le.map(fe=>E.cloneElement(fe,{swiper:T.current})):lP(T.current,le,K)}return E.createElement(n,Np({ref:O,className:v1(`${u}${r?` ${r}`:""}`)},Z),E.createElement(mP.Provider,{value:T.current},Te["container-start"],p1(K)&&E.createElement(E.Fragment,null,E.createElement("div",{ref:j,className:"swiper-button-prev"}),E.createElement("div",{ref:M,className:"swiper-button-next"})),g1(K)&&E.createElement("div",{ref:z,className:"swiper-scrollbar"}),m1(K)&&E.createElement("div",{ref:B,className:"swiper-pagination"}),E.createElement(i,{className:"swiper-wrapper"},Te["wrapper-start"],oe(),Te["wrapper-end"]),Te["container-end"]))});Nf.displayName="Swiper";function Mp(){return Mp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mp.apply(this,arguments)}const Mf=J.exports.forwardRef(function(t,e){let R=t===void 0?{}:t,{tag:r="div",children:n,className:i="",swiper:s,zoom:a,virtualIndex:l}=R,d=co(R,["tag","children","className","swiper","zoom","virtualIndex"]);const u=J.exports.useRef(null),[h,w]=J.exports.useState("swiper-slide");function g(O,T,I){T===u.current&&w(I)}jo(()=>{if(e&&(e.current=u.current),!(!u.current||!s)){if(s.destroyed){h!=="swiper-slide"&&w("swiper-slide");return}return s.on("_slideClass",g),()=>{!s||s.off("_slideClass",g)}}}),jo(()=>{s&&u.current&&w(s.getSlideClasses(u.current))},[s]);const S={isActive:h.indexOf("swiper-slide-active")>=0||h.indexOf("swiper-slide-duplicate-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isDuplicate:h.indexOf("swiper-slide-duplicate")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0||h.indexOf("swiper-slide-duplicate-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0||h.indexOf("swiper-slide-duplicate-next")>=0},C=()=>typeof n=="function"?n(S):n;return E.createElement(r,Mp({ref:u,className:v1(`${h}${i?` ${i}`:""}`),"data-swiper-slide-index":l},d),E.createElement(pP.Provider,{value:S},a?E.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},C()):C()))});Mf.displayName="SwiperSlide";const gP=({images:t})=>E.createElement(Nf,{className:"rounded-2xl overflow-hidden",modules:[Cg],navigation:!0,loop:!0,slidesPerView:1},t.map(e=>E.createElement(Mf,{key:e.image},E.createElement(St,{to:e.link},E.createElement("div",{className:"relative w-full h-0 pb-[42%]"},E.createElement(zi.exports.LazyLoadImage,{className:"absolute top-0 left-0 w-full h-full object-cover opacity-75",src:an(e.image,"900"),effect:"opacity",alt:""}),E.createElement("h1",{className:"scale-100 absolute left-[7%] bottom-[10%] text-xl md:text-3xl max-w-[86%] whitespace-nowrap overflow-hidden text-ellipsis"},e.title)))))),vP=({images:t,coverType:e})=>E.createElement(Nf,{modules:[Cg],navigation:!0,slidesPerView:"auto",slidesPerGroupAuto:!0,spaceBetween:30,observer:!0,observeParents:!0},t.map(r=>E.createElement(Mf,{style:{width:xo[e||1].width},key:r.image},E.createElement(St,{to:r.link},E.createElement("div",{className:"rounded-lg overflow-hidden bg-dark-lighten group"},E.createElement(zi.exports.LazyLoadImage,{style:{width:xo[e||1].width,height:xo[e||1].height},className:"group-hover:brightness-75 transition duration-300 object-cover",src:r.image,width:xo[e||1].width,height:xo[e||1].height,effect:"opacity",alt:""}),E.createElement("h1",{className:"group-hover:text-primary transition duration-300 pb-1 px-2 m-0 text-lg max-w-full whitespace-nowrap overflow-hidden text-ellipsis"},r.title))))));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},yP=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],l=t[r++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},S1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,d=i+2<t.length,u=d?t[i+2]:0,h=s>>2,w=(s&3)<<4|l>>4;let g=(l&15)<<2|u>>6,S=u&63;d||(S=64,a||(g=64)),n.push(r[h],r[w],r[g],r[S])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const w=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||w==null)throw Error();const g=s<<2|l>>4;if(n.push(g),u!==64){const S=l<<4&240|u>>2;if(n.push(S),w!==64){const C=u<<6&192|w;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},EP=function(t){const e=x1(t);return S1.encodeByteArray(e,!0)},T1=function(t){return EP(t).replace(/\./g,"")},wP=function(t){try{return S1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _1(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function b1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function C1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SP(){return er().indexOf("Electron/")>=0}function I1(){const t=er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TP(){return er().indexOf("MSAppHost/")>=0}function _P(){return typeof indexedDB=="object"}function bP(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="FirebaseError";class Fs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=CP,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$l.prototype.create)}}class $l{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?IP(s,n):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Fs(i,l,n)}}function IP(t,e){return t.replace(AP,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const AP=/\{\$([^}]+)}/g;function RP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hc(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(rE(s)&&rE(a)){if(!Hc(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function rE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function kP(t,e){const r=new LP(t,e);return r.subscribe.bind(r)}class LP{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");DP(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=oh),i.error===void 0&&(i.error=oh),i.complete===void 0&&(i.complete=oh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console!="undefined"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DP(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function oh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t){return t&&t._delegate?t._delegate:t}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t,e){return new Promise((r,n)=>{t.onsuccess=i=>{r(i.target.result)},t.onerror=i=>{var s;n(`${e}: ${(s=i.target.error)===null||s===void 0?void 0:s.message}`)}})}class nE{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,r){return new A1(this._db.transaction.call(this._db,e,r))}createObjectStore(e,r){return new R1(this._db.createObjectStore(e,r))}close(){this._db.close()}}class A1{constructor(e){this._transaction=e,this.complete=new Promise((r,n)=>{this._transaction.oncomplete=function(){r()},this._transaction.onerror=()=>{n(this._transaction.error)},this._transaction.onabort=()=>{n(this._transaction.error)}})}objectStore(e){return new R1(this._transaction.objectStore(e))}}class R1{constructor(e){this._store=e}index(e){return new iE(this._store.index(e))}createIndex(e,r,n){return new iE(this._store.createIndex(e,r,n))}get(e){const r=this._store.get(e);return Io(r,"Error reading from IndexedDB")}put(e,r){const n=this._store.put(e,r);return Io(n,"Error writing to IndexedDB")}delete(e){const r=this._store.delete(e);return Io(r,"Error deleting from IndexedDB")}clear(){const e=this._store.clear();return Io(e,"Error clearing IndexedDB object store")}}class iE{constructor(e){this._index=e}get(e){const r=this._index.get(e);return Io(r,"Error reading from IndexedDB")}}function OP(t,e,r){return new Promise((n,i)=>{try{const s=indexedDB.open(t,e);s.onsuccess=a=>{n(new nE(a.target.result))},s.onerror=a=>{var l;i(`Error opening indexedDB: ${(l=a.target.error)===null||l===void 0?void 0:l.message}`)},s.onupgradeneeded=a=>{r(new nE(s.result),a.oldVersion,a.newVersion,new A1(s.transaction))}}catch(s){i(`Error opening indexedDB: ${s.message}`)}})}class _s{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new xP;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MP(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(!!n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:NP(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NP(t){return t===is?void 0:t}function MP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new PP(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));const UP={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},BP=yt.INFO,$P={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},VP=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=$P[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ig{constructor(e){this.name=e,this._logLevel=BP,this._logHandler=VP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(GP(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function GP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fp="@firebase/app",sE="0.7.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=new Ig("@firebase/app"),HP="@firebase/app-compat",zP="@firebase/analytics-compat",KP="@firebase/analytics",WP="@firebase/app-check-compat",qP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",QP="@firebase/database",JP="@firebase/database-compat",ZP="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",rN="@firebase/installations-compat",nN="@firebase/messaging",iN="@firebase/messaging-compat",sN="@firebase/performance",aN="@firebase/performance-compat",oN="@firebase/remote-config",lN="@firebase/remote-config-compat",uN="@firebase/storage",cN="@firebase/storage-compat",fN="@firebase/firestore",dN="@firebase/firestore-compat",hN="firebase",pN="9.6.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="[DEFAULT]",mN={[Fp]:"fire-core",[HP]:"fire-core-compat",[KP]:"fire-analytics",[zP]:"fire-analytics-compat",[qP]:"fire-app-check",[WP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[QP]:"fire-rtdb",[JP]:"fire-rtdb-compat",[ZP]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[rN]:"fire-iid-compat",[nN]:"fire-fcm",[iN]:"fire-fcm-compat",[sN]:"fire-perf",[aN]:"fire-perf-compat",[oN]:"fire-rc",[lN]:"fire-rc-compat",[uN]:"fire-gcs",[cN]:"fire-gcs-compat",[fN]:"fire-fst",[dN]:"fire-fst-compat","fire-js":"fire-js",[hN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,Up=new Map;function gN(t,e){try{t.container.addComponent(e)}catch(r){Ag.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Oa(t){const e=t.name;if(Up.has(e))return Ag.debug(`There were multiple attempts to register component ${e}.`),!1;Up.set(e,t);for(const r of zc.values())gN(r,t);return!0}function Rg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},bs=new $l("app","Firebase",vN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=pN;function EN(t,e={}){typeof e!="object"&&(e={name:e});const r=Object.assign({name:k1,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw bs.create("bad-app-name",{appName:String(n)});const i=zc.get(n);if(i){if(Hc(t,i.options)&&Hc(r,i.config))return i;throw bs.create("duplicate-app",{appName:n})}const s=new FP(n);for(const l of Up.values())s.addComponent(l);const a=new yN(t,r,s);return zc.set(n,a),a}function L1(t=k1){const e=zc.get(t);if(!e)throw bs.create("no-app",{appName:t});return e}function Oi(t,e,r){var n;let i=(n=mN[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ag.warn(l.join(" "));return}Oa(new _s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",xN=1,pl="firebase-heartbeat-store";let lh=null;function D1(){return lh||(lh=OP(wN,xN,(t,e)=>{switch(e){case 0:t.createObjectStore(pl)}}).catch(t=>{throw bs.create("storage-open",{originalErrorMessage:t.message})})),lh}async function SN(t){try{return(await D1()).transaction(pl).objectStore(pl).get(O1(t))}catch(e){throw bs.create("storage-get",{originalErrorMessage:e.message})}}async function aE(t,e){try{const n=(await D1()).transaction(pl,"readwrite");return await n.objectStore(pl).put(e,O1(t)),n.complete}catch(r){throw bs.create("storage-set",{originalErrorMessage:r.message})}}function O1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=1024,_N=30*24*60*60*1e3;class bN{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new IN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=oE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=_N}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=oE(),{heartbeatsToSend:r,unsentEntries:n}=CN(this._heartbeatsCache.heartbeats),i=T1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function oE(){return new Date().toISOString().substring(0,10)}function CN(t,e=TN){const r=[];let n=t.slice();for(const i of t){const s=r.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),lE(r)>e){s.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),lE(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class IN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _P()?bP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await SN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return aE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return aE(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function lE(t){return T1(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){Oa(new _s("platform-logger",e=>new jP(e),"PRIVATE")),Oa(new _s("heartbeat",e=>new bN(e),"PRIVATE")),Oi(Fp,sE,t),Oi(Fp,sE,"esm2017"),Oi("fire-js","")}AN("");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function kg(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function P1(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RN=P1,N1=new $l("auth","Firebase",P1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Ig("@firebase/auth");function uc(t,...e){uE.logLevel<=yt.ERROR&&uE.error(`Auth (${jl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw Lg(t,...e)}function Mn(t,...e){return Lg(t,...e)}function M1(t,e,r){const n=Object.assign(Object.assign({},RN()),{[e]:r});return new $l("auth","Firebase",n).create(e,{appName:t.name})}function kN(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&$n(t,"argument-error"),M1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lg(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return N1.create(t,...e)}function Qe(t,e,...r){if(!t)throw Lg(e,...r)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uc(e),new Error(e)}function oi(t,e){t||Jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;function Zn(t){oi(t instanceof Function,"Expected a class definition");let e=cE.get(t);return e?(oi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cE.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){const r=Rg(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(Hc(s,e!=null?e:{}))return i;$n(i,"already-initialized")}return r.initialize({options:e})}function DN(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ON(){return fE()==="http:"||fE()==="https:"}function fE(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ON()||b1()||"connection"in navigator)?navigator.onLine:!0}function NN(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,r){this.shortDelay=e,this.longDelay=r,oi(r>e,"Short delay should be less than long delay!"),this.isMobile=_1()||C1()}get(){return PN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t,e){oi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new Gl(3e4,6e4);function UN(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ff(t,e,r,n,i={}){return U1(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const l=Vl(Object.assign({key:t.config.apiKey},a)).slice(1),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),F1.fetch()(B1(t,t.config.apiHost,r,l),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},s))})}async function U1(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},MN),e);try{const i=new $N(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw uh(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[d,u]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw uh(t,"email-already-in-use",a);const h=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw M1(t,h,u);$n(t,h)}}catch(i){if(i instanceof Fs)throw i;$n(t,"network-request-failed")}}async function BN(t,e,r,n,i={}){const s=await Ff(t,e,r,n,i);return"mfaPendingCredential"in s&&$n(t,"multi-factor-auth-required",{_serverResponse:s}),s}function B1(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Dg(t.config,i):`${t.config.apiScheme}://${i}`}class $N{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Mn(this.auth,"network-request-failed")),FN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function uh(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Mn(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return Ff(t,"POST","/v1/accounts:delete",e)}async function jN(t,e){return Ff(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GN(t,e=!1){const r=Or(t),n=await r.getIdToken(e),i=Og(n);Qe(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Go(ch(i.auth_time)),issuedAtTime:Go(ch(i.iat)),expirationTime:Go(ch(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ch(t){return Number(t)*1e3}function Og(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const i=wP(r);return i?JSON.parse(i):(uc("Failed to decode base64 JWT payload"),null)}catch(i){return uc("Caught error parsing JWT payload as JSON",i),null}}function HN(t){const e=Og(t);return Qe(e,"internal-error"),Qe(typeof e.exp!="undefined","internal-error"),Qe(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Fs&&zN(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function zN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Go(this.lastLoginAt),this.creationTime=Go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await ml(t,jN(r,{idToken:n}));Qe(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YN(s.providerUserInfo):[],l=qN(t.providerData,a),d=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=d?u:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new $1(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,w)}async function WN(t){const e=Or(t);await Kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qN(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function YN(t){return t.map(e=>{var{providerId:r}=e,n=kg(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e){const r=await U1(t,{},async()=>{const n=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=B1(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",F1.fetch()(a,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken!="undefined","internal-error"),Qe(typeof e.refreshToken!="undefined","internal-error");const r="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):HN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return Qe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await XN(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new gl;return n&&(Qe(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(Qe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Qe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){Qe(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class gs{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await ml(this,this.stsTokenManager.getToken(this.auth,e));return Qe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return GN(this,e)}reload(){return WN(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Kc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ml(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,l,d,u,h;const w=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(i=r.email)!==null&&i!==void 0?i:void 0,S=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,C=(a=r.photoURL)!==null&&a!==void 0?a:void 0,R=(l=r.tenantId)!==null&&l!==void 0?l:void 0,O=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,T=(u=r.createdAt)!==null&&u!==void 0?u:void 0,I=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:D,emailVerified:M,isAnonymous:j,providerData:B,stsTokenManager:z}=r;Qe(D&&z,e,"internal-error");const K=gl.fromJSON(this.name,z);Qe(typeof D=="string",e,"internal-error"),fi(w,e.name),fi(g,e.name),Qe(typeof M=="boolean",e,"internal-error"),Qe(typeof j=="boolean",e,"internal-error"),fi(S,e.name),fi(C,e.name),fi(R,e.name),fi(O,e.name),fi(T,e.name),fi(I,e.name);const ee=new gs({uid:D,auth:e,email:g,emailVerified:M,displayName:w,isAnonymous:j,photoURL:C,phoneNumber:S,tenantId:R,stsTokenManager:K,createdAt:T,lastLoginAt:I});return B&&Array.isArray(B)&&(ee.providerData=B.map(Z=>Object.assign({},Z))),O&&(ee._redirectEventId=O),ee}static async _fromIdTokenResponse(e,r,n=!1){const i=new gl;i.updateFromServerResponse(r);const s=new gs({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Kc(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}V1.type="NONE";const dE=V1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t,e,r){return`firebase:${t}:${e}:${r}`}class ya{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=cc(this.userKey,i.apiKey,s),this.fullPersistenceKey=cc("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ya(Zn(dE),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Zn(dE);const a=cc(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const h=await u._get(a);if(h){const w=gs._fromJSON(e,h);u!==s&&(l=w),s=u;break}}catch{}const d=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new ya(s,e,n):(s=d[0],l&&await s._set(a,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new ya(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(j1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(W1(e))return"Webos";if(Pg(e))return"Safari";if((e.includes("chrome/")||G1(e))&&!e.includes("edge/"))return"Chrome";if(z1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function j1(t=er()){return/firefox\//i.test(t)}function Pg(t=er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G1(t=er()){return/crios\//i.test(t)}function H1(t=er()){return/iemobile/i.test(t)}function z1(t=er()){return/android/i.test(t)}function K1(t=er()){return/blackberry/i.test(t)}function W1(t=er()){return/webos/i.test(t)}function Uf(t=er()){return/iphone|ipad|ipod/i.test(t)}function QN(t=er()){var e;return Uf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JN(){return I1()&&document.documentMode===10}function q1(t=er()){return Uf(t)||z1(t)||W1(t)||K1(t)||/windows phone/i.test(t)||H1(t)}function ZN(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t,e=[]){let r;switch(t){case"Browser":r=hE(er());break;case"Worker":r=`${hE(er())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${jl}/${n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,r,n){this.app=e,this.heartbeatServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pE(this),this.idTokenSubscription=new pE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N1,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Zn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var r;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===s)&&(a==null?void 0:a.user)&&(n=a.user)}return n?n._redirectEventId?(Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Kc(e)}catch(r){if(r.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?Or(e):null;return r&&Qe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $l("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Zn(e)||this._popupRedirectResolver;Qe(r,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[Zn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Qe(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof r=="function"?e.addObserver(r,n,i):e.addObserver(r)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return n&&(r["X-Firebase-Client"]=n),r}}function Ng(t){return Or(t)}class pE{constructor(e){this.auth=e,this.observer=null,this.addObserver=kP(r=>this.observer=r)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,r){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e){return BN(t,"POST","/v1/accounts:signInWithIdp",UN(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="http://localhost";class Cs extends X1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):$n("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=kg(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new Cs(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ea(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ea(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ea(e,r)}buildRequest(){const e={requestUri:t2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Vl(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Mg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Hl{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Cs._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return qn.credential(r,n)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Hl{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Hl{constructor(){super("twitter.com")}static credential(e,r){return Cs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return wi.credential(r,n)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await gs._fromIdTokenResponse(e,n,i),a=mE(n);return new Pa({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=mE(n);return new Pa({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function mE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Fs{constructor(e,r,n,i){var s;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Wc(e,r,n,i)}}function Q1(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,s,e,n):s})}async function r2(t,e,r=!1){const n=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Pa._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e,r=!1){const{auth:n}=t,i="reauthenticate";try{const s=await ml(t,Q1(n,i,e,t),r);Qe(s.idToken,n,"internal-error");const a=Og(s.idToken);Qe(a,n,"internal-error");const{sub:l}=a;return Qe(t.uid===l,n,"user-mismatch"),Pa._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$n(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e,r=!1){const n="signIn",i=await Q1(t,n,e),s=await Pa._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}function s2(t,e,r,n){return Or(t).onAuthStateChanged(e,r,n)}function a2(t){return Or(t).signOut()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){const t=er();return Pg(t)||Uf(t)}const l2=1e3,u2=10;class Z1 extends J1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=o2()&&ZN(),this.fallbackToPolling=q1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,d)=>{this.notifyListeners(a,d)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);JN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,u2):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},l2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z1.type="LOCAL";const c2=Z1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends J1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}eT.type="SESSION";const tT=eT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){return Promise.all(t.map(async e=>{try{const r=await e;return{fulfilled:!0,value:r}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Bf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(a).map(async u=>u(r.origin,s)),d=await f2(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,d)=>{const u=Fg("",20);i.port1.start();const h=setTimeout(()=>{d(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(w){const g=w;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function h2(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(){return typeof Fn().WorkerGlobalScope!="undefined"&&typeof Fn().importScripts=="function"}async function p2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function g2(){return rT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="firebaseLocalStorageDb",v2=1,Yc="firebaseLocalStorage",iT="fbase_key";class zl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function $f(t,e){return t.transaction([Yc],e?"readwrite":"readonly").objectStore(Yc)}function y2(){const t=indexedDB.deleteDatabase(nT);return new zl(t).toPromise()}function $p(){const t=indexedDB.open(nT,v2);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Yc,{keyPath:iT})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Yc)?e(n):(n.close(),await y2(),e(await $p()))})})}async function gE(t,e,r){const n=$f(t,!0).put({[iT]:e,value:r});return new zl(n).toPromise()}async function E2(t,e){const r=$f(t,!1).get(e),n=await new zl(r).toPromise();return n===void 0?null:n.value}function vE(t,e){const r=$f(t,!0).delete(e);return new zl(r).toPromise()}const w2=800,x2=3;class sT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $p(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>x2)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bf._getInstance(g2()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await p2(),!this.activeServiceWorker)return;this.sender=new d2(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);!n||((e=n[0])===null||e===void 0?void 0:e.fulfilled)&&((r=n[0])===null||r===void 0?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||m2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $p();return await gE(e,qc,"1"),await vE(e,qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>gE(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>E2(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$f(i,!1).getAll();return new zl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sT.type="LOCAL";const S2=sT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function _2(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Mn("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",T2().appendChild(n)})}function b2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e){return e?Zn(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends X1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ea(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function C2(t){return i2(t.auth,new Ug(t),t.bypassAuthState)}function I2(t){const{auth:e,user:r}=t;return Qe(r,e,"internal-error"),n2(r,new Ug(t),t.bypassAuthState)}async function A2(t){const{auth:e,user:r}=t;return Qe(r,e,"internal-error"),r2(r,new Ug(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C2;case"linkViaPopup":case"linkViaRedirect":return A2;case"reauthViaPopup":case"reauthViaRedirect":return I2;default:$n(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Gl(2e3,1e4);async function k2(t,e,r){const n=Ng(t);kN(t,e,Mg);const i=aT(n,r);return new cs(n,"signInViaPopup",e,i).executeNotNull()}class cs extends oT{constructor(e,r,n,i,s){super(e,r,i,s),this.provider=n,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Fg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,R2.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="pendingRedirect",fh=new Map;class D2 extends oT{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=fh.get(this.auth._key());if(!e){try{const n=await O2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}fh.set(this.auth._key(),e)}return this.bypassAuthState||fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O2(t,e){const r=N2(e),n=P2(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function P2(t){return Zn(t._redirectPersistence)}function N2(t){return cc(L2,t.config.apiKey,t.name)}async function M2(t,e,r=!1){const n=Ng(t),i=aT(n,e),a=await new D2(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=10*60*1e3;class U2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B2(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!lT(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Mn(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F2&&this.cachedEventUids.clear(),this.cachedEventUids.has(yE(e))}saveEventToCache(e){this.cachedEventUids.add(yE(e)),this.lastProcessedEventTime=Date.now()}}function yE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e={}){return Ff(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j2=/^https?/;async function G2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $2(t);for(const r of e)try{if(H2(r))return}catch{}$n(t,"unauthorized-domain")}function H2(t){const e=Bp(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!j2.test(r))return!1;if(V2.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Gl(3e4,6e4);function EE(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function K2(t){return new Promise((e,r)=>{var n,i,s;function a(){EE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EE(),r(Mn(t,"network-request-failed"))},timeout:z2.get()})}if(!((i=(n=Fn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fn().gapi)===null||s===void 0)&&s.load)a();else{const l=b2("iframefcb");return Fn()[l]=()=>{gapi.load?a():r(Mn(t,"network-request-failed"))},_2(`https://apis.google.com/js/api.js?onload=${l}`).catch(d=>r(d))}}).catch(e=>{throw fc=null,e})}let fc=null;function W2(t){return fc=fc||K2(t),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new Gl(5e3,15e3),Y2="__/auth/iframe",X2="emulator/auth/iframe",Q2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},J2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z2(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dg(e,X2):`https://${t.config.authDomain}/${Y2}`,n={apiKey:e.apiKey,appName:t.name,v:jl},i=J2.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Vl(n).slice(1)}`}async function eM(t){const e=await W2(t),r=Fn().gapi;return Qe(r,t,"internal-error"),e.open({where:document.body,url:Z2(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q2,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Mn(t,"network-request-failed"),l=Fn().setTimeout(()=>{s(a)},q2.get());function d(){Fn().clearTimeout(l),i(n)}n.ping(d).then(d,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rM=500,nM=600,iM="_blank",sM="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aM(t,e,r,n=rM,i=nM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const d=Object.assign(Object.assign({},tM),{width:n.toString(),height:i.toString(),top:s,left:a}),u=er().toLowerCase();r&&(l=G1(u)?iM:r),j1(u)&&(e=e||sM,d.scrollbars="yes");const h=Object.entries(d).reduce((g,[S,C])=>`${g}${S}=${C},`,"");if(QN(u)&&l!=="_self")return oM(e||"",l),new wE(null);const w=window.open(e||"",l,h);Qe(w,t,"popup-blocked");try{w.focus()}catch{}return new wE(w)}function oM(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="__/auth/handler",uM="emulator/auth/handler";function xE(t,e,r,n,i,s){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:jl,eventId:i};if(e instanceof Mg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",RP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,u]of Object.entries(s||{}))a[d]=u}if(e instanceof Hl){const d=e.getScopes().filter(u=>u!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];return`${cM(t)}?${Vl(l).slice(1)}`}function cM({config:t}){return t.emulator?Dg(t,uM):`https://${t.authDomain}/${lM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="webStorageSupport";class fM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tT,this._completeRedirectFn=M2}async _openPopup(e,r,n,i){var s;oi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=xE(e,r,n,Bp(),i);return aM(e,a,Fg())}async _openRedirect(e,r,n,i){return await this._originValidation(e),h2(xE(e,r,n,Bp(),i)),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(oi(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await eM(e),n=new U2(e);return r.register("authEvent",i=>(Qe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(dh,{type:dh},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[dh];a!==void 0&&r(!!a),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=G2(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return q1()||Pg()||Uf()}}const dM=fM;var SE="@firebase/auth",TE="0.19.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{var i;e(((i=n)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);!r||(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function mM(t){Oa(new _s("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:a}=n.options;return((l,d)=>{Qe(s&&!s.includes(":"),"invalid-api-key",{appName:l.name}),Qe(!(a!=null&&a.includes(":")),"argument-error",{appName:l.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y1(t)},h=new e2(l,d,u);return DN(h,r),h})(n,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Oa(new _s("auth-internal",e=>{const r=Ng(e.getProvider("auth").getImmediate());return(n=>new hM(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(SE,TE,pM(t)),Oi(SE,TE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t=L1()){const e=Rg(t,"auth");return e.isInitialized()?e.getImmediate():LN(t,{popupRedirectResolver:dM,persistence:[S2,c2,tT]})}mM("Browser");var vM=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Oe,Bg=Bg||{},Ye=vM||self;function Xc(){}function Vp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Kl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function yM(t){return Object.prototype.hasOwnProperty.call(t,hh)&&t[hh]||(t[hh]=++EM)}var hh="closure_uid_"+(1e9*Math.random()>>>0),EM=0;function wM(t,e,r){return t.call.apply(t.bind,arguments)}function xM(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function cr(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?cr=wM:cr=xM,cr.apply(null,arguments)}function Gu(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function mr(t,e){function r(){}r.prototype=e.prototype,t.Z=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Vb=function(n,i,s){for(var a=Array(arguments.length-2),l=2;l<arguments.length;l++)a[l-2]=arguments[l];return e.prototype[i].apply(n,a)}}function Wi(){this.s=this.s,this.o=this.o}var SM=0,TM={};Wi.prototype.s=!1;Wi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),SM!=0)){var t=yM(this);delete TM[t]}};Wi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const uT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},cT=Array.prototype.forEach?function(t,e,r){Array.prototype.forEach.call(t,e,r)}:function(t,e,r){const n=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)s in i&&e.call(r,i[s],s,t)};function _M(t){e:{var e=mF;const r=t.length,n=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)if(i in n&&e.call(void 0,n[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function _E(t){return Array.prototype.concat.apply([],arguments)}function $g(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function Qc(t){return/^[\s\xa0]*$/.test(t)}var bE=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Rr(t,e){return t.indexOf(e)!=-1}function ph(t,e){return t<e?-1:t>e?1:0}var kr;e:{var CE=Ye.navigator;if(CE){var IE=CE.userAgent;if(IE){kr=IE;break e}}kr=""}function Vg(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function fT(t){const e={};for(const r in t)e[r]=t[r];return e}var AE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dT(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let s=0;s<AE.length;s++)r=AE[s],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function jg(t){return jg[" "](t),t}jg[" "]=Xc;function bM(t){var e=AM;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var CM=Rr(kr,"Opera"),Na=Rr(kr,"Trident")||Rr(kr,"MSIE"),hT=Rr(kr,"Edge"),jp=hT||Na,pT=Rr(kr,"Gecko")&&!(Rr(kr.toLowerCase(),"webkit")&&!Rr(kr,"Edge"))&&!(Rr(kr,"Trident")||Rr(kr,"MSIE"))&&!Rr(kr,"Edge"),IM=Rr(kr.toLowerCase(),"webkit")&&!Rr(kr,"Edge");function mT(){var t=Ye.document;return t?t.documentMode:void 0}var Jc;e:{var mh="",gh=function(){var t=kr;if(pT)return/rv:([^\);]+)(\)|;)/.exec(t);if(hT)return/Edge\/([\d\.]+)/.exec(t);if(Na)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(IM)return/WebKit\/(\S+)/.exec(t);if(CM)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(gh&&(mh=gh?gh[1]:""),Na){var vh=mT();if(vh!=null&&vh>parseFloat(mh)){Jc=String(vh);break e}}Jc=mh}var AM={};function RM(){return bM(function(){let t=0;const e=bE(String(Jc)).split("."),r=bE("9").split("."),n=Math.max(e.length,r.length);for(let a=0;t==0&&a<n;a++){var i=e[a]||"",s=r[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=ph(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||ph(i[2].length==0,s[2].length==0)||ph(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var Gp;if(Ye.document&&Na){var RE=mT();Gp=RE||parseInt(Jc,10)||void 0}else Gp=void 0;var kM=Gp,LM=function(){if(!Ye.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ye.addEventListener("test",Xc,e),Ye.removeEventListener("test",Xc,e)}catch{}return t}();function xr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}xr.prototype.h=function(){this.defaultPrevented=!0};function vl(t,e){if(xr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(pT){e:{try{jg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:DM[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&vl.Z.h.call(this)}}mr(vl,xr);var DM={2:"touch",3:"pen",4:"mouse"};vl.prototype.h=function(){vl.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Wl="closure_listenable_"+(1e6*Math.random()|0),OM=0;function PM(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.ia=i,this.key=++OM,this.ca=this.fa=!1}function Vf(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function jf(t){this.src=t,this.g={},this.h=0}jf.prototype.add=function(t,e,r,n,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=zp(t,e,n,i);return-1<a?(e=t[a],r||(e.fa=!1)):(e=new PM(e,this.src,s,!!n,i),e.fa=r,t.push(e)),e};function Hp(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=uT(n,e),s;(s=0<=i)&&Array.prototype.splice.call(n,i,1),s&&(Vf(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function zp(t,e,r,n){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!r&&s.ia==n)return i}return-1}var Gg="closure_lm_"+(1e6*Math.random()|0),yh={};function gT(t,e,r,n,i){if(n&&n.once)return yT(t,e,r,n,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)gT(t,e[s],r,n,i);return null}return r=Kg(r),t&&t[Wl]?t.N(e,r,Kl(n)?!!n.capture:!!n,i):vT(t,e,r,!1,n,i)}function vT(t,e,r,n,i,s){if(!e)throw Error("Invalid event type");var a=Kl(i)?!!i.capture:!!i,l=zg(t);if(l||(t[Gg]=l=new jf(t)),r=l.add(e,r,n,a,s),r.proxy)return r;if(n=NM(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)LM||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(wT(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function NM(){function t(r){return e.call(t.src,t.listener,r)}var e=MM;return t}function yT(t,e,r,n,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)yT(t,e[s],r,n,i);return null}return r=Kg(r),t&&t[Wl]?t.O(e,r,Kl(n)?!!n.capture:!!n,i):vT(t,e,r,!0,n,i)}function ET(t,e,r,n,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ET(t,e[s],r,n,i);else n=Kl(n)?!!n.capture:!!n,r=Kg(r),t&&t[Wl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],r=zp(s,r,n,i),-1<r&&(Vf(s[r]),Array.prototype.splice.call(s,r,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=zg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=zp(e,r,n,i)),(r=-1<t?e[t]:null)&&Hg(r))}function Hg(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Wl])Hp(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(wT(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=zg(e))?(Hp(r,t),r.h==0&&(r.src=null,e[Gg]=null)):Vf(t)}}}function wT(t){return t in yh?yh[t]:yh[t]="on"+t}function MM(t,e){if(t.ca)t=!0;else{e=new vl(e,this);var r=t.listener,n=t.ia||t.src;t.fa&&Hg(t),t=r.call(n,e)}return t}function zg(t){return t=t[Gg],t instanceof jf?t:null}var Eh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kg(t){return typeof t=="function"?t:(t[Eh]||(t[Eh]=function(e){return t.handleEvent(e)}),t[Eh])}function tr(){Wi.call(this),this.i=new jf(this),this.P=this,this.I=null}mr(tr,Wi);tr.prototype[Wl]=!0;tr.prototype.removeEventListener=function(t,e,r,n){ET(this,t,e,r,n)};function fr(t,e){var r,n=t.I;if(n)for(r=[];n;n=n.I)r.push(n);if(t=t.P,n=e.type||e,typeof e=="string")e=new xr(e,t);else if(e instanceof xr)e.target=e.target||t;else{var i=e;e=new xr(n,t),dT(e,i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var a=e.g=r[s];i=Hu(a,n,!0,e)&&i}if(a=e.g=t,i=Hu(a,n,!0,e)&&i,i=Hu(a,n,!1,e)&&i,r)for(s=0;s<r.length;s++)a=e.g=r[s],i=Hu(a,n,!1,e)&&i}tr.prototype.M=function(){if(tr.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)Vf(r[n]);delete t.g[e],t.h--}}this.I=null};tr.prototype.N=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};tr.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function Hu(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.ca&&a.capture==r){var l=a.listener,d=a.ia||a.src;a.fa&&Hp(t.i,a),i=l.call(d,n)!==!1&&i}}return i&&!n.defaultPrevented}var Wg=Ye.JSON.stringify;function FM(){var t=ST;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class UM{constructor(){this.h=this.g=null}add(e,r){const n=xT.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var xT=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new BM,t=>t.reset());class BM{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function $M(t){Ye.setTimeout(()=>{throw t},0)}function qg(t,e){Kp||VM(),Wp||(Kp(),Wp=!0),ST.add(t,e)}var Kp;function VM(){var t=Ye.Promise.resolve(void 0);Kp=function(){t.then(jM)}}var Wp=!1,ST=new UM;function jM(){for(var t;t=FM();){try{t.h.call(t.g)}catch(r){$M(r)}var e=xT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wp=!1}function Gf(t,e){tr.call(this),this.h=t||1,this.g=e||Ye,this.j=cr(this.kb,this),this.l=Date.now()}mr(Gf,tr);Oe=Gf.prototype;Oe.da=!1;Oe.S=null;Oe.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fr(this,"tick"),this.da&&(Yg(this),this.start()))}};Oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Yg(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}Oe.M=function(){Gf.Z.M.call(this),Yg(this),delete this.g};function Xg(t,e,r){if(typeof t=="function")r&&(t=cr(t,r));else if(t&&typeof t.handleEvent=="function")t=cr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ye.setTimeout(t,e||0)}function TT(t){t.g=Xg(()=>{t.g=null,t.i&&(t.i=!1,TT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class GM extends Wi{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TT(this)}M(){super.M(),this.g&&(Ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yl(t){Wi.call(this),this.h=t,this.g={}}mr(yl,Wi);var kE=[];function _T(t,e,r,n){Array.isArray(r)||(r&&(kE[0]=r.toString()),r=kE);for(var i=0;i<r.length;i++){var s=gT(e,r[i],n||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function bT(t){Vg(t.g,function(e,r){this.g.hasOwnProperty(r)&&Hg(e)},t),t.g={}}yl.prototype.M=function(){yl.Z.M.call(this),bT(this)};yl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hf(){this.g=!0}Hf.prototype.Aa=function(){this.g=!1};function HM(t,e,r,n,i,s){t.info(function(){if(t.g)if(s)for(var a="",l=s.split("&"),d=0;d<l.length;d++){var u=l[d].split("=");if(1<u.length){var h=u[0];u=u[1];var w=h.split("_");a=2<=w.length&&w[1]=="type"?a+(h+"="+u+"&"):a+(h+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+a})}function zM(t,e,r,n,i,s,a){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+s+" "+a})}function ua(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+WM(t,r)+(n?" "+n:"")})}function KM(t,e){t.info(function(){return"TIMEOUT: "+e})}Hf.prototype.info=function(){};function WM(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return Wg(r)}catch{return e}}var Us={},LE=null;function zf(){return LE=LE||new tr}Us.Ma="serverreachability";function CT(t){xr.call(this,Us.Ma,t)}mr(CT,xr);function El(t){const e=zf();fr(e,new CT(e,t))}Us.STAT_EVENT="statevent";function IT(t,e){xr.call(this,Us.STAT_EVENT,t),this.stat=e}mr(IT,xr);function Lr(t){const e=zf();fr(e,new IT(e,t))}Us.Na="timingevent";function AT(t,e){xr.call(this,Us.Na,t),this.size=e}mr(AT,xr);function ql(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ye.setTimeout(function(){t()},e)}var Kf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},RT={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qg(){}Qg.prototype.h=null;function DE(t){return t.h||(t.h=t.i())}function kT(){}var Yl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jg(){xr.call(this,"d")}mr(Jg,xr);function Zg(){xr.call(this,"c")}mr(Zg,xr);var qp;function Wf(){}mr(Wf,Qg);Wf.prototype.g=function(){return new XMLHttpRequest};Wf.prototype.i=function(){return{}};qp=new Wf;function Xl(t,e,r,n){this.l=t,this.j=e,this.m=r,this.X=n||1,this.V=new yl(this),this.P=qM,t=jp?125:void 0,this.W=new Gf(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new LT}function LT(){this.i=null,this.g="",this.h=!1}var qM=45e3,Yp={},Zc={};Oe=Xl.prototype;Oe.setTimeout=function(t){this.P=t};function Xp(t,e,r){t.K=1,t.v=Yf(li(e)),t.s=r,t.U=!0,DT(t,null)}function DT(t,e){t.F=Date.now(),Ql(t),t.A=li(t.v);var r=t.A,n=t.X;Array.isArray(n)||(n=[String(n)]),BT(r.h,"t",n),t.C=0,r=t.l.H,t.h=new LT,t.g=s_(t.l,r?e:null,!t.s),0<t.O&&(t.L=new GM(cr(t.Ia,t,t.g),t.O)),_T(t.V,t.g,"readystatechange",t.gb),e=t.H?fT(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),El(1),HM(t.j,t.u,t.A,t.m,t.X,t.s)}Oe.gb=function(t){t=t.target;const e=this.L;e&&ei(t)==3?e.l():this.Ia(t)};Oe.Ia=function(t){try{if(t==this.g)e:{const h=ei(this.g);var e=this.g.Da();const w=this.g.ba();if(!(3>h)&&(h!=3||jp||this.g&&(this.h.h||this.g.ga()||ME(this.g)))){this.I||h!=4||e==7||(e==8||0>=w?El(3):El(2)),qf(this);var r=this.g.ba();this.N=r;t:if(OT(this)){var n=ME(this.g);t="";var i=n.length,s=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){fs(this),Ho(this);var a="";break t}this.h.i=new Ye.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:s&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=r==200,zM(this.j,this.u,this.A,this.m,this.X,h,r),this.i){if(this.$&&!this.J){t:{if(this.g){var l,d=this.g;if((l=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qc(l)){var u=l;break t}}u=null}if(r=u)ua(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qp(this,r);else{this.i=!1,this.o=3,Lr(12),fs(this),Ho(this);break e}}this.U?(PT(this,h,a),jp&&this.i&&h==3&&(_T(this.V,this.W,"tick",this.fb),this.W.start())):(ua(this.j,this.m,a,null),Qp(this,a)),h==4&&fs(this),this.i&&!this.I&&(h==4?t_(this.l,this):(this.i=!1,Ql(this)))}else r==400&&0<a.indexOf("Unknown SID")?(this.o=3,Lr(12)):(this.o=0,Lr(13)),fs(this),Ho(this)}}}catch{}finally{}};function OT(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function PT(t,e,r){let n=!0,i;for(;!t.I&&t.C<r.length;)if(i=YM(t,r),i==Zc){e==4&&(t.o=4,Lr(14),n=!1),ua(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Yp){t.o=4,Lr(15),ua(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else ua(t.j,t.m,i,null),Qp(t,i);OT(t)&&i!=Zc&&i!=Yp&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,Lr(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),lv(e),e.L=!0,Lr(11))):(ua(t.j,t.m,r,"[Invalid Chunked Response]"),fs(t),Ho(t))}Oe.fb=function(){if(this.g){var t=ei(this.g),e=this.g.ga();this.C<e.length&&(qf(this),PT(this,t,e),this.i&&t!=4&&Ql(this))}};function YM(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Zc:(r=Number(e.substring(r,n)),isNaN(r)?Yp:(n+=1,n+r>e.length?Zc:(e=e.substr(n,r),t.C=n+r,e)))}Oe.cancel=function(){this.I=!0,fs(this)};function Ql(t){t.Y=Date.now()+t.P,NT(t,t.P)}function NT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=ql(cr(t.eb,t),e)}function qf(t){t.B&&(Ye.clearTimeout(t.B),t.B=null)}Oe.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(KM(this.j,this.A),this.K!=2&&(El(3),Lr(17)),fs(this),this.o=2,Ho(this)):NT(this,this.Y-t)};function Ho(t){t.l.G==0||t.I||t_(t.l,t)}function fs(t){qf(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Yg(t.W),bT(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Qp(t,e){try{var r=t.l;if(r.G!=0&&(r.g==t||Jp(r.i,t))){if(r.I=t.N,!t.J&&Jp(r.i,t)&&r.G==3){try{var n=r.Ca.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0){e:if(!r.u){if(r.g)if(r.g.F+3e3<t.F)nf(r),Jf(r);else break e;ov(r),Lr(18)}}else r.ta=i[1],0<r.ta-r.U&&37500>i[2]&&r.N&&r.A==0&&!r.v&&(r.v=ql(cr(r.ab,r),6e3));if(1>=jT(r.i)&&r.ka){try{r.ka()}catch{}r.ka=void 0}}else ds(r,11)}else if((t.J||r.g==t)&&nf(r),!Qc(e))for(i=r.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(r.U=u[0],u=u[1],r.G==2)if(u[0]=="c"){r.J=u[1],r.la=u[2];const h=u[3];h!=null&&(r.ma=h,r.h.info("VER="+r.ma));const w=u[4];w!=null&&(r.za=w,r.h.info("SVER="+r.za));const g=u[5];g!=null&&typeof g=="number"&&0<g&&(n=1.5*g,r.K=n,r.h.info("backChannelRequestTimeoutMs_="+n)),n=r;const S=t.g;if(S){const C=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=n.i;!s.g&&(Rr(C,"spdy")||Rr(C,"quic")||Rr(C,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(rv(s,s.h),s.h=null))}if(n.D){const R=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(n.sa=R,Dt(n.F,n.D,R))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-t.F,r.h.info("Handshake RTT: "+r.O+"ms")),n=r;var a=t;if(n.oa=i_(n,n.H?n.la:null,n.W),a.J){GT(n.i,a);var l=a,d=n.K;d&&l.setTimeout(d),l.B&&(qf(l),Ql(l)),n.g=a}else ZT(n);0<r.l.length&&Zf(r)}else u[0]!="stop"&&u[0]!="close"||ds(r,7);else r.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?ds(r,7):av(r):u[0]!="noop"&&r.j&&r.j.wa(u),r.A=0)}}El(4)}catch{}}function XM(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Vp(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function ev(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Vp(t)||typeof t=="string")cT(t,e,void 0);else{if(t.T&&typeof t.T=="function")var r=t.T();else if(t.R&&typeof t.R=="function")r=void 0;else if(Vp(t)||typeof t=="string"){r=[];for(var n=t.length,i=0;i<n;i++)r.push(i)}else for(i in r=[],n=0,t)r[n++]=i;n=XM(t),i=n.length;for(var s=0;s<i;s++)e.call(void 0,n[s],r&&r[s],t)}}function qa(t,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var n=0;n<r;n+=2)this.set(arguments[n],arguments[n+1])}else if(t)if(t instanceof qa)for(r=t.T(),n=0;n<r.length;n++)this.set(r[n],t.get(r[n]));else for(n in t)this.set(n,t[n])}Oe=qa.prototype;Oe.R=function(){tv(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};Oe.T=function(){return tv(this),this.g.concat()};function tv(t){if(t.i!=t.g.length){for(var e=0,r=0;e<t.g.length;){var n=t.g[e];Is(t.h,n)&&(t.g[r++]=n),e++}t.g.length=r}if(t.i!=t.g.length){var i={};for(r=e=0;e<t.g.length;)n=t.g[e],Is(i,n)||(t.g[r++]=n,i[n]=1),e++;t.g.length=r}}Oe.get=function(t,e){return Is(this.h,t)?this.h[t]:e};Oe.set=function(t,e){Is(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};Oe.forEach=function(t,e){for(var r=this.T(),n=0;n<r.length;n++){var i=r[n],s=this.get(i);t.call(e,s,i,this)}};function Is(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var MT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function QM(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var s=t[r].substring(0,n);i=t[r].substring(n+1)}else s=t[r];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function As(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof As){this.g=e!==void 0?e:t.g,ef(this,t.j),this.s=t.s,tf(this,t.i),rf(this,t.m),this.l=t.l,e=t.h;var r=new wl;r.i=e.i,e.g&&(r.g=new qa(e.g),r.h=e.h),OE(this,r),this.o=t.o}else t&&(r=String(t).match(MT))?(this.g=!!e,ef(this,r[1]||"",!0),this.s=zo(r[2]||""),tf(this,r[3]||"",!0),rf(this,r[4]),this.l=zo(r[5]||"",!0),OE(this,r[6]||"",!0),this.o=zo(r[7]||"")):(this.g=!!e,this.h=new wl(null,this.g))}As.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ao(e,PE,!0),":");var r=this.i;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ao(e,PE,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.i&&r.charAt(0)!="/"&&t.push("/"),t.push(Ao(r,r.charAt(0)=="/"?rF:tF,!0))),(r=this.h.toString())&&t.push("?",r),(r=this.o)&&t.push("#",Ao(r,iF)),t.join("")};function li(t){return new As(t)}function ef(t,e,r){t.j=r?zo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function tf(t,e,r){t.i=r?zo(e,!0):e}function rf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function OE(t,e,r){e instanceof wl?(t.h=e,sF(t.h,t.g)):(r||(e=Ao(e,nF)),t.h=new wl(e,t.g))}function Dt(t,e,r){t.h.set(e,r)}function Yf(t){return Dt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function JM(t){return t instanceof As?li(t):new As(t,void 0)}function ZM(t,e,r,n){var i=new As(null,void 0);return t&&ef(i,t),e&&tf(i,e),r&&rf(i,r),n&&(i.l=n),i}function zo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ao(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,eF),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function eF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var PE=/[#\/\?@]/g,tF=/[#\?:]/g,rF=/[#\?]/g,nF=/[#\?@]/g,iF=/#/g;function wl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function qi(t){t.g||(t.g=new qa,t.h=0,t.i&&QM(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}Oe=wl.prototype;Oe.add=function(t,e){qi(this),this.i=null,t=Ya(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function FT(t,e){qi(t),e=Ya(t,e),Is(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Is(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&tv(t)))}function UT(t,e){return qi(t),e=Ya(t,e),Is(t.g.h,e)}Oe.forEach=function(t,e){qi(this),this.g.forEach(function(r,n){cT(r,function(i){t.call(e,i,n,this)},this)},this)};Oe.T=function(){qi(this);for(var t=this.g.R(),e=this.g.T(),r=[],n=0;n<e.length;n++)for(var i=t[n],s=0;s<i.length;s++)r.push(e[n]);return r};Oe.R=function(t){qi(this);var e=[];if(typeof t=="string")UT(this,t)&&(e=_E(e,this.g.get(Ya(this,t))));else{t=this.g.R();for(var r=0;r<t.length;r++)e=_E(e,t[r])}return e};Oe.set=function(t,e){return qi(this),this.i=null,t=Ya(this,t),UT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Oe.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function BT(t,e,r){FT(t,e),0<r.length&&(t.i=null,t.g.set(Ya(t,e),$g(r)),t.h+=r.length)}Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),r=0;r<e.length;r++){var n=e[r],i=encodeURIComponent(String(n));n=this.R(n);for(var s=0;s<n.length;s++){var a=i;n[s]!==""&&(a+="="+encodeURIComponent(String(n[s]))),t.push(a)}}return this.i=t.join("&")};function Ya(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function sF(t,e){e&&!t.j&&(qi(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(FT(this,n),BT(this,i,r))},t)),t.j=e}var aF=class{constructor(t,e){this.h=t,this.g=e}};function $T(t){this.l=t||oF,Ye.PerformanceNavigationTiming?(t=Ye.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ye.g&&Ye.g.Ea&&Ye.g.Ea()&&Ye.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var oF=10;function VT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function jT(t){return t.h?1:t.g?t.g.size:0}function Jp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function rv(t,e){t.g?t.g.add(e):t.h=e}function GT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$T.prototype.cancel=function(){if(this.i=HT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function HT(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.D);return e}return $g(t.i)}function nv(){}nv.prototype.stringify=function(t){return Ye.JSON.stringify(t,void 0)};nv.prototype.parse=function(t){return Ye.JSON.parse(t,void 0)};function lF(){this.g=new nv}function uF(t,e,r){const n=r||"";try{ev(t,function(i,s){let a=i;Kl(i)&&(a=Wg(i)),e.push(n+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function cF(t,e){const r=new Hf;if(Ye.Image){const n=new Image;n.onload=Gu(zu,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Gu(zu,r,n,"TestLoadImage: error",!1,e),n.onabort=Gu(zu,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Gu(zu,r,n,"TestLoadImage: timeout",!1,e),Ye.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function zu(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function Jl(t){this.l=t.$b||null,this.j=t.ib||!1}mr(Jl,Qg);Jl.prototype.g=function(){return new Xf(this.l,this.j)};Jl.prototype.i=function(t){return function(){return t}}({});function Xf(t,e){tr.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=iv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mr(Xf,tr);var iv=0;Oe=Xf.prototype;Oe.open=function(t,e){if(this.readyState!=iv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xl(this)};Oe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ye).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zl(this)),this.readyState=iv};Oe.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ye.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zT(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function zT(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}Oe.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Zl(this):xl(this),this.readyState==3&&zT(this)}};Oe.Ua=function(t){this.g&&(this.response=this.responseText=t,Zl(this))};Oe.Ta=function(t){this.g&&(this.response=t,Zl(this))};Oe.ha=function(){this.g&&Zl(this)};function Zl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xl(t)}Oe.setRequestHeader=function(t,e){this.v.append(t,e)};Oe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Oe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function xl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var fF=Ye.JSON.parse;function Wt(t){tr.call(this),this.headers=new qa,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=KT,this.K=this.L=!1}mr(Wt,tr);var KT="",dF=/^https?$/i,hF=["POST","PUT"];Oe=Wt.prototype;Oe.ea=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():qp.g(),this.C=this.u?DE(this.u):DE(qp),this.g.onreadystatechange=cr(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){NE(this,s);return}t=r||"";const i=new qa(this.headers);n&&ev(n,function(s,a){i.set(a,s)}),n=_M(i.T()),r=Ye.FormData&&t instanceof Ye.FormData,!(0<=uT(hF,e))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.g.setRequestHeader(a,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{YT(this),0<this.B&&((this.K=pF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cr(this.pa,this)):this.A=Xg(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){NE(this,s)}};function pF(t){return Na&&RM()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function mF(t){return t.toLowerCase()=="content-type"}Oe.pa=function(){typeof Bg!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))};function NE(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,WT(t),Qf(t)}function WT(t){t.D||(t.D=!0,fr(t,"complete"),fr(t,"error"))}Oe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fr(this,"complete"),fr(this,"abort"),Qf(this))};Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qf(this,!0)),Wt.Z.M.call(this)};Oe.Fa=function(){this.s||(this.F||this.v||this.l?qT(this):this.cb())};Oe.cb=function(){qT(this)};function qT(t){if(t.h&&typeof Bg!="undefined"&&(!t.C[1]||ei(t)!=4||t.ba()!=2)){if(t.v&&ei(t)==4)Xg(t.Fa,0,t);else if(fr(t,"readystatechange"),ei(t)==4){t.h=!1;try{const l=t.ba();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=l===0){var i=String(t.H).match(MT)[1]||null;if(!i&&Ye.self&&Ye.self.location){var s=Ye.self.location.protocol;i=s.substr(0,s.length-1)}n=!dF.test(i?i.toLowerCase():"")}r=n}if(r)fr(t,"complete"),fr(t,"success");else{t.m=6;try{var a=2<ei(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.ba()+"]",WT(t)}}finally{Qf(t)}}}}function Qf(t,e){if(t.g){YT(t);const r=t.g,n=t.C[0]?Xc:null;t.g=null,t.C=null,e||fr(t,"ready");try{r.onreadystatechange=n}catch{}}}function YT(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ye.clearTimeout(t.A),t.A=null)}function ei(t){return t.g?t.g.readyState:0}Oe.ba=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}};Oe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};Oe.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),fF(e)}};function ME(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case KT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Oe.Da=function(){return this.m};Oe.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function gF(t){let e="";return Vg(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function sv(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=gF(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):Dt(t,e,r))}function So(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function XT(t){this.za=0,this.l=[],this.h=new Hf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=So("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=So("baseRetryDelayMs",5e3,t),this.$a=So("retryDelaySeedMs",1e4,t),this.Ya=So("forwardChannelMaxRetries",2,t),this.ra=So("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new $T(t&&t.concurrentRequestLimit),this.Ca=new lF,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}Oe=XT.prototype;Oe.ma=8;Oe.G=1;function av(t){if(QT(t),t.G==3){var e=t.V++,r=li(t.F);Dt(r,"SID",t.J),Dt(r,"RID",e),Dt(r,"TYPE","terminate"),eu(t,r),e=new Xl(t,t.h,e,void 0),e.K=2,e.v=Yf(li(r)),r=!1,Ye.navigator&&Ye.navigator.sendBeacon&&(r=Ye.navigator.sendBeacon(e.v.toString(),"")),!r&&Ye.Image&&(new Image().src=e.v,r=!0),r||(e.g=s_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ql(e)}n_(t)}Oe.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Jf(t){t.g&&(lv(t),t.g.cancel(),t.g=null)}function QT(t){Jf(t),t.u&&(Ye.clearTimeout(t.u),t.u=null),nf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ye.clearTimeout(t.m),t.m=null)}function wh(t,e){t.l.push(new aF(t.Za++,e)),t.G==3&&Zf(t)}function Zf(t){VT(t.i)||t.m||(t.m=!0,qg(t.Ha,t),t.C=0)}function vF(t,e){return jT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=ql(cr(t.Ha,t,e),r_(t,t.C)),t.C++,!0)}Oe.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Xl(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=fT(s),dT(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){t:{var n=this.l[r];if("__data__"in n.g&&(n=n.g.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=JT(this,i,e),r=li(this.F),Dt(r,"RID",t),Dt(r,"CVER",22),this.D&&Dt(r,"X-HTTP-Session-Id",this.D),eu(this,r),this.o&&s&&sv(r,this.o,s),rv(this.i,i),this.Ra&&Dt(r,"TYPE","init"),this.ja?(Dt(r,"$req",e),Dt(r,"SID","null"),i.$=!0,Xp(i,r,null)):Xp(i,r,e),this.G=2}}else this.G==3&&(t?FE(this,t):this.l.length==0||VT(this.i)||FE(this))};function FE(t,e){var r;e?r=e.m:r=t.V++;const n=li(t.F);Dt(n,"SID",t.J),Dt(n,"RID",r),Dt(n,"AID",t.U),eu(t,n),t.o&&t.s&&sv(n,t.o,t.s),r=new Xl(t,t.h,r,t.C+1),t.o===null&&(r.H=t.s),e&&(t.l=e.D.concat(t.l)),e=JT(t,r,1e3),r.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),rv(t.i,r),Xp(r,n,e)}function eu(t,e){t.j&&ev({},function(r,n){Dt(e,n,r)})}function JT(t,e,r){r=Math.min(t.l.length,r);var n=t.j?cr(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const a=["count="+r];s==-1?0<r?(s=i[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);let l=!0;for(let d=0;d<r;d++){let u=i[d].h;const h=i[d].g;if(u-=s,0>u)s=Math.max(0,i[d].h-100),l=!1;else try{uF(h,a,"req"+u+"_")}catch{n&&n(h)}}if(l){n=a.join("&");break e}}}return t=t.l.splice(0,r),e.D=t,n}function ZT(t){t.g||t.u||(t.Y=1,qg(t.Ga,t),t.A=0)}function ov(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=ql(cr(t.Ga,t),r_(t,t.A)),t.A++,!0)}Oe.Ga=function(){if(this.u=null,e_(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ql(cr(this.bb,this),t)}};Oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Lr(10),Jf(this),e_(this))};function lv(t){t.B!=null&&(Ye.clearTimeout(t.B),t.B=null)}function e_(t){t.g=new Xl(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=li(t.oa);Dt(e,"RID","rpc"),Dt(e,"SID",t.J),Dt(e,"CI",t.N?"0":"1"),Dt(e,"AID",t.U),eu(t,e),Dt(e,"TYPE","xmlhttp"),t.o&&t.s&&sv(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var r=t.g;t=t.la,r.K=1,r.v=Yf(li(e)),r.s=null,r.U=!0,DT(r,t)}Oe.ab=function(){this.v!=null&&(this.v=null,Jf(this),ov(this),Lr(19))};function nf(t){t.v!=null&&(Ye.clearTimeout(t.v),t.v=null)}function t_(t,e){var r=null;if(t.g==e){nf(t),lv(t),t.g=null;var n=2}else if(Jp(t.i,e))r=e.D,GT(t.i,e),n=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;n=zf(),fr(n,new AT(n,r,e,i)),Zf(t)}else ZT(t);else if(i=e.o,i==3||i==0&&0<t.I||!(n==1&&vF(t,e)||n==2&&ov(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:ds(t,5);break;case 4:ds(t,10);break;case 3:ds(t,6);break;default:ds(t,2)}}}function r_(t,e){let r=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(r*=2),r*e}function ds(t,e){if(t.h.info("Error code "+e),e==2){var r=null;t.j&&(r=null);var n=cr(t.jb,t);r||(r=new As("//www.google.com/images/cleardot.gif"),Ye.location&&Ye.location.protocol=="http"||ef(r,"https"),Yf(r)),cF(r.toString(),n)}else Lr(2);t.G=0,t.j&&t.j.va(e),n_(t),QT(t)}Oe.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Lr(2)):(this.h.info("Failed to ping google.com"),Lr(1))};function n_(t){t.G=0,t.I=-1,t.j&&((HT(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,$g(t.l),t.l.length=0),t.j.ua())}function i_(t,e,r){let n=JM(r);if(n.i!="")e&&tf(n,e+"."+n.i),rf(n,n.m);else{const i=Ye.location;n=ZM(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,r)}return t.aa&&Vg(t.aa,function(i,s){Dt(n,s,i)}),e=t.D,r=t.sa,e&&r&&Dt(n,e,r),Dt(n,"VER",t.ma),eu(t,n),n}function s_(t,e,r){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ba&&!t.qa?new Wt(new Jl({ib:!0})):new Wt(t.qa),e.L=t.H,e}function a_(){}Oe=a_.prototype;Oe.xa=function(){};Oe.wa=function(){};Oe.va=function(){};Oe.ua=function(){};Oe.Oa=function(){};function sf(){if(Na&&!(10<=Number(kM)))throw Error("Environmental error: no available transport.")}sf.prototype.g=function(t,e){return new on(t,e)};function on(t,e){tr.call(this),this.g=new XT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Qc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qc(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Xa(this)}mr(on,tr);on.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,r=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),qg(cr(t.hb,t,e))),Lr(0),t.W=e,t.aa=r||{},t.N=t.X,t.F=i_(t,null,t.W),Zf(t)};on.prototype.close=function(){av(this.g)};on.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,wh(this.g,e)}else this.v?(e={},e.__data__=Wg(t),wh(this.g,e)):wh(this.g,t)};on.prototype.M=function(){this.g.j=null,delete this.j,av(this.g),delete this.g,on.Z.M.call(this)};function o_(t){Jg.call(this);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mr(o_,Jg);function l_(){Zg.call(this),this.status=1}mr(l_,Zg);function Xa(t){this.g=t}mr(Xa,a_);Xa.prototype.xa=function(){fr(this.g,"a")};Xa.prototype.wa=function(t){fr(this.g,new o_(t))};Xa.prototype.va=function(t){fr(this.g,new l_(t))};Xa.prototype.ua=function(){fr(this.g,"b")};sf.prototype.createWebChannel=sf.prototype.g;on.prototype.send=on.prototype.u;on.prototype.open=on.prototype.m;on.prototype.close=on.prototype.close;Kf.NO_ERROR=0;Kf.TIMEOUT=8;Kf.HTTP_ERROR=6;RT.COMPLETE="complete";kT.EventType=Yl;Yl.OPEN="a";Yl.CLOSE="b";Yl.ERROR="c";Yl.MESSAGE="d";tr.prototype.listen=tr.prototype.N;Wt.prototype.listenOnce=Wt.prototype.O;Wt.prototype.getLastError=Wt.prototype.La;Wt.prototype.getLastErrorCode=Wt.prototype.Da;Wt.prototype.getStatus=Wt.prototype.ba;Wt.prototype.getResponseJson=Wt.prototype.Qa;Wt.prototype.getResponseText=Wt.prototype.ga;Wt.prototype.send=Wt.prototype.ea;var yF=function(){return new sf},EF=function(){return zf()},xh=Kf,wF=RT,xF=Us,UE={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},SF=Jl,Ku=kT,TF=Wt;const BE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="9.6.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new Ig("@firebase/firestore");function $E(){return Rs.logLevel}function je(t,...e){if(Rs.logLevel<=yt.DEBUG){const r=e.map(uv);Rs.debug(`Firestore (${Qa}): ${t}`,...r)}}function Bi(t,...e){if(Rs.logLevel<=yt.ERROR){const r=e.map(uv);Rs.error(`Firestore (${Qa}): ${t}`,...r)}}function VE(t,...e){if(Rs.logLevel<=yt.WARN){const r=e.map(uv);Rs.warn(`Firestore (${Qa}): ${t}`,...r)}}function uv(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t="Unexpected state"){const e=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: `+t;throw Bi(e),new Error(e)}function _t(t,e){t||Je()}function et(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Fs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Fr.UNAUTHENTICATED))}shutdown(){}}class CF{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let s=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vs,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},l=d=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?l(d):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vs)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string"),new _F(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new Fr(e)}}class IF{constructor(e,r,n){this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class AF{constructor(e,r,n){this.h=e,this.l=r,this.m=n}getToken(){return Promise.resolve(new IF(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kF{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,r){const n=s=>{s.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.p;return this.p=s.token,je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_t(typeof r.token=="string"),this.p=r.token,new RF(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.I(n),this.T=n=>r.writeSequenceNumber(n))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cv.A=-1;class u_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=LF(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function Et(t,e){return t<e?-1:t>e?1:0}function Ma(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new He(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new He(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new He(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sr.fromMillis(Date.now())}static fromDate(e){return Sr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Sr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nt(e)}static min(){return new nt(new Sr(0,0))}static max(){return new nt(new Sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Bs(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function c_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,r,n){r===void 0?r=0:r>e.length&&Je(),n===void 0?n=e.length-r:n>e.length-r&&Je(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Sl.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ot extends Sl{construct(e,r,n){return new Ot(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new He(Ee.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Ot(r)}static emptyPath(){return new Ot([])}}const DF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vr extends Sl{construct(e,r,n){return new Vr(e,r,n)}static isValidIdentifier(e){return DF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new He(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new He(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new He(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(n+=l,i++):(s(),i++)}if(s(),a)throw new He(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vr(r)}static emptyPath(){return new Vr([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.fields=e,e.sort(Vr.comparator)}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new pr(r)}static fromUint8Array(e){const r=function(n){let i="";for(let s=0;s<n.length;++s)i+=String.fromCharCode(n[s]);return i}(e);return new pr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const OF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(t){if(_t(!!t),typeof t=="string"){let e=0;const r=OF.exec(t);if(_t(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fa(t){return typeof t=="string"?pr.fromBase64String(t):pr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function d_(t){const e=t.mapValue.fields.__previous_value__;return f_(e)?d_(e):e}function _l(t){const e=$i(t.mapValue.fields.__local_write_time__.timestampValue);return new Sr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,r,n,i,s,a,l,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.useFetchStreams=d}}class Ua{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){return t==null}function af(t){return t===0&&1/t==-1/0}function NF(t){return typeof t=="number"&&Number.isInteger(t)&&!af(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Ot.fromString(e))}static fromName(e){return new ze(Ot.fromString(e).popFirst(5))}static empty(){return new ze(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ot.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Ot(e.slice()))}}function ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?f_(t)?4:MF(t)?9:10:Je()}function Vn(t,e){if(t===e)return!0;const r=ks(t);if(r!==ks(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _l(t).isEqual(_l(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const s=$i(n.timestampValue),a=$i(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return Fa(n.bytesValue).isEqual(Fa(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return Ht(n.geoPointValue.latitude)===Ht(i.geoPointValue.latitude)&&Ht(n.geoPointValue.longitude)===Ht(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ht(n.integerValue)===Ht(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const s=Ht(n.doubleValue),a=Ht(i.doubleValue);return s===a?af(s)===af(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:return function(n,i){const s=n.mapValue.fields||{},a=i.mapValue.fields||{};if(jE(s)!==jE(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Vn(s[l],a[l])))return!1;return!0}(t,e);default:return Je()}}function bl(t,e){return(t.values||[]).find(r=>Vn(r,e))!==void 0}function Ba(t,e){if(t===e)return 0;const r=ks(t),n=ks(e);if(r!==n)return Et(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Et(t.booleanValue,e.booleanValue);case 2:return function(i,s){const a=Ht(i.integerValue||i.doubleValue),l=Ht(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return GE(t.timestampValue,e.timestampValue);case 4:return GE(_l(t),_l(e));case 5:return Et(t.stringValue,e.stringValue);case 6:return function(i,s){const a=Fa(i),l=Fa(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),l=s.split("/");for(let d=0;d<a.length&&d<l.length;d++){const u=Et(a[d],l[d]);if(u!==0)return u}return Et(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const a=Et(Ht(i.latitude),Ht(s.latitude));return a!==0?a:Et(Ht(i.longitude),Ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],l=s.values||[];for(let d=0;d<a.length&&d<l.length;++d){const u=Ba(a[d],l[d]);if(u)return u}return Et(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){const a=i.fields||{},l=Object.keys(a),d=s.fields||{},u=Object.keys(d);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const w=Et(l[h],u[h]);if(w!==0)return w;const g=Ba(a[l[h]],d[u[h]]);if(g!==0)return g}return Et(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Je()}}function GE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Et(t,e);const r=$i(t),n=$i(e),i=Et(r.seconds,n.seconds);return i!==0?i:Et(r.nanos,n.nanos)}function wa(t){return Zp(t)}function Zp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=$i(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Fa(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,ze.fromName(r).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Zp(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Zp(n.fields[l])}`;return s+"}"}(t.mapValue):Je();var e,r}function em(t){return!!t&&"integerValue"in t}function fv(t){return!!t&&"arrayValue"in t}function HE(t){return!!t&&"nullValue"in t}function zE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function Ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ko(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ko(t.arrayValue.values[r]);return e}return Object.assign({},t)}function MF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!dc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(r)}setAll(e){let r=Vr.emptyPath(),n={},i=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const d=this.getFieldsMap(r);this.applyChanges(d,n,i),n={},i=[],r=l.popLast()}a?n[l.lastSegment()]=Ko(a):i.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());dc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];dc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Bs(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Zr(Ko(this.value))}}function h_(t){const e=[];return Bs(t.fields,(r,n)=>{const i=new Vr([r]);if(dc(n)){const s=h_(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Tl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,r,n,i,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Er(e,0,nt.min(),nt.min(),Zr.empty(),0)}static newFoundDocument(e,r,n){return new Er(e,1,r,nt.min(),n,0)}static newNoDocument(e,r){return new Er(e,2,r,nt.min(),Zr.empty(),0)}static newUnknownDocument(e,r){return new Er(e,3,r,nt.min(),Zr.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function FF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=nt.fromTimestamp(n===1e9?new Sr(r+1,0):new Sr(r,n));return new $a(i,ze.empty(),e)}function UF(t){return new $a(t.readTime,t.key,-1)}class $a{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new $a(nt.min(),ze.empty(),-1)}static max(){return new $a(nt.max(),ze.empty(),-1)}}function BF(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ze.comparator(t.documentKey,e.documentKey),r!==0?r:Et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,r=null,n=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.P=null}}function KE(t,e=null,r=[],n=[],i=null,s=null,a=null){return new $F(t,e,r,n,i,s,a)}function dv(t){const e=et(t);if(e.P===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>{return(i=n).field.canonicalString()+i.op.toString()+wa(i.value);var i}).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Ja(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>wa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>wa(n)).join(",")),e.P=r}return e.P}function VF(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(r=>{return`${(n=r).field.canonicalString()} ${n.op} ${wa(n.value)}`;var n}).join(", ")}]`),Ja(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(r=>function(n){return`${n.field.canonicalString()} (${n.dir})`}(r)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>wa(r)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>wa(r)).join(",")),`Target(${e})`}function hv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!YF(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(r=t.filters[i],n=e.filters[i],r.op!==n.op||!r.field.isEqual(n.field)||!Vn(r.value,n.value))return!1;var r,n;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qE(t.startAt,e.startAt)&&qE(t.endAt,e.endAt)}function tm(t){return ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class jr extends class{}{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.V(e,r,n):new jF(e,r,n):r==="array-contains"?new zF(e,n):r==="in"?new KF(e,n):r==="not-in"?new WF(e,n):r==="array-contains-any"?new qF(e,n):new jr(e,r,n)}static V(e,r,n){return r==="in"?new GF(e,n):new HF(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.v(Ba(r,this.value)):r!==null&&ks(this.value)===ks(r)&&this.v(Ba(r,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Je()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class jF extends jr{constructor(e,r,n){super(e,r,n),this.key=ze.fromName(n.referenceValue)}matches(e){const r=ze.comparator(e.key,this.key);return this.v(r)}}class GF extends jr{constructor(e,r){super(e,"in",r),this.keys=p_("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class HF extends jr{constructor(e,r){super(e,"not-in",r),this.keys=p_("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function p_(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ze.fromName(n.referenceValue))}class zF extends jr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return fv(r)&&bl(r.arrayValue,this.value)}}class KF extends jr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&bl(this.value.arrayValue,r)}}class WF extends jr{constructor(e,r){super(e,"not-in",r)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!bl(this.value.arrayValue,r)}}class qF extends jr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!fv(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>bl(this.value.arrayValue,n))}}class of{constructor(e,r){this.position=e,this.inclusive=r}}class xa{constructor(e,r="asc"){this.field=e,this.dir=r}}function YF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function WE(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=ze.comparator(ze.fromName(a.referenceValue),r.key):n=Ba(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function qE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Vn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,r=null,n=[],i=[],s=null,a="F",l=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=d,this.D=null,this.C=null,this.startAt,this.endAt}}function XF(t,e,r,n,i,s,a,l){return new tu(t,e,r,n,i,s,a,l)}function pv(t){return new tu(t)}function hc(t){return!Ja(t.limit)&&t.limitType==="F"}function lf(t){return!Ja(t.limit)&&t.limitType==="L"}function m_(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function g_(t){for(const e of t.filters)if(e.S())return e.field;return null}function QF(t){return t.collectionGroup!==null}function Cl(t){const e=et(t);if(e.D===null){e.D=[];const r=g_(e),n=m_(e);if(r!==null&&n===null)r.isKeyField()||e.D.push(new xa(r)),e.D.push(new xa(Vr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new xa(Vr.keyField(),s))}}}return e.D}function Ls(t){const e=et(t);if(!e.C)if(e.limitType==="F")e.C=KE(e.path,e.collectionGroup,Cl(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const s of Cl(e)){const a=s.dir==="desc"?"asc":"desc";r.push(new xa(s.field,a))}const n=e.endAt?new of(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new of(e.startAt.position,!e.startAt.inclusive):null;e.C=KE(e.path,e.collectionGroup,r,e.filters,e.limit,n,i)}return e.C}function v_(t,e,r){return new tu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function ed(t,e){return hv(Ls(t),Ls(e))&&t.limitType===e.limitType}function y_(t){return`${dv(Ls(t))}|lt:${t.limitType}`}function rm(t){return`Query(target=${VF(Ls(t))}; limitType=${t.limitType})`}function mv(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ze.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of r.explicitOrderBy)if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!function(i,s,a){const l=WE(i,s,a);return i.inclusive?l<=0:l<0}(r.startAt,Cl(r),n)||r.endAt&&!function(i,s,a){const l=WE(i,s,a);return i.inclusive?l>=0:l>0}(r.endAt,Cl(r),n))}(t,e)}function JF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function E_(t){return(e,r)=>{let n=!1;for(const i of Cl(t)){const s=ZF(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function ZF(t,e,r){const n=t.field.isKeyField()?ze.comparator(e.key,r.key):function(i,s,a){const l=s.data.field(i),d=a.data.field(i);return l!==null&&d!==null?Ba(l,d):Je()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Je()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function x_(t){return{integerValue:""+t}}function e3(t,e){return NF(e)?x_(e):w_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(){this._=void 0}}function t3(t,e,r){return t instanceof Il?function(n,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(r,e):t instanceof Al?T_(t,e):t instanceof Rl?__(t,e):function(n,i){const s=S_(n,i),a=YE(s)+YE(n.k);return em(s)&&em(n.k)?x_(a):w_(n.M,a)}(t,e)}function r3(t,e,r){return t instanceof Al?T_(t,e):t instanceof Rl?__(t,e):r}function S_(t,e){return t instanceof uf?em(r=e)||function(n){return!!n&&"doubleValue"in n}(r)?e:{integerValue:0}:null;var r}class Il extends td{}class Al extends td{constructor(e){super(),this.elements=e}}function T_(t,e){const r=b_(e);for(const n of t.elements)r.some(i=>Vn(i,n))||r.push(n);return{arrayValue:{values:r}}}class Rl extends td{constructor(e){super(),this.elements=e}}function __(t,e){let r=b_(e);for(const n of t.elements)r=r.filter(i=>!Vn(i,n));return{arrayValue:{values:r}}}class uf extends td{constructor(e,r){super(),this.M=e,this.k=r}}function YE(t){return Ht(t.integerValue||t.doubleValue)}function b_(t){return fv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,r){this.field=e,this.transform=r}}function i3(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof Al&&n instanceof Al||r instanceof Rl&&n instanceof Rl?Ma(r.elements,n.elements,Vn):r instanceof uf&&n instanceof uf?Vn(r.k,n.k):r instanceof Il&&n instanceof Il}(t.transform,e.transform)}class s3{constructor(e,r){this.version=e,this.transformResults=r}}class ys{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rd{}function a3(t,e,r){t instanceof nd?function(n,i,s){const a=n.value.clone(),l=JE(n.fieldTransforms,i,s.transformResults);a.setAll(l),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof Za?function(n,i,s){if(!pc(n.precondition,i))return void i.convertToUnknownDocument(s.version);const a=JE(n.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(C_(n)),l.setAll(a),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(n,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function nm(t,e,r){t instanceof nd?function(n,i,s){if(!pc(n.precondition,i))return;const a=n.value.clone(),l=ZE(n.fieldTransforms,s,i);a.setAll(l),i.convertToFoundDocument(QE(i),a).setHasLocalMutations()}(t,e,r):t instanceof Za?function(n,i,s){if(!pc(n.precondition,i))return;const a=ZE(n.fieldTransforms,s,i),l=i.data;l.setAll(C_(n)),l.setAll(a),i.convertToFoundDocument(QE(i),l).setHasLocalMutations()}(t,e,r):function(n,i){pc(n.precondition,i)&&i.convertToNoDocument(nt.min())}(t,e)}function o3(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=S_(n.transform,i||null);s!=null&&(r==null&&(r=Zr.empty()),r.set(n.field,s))}return r||null}function XE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&Ma(r,n,(i,s)=>i3(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function QE(t){return t.isFoundDocument()?t.version:nt.min()}class nd extends rd{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}}class Za extends rd{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function C_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function JE(t,e,r){const n=new Map;_t(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);n.set(s.field,r3(a,l,r[i]))}return n}function ZE(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,t3(s,a,e))}return n}class l3 extends rd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class u3 extends rd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,ht;function f3(t){switch(t){default:return Je();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0}}function I_(t){if(t===void 0)return Bi("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case Gt.OK:return Ee.OK;case Gt.CANCELLED:return Ee.CANCELLED;case Gt.UNKNOWN:return Ee.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return Ee.INTERNAL;case Gt.UNAVAILABLE:return Ee.UNAVAILABLE;case Gt.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Gt.NOT_FOUND:return Ee.NOT_FOUND;case Gt.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Gt.ABORTED:return Ee.ABORTED;case Gt.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Gt.DATA_LOSS:return Ee.DATA_LOSS;default:return Je()}}(ht=Gt||(Gt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return c_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,r){this.comparator=e,this.root=r||lr.EMPTY}insert(e,r){return new rr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lr{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n!=null?n:lr.RED,this.left=i!=null?i:lr.EMPTY,this.right=s!=null?s:lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new lr(e!=null?e:this.key,r!=null?r:this.value,n!=null?n:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return lr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1;lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(t,e,r,n,i){return this}insert(t,e,r){return new lr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ew(this.data.getIterator())}getIteratorFrom(e){return new ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new dr(this.comparator);return r.data=e,r}}class ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new rr(ze.comparator);function Ds(){return d3}const h3=new rr(ze.comparator);function im(){return h3}function Sh(){return new eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const p3=new rr(ze.comparator),m3=new dr(ze.comparator);function At(...t){let e=m3;for(const r of t)e=e.add(r);return e}const g3=new dr(Et);function A_(){return g3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r){const n=new Map;return n.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,r)),new id(nt.min(),n,A_(),Ds(),At())}}class ru{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r){return new ru(pr.EMPTY_BYTE_STRING,r,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,r,n,i){this.O=e,this.removedTargetIds=r,this.key=n,this.F=i}}class R_{constructor(e,r){this.targetId=e,this.$=r}}class k_{constructor(e,r,n=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class tw{constructor(){this.B=0,this.L=nw(),this.U=pr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return this.B!==0}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=At(),r=At(),n=At();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Je()}}),new ru(this.U,this.q,e,r,n)}J(){this.G=!1,this.L=nw()}Y(e,r){this.G=!0,this.L=this.L.insert(e,r)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class v3{constructor(e){this.nt=e,this.st=new Map,this.it=Ds(),this.rt=rw(),this.ot=new dr(Et)}ut(e){for(const r of e.O)e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F);for(const r of e.removedTargetIds)this.ct(r,e.key,e.F)}ht(e){this.forEachTarget(e,r=>{const n=this.lt(r);switch(e.state){case 0:this.ft(r)&&n.W(e.resumeToken);break;case 1:n.tt(),n.K||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.K||this.removeTarget(r);break;case 3:this.ft(r)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(r)&&(this.dt(r),n.W(e.resumeToken));break;default:Je()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.st.forEach((n,i)=>{this.ft(i)&&r(i)})}_t(e){const r=e.targetId,n=e.$.count,i=this.wt(r);if(i){const s=i.target;if(tm(s))if(n===0){const a=new ze(s.path);this.ct(r,a,Er.newNoDocument(a,nt.min()))}else _t(n===1);else this.gt(r)!==n&&(this.dt(r),this.ot=this.ot.add(r))}}yt(e){const r=new Map;this.st.forEach((s,a)=>{const l=this.wt(a);if(l){if(s.current&&tm(l.target)){const d=new ze(l.target.path);this.it.get(d)!==null||this.It(a,d)||this.ct(a,d,Er.newNoDocument(d,e))}s.j&&(r.set(a,s.H()),s.J())}});let n=At();this.rt.forEach((s,a)=>{let l=!0;a.forEachWhile(d=>{const u=this.wt(d);return!u||u.purpose===2||(l=!1,!1)}),l&&(n=n.add(s))}),this.it.forEach((s,a)=>a.setReadTime(e));const i=new id(e,r,this.ot,this.it,n);return this.it=Ds(),this.rt=rw(),this.ot=new dr(Et),i}at(e,r){if(!this.ft(e))return;const n=this.It(e,r.key)?2:0;this.lt(e).Y(r.key,n),this.it=this.it.insert(r.key,r),this.rt=this.rt.insert(r.key,this.Tt(r.key).add(e))}ct(e,r,n){if(!this.ft(e))return;const i=this.lt(e);this.It(e,r)?i.Y(r,1):i.X(r),this.rt=this.rt.insert(r,this.Tt(r).delete(e)),n&&(this.it=this.it.insert(r,n))}removeTarget(e){this.st.delete(e)}gt(e){const r=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let r=this.st.get(e);return r||(r=new tw,this.st.set(e,r)),r}Tt(e){let r=this.rt.get(e);return r||(r=new dr(Et),this.rt=this.rt.insert(e,r)),r}ft(e){const r=this.wt(e)!==null;return r||je("WatchChangeAggregator","Detected inactive target",e),r}wt(e){const r=this.st.get(e);return r&&r.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new tw),this.nt.getRemoteKeysForTarget(e).forEach(r=>{this.ct(e,r,null)})}It(e,r){return this.nt.getRemoteKeysForTarget(e).has(r)}}function rw(){return new rr(ze.comparator)}function nw(){return new rr(ze.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),E3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class w3{constructor(e,r){this.databaseId=e,this.N=r}}function cf(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L_(t,e){return t.N?e.toBase64():e.toUint8Array()}function x3(t,e){return cf(t,e.toTimestamp())}function ri(t){return _t(!!t),nt.fromTimestamp(function(e){const r=$i(e);return new Sr(r.seconds,r.nanos)}(t))}function gv(t,e){return function(r){return new Ot(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function D_(t){const e=Ot.fromString(t);return _t(N_(e)),e}function sm(t,e){return gv(t.databaseId,e.path)}function Th(t,e){const r=D_(e);if(r.get(1)!==t.databaseId.projectId)throw new He(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new He(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ze(O_(r))}function am(t,e){return gv(t.databaseId,e)}function S3(t){const e=D_(t);return e.length===4?Ot.emptyPath():O_(e)}function om(t){return new Ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O_(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iw(t,e,r){return{name:sm(t,e),fields:r.value.mapValue.fields}}function T3(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Je()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,u){return d.N?(_t(u===void 0||typeof u=="string"),pr.fromBase64String(u||"")):(_t(u===void 0||u instanceof Uint8Array),pr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const u=d.code===void 0?Ee.UNKNOWN:I_(d.code);return new He(u,d.message||"")}(a);r=new k_(n,i,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Th(t,n.document.name),s=ri(n.document.updateTime),a=new Zr({mapValue:{fields:n.document.fields}}),l=Er.newFoundDocument(i,s,a),d=n.targetIds||[],u=n.removedTargetIds||[];r=new mc(d,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Th(t,n.document),s=n.readTime?ri(n.readTime):nt.min(),a=Er.newNoDocument(i,s),l=n.removedTargetIds||[];r=new mc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Th(t,n.document),s=n.removedTargetIds||[];r=new mc([],s,i,null)}else{if(!("filter"in e))return Je();{e.filter;const n=e.filter;n.targetId;const i=n.count||0,s=new c3(i),a=n.targetId;r=new R_(a,s)}}return r}function _3(t,e){let r;if(e instanceof nd)r={update:iw(t,e.key,e.value)};else if(e instanceof l3)r={delete:sm(t,e.key)};else if(e instanceof Za)r={update:iw(t,e.key,e.data),updateMask:P3(e.fieldMask)};else{if(!(e instanceof u3))return Je();r={verify:sm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const a=s.transform;if(a instanceof Il)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Al)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Rl)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uf)return{fieldPath:s.field.canonicalString(),increment:a.k};throw Je()}(0,n))),e.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:x3(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Je()}(t,e.precondition)),r}function b3(t,e){return t&&t.length>0?(_t(e!==void 0),t.map(r=>function(n,i){let s=n.updateTime?ri(n.updateTime):ri(i);return s.isEqual(nt.min())&&(s=ri(i)),new s3(s,n.transformResults||[])}(r,e))):[]}function C3(t,e){return{documents:[am(t,e.path)]}}function I3(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=am(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=am(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(d){if(d.length===0)return;const u=d.map(h=>function(w){if(w.op==="=="){if(zE(w.value))return{unaryFilter:{field:Qs(w.field),op:"IS_NAN"}};if(HE(w.value))return{unaryFilter:{field:Qs(w.field),op:"IS_NULL"}}}else if(w.op==="!="){if(zE(w.value))return{unaryFilter:{field:Qs(w.field),op:"IS_NOT_NAN"}};if(HE(w.value))return{unaryFilter:{field:Qs(w.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qs(w.field),op:L3(w.op),value:w.value}}}(h));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);i&&(r.structuredQuery.where=i);const s=function(d){if(d.length!==0)return d.map(u=>function(h){return{field:Qs(h.field),direction:k3(h.dir)}}(u))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=function(d,u){return d.N||Ja(u)?u:{value:u}}(t,e.limit);var l;return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),r}function A3(t){let e=S3(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){_t(n===1);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=P_(r.where));let a=[];r.orderBy&&(a=r.orderBy.map(h=>function(w){return new xa(ca(w.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(h)));let l=null;r.limit&&(l=function(h){let w;return w=typeof h=="object"?h.value:h,Ja(w)?null:w}(r.limit));let d=null;r.startAt&&(d=function(h){const w=!!h.before,g=h.values||[];return new of(g,w)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const w=!h.before,g=h.values||[];return new of(g,w)}(r.endAt)),XF(e,i,a,s,l,"F",d,u)}function R3(t,e){const r=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return r==null?null:{"goog-listen-tags":r}}function P_(t){return t?t.unaryFilter!==void 0?[O3(t)]:t.fieldFilter!==void 0?[D3(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>P_(e)).reduce((e,r)=>e.concat(r)):Je():[]}function k3(t){return y3[t]}function L3(t){return E3[t]}function Qs(t){return{fieldPath:t.canonicalString()}}function ca(t){return Vr.fromServerFormat(t.fieldPath)}function D3(t){return jr.create(ca(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(t.fieldFilter.op),t.fieldFilter.value)}function O3(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ca(t.unaryFilter.field);return jr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=ca(t.unaryFilter.field);return jr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=ca(t.unaryFilter.field);return jr.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ca(t.unaryFilter.field);return jr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function P3(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function N_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class M3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new be((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof be?r:be.resolve(r)}catch(r){return be.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):be.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):be.reject(r)}static resolve(e){return new be((r,n)=>{r(e)})}static reject(e){return new be((r,n)=>{n(e)})}static waitFor(e){return new be((r,n)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&r()},d=>n(d))}),a=!0,s===i&&r()})}static or(e){let r=be.resolve(!1);for(const n of e)r=r.next(i=>i?be.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}}function nu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&a3(s,e,n[i])}}applyToLocalView(e){for(const r of this.baseMutations)r.key.isEqual(e.key)&&nm(r,e,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(e.key)&&nm(r,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(r=>{const n=e.get(r.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(nt.min())})}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),At())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(r,n)=>XE(r,n))&&Ma(this.baseMutations,e.baseMutations,(r,n)=>XE(r,n))}}class vv{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){_t(e.mutations.length===n.length);let i=p3;const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new vv(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,r,n,i,s=nt.min(),a=nt.min(),l=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.Jt=e}}function $3(t){const e=A3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?v_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.qe=new j3}addToCollectionParentIndex(e,r){return this.qe.add(r),be.resolve()}getCollectionParents(e,r){return be.resolve(this.qe.getEntries(r))}addFieldIndex(e,r){return be.resolve()}deleteFieldIndex(e,r){return be.resolve()}getDocumentsMatchingTarget(e,r){return be.resolve(null)}getFieldIndex(e,r){return be.resolve(null)}getFieldIndexes(e,r){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}updateCollectionGroup(e,r,n){return be.resolve()}updateIndexEntries(e,r){return be.resolve()}}class j3{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new dr(Ot.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new dr(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Va(0)}static gn(){return new Va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==N3)throw t;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.changes=new eo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?be.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,r,n){this.fs=e,this.$s=r,this.indexManager=n}Bs(e,r){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,r).next(n=>this.Ls(e,r,n))}Ls(e,r,n){return this.fs.getEntry(e,r).next(i=>{for(const s of n)s.applyToLocalView(i);return i})}Us(e,r){e.forEach((n,i)=>{for(const s of r)s.applyToLocalView(i)})}qs(e,r){return this.fs.getEntries(e,r).next(n=>this.Gs(e,n).next(()=>n))}Gs(e,r){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,r).next(n=>this.Us(r,n))}Ks(e,r,n){return function(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.Qs(e,r.path):QF(r)?this.js(e,r,n):this.Ws(e,r,n)}Qs(e,r){return this.Bs(e,new ze(r)).next(n=>{let i=im();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}js(e,r,n){const i=r.collectionGroup;let s=im();return this.indexManager.getCollectionParents(e,i).next(a=>be.forEach(a,l=>{const d=function(u,h){return new tu(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(r,l.child(i));return this.Ws(e,d,n).next(u=>{u.forEach((h,w)=>{s=s.insert(h,w)})})}).next(()=>s))}Ws(e,r,n){let i;return this.fs.getAllFromCollection(e,r.path,n).next(s=>(i=s,this.$s.getAllMutationBatchesAffectingQuery(e,r))).next(s=>{for(const a of s)for(const l of a.mutations){const d=l.key;let u=i.get(d);u==null&&(u=Er.newInvalidDocument(d),i=i.insert(d,u)),nm(l,u,a.localWriteTime),u.isFoundDocument()||(i=i.remove(d))}}).next(()=>(i.forEach((s,a)=>{mv(r,a)||(i=i.remove(s))}),i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.zs=n,this.Hs=i}static Js(e,r){let n=At(),i=At();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yv(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{Ys(e){this.Xs=e}Ks(e,r,n,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(r)||n.isEqual(nt.min())?this.Zs(e,r):this.Xs.qs(e,i).next(s=>{const a=this.ti(r,s);return(hc(r)||lf(r))&&this.ei(r.limitType,a,i,n)?this.Zs(e,r):($E()<=yt.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),rm(r)),this.Xs.Ks(e,r,FF(n,-1)).next(l=>(a.forEach(d=>{l=l.insert(d.key,d)}),l)))})}ti(e,r){let n=new dr(E_(e));return r.forEach((i,s)=>{mv(e,s)&&(n=n.add(s))}),n}ei(e,r,n,i){if(n.size!==r.size)return!0;const s=e==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zs(e,r){return $E()<=yt.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",rm(r)),this.Xs.Ks(e,r,$a.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,r,n,i){this.persistence=e,this.ni=r,this.M=i,this.si=new rr(Et),this.ii=new eo(s=>dv(s),hv),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(n)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new H3(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.si))}}function W3(t,e,r,n){return new K3(t,e,r,n)}async function M_(t,e){const r=et(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.$s.getAllMutationBatches(n).next(s=>(i=s,r.ui(e),r.$s.getAllMutationBatches(n))).next(s=>{const a=[],l=[];let d=At();for(const u of i){a.push(u.batchId);for(const h of u.mutations)d=d.add(h.key)}for(const u of s){l.push(u.batchId);for(const h of u.mutations)d=d.add(h.key)}return r.ai.qs(n,d).next(u=>({ci:u,removedBatchIds:a,addedBatchIds:l}))})})}function q3(t,e){const r=et(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.oi.newChangeBuffer({trackRemovals:!0});return function(a,l,d,u){const h=d.batch,w=h.keys();let g=be.resolve();return w.forEach(S=>{g=g.next(()=>u.getEntry(l,S)).next(C=>{const R=d.docVersions.get(S);_t(R!==null),C.version.compareTo(R)<0&&(h.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),u.addEntry(C)))})}),g.next(()=>a.$s.removeMutationBatch(l,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.$s.performConsistencyCheck(n)).next(()=>r.ai.qs(n,i))})}function F_(t){const e=et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.ls.getLastRemoteSnapshotVersion(r))}function Y3(t,e){const r=et(t),n=e.snapshotVersion;let i=r.si;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.oi.newChangeBuffer({trackRemovals:!0});i=r.si;const l=[];e.targetChanges.forEach((u,h)=>{const w=i.get(h);if(!w)return;l.push(r.ls.removeMatchingKeys(s,u.removedDocuments,h).next(()=>r.ls.addMatchingKeys(s,u.addedDocuments,h)));let g=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?g=g.withResumeToken(pr.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,n)),i=i.insert(h,g),function(S,C,R){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(w,g,u)&&l.push(r.ls.updateTargetData(s,g))});let d=Ds();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,u))}),l.push(X3(s,a,e.documentUpdates).next(u=>{d=u})),!n.isEqual(nt.min())){const u=r.ls.getLastRemoteSnapshotVersion(s).next(h=>r.ls.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(u)}return be.waitFor(l).next(()=>a.apply(s)).next(()=>r.ai.Gs(s,d)).next(()=>d)}).then(s=>(r.si=i,s))}function X3(t,e,r){let n=At();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let s=Ds();return r.forEach((a,l)=>{const d=i.get(a);l.isNoDocument()&&l.version.isEqual(nt.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):je("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),s})}function Q3(t,e){const r=et(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.$s.getNextMutationBatchAfterBatchId(n,e)))}function J3(t,e){const r=et(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.ls.getTargetData(n,e).next(s=>s?(i=s,be.resolve(i)):r.ls.allocateTargetId(n).next(a=>(i=new Es(e,a,0,n.currentSequenceNumber),r.ls.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.si.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.si=r.si.insert(n.targetId,n),r.ii.set(e,n.targetId)),n})}async function lm(t,e,r){const n=et(t),i=n.si.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!nu(a))throw a;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.si=n.si.remove(e),n.ii.delete(i.target)}function sw(t,e,r){const n=et(t);let i=nt.min(),s=At();return n.persistence.runTransaction("Execute query","readonly",a=>function(l,d,u){const h=et(l),w=h.ii.get(u);return w!==void 0?be.resolve(h.si.get(w)):h.ls.getTargetData(d,u)}(n,a,Ls(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.ls.getMatchingKeysForTargetId(a,l.targetId).next(d=>{s=d})}).next(()=>n.ni.Ks(a,e,r?i:nt.min(),r?s:At())).next(l=>(Z3(n,JF(e),l),{documents:l,hi:s})))}function Z3(t,e,r){let n=nt.min();r.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.ri.set(e,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,r){return be.resolve(this._i.get(r))}saveBundleMetadata(e,r){var n;return this._i.set(r.id,{id:(n=r).id,version:n.version,createTime:ri(n.createTime)}),be.resolve()}getNamedQuery(e,r){return be.resolve(this.wi.get(r))}saveNamedQuery(e,r){return this.wi.set(r.name,function(n){return{name:n.name,query:$3(n.bundledQuery),readTime:ri(n.readTime)}}(r)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.overlays=new rr(ze.comparator),this.mi=new Map}getOverlay(e,r){return be.resolve(this.overlays.get(r))}saveOverlays(e,r,n){return n.forEach((i,s)=>{this.Xt(e,r,s)}),be.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.mi.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.mi.delete(n)),be.resolve()}getOverlaysForCollection(e,r,n){const i=Sh(),s=r.length+1,a=new ze(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const d=l.getNext().value,u=d.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&d.largestBatchId>n&&i.set(d.getKey(),d)}return be.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let s=new rr((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let h=s.get(u.largestBatchId);h===null&&(h=Sh(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Sh(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=i)););return be.resolve(l)}Xt(e,r,n){if(n===null)return;const i=this.overlays.get(n.key);if(i!==null){const a=this.mi.get(i.largestBatchId).delete(n.key);this.mi.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new U3(r,n));let s=this.mi.get(r);s===void 0&&(s=At(),this.mi.set(r,s)),this.mi.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.gi=new dr(Jt.yi),this.pi=new dr(Jt.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,r){const n=new Jt(e,r);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}Ti(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Ei(new Jt(e,r))}Ai(e,r){e.forEach(n=>this.removeReference(n,r))}Ri(e){const r=new ze(new Ot([])),n=new Jt(r,e),i=new Jt(r,e+1),s=[];return this.pi.forEachInRange([n,i],a=>{this.Ei(a),s.push(a.key)}),s}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const r=new ze(new Ot([])),n=new Jt(r,e),i=new Jt(r,e+1);let s=At();return this.pi.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new Jt(e,0),n=this.gi.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Jt{constructor(e,r){this.key=e,this.Vi=r}static yi(e,r){return ze.comparator(e.key,r.key)||Et(e.Vi,r.Vi)}static Ii(e,r){return Et(e.Vi,r.Vi)||ze.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.$s=[],this.vi=1,this.Si=new dr(Jt.yi)}checkEmpty(e){return be.resolve(this.$s.length===0)}addMutationBatch(e,r,n,i){const s=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];const a=new F3(s,r,n,i);this.$s.push(a);for(const l of i)this.Si=this.Si.add(new Jt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return be.resolve(a)}lookupMutationBatch(e,r){return be.resolve(this.Di(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.Ci(n),s=i<0?0:i;return be.resolve(this.$s.length>s?this.$s[s]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.$s.length===0?-1:this.vi-1)}getAllMutationBatches(e){return be.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Jt(r,0),i=new Jt(r,Number.POSITIVE_INFINITY),s=[];return this.Si.forEachInRange([n,i],a=>{const l=this.Di(a.Vi);s.push(l)}),be.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new dr(Et);return r.forEach(i=>{const s=new Jt(i,0),a=new Jt(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([s,a],l=>{n=n.add(l.Vi)})}),be.resolve(this.xi(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;ze.isDocumentKey(s)||(s=s.child(""));const a=new Jt(new ze(s),0);let l=new dr(Et);return this.Si.forEachWhile(d=>{const u=d.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(l=l.add(d.Vi)),!0)},a),be.resolve(this.xi(l))}xi(e){const r=[];return e.forEach(n=>{const i=this.Di(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){_t(this.Ni(r.batchId,"removed")===0),this.$s.shift();let n=this.Si;return be.forEach(r.mutations,i=>{const s=new Jt(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=n})}dn(e){}containsKey(e,r){const n=new Jt(r,0),i=this.Si.firstAfterOrEqual(n);return be.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.$s.length,be.resolve()}Ni(e,r){return this.Ci(e)}Ci(e){return this.$s.length===0?0:e-this.$s[0].batchId}Di(e){const r=this.Ci(e);return r<0||r>=this.$s.length?null:this.$s[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.ki=e,this.docs=new rr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),s=i?i.size:0,a=this.ki(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return be.resolve(n?n.document.mutableCopy():Er.newInvalidDocument(r))}getEntries(e,r){let n=Ds();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Er.newInvalidDocument(i))}),be.resolve(n)}getAllFromCollection(e,r,n){let i=Ds();const s=new ze(r.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:l,value:{document:d}}=a.getNext();if(!r.isPrefixOf(l.path))break;l.path.length>r.length+1||BF(UF(d),n)<=0||(i=i.insert(d.key,d.mutableCopy()))}return be.resolve(i)}getAllFromCollectionGroup(e,r,n,i){Je()}Mi(e,r){return be.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new i4(this)}getSize(e){return be.resolve(this.size)}}class i4 extends G3{constructor(e){super(),this.qn=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.qn.addEntry(e,i)):this.qn.removeEntry(n)}),be.waitFor(r)}getFromCache(e,r){return this.qn.getEntry(e,r)}getAllFromCache(e,r){return this.qn.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.persistence=e,this.Oi=new eo(r=>dv(r),hv),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Ev,this.targetCount=0,this.Bi=Va.mn()}forEachTarget(e,r){return this.Oi.forEach((n,i)=>r(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Fi&&(this.Fi=r),be.resolve()}In(e){this.Oi.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Bi=new Va(r),this.highestTargetId=r),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,r){return this.In(r),this.targetCount+=1,be.resolve()}updateTargetData(e,r){return this.In(r),be.resolve()}removeTargetData(e,r){return this.Oi.delete(r.target),this.$i.Ri(r.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Oi.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),be.waitFor(s).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,r){const n=this.Oi.get(r)||null;return be.resolve(n)}addMatchingKeys(e,r,n){return this.$i.Ti(r,n),be.resolve()}removeMatchingKeys(e,r,n){this.$i.Ai(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),be.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.$i.Ri(r),be.resolve()}getMatchingKeysForTargetId(e,r){const n=this.$i.Pi(r);return be.resolve(n)}containsKey(e,r){return be.resolve(this.$i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,r){this.Li={},this.overlays={},this.ts=new cv(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new s4(this),this.indexManager=new V3,this.fs=function(n){return new n4(n)}(n=>this.referenceDelegate.Ui(n)),this.M=new B3(r),this.ds=new e4(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new t4,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.Li[e.toKey()];return n||(n=new r4(r,this.referenceDelegate),this.Li[e.toKey()]=n),n}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,r,n){je("MemoryPersistence","Starting transaction:",e);const i=new o4(this.ts.next());return this.referenceDelegate.qi(),n(i).next(s=>this.referenceDelegate.Gi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ki(e,r){return be.or(Object.values(this.Li).map(n=>()=>n.containsKey(e,r)))}}class o4 extends M3{constructor(e){super(),this.currentSequenceNumber=e}}class wv{constructor(e){this.persistence=e,this.Qi=new Ev,this.ji=null}static Wi(e){return new wv(e)}get zi(){if(this.ji)return this.ji;throw Je()}addReference(e,r,n){return this.Qi.addReference(n,r),this.zi.delete(n.toString()),be.resolve()}removeReference(e,r,n){return this.Qi.removeReference(n,r),this.zi.add(n.toString()),be.resolve()}markPotentiallyOrphaned(e,r){return this.zi.add(r.toString()),be.resolve()}removeTarget(e,r){this.Qi.Ri(r.targetId).forEach(i=>this.zi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.zi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}qi(){this.ji=new Set}Gi(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.zi,n=>{const i=ze.fromPath(n);return this.Hi(e,i).next(s=>{s||r.removeEntry(i,nt.min())})}).next(()=>(this.ji=null,r.apply(e)))}updateLimboDocument(e,r){return this.Hi(e,r).next(n=>{n?this.zi.delete(r.toString()):this.zi.add(r.toString())})}Ui(e){return 0}Hi(e,r){return be.or([()=>be.resolve(this.Qi.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ki(e,r)])}}class aw{constructor(){this.activeTargetIds=A_()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l4{constructor(){this.Fr=new aw,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,r,n){this.$r[e]=r}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new aw,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http";this.so=r+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,r,n,i,s){const a=this.oo(e,r);je("RestConnection","Sending: ",a,n);const l={};return this.uo(l,i,s),this.ao(e,a,l,n).then(d=>(je("RestConnection","Received: ",d),d),d=>{throw VE("RestConnection",`${e} failed with error: `,d,"url: ",a,"request:",n),d})}co(e,r,n,i,s){return this.ro(e,r,n,i,s)}uo(e,r,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}oo(e,r){const n=c4[e];return`${this.so}/v1/${r}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,r,n,i){return new Promise((s,a)=>{const l=new TF;l.listenOnce(wF.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xh.NO_ERROR:const u=l.getResponseJson();je("Connection","XHR received:",JSON.stringify(u)),s(u);break;case xh.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),a(new He(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const h=l.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',h,"response text:",l.getResponseText()),h>0){const w=l.getResponseJson().error;if(w&&w.status&&w.message){const g=function(S){const C=S.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(C)>=0?C:Ee.UNKNOWN}(w.status);a(new He(g,w.message))}else a(new He(Ee.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new He(Ee.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const d=JSON.stringify(i);l.send(r,"POST",d,n,15)})}ho(e,r,n){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yF(),a=EF(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new SF({})),this.uo(l.initMessageHeaders,r,n),_1()||C1()||SP()||I1()||TP()||b1()||(l.httpHeadersOverwriteParam="$httpHeaders");const d=i.join("");je("Connection","Creating WebChannel: "+d,l);const u=s.createWebChannel(d,l);let h=!1,w=!1;const g=new f4({jr:C=>{w?je("Connection","Not sending because WebChannel is closed:",C):(h||(je("Connection","Opening WebChannel transport."),u.open(),h=!0),je("Connection","WebChannel sending:",C),u.send(C))},Wr:()=>u.close()}),S=(C,R,O)=>{C.listen(R,T=>{try{O(T)}catch(I){setTimeout(()=>{throw I},0)}})};return S(u,Ku.EventType.OPEN,()=>{w||je("Connection","WebChannel transport opened.")}),S(u,Ku.EventType.CLOSE,()=>{w||(w=!0,je("Connection","WebChannel transport closed"),g.eo())}),S(u,Ku.EventType.ERROR,C=>{w||(w=!0,VE("Connection","WebChannel transport errored:",C),g.eo(new He(Ee.UNAVAILABLE,"The operation could not be completed")))}),S(u,Ku.EventType.MESSAGE,C=>{var R;if(!w){const O=C.data[0];_t(!!O);const T=O,I=T.error||((R=T[0])===null||R===void 0?void 0:R.error);if(I){je("Connection","WebChannel received error:",I);const D=I.status;let M=function(B){const z=Gt[B];if(z!==void 0)return I_(z)}(D),j=I.message;M===void 0&&(M=Ee.INTERNAL,j="Unknown error status: "+D+" with message "+I.message),w=!0,g.eo(new He(M,j)),u.close()}else je("Connection","WebChannel received:",O),g.no(O)}}),S(a,xF.STAT_EVENT,C=>{C.stat===UE.PROXY?je("Connection","Detected buffering proxy"):C.stat===UE.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{g.Zr()},0),g}}function _h(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){return new w3(t,!0)}class U_{constructor(e,r,n=1e3,i=1.5,s=6e4){this.Jn=e,this.timerId=r,this.lo=n,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const r=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,r-n);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,r,n,i,s,a,l,d){this.Jn=e,this.Ao=n,this.Ro=i,this.bo=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new U_(e,r)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.Vo===null&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}async close(e,r){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():r&&r.code===Ee.RESOURCE_EXHAUSTED?(Bi(r.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):r&&r.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(r)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),r=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Po===r&&this.Uo(n,i)},n=>{e(()=>{const i=new He(Ee.UNKNOWN,"Fetching auth token failed: "+n.message);return this.qo(i)})})}Uo(e,r){const n=this.Lo(this.Po);this.stream=this.Go(e,r),this.stream.zr(()=>{n(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{n(()=>this.qo(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return r=>{this.Jn.enqueueAndForget(()=>this.Po===e?r():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h4 extends B_{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.M=s}Go(e,r){return this.bo.ho("Listen",e,r)}onMessage(e){this.So.reset();const r=T3(this.M,e),n=function(i){if(!("targetChange"in i))return nt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?nt.min():s.readTime?ri(s.readTime):nt.min()}(e);return this.listener.Ko(r,n)}Qo(e){const r={};r.database=om(this.M),r.addTarget=function(i,s){let a;const l=s.target;return a=tm(l)?{documents:C3(i,l)}:{query:I3(i,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?a.resumeToken=L_(i,s.resumeToken):s.snapshotVersion.compareTo(nt.min())>0&&(a.readTime=cf(i,s.snapshotVersion.toTimestamp())),a}(this.M,e);const n=R3(this.M,e);n&&(r.labels=n),this.Oo(r)}jo(e){const r={};r.database=om(this.M),r.removeTarget=e,this.Oo(r)}}class p4 extends B_{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.M=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,r){return this.bo.ho("Write",e,r)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const r=b3(e.writeResults,e.commitTime),n=ri(e.commitTime);return this.listener.Jo(n,r)}return _t(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=om(this.M),this.Oo(e)}Ho(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>_3(this.M,n))};this.Oo(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4 extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.bo=n,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new He(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,r,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,r,n,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(Ee.UNKNOWN,i.toString())})}co(e,r,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.co(e,r,n,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(Ee.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class g4{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Bi(r),this.su=!1):je("OnlineStateTracker",r)}au(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(a=>{n.enqueueAndForget(async()=>{$s(this)&&(je("RemoteStore","Restarting streams for network reachability change."),await async function(l){const d=et(l);d.lu.add(4),await su(d),d._u.set("Unknown"),d.lu.delete(4),await ad(d)}(this))})}),this._u=new g4(n,i)}}async function ad(t){if($s(t))for(const e of t.fu)await e(!0)}async function su(t){for(const e of t.fu)await e(!1)}function $_(t,e){const r=et(t);r.hu.has(e.targetId)||(r.hu.set(e.targetId,e),Tv(r)?Sv(r):to(r).Co()&&xv(r,e))}function V_(t,e){const r=et(t),n=to(r);r.hu.delete(e),n.Co()&&j_(r,e),r.hu.size===0&&(n.Co()?n.ko():$s(r)&&r._u.set("Unknown"))}function xv(t,e){t.wu.Z(e.targetId),to(t).Qo(e)}function j_(t,e){t.wu.Z(e),to(t).jo(e)}function Sv(t){t.wu=new v3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.hu.get(e)||null}),to(t).start(),t._u.iu()}function Tv(t){return $s(t)&&!to(t).Do()&&t.hu.size>0}function $s(t){return et(t).lu.size===0}function G_(t){t.wu=void 0}async function y4(t){t.hu.forEach((e,r)=>{xv(t,e)})}async function E4(t,e){G_(t),Tv(t)?(t._u.uu(e),Sv(t)):t._u.set("Unknown")}async function w4(t,e,r){if(t._u.set("Online"),e instanceof k_&&e.state===2&&e.cause)try{await async function(n,i){const s=i.cause;for(const a of i.targetIds)n.hu.has(a)&&(await n.remoteSyncer.rejectListen(a,s),n.hu.delete(a),n.wu.removeTarget(a))}(t,e)}catch(n){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ff(t,n)}else if(e instanceof mc?t.wu.ut(e):e instanceof R_?t.wu._t(e):t.wu.ht(e),!r.isEqual(nt.min()))try{const n=await F_(t.localStore);r.compareTo(n)>=0&&await function(i,s){const a=i.wu.yt(s);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.hu.get(d);u&&i.hu.set(d,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach(l=>{const d=i.hu.get(l);if(!d)return;i.hu.set(l,d.withResumeToken(pr.EMPTY_BYTE_STRING,d.snapshotVersion)),j_(i,l);const u=new Es(d.target,l,1,d.sequenceNumber);xv(i,u)}),i.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){je("RemoteStore","Failed to raise snapshot:",n),await ff(t,n)}}async function ff(t,e,r){if(!nu(e))throw e;t.lu.add(1),await su(t),t._u.set("Offline"),r||(r=()=>F_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{je("RemoteStore","Retrying IndexedDB access"),await r(),t.lu.delete(1),await ad(t)})}function H_(t,e){return e().catch(r=>ff(t,r,e))}async function od(t){const e=et(t),r=Vi(e);let n=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;x4(e);)try{const i=await Q3(e.localStore,n);if(i===null){e.cu.length===0&&r.ko();break}n=i.batchId,S4(e,i)}catch(i){await ff(e,i)}z_(e)&&K_(e)}function x4(t){return $s(t)&&t.cu.length<10}function S4(t,e){t.cu.push(e);const r=Vi(t);r.Co()&&r.zo&&r.Ho(e.mutations)}function z_(t){return $s(t)&&!Vi(t).Do()&&t.cu.length>0}function K_(t){Vi(t).start()}async function T4(t){Vi(t).Xo()}async function _4(t){const e=Vi(t);for(const r of t.cu)e.Ho(r.mutations)}async function b4(t,e,r){const n=t.cu.shift(),i=vv.from(n,e,r);await H_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await od(t)}async function C4(t,e){e&&Vi(t).zo&&await async function(r,n){if(i=n.code,f3(i)&&i!==Ee.ABORTED){const s=r.cu.shift();Vi(r).No(),await H_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await od(r)}var i}(t,e),z_(t)&&K_(t)}async function lw(t,e){const r=et(t);r.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const n=$s(r);r.lu.add(3),await su(r),n&&r._u.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.lu.delete(3),await ad(r)}async function I4(t,e){const r=et(t);e?(r.lu.delete(2),await ad(r)):e||(r.lu.add(2),await su(r),r._u.set("Unknown"))}function to(t){return t.mu||(t.mu=function(e,r,n){const i=et(e);return i.tu(),new h4(r,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(t.datastore,t.asyncQueue,{zr:y4.bind(null,t),Jr:E4.bind(null,t),Ko:w4.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),Tv(t)?Sv(t):t._u.set("Unknown")):(await t.mu.stop(),G_(t))})),t.mu}function Vi(t){return t.gu||(t.gu=function(e,r,n){const i=et(e);return i.tu(),new p4(r,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(t.datastore,t.asyncQueue,{zr:T4.bind(null,t),Jr:C4.bind(null,t),Yo:_4.bind(null,t),Jo:b4.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await od(t)):(await t.gu.stop(),t.cu.length>0&&(je("RemoteStore",`Stopping write stream with ${t.cu.length} pending writes`),t.cu=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,l=new _v(e,r,a,i,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bv(t,e){if(Bi("AsyncQueue",`${e}: ${t}`),nu(t))return new He(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ze.comparator(r.key,n.key):(r,n)=>ze.comparator(r.key,n.key),this.keyedMap=im(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Sa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Sa)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Sa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.yu=new rr(ze.comparator)}track(e){const r=e.doc.key,n=this.yu.get(r);n?e.type!==0&&n.type===3?this.yu=this.yu.insert(r,e):e.type===3&&n.type!==1?this.yu=this.yu.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.yu=this.yu.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.yu=this.yu.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.yu=this.yu.remove(r):e.type===1&&n.type===2?this.yu=this.yu.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.yu=this.yu.insert(r,{type:2,doc:e.doc}):Je():this.yu=this.yu.insert(r,e)}pu(){const e=[];return this.yu.inorderTraversal((r,n)=>{e.push(n)}),e}}class ja{constructor(e,r,n,i,s,a,l,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=d}static fromInitialDocuments(e,r,n,i){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new ja(e,r,Sa.emptySet(r),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.Iu=void 0,this.listeners=[]}}class R4{constructor(){this.queries=new eo(e=>y_(e),ed),this.onlineState="Unknown",this.Tu=new Set}}async function k4(t,e){const r=et(t),n=e.query;let i=!1,s=r.queries.get(n);if(s||(i=!0,s=new A4),i)try{s.Iu=await r.onListen(n)}catch(a){const l=bv(a,`Initialization of query '${rm(e.query)}' failed`);return void e.onError(l)}r.queries.set(n,s),s.listeners.push(e),e.Eu(r.onlineState),s.Iu&&e.Au(s.Iu)&&Cv(r)}async function L4(t,e){const r=et(t),n=e.query;let i=!1;const s=r.queries.get(n);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function D4(t,e){const r=et(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const l of a.listeners)l.Au(i)&&(n=!0);a.Iu=i}}n&&Cv(r)}function O4(t,e,r){const n=et(t),i=n.queries.get(e);if(i)for(const s of i.listeners)s.onError(r);n.queries.delete(e)}function Cv(t){t.Tu.forEach(e=>{e.next()})}class P4{constructor(e,r,n){this.query=e,this.Ru=r,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ja(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),r=!0):this.vu(e,this.onlineState)&&(this.Su(e),r=!0),this.Pu=e,r}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let r=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),r=!0),r}vu(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.Du||!n)&&(!e.docs.isEmpty()||r==="Offline")}Vu(e){if(e.docChanges.length>0)return!0;const r=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Su(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.key=e}}class q_{constructor(e){this.key=e}}class N4{constructor(e,r){this.query=e,this.Fu=r,this.$u=null,this.current=!1,this.Bu=At(),this.mutatedKeys=At(),this.Lu=E_(e),this.Uu=new Sa(this.Lu)}get qu(){return this.Fu}Gu(e,r){const n=r?r.Ku:new uw,i=r?r.Uu:this.Uu;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,l=!1;const d=hc(this.query)&&i.size===this.query.limit?i.last():null,u=lf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,w)=>{const g=i.get(h),S=mv(this.query,w)?w:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;g&&S?g.data.isEqual(S.data)?C!==R&&(n.track({type:3,doc:S}),O=!0):this.Qu(g,S)||(n.track({type:2,doc:S}),O=!0,(d&&this.Lu(S,d)>0||u&&this.Lu(S,u)<0)&&(l=!0)):!g&&S?(n.track({type:0,doc:S}),O=!0):g&&!S&&(n.track({type:1,doc:g}),O=!0,(d||u)&&(l=!0)),O&&(S?(a=a.add(S),s=R?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),hc(this.query)||lf(this.query))for(;a.size>this.query.limit;){const h=hc(this.query)?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Uu:a,Ku:n,ei:l,mutatedKeys:s}}Qu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Ku.pu();s.sort((u,h)=>function(w,g){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return S(w)-S(g)}(u.type,h.type)||this.Lu(u.doc,h.doc)),this.ju(n);const a=r?this.Wu():[],l=this.Bu.size===0&&this.current?1:0,d=l!==this.$u;return this.$u=l,s.length!==0||d?{snapshot:new ja(this.query,e.Uu,i,s,e.mutatedKeys,l===0,d,!1),zu:a}:{zu:a}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new uw,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(r=>this.Fu=this.Fu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Fu=this.Fu.delete(r)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=At(),this.Uu.forEach(n=>{this.Hu(n.key)&&(this.Bu=this.Bu.add(n.key))});const r=[];return e.forEach(n=>{this.Bu.has(n)||r.push(new q_(n))}),this.Bu.forEach(n=>{e.has(n)||r.push(new W_(n))}),r}Ju(e){this.Fu=e.hi,this.Bu=At();const r=this.Gu(e.documents);return this.applyChanges(r,!0)}Yu(){return ja.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class M4{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class F4{constructor(e){this.key=e,this.Xu=!1}}class U4{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Zu={},this.ta=new eo(l=>y_(l),ed),this.ea=new Map,this.na=new Set,this.sa=new rr(ze.comparator),this.ia=new Map,this.ra=new Ev,this.oa={},this.ua=new Map,this.aa=Va.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return this.ca===!0}}async function B4(t,e){const r=Y4(t);let n,i;const s=r.ta.get(e);if(s)n=s.targetId,r.sharedClientState.addLocalQueryTarget(n),i=s.view.Yu();else{const a=await J3(r.localStore,Ls(e));r.isPrimaryClient&&$_(r.remoteStore,a);const l=r.sharedClientState.addLocalQueryTarget(a.targetId);n=a.targetId,i=await $4(r,e,n,l==="current")}return i}async function $4(t,e,r,n){t.ha=(h,w,g)=>async function(S,C,R,O){let T=C.view.Gu(R);T.ei&&(T=await sw(S.localStore,C.query,!1).then(({documents:M})=>C.view.Gu(M,T)));const I=O&&O.targetChanges.get(C.targetId),D=C.view.applyChanges(T,S.isPrimaryClient,I);return fw(S,C.targetId,D.zu),D.snapshot}(t,h,w,g);const i=await sw(t.localStore,e,!0),s=new N4(e,i.hi),a=s.Gu(i.documents),l=ru.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline"),d=s.applyChanges(a,t.isPrimaryClient,l);fw(t,r,d.zu);const u=new M4(e,r,s);return t.ta.set(e,u),t.ea.has(r)?t.ea.get(r).push(e):t.ea.set(r,[e]),d.snapshot}async function V4(t,e){const r=et(t),n=r.ta.get(e),i=r.ea.get(n.targetId);if(i.length>1)return r.ea.set(n.targetId,i.filter(s=>!ed(s,e))),void r.ta.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await lm(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),V_(r.remoteStore,n.targetId),um(r,n.targetId)}).catch(iu)):(um(r,n.targetId),await lm(r.localStore,n.targetId,!0))}async function j4(t,e,r){const n=X4(t);try{const i=await function(s,a){const l=et(s),d=Sr.now(),u=a.reduce((w,g)=>w.add(g.key),At());let h;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>l.ai.qs(w,u).next(g=>{h=g;const S=[];for(const C of a){const R=o3(C,h.get(C.key));R!=null&&S.push(new Za(C.key,R,h_(R.value.mapValue),ys.exists(!0)))}return l.$s.addMutationBatch(w,d,S,a)})).then(w=>(w.applyToLocalDocumentSet(h),{batchId:w.batchId,changes:h}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let d=s.oa[s.currentUser.toKey()];d||(d=new rr(Et)),d=d.insert(a,l),s.oa[s.currentUser.toKey()]=d}(n,i.batchId,r),await au(n,i.changes),await od(n.remoteStore)}catch(i){const s=bv(i,"Failed to persist write");r.reject(s)}}async function Y_(t,e){const r=et(t);try{const n=await Y3(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.ia.get(s);a&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Xu=!0:i.modifiedDocuments.size>0?_t(a.Xu):i.removedDocuments.size>0&&(_t(a.Xu),a.Xu=!1))}),await au(r,n,e)}catch(n){await iu(n)}}function cw(t,e,r){const n=et(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.ta.forEach((s,a)=>{const l=a.view.Eu(e);l.snapshot&&i.push(l.snapshot)}),function(s,a){const l=et(s);l.onlineState=a;let d=!1;l.queries.forEach((u,h)=>{for(const w of h.listeners)w.Eu(a)&&(d=!0)}),d&&Cv(l)}(n.eventManager,e),i.length&&n.Zu.Ko(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function G4(t,e,r){const n=et(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.ia.get(e),s=i&&i.key;if(s){let a=new rr(ze.comparator);a=a.insert(s,Er.newNoDocument(s,nt.min()));const l=At().add(s),d=new id(nt.min(),new Map,new dr(Et),a,l);await Y_(n,d),n.sa=n.sa.remove(s),n.ia.delete(e),Iv(n)}else await lm(n.localStore,e,!1).then(()=>um(n,e,r)).catch(iu)}async function H4(t,e){const r=et(t),n=e.batch.batchId;try{const i=await q3(r.localStore,e);Q_(r,n,null),X_(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await au(r,i)}catch(i){await iu(i)}}async function z4(t,e,r){const n=et(t);try{const i=await function(s,a){const l=et(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return l.$s.lookupMutationBatch(d,a).next(h=>(_t(h!==null),u=h.keys(),l.$s.removeMutationBatch(d,h))).next(()=>l.$s.performConsistencyCheck(d)).next(()=>l.ai.qs(d,u))})}(n.localStore,e);Q_(n,e,r),X_(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await au(n,i)}catch(i){await iu(i)}}function X_(t,e){(t.ua.get(e)||[]).forEach(r=>{r.resolve()}),t.ua.delete(e)}function Q_(t,e,r){const n=et(t);let i=n.oa[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.oa[n.currentUser.toKey()]=i}}function um(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.ea.get(e))t.ta.delete(n),r&&t.Zu.la(n,r);t.ea.delete(e),t.isPrimaryClient&&t.ra.Ri(e).forEach(n=>{t.ra.containsKey(n)||J_(t,n)})}function J_(t,e){t.na.delete(e.path.canonicalString());const r=t.sa.get(e);r!==null&&(V_(t.remoteStore,r),t.sa=t.sa.remove(e),t.ia.delete(r),Iv(t))}function fw(t,e,r){for(const n of r)n instanceof W_?(t.ra.addReference(n.key,e),K4(t,n)):n instanceof q_?(je("SyncEngine","Document no longer in limbo: "+n.key),t.ra.removeReference(n.key,e),t.ra.containsKey(n.key)||J_(t,n.key)):Je()}function K4(t,e){const r=e.key,n=r.path.canonicalString();t.sa.get(r)||t.na.has(n)||(je("SyncEngine","New document in limbo: "+r),t.na.add(n),Iv(t))}function Iv(t){for(;t.na.size>0&&t.sa.size<t.maxConcurrentLimboResolutions;){const e=t.na.values().next().value;t.na.delete(e);const r=new ze(Ot.fromString(e)),n=t.aa.next();t.ia.set(n,new F4(r)),t.sa=t.sa.insert(r,n),$_(t.remoteStore,new Es(Ls(pv(r.path)),n,2,cv.A))}}async function au(t,e,r){const n=et(t),i=[],s=[],a=[];n.ta.isEmpty()||(n.ta.forEach((l,d)=>{a.push(n.ha(d,e,r).then(u=>{if(u){n.isPrimaryClient&&n.sharedClientState.updateQueryState(d.targetId,u.fromCache?"not-current":"current"),i.push(u);const h=yv.Js(d.targetId,u);s.push(h)}}))}),await Promise.all(a),n.Zu.Ko(i),await async function(l,d){const u=et(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>be.forEach(d,w=>be.forEach(w.zs,g=>u.persistence.referenceDelegate.addReference(h,w.targetId,g)).next(()=>be.forEach(w.Hs,g=>u.persistence.referenceDelegate.removeReference(h,w.targetId,g)))))}catch(h){if(!nu(h))throw h;je("LocalStore","Failed to update sequence numbers: "+h)}for(const h of d){const w=h.targetId;if(!h.fromCache){const g=u.si.get(w),S=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(S);u.si=u.si.insert(w,C)}}}(n.localStore,s))}async function W4(t,e){const r=et(t);if(!r.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const n=await M_(r.localStore,e);r.currentUser=e,function(i,s){i.ua.forEach(a=>{a.forEach(l=>{l.reject(new He(Ee.CANCELLED,s))})}),i.ua.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await au(r,n.ci)}}function q4(t,e){const r=et(t),n=r.ia.get(e);if(n&&n.Xu)return At().add(n.key);{let i=At();const s=r.ea.get(e);if(!s)return i;for(const a of s){const l=r.ta.get(a);i=i.unionWith(l.view.qu)}return i}}function Y4(t){const e=et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G4.bind(null,e),e.Zu.Ko=D4.bind(null,e.eventManager),e.Zu.la=O4.bind(null,e.eventManager),e}function X4(t){const e=et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z4.bind(null,e),e}class Q4{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=sd(e.databaseInfo.databaseId),this.sharedClientState=this.da(e),this.persistence=this._a(e),await this.persistence.start(),this.gcScheduler=this.wa(e),this.localStore=this.ma(e)}wa(e){return null}ma(e){return W3(this.persistence,new z3,e.initialUser,this.M)}_a(e){return new a4(wv.Wi,this.M)}da(e){return new l4}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class J4{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>cw(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=W4.bind(null,this.syncEngine),await I4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new R4}createDatastore(e){const r=sd(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new d4(i));var i;return function(s,a,l,d){return new m4(s,a,l,d)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return r=this.localStore,n=this.datastore,i=e.asyncQueue,s=l=>cw(this.syncEngine,l,0),a=ow.vt()?new ow:new u4,new v4(r,n,i,s,a);var r,n,i,s,a}createSyncEngine(e,r){return function(n,i,s,a,l,d,u){const h=new U4(n,i,s,a,l,d);return u&&(h.ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(e){const r=et(e);je("RemoteStore","RemoteStore shutting down."),r.lu.add(5),await su(r),r.du.shutdown(),r._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Fr.UNAUTHENTICATED,this.clientId=u_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{je("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(je("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=bv(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tU(t,e){t.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await M_(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function rU(t,e){t.asyncQueue.verifyOperationInProgress();const r=await nU(t);je("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>lw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>lw(e.remoteStore,s)),t.onlineComponents=e}async function nU(t){return t.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),await tU(t,new Q4)),t.offlineComponents}async function Z_(t){return t.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),await rU(t,new J4)),t.onlineComponents}function iU(t){return Z_(t).then(e=>e.syncEngine)}async function dw(t){const e=await Z_(t),r=e.eventManager;return r.onListen=B4.bind(null,e.syncEngine),r.onUnlisten=V4.bind(null,e.syncEngine),r}const hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t,e,r){if(!r)throw new He(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sU(t,e,r,n){if(e===!0&&n===!0)throw new He(Ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function pw(t){if(!ze.isDocumentKey(t))throw new He(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mw(t){if(ze.isDocumentKey(t))throw new He(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Av(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Je()}function Ta(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Av(t);throw new He(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function aU(t,e){if(e<=0)throw new He(Ee.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e){var r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new He(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,r,n){this._authCredentials=r,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gw({}),this._settingsFrozen=!1,e instanceof Ua?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new He(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(i.options.projectId)}(e))}get app(){if(!this._app)throw new He(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new He(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bF;switch(r.type){case"gapi":const n=r.client;return _t(!(typeof n!="object"||n===null||!n.auth||!n.auth.getAuthHeaderValueForFirstParty)),new AF(n,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new He(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=hw.get(e);r&&(je("ComponentProvider","Removing Datastore"),hw.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class ro{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ro(this.firestore,e,this._query)}}class Pi extends ro{constructor(e,r,n){super(e,r,pv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ze(e))}withConverter(e){return new Pi(this.firestore,e,this._path)}}function vw(t,e,...r){if(t=Or(t),eb("collection","path",e),t instanceof Rv){const n=Ot.fromString(e,...r);return mw(n),new Pi(t,null,n)}{if(!(t instanceof rn||t instanceof Pi))throw new He(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ot.fromString(e,...r));return mw(n),new Pi(t.firestore,null,n)}}function tb(t,e,...r){if(t=Or(t),arguments.length===1&&(e=u_.R()),eb("doc","path",e),t instanceof Rv){const n=Ot.fromString(e,...r);return pw(n),new rn(t,null,new ze(n))}{if(!(t instanceof rn||t instanceof Pi))throw new He(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ot.fromString(e,...r));return pw(n),new rn(t.firestore,t instanceof Pi?t.converter:null,new ze(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new U_(this,"async_queue_retry"),this.Ua=()=>{const r=_h();r&&je("AsyncQueue","Visibility state changed to "+r.visibilityState),this.So.Eo()};const e=_h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const r=_h();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const r=new vs;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}async Ka(){if(this.ka.length!==0){try{await this.ka[0](),this.ka.shift(),this.So.reset()}catch(e){if(!nu(e))throw e;je("AsyncQueue","Operation failed with retryable error: "+e)}this.ka.length>0&&this.So.Io(()=>this.Ka())}}Ga(e){const r=this.Na.then(()=>(this.$a=!0,e().catch(n=>{this.Fa=n,this.$a=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Bi("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.$a=!1,n))));return this.Na=r,r}enqueueAfterDelay(e,r,n){this.qa(),this.La.indexOf(e)>-1&&(r=0);const i=_v.createAndSchedule(this,e,r,n,s=>this.Qa(s));return this.Oa.push(i),i}qa(){this.Fa&&Je()}verifyOperationInProgress(){}async ja(){let e;do e=this.Na,await e;while(e!==this.Na)}Wa(e){for(const r of this.Oa)if(r.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Oa)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const r=this.Oa.indexOf(e);this.Oa.splice(r,1)}}function yw(t){return function(e,r){if(typeof e!="object"||e===null)return!1;const n=e;for(const i of r)if(i in n&&typeof n[i]=="function")return!0;return!1}(t,["next","error","complete"])}class kl extends Rv{constructor(e,r,n){super(e,r,n),this.type="firestore",this._queue=new oU,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||nb(this),this._firestoreClient.terminate()}}function lU(t=L1()){return Rg(t,"firestore").getImmediate()}function rb(t){return t._firestoreClient||nb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nb(t){var e;const r=t._freezeSettings(),n=function(i,s,a,l){return new PF(i,s,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new eU(t._authCredentials,t._appCheckCredentials,t._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new He(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ga(pr.fromBase64String(e))}catch(r){throw new He(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ga(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new He(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new He(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=/^__.*__$/;class cU{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Za(e,this.data,this.fieldMask,r,this.fieldTransforms):new nd(e,this.data,r,this.fieldTransforms)}}class ib{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Za(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function sb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class Lv{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.M=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Ja(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Lv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Xa({path:n,tc:!1});return i.ec(e),i}nc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Xa({path:n,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return df(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(e.length===0)throw this.ic("Document fields must not be empty");if(sb(this.Ya)&&uU.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class fU{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.M=n||sd(e)}uc(e,r,n,i=!1){return new Lv({Ya:e,methodName:r,oc:n,path:Vr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ab(t){const e=t._freezeSettings(),r=sd(t._databaseId);return new fU(t._databaseId,!!e.ignoreUndefinedProperties,r)}function dU(t,e,r,n,i,s={}){const a=t.uc(s.merge||s.mergeFields?2:0,e,r,i);Ov("Data must be an object, but it was:",a,n);const l=ob(n,a);let d,u;if(s.merge)d=new Tl(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const w of s.mergeFields){const g=cm(e,w,r);if(!a.contains(g))throw new He(Ee.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);ub(h,g)||h.push(g)}d=new Tl(h),u=a.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,u=a.fieldTransforms;return new cU(new Zr(l),d,u)}class cd extends ud{_toFieldTransform(e){if(e.Ya!==2)throw e.Ya===1?e.ic(`${this._methodName}() can only appear at the top level of your update data`):e.ic(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cd}}class Dv extends ud{_toFieldTransform(e){return new n3(e.path,new Il)}isEqual(e){return e instanceof Dv}}function hU(t,e,r,n){const i=t.uc(1,e,r);Ov("Data must be an object, but it was:",i,n);const s=[],a=Zr.empty();Bs(n,(d,u)=>{const h=Pv(e,d,r);u=Or(u);const w=i.nc(h);if(u instanceof cd)s.push(h);else{const g=fd(u,w);g!=null&&(s.push(h),a.set(h,g))}});const l=new Tl(s);return new ib(a,l,i.fieldTransforms)}function pU(t,e,r,n,i,s){const a=t.uc(1,e,r),l=[cm(e,n,r)],d=[i];if(s.length%2!=0)throw new He(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(cm(e,s[g])),d.push(s[g+1]);const u=[],h=Zr.empty();for(let g=l.length-1;g>=0;--g)if(!ub(u,l[g])){const S=l[g];let C=d[g];C=Or(C);const R=a.nc(S);if(C instanceof cd)u.push(S);else{const O=fd(C,R);O!=null&&(u.push(S),h.set(S,O))}}const w=new Tl(u);return new ib(h,w,a.fieldTransforms)}function fd(t,e){if(lb(t=Or(t)))return Ov("Unsupported field value:",e,t),ob(t,e);if(t instanceof ud)return function(r,n){if(!sb(n.Ya))throw n.ic(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.ic(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.tc&&e.Ya!==4)throw e.ic("Nested arrays are not supported");return function(r,n){const i=[];let s=0;for(const a of r){let l=fd(a,n.sc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=Or(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return e3(n.M,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Sr.fromDate(r);return{timestampValue:cf(n.M,i)}}if(r instanceof Sr){const i=new Sr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cf(n.M,i)}}if(r instanceof kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ga)return{bytesValue:L_(n.M,r._byteString)};if(r instanceof rn){const i=n.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw n.ic(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gv(r.firestore._databaseId||n.databaseId,r._key.path)}}throw n.ic(`Unsupported field value: ${Av(r)}`)}(t,e)}function ob(t,e){const r={};return c_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(n,i)=>{const s=fd(i,e.Za(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function lb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Sr||t instanceof kv||t instanceof Ga||t instanceof rn||t instanceof ud)}function Ov(t,e,r){if(!lb(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const n=Av(r);throw n==="an object"?e.ic(t+" a custom object"):e.ic(t+" "+n)}}function cm(t,e,r){if((e=Or(e))instanceof ld)return e._internalPath;if(typeof e=="string")return Pv(t,e);throw df("Field path arguments must be of type string or ",t,!1,void 0,r)}const mU=new RegExp("[~\\*/\\[\\]]");function Pv(t,e,r){if(e.search(mU)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ld(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function df(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${n}`),a&&(d+=` in document ${i}`),d+=")"),new He(Ee.INVALID_ARGUMENT,l+t+d)}function ub(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Nv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class gU extends cb{data(){return super.data()}}function Nv(t,e){return typeof e=="string"?Pv(t,e):e instanceof ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fb extends cb{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class gc extends fb{data(e={}){return super.data(e)}}class vU{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Ro(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new gc(this._firestore,this._userDataWriter,n.key,n,new Ro(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new He(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let s=0;return n._snapshot.docChanges.map(a=>({type:"added",doc:new gc(n._firestore,n._userDataWriter,a.doc.key,a.doc,new Ro(n._snapshot.mutatedKeys.has(a.doc.key),n._snapshot.fromCache),n.query.converter),oldIndex:-1,newIndex:s++}))}{let s=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new gc(n._firestore,n._userDataWriter,a.doc.key,a.doc,new Ro(n._snapshot.mutatedKeys.has(a.doc.key),n._snapshot.fromCache),n.query.converter);let d=-1,u=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:yU(a.type),doc:l,oldIndex:d,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t){if(lf(t)&&t.explicitOrderBy.length===0)throw new He(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class db{}function wU(t,...e){for(const r of e)t=r._apply(t);return t}class xU extends db{constructor(e,r){super(),this.hc=e,this.dc=r,this.type="orderBy"}_apply(e){const r=function(n,i,s){if(n.startAt!==null)throw new He(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new He(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new xa(i,s);return function(l,d){if(m_(l)===null){const u=g_(l);u!==null&&bU(l,u,d.field)}}(n,a),a}(e._query,this.hc,this.dc);return new ro(e.firestore,e.converter,function(n,i){const s=n.explicitOrderBy.concat([i]);return new tu(n.path,n.collectionGroup,s,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,r))}}function SU(t,e="asc"){const r=e,n=Nv("orderBy",t);return new xU(n,r)}class TU extends db{constructor(e,r,n){super(),this.type=e,this._c=r,this.wc=n}_apply(e){return new ro(e.firestore,e.converter,v_(e._query,this._c,this.wc))}}function _U(t){return aU("limit",t),new TU("limit",t,"F")}function bU(t,e,r){if(!r.isEqual(e))throw new He(Ee.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{convertValue(e,r="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Je()}}convertObject(e,r){const n={};return Bs(e.fields,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertGeoPoint(e){return new kv(Ht(e.latitude),Ht(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=d_(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(_l(e));default:return null}}convertTimestamp(e){const r=$i(e);return new Sr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Ot.fromString(e);_t(N_(n));const i=new Ua(n.get(1),n.get(3)),s=new ze(n.popFirst(5));return i.isEqual(r)||Bi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class hb extends CU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,r)}}function AU(t,e,r,...n){t=Ta(t,rn);const i=Ta(t.firestore,kl),s=ab(i);let a;return a=typeof(e=Or(e))=="string"||e instanceof ld?pU(s,"updateDoc",t._key,e,r,n):hU(s,"updateDoc",t._key,e),pb(i,[a.toMutation(t._key,ys.exists(!0))])}function RU(t,e){const r=Ta(t.firestore,kl),n=tb(t),i=IU(t.converter,e);return pb(r,[dU(ab(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ys.exists(!1))]).then(()=>n)}function kU(t,...e){var r,n,i;t=Or(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||yw(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges};if(yw(e[a])){const w=e[a];e[a]=(r=w.next)===null||r===void 0?void 0:r.bind(w),e[a+1]=(n=w.error)===null||n===void 0?void 0:n.bind(w),e[a+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}let d,u,h;if(t instanceof rn)u=Ta(t.firestore,kl),h=pv(t._key.path),d={next:w=>{e[a]&&e[a](LU(u,t,w))},error:e[a+1],complete:e[a+2]};else{const w=Ta(t,ro);u=Ta(w.firestore,kl),h=w._query;const g=new hb(u);d={next:S=>{e[a]&&e[a](new vU(u,g,w,S))},error:e[a+1],complete:e[a+2]},EU(t._query)}return function(w,g,S,C){const R=new Z4(C),O=new P4(g,R,S);return w.asyncQueue.enqueueAndForget(async()=>k4(await dw(w),O)),()=>{R.pa(),w.asyncQueue.enqueueAndForget(async()=>L4(await dw(w),O))}}(rb(u),h,l,d)}function pb(t,e){return function(r,n){const i=new vs;return r.asyncQueue.enqueueAndForget(async()=>j4(await iU(r),n,i)),i.promise}(rb(t),e)}function LU(t,e,r){const n=r.docs.get(e._key),i=new hb(t);return new fb(t,i,e._key,n,new Ro(r.hasPendingWrites,r.fromCache),e.converter)}function DU(){return new Dv("serverTimestamp")}(function(t,e=!0){(function(r){Qa=r})(jl),Oa(new _s("firestore",(r,{options:n})=>{const i=r.getProvider("app").getImmediate(),s=new kl(i,new CF(r.getProvider("auth-internal")),new kF(r.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC")),Oi(BE,"3.4.7",t),Oi(BE,"3.4.7","esm2017")})();var OU="firebase",PU="9.6.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(OU,PU,"app");const mb=EN({apiKey:"AIzaSyDGGWoFjz0-n8G9GOyjFssmWIA3qjT33lE",authDomain:"filmhot-af950.firebaseapp.com",projectId:"filmhot-af950",storageBucket:"filmhot-af950.appspot.com",messagingSenderId:"28621200637",appId:"1:28621200637:web:4912f94eb67fc0d60bb294"}),Mv=gM(mb),bh=lU(mb);function NU(t){let e;const r=new Set,n=(u,h)=>{const w=typeof u=="function"?u(e):u;if(w!==e){const g=e;e=h?w:Object.assign({},e,w),r.forEach(S=>S(e,g))}},i=()=>e,s=(u,h=i,w=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(e);function S(){const C=h(e);if(!w(g,C)){const R=g;u(g=C,R)}}return r.add(S),()=>r.delete(S)},d={setState:n,getState:i,subscribe:(u,h,w)=>h||w?s(u,h,w):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return e=t(n,i,d),d}const MU=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Ew=MU?J.exports.useEffect:J.exports.useLayoutEffect;function FU(t){const e=typeof t=="function"?NU(t):t,r=(n=e.getState,i=Object.is)=>{const[,s]=J.exports.useReducer(O=>O+1,0),a=e.getState(),l=J.exports.useRef(a),d=J.exports.useRef(n),u=J.exports.useRef(i),h=J.exports.useRef(!1),w=J.exports.useRef();w.current===void 0&&(w.current=n(a));let g,S=!1;(l.current!==a||d.current!==n||u.current!==i||h.current)&&(g=n(a),S=!i(w.current,g)),Ew(()=>{S&&(w.current=g),l.current=a,d.current=n,u.current=i,h.current=!1});const C=J.exports.useRef(a);Ew(()=>{const O=()=>{try{const I=e.getState(),D=d.current(I);u.current(w.current,D)||(l.current=I,w.current=D,s())}catch{h.current=!0,s()}},T=e.subscribe(O);return e.getState()!==C.current&&O(),T},[]);const R=S?g:w.current;return J.exports.useDebugValue(R),R};return Object.assign(r,e),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[r,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},r}const dd=FU(t=>({currentUser:void 0,setCurrentUser:e=>t({currentUser:e})})),gb=({sidebarActive:t,setSidebarActive:e})=>{const r=An(),n=dd(s=>s.currentUser),i=()=>{a2(Mv)};return E.createElement(J.exports.Fragment,null,E.createElement("div",{className:`flex-shrink-0 sm:sticky left-auto right-full sm:!right-0 sm:!left-0 fixed top-0 flex flex-col items-stretch py-10 pl-5 xl:pl-10 pr-0 w-[90vw] max-w-[288px] sm:max-w-none sm:w-16 xl:w-72 border-r border-gray-800 h-screen overflow-y-auto z-10 bg-dark sm:bg-transparent sm:!translate-x-0 transition-all duration-500 ${t?"translate-x-full":"translate-x-0"}`},E.createElement(St,{to:"/",className:"flex gap-2 items-center"},E.createElement("img",{src:"/icon.png",className:"w-6 h-6",alt:""}),E.createElement("p",{className:"font-semibold text-xl block sm:hidden xl:block"},"FilmHot")),E.createElement("div",{className:"mt-0 sm:mt-4 xl:mt-0 block sm:flex flex-col gap-0 sm:gap-4 xl:block xl:gap-0"},E.createElement("p",{className:"text-gray-400 uppercase mt-10 mb-4 block sm:hidden xl:block"},"Menu"),E.createElement("div",{className:"flex flex-col items-stretch gap-3"},E.createElement(St,{to:"/",className:`flex items-center gap-2 transition ${r.pathname==="/"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`},E.createElement("i",{className:"fa-solid fa-house-chimney text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"Home")),E.createElement(St,{to:"/discovery",className:`flex items-center gap-2 transition ${r.pathname==="/discovery"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`},E.createElement("i",{className:"fas fa-compass text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"Discovery")),E.createElement(St,{to:"/explore",className:`flex items-center gap-2 transition ${r.pathname==="/explore"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`},E.createElement("i",{className:"fas fa-desktop text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"Explore")),E.createElement(St,{to:"/history",className:`flex items-center gap-2 transition ${r.pathname==="/history"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`},E.createElement("i",{className:"fas fa-history text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"History")),E.createElement(St,{to:"/search",className:`md:hidden flex items-center gap-2 transition ${r.pathname==="/search"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`},E.createElement("i",{className:"fas fa-search text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"Search"))),E.createElement("p",{className:"text-gray-400 uppercase mt-10 mb-4 block sm:hidden xl:block"},"Personal"),n?E.createElement("div",{className:"flex flex-col gap-3 items-stretch"},E.createElement("div",{className:"flex gap-2 items-center"},E.createElement("img",{src:an(n.photoURL,"24","24"),className:"w-[24px] h-[24px] rounded-full",alt:""}),E.createElement("p",{className:"text-gray-400 block sm:hidden xl:block"},n.displayName)),E.createElement("button",{onClick:i,className:"flex items-center gap-2 cursor-pointer transition text-gray-400 hover:text-gray-300"},E.createElement("i",{className:"fas fa-sign-out-alt text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"Sign Out"))):E.createElement(St,{to:`/sign-in?redirect=${encodeURIComponent(r.pathname)}`,className:"flex items-center cursor-pointer gap-2 transition text-gray-400 hover:text-gray-300"},E.createElement("i",{className:"fas fa-sign-in-alt text-xl w-[24px]"}),E.createElement("p",{className:"block sm:hidden xl:block"},"Sign In")))),E.createElement("div",{onClick:()=>e(!1),className:`bg-[#00000080] z-[5] fixed top-0 left-0 w-full h-full transition-all duration-500 ${t?"opacity-100 visible":"opacity-0 invisible"}`}))},Gr=r=>{var n=r,{className:t}=n,e=co(n,["className"]);return E.createElement("div",ts({className:`animate-pulse bg-gray-700 ${t}`},e))},ww=()=>E.createElement(Nf,{modules:[Cg],navigation:!0,slidesPerView:"auto",slidesPerGroupAuto:!0,spaceBetween:30},[...new Array(Math.ceil(window.innerWidth/200))].map((t,e)=>E.createElement(Mf,{className:"!w-[175px]",key:e},E.createElement(Gr,{className:"w-[175px] h-[246px] rounded-xl"})))),UU=async(t=0)=>(await sn.get("homePage/getHome",{params:{page:t}})).data.data.recommendItems.filter(e=>!e.bannerProportion),BU=async()=>(await sn.get("search/v1/searchLeaderboard")).data.data.list,vb=()=>{const{data:t,error:e}=Ms("home-top-searches",()=>BU());return!t||e?E.createElement("div",{className:"flex flex-col gap-3"},[...new Array(Math.round(window.innerHeight/100))].map((r,n)=>E.createElement("div",{className:"flex gap-2",key:n},E.createElement(Gr,{className:"w-[100px] h-[60px] flex-shrink-0 rounded-lg"}),E.createElement(Gr,{className:"flex-grow h-4 rounded-md"})))):E.createElement("div",{className:"flex flex-col gap-3"},t.map(r=>E.createElement(St,{to:r.domainType===0?`/movie/${r.id}`:`/tv/${r.id}`,className:"flex gap-2 hover:brightness-75 transition duration-300",key:r.id},E.createElement("div",{className:"w-[100px] h-[60px] flex-shrink-0"},E.createElement(zi.exports.LazyLoadImage,{className:"w-[100px] h-[60px] object-cover rounded-lg",src:an(r.cover,"100"),width:100,height:100,effect:"opacity",alt:""})),E.createElement("div",null,E.createElement("h1",null,r.title)))))},$U=()=>{var l,d;const t=u=>`home-${u||0}`,{data:e,error:r,setSize:n}=kf(t,u=>UU(Number(u.split("-").slice(-1)[0])),{revalidateFirstPage:!1}),[i,s]=J.exports.useState(!1),a=An();return J.exports.useEffect(()=>{s(!1)},[a]),E.createElement(E.Fragment,null,E.createElement(Ui,{value:"FilmHot - AdFree Movie / Anime Watching Website"}),E.createElement("div",{className:"flex sm:hidden justify-between px-[4vw] mt-6"},E.createElement(St,{to:"/",className:"flex items-center gap-2"},E.createElement("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),E.createElement("span",{className:"text-xl font-medium"},"FilmHot")),E.createElement("button",{onClick:()=>s(!i)},E.createElement("i",{className:"fas fa-bars text-2xl"}))),E.createElement("div",{className:"flex"},E.createElement(gb,{sidebarActive:i,setSidebarActive:s}),E.createElement("div",{className:"flex-grow px-[4vw] md:px-8 pb-8 pt-0 overflow-hidden flex flex-col items-stretch"},!e||r?E.createElement(E.Fragment,null,E.createElement("div",{className:"relative h-0 pb-[42%] mt-8"},E.createElement(Gr,{className:"absolute top-0 left-0 w-full h-full rounded-2xl"})),[...new Array(2)].map((u,h)=>E.createElement(J.exports.Fragment,{key:h},E.createElement(Gr,{className:"my-8 h-6 w-full max-w-[200px]"}),E.createElement("div",{className:"overflow-hidden"},E.createElement(ww,null))))):E.createElement(Rf,{dataLength:(e==null?void 0:e.length)||0,next:()=>n(u=>u+1),hasMore:!r&&((d=(l=e==null?void 0:e.slice(-1))==null?void 0:l[0])==null?void 0:d.length)!==0,loader:E.createElement(E.Fragment,null,E.createElement(Gr,{className:"my-8 h-6 w-full max-w-[200px]"}),E.createElement("div",{className:"overflow-hidden"},E.createElement(ww,null)))},e.reduce((u,h)=>[...u,...h],[]).map(u=>u.homeSectionType==="BANNER"?E.createElement("div",{key:u.homeSectionId,className:"overflow-hidden w-full mt-8"},E.createElement(gP,{images:u.recommendContentVOList.map(h=>{const w=new URLSearchParams(new URL(h.jumpAddress).search);return w.get("id")?{title:h.title,image:h.imageUrl,link:w.get("type")==="0"?`/movie/${w.get("id")}`:`/tv/${w.get("id")}`}:null}).filter(Boolean)||[]})):E.createElement("div",{key:u.homeSectionId},E.createElement("h1",{className:"text-2xl mb-3 mt-8"},u.homeSectionName.replace("on Loklok","")),E.createElement(vP,{images:u.recommendContentVOList.map(h=>{const w=new URLSearchParams(new URL(h.jumpAddress).search);return{title:h.title,image:an(h.imageUrl,"200"),link:w.get("type")==="0"?`/movie/${w.get("id")}`:`/tv/${w.get("id")}`}}),coverType:u.coverType}))))),E.createElement("div",{className:"flex-shrink-0 w-[350px] p-8 sticky top-0 h-screen scrollbar overflow-hidden overflow-y-auto hidden md:block"},E.createElement(_g,null),E.createElement("h1",{className:"text-xl my-6"},"Top Searches"),E.createElement(vb,null))))},VU=({query:t})=>{const{data:e,error:r}=Ms(`search-${t}`,()=>YL(t));return r?E.createElement(Bn,null):E.createElement("div",{className:"grid grid-cols-sm md:grid-cols-lg gap-6"},e?e.length===0?E.createElement("div",null,"No result found"):E.createElement(J.exports.Fragment,null,e.map(n=>E.createElement(St,{key:n.id,title:n.name,to:n.domainType===0?`/movie/${n.id}`:`/tv/${n.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group"},E.createElement("div",{className:"absolute w-full h-full top-0 left-0 flex flex-col items-stretch"},E.createElement("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300"},E.createElement(zi.exports.LazyLoadImage,{src:an(n.coverVerticalUrl,"250"),className:"absolute w-full h-full top-0 left-0 object-cover",effect:"opacity",alt:""})),E.createElement("div",{className:"flex flex-grow items-center"},E.createElement("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300"},n.name)))))):E.createElement(J.exports.Fragment,null,[...new Array(20)].map((n,i)=>E.createElement("div",{key:i,className:"relative h-0 pb-[163%]"},E.createElement(Gr,{className:"absolute w-full h-full top-0 left-0 rounded"})))))},Fv=()=>{const t=An();return new URLSearchParams(t.search)},jU=()=>{const e=Fv().get("q");return e!=null&&e.trim()?E.createElement(J.exports.Fragment,null,E.createElement(Ui,{value:`Search for "${e}" - FilmHot`}),E.createElement("div",{className:"flex flex-col items-stretch mx-[7vw] mb-8"},E.createElement(Ul,null),E.createElement("div",null,E.createElement("h1",{className:"text-3xl mb-6"},'Search result for "',e,'"')),E.createElement(VU,{query:e}))):E.createElement(J.exports.Fragment,null,E.createElement(Ui,{value:"Search - FilmHot"}),E.createElement("div",{className:"flex justify-center my-[100px] mx-6"},E.createElement("div",{className:"w-full max-w-[400px] flex flex-col items-center gap-4"},E.createElement("div",{className:"flex flex-col items-stretch gap-3"},E.createElement("h1",{className:"text-2xl"},"Search for your favorite movies"),E.createElement(_g,{autoFocus:!0})),E.createElement("div",{className:"mt-8 w-full"},E.createElement("h1",{className:"text-lg mb-3"},"Popular Searches"),E.createElement(vb,null)))))};var yb={exports:{}};(function(t,e){typeof window!="undefined"&&function(n,i){t.exports=i()}(JC,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return r[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=n,i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(a&1&&(s=i(s)),a&8||a&4&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),a&2&&typeof s!="string")for(var d in s)i.d(l,d,function(u){return s[u]}.bind(null,d));return l},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="/dist/",i(i.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(r,n,i){var s=Object.prototype.hasOwnProperty,a="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1));function d(g,S,C){this.fn=g,this.context=S,this.once=C||!1}function u(g,S,C,R,O){if(typeof C!="function")throw new TypeError("The listener must be a function");var T=new d(C,R||g,O),I=a?a+S:S;return g._events[I]?g._events[I].fn?g._events[I]=[g._events[I],T]:g._events[I].push(T):(g._events[I]=T,g._eventsCount++),g}function h(g,S){--g._eventsCount===0?g._events=new l:delete g._events[S]}function w(){this._events=new l,this._eventsCount=0}w.prototype.eventNames=function(){var S=[],C,R;if(this._eventsCount===0)return S;for(R in C=this._events)s.call(C,R)&&S.push(a?R.slice(1):R);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(C)):S},w.prototype.listeners=function(S){var C=a?a+S:S,R=this._events[C];if(!R)return[];if(R.fn)return[R.fn];for(var O=0,T=R.length,I=new Array(T);O<T;O++)I[O]=R[O].fn;return I},w.prototype.listenerCount=function(S){var C=a?a+S:S,R=this._events[C];return R?R.fn?1:R.length:0},w.prototype.emit=function(S,C,R,O,T,I){var D=a?a+S:S;if(!this._events[D])return!1;var M=this._events[D],j=arguments.length,B,z;if(M.fn){switch(M.once&&this.removeListener(S,M.fn,void 0,!0),j){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,C),!0;case 3:return M.fn.call(M.context,C,R),!0;case 4:return M.fn.call(M.context,C,R,O),!0;case 5:return M.fn.call(M.context,C,R,O,T),!0;case 6:return M.fn.call(M.context,C,R,O,T,I),!0}for(z=1,B=new Array(j-1);z<j;z++)B[z-1]=arguments[z];M.fn.apply(M.context,B)}else{var K=M.length,ee;for(z=0;z<K;z++)switch(M[z].once&&this.removeListener(S,M[z].fn,void 0,!0),j){case 1:M[z].fn.call(M[z].context);break;case 2:M[z].fn.call(M[z].context,C);break;case 3:M[z].fn.call(M[z].context,C,R);break;case 4:M[z].fn.call(M[z].context,C,R,O);break;default:if(!B)for(ee=1,B=new Array(j-1);ee<j;ee++)B[ee-1]=arguments[ee];M[z].fn.apply(M[z].context,B)}}return!0},w.prototype.on=function(S,C,R){return u(this,S,C,R,!1)},w.prototype.once=function(S,C,R){return u(this,S,C,R,!0)},w.prototype.removeListener=function(S,C,R,O){var T=a?a+S:S;if(!this._events[T])return this;if(!C)return h(this,T),this;var I=this._events[T];if(I.fn)I.fn===C&&(!O||I.once)&&(!R||I.context===R)&&h(this,T);else{for(var D=0,M=[],j=I.length;D<j;D++)(I[D].fn!==C||O&&!I[D].once||R&&I[D].context!==R)&&M.push(I[D]);M.length?this._events[T]=M.length===1?M[0]:M:h(this,T)}return this},w.prototype.removeAllListeners=function(S){var C;return S?(C=a?a+S:S,this._events[C]&&h(this,C)):(this._events=new l,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prefixed=a,w.EventEmitter=w,r.exports=w},"./node_modules/url-toolkit/src/url-toolkit.js":function(r,n,i){(function(s){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,l=/^([^\/?#]*)(.*)$/,d=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,h={buildAbsoluteURL:function(w,g,S){if(S=S||{},w=w.trim(),g=g.trim(),!g){if(!S.alwaysNormalize)return w;var C=h.parseURL(w);if(!C)throw new Error("Error trying to parse base URL.");return C.path=h.normalizePath(C.path),h.buildURLFromParts(C)}var R=h.parseURL(g);if(!R)throw new Error("Error trying to parse relative URL.");if(R.scheme)return S.alwaysNormalize?(R.path=h.normalizePath(R.path),h.buildURLFromParts(R)):g;var O=h.parseURL(w);if(!O)throw new Error("Error trying to parse base URL.");if(!O.netLoc&&O.path&&O.path[0]!=="/"){var T=l.exec(O.path);O.netLoc=T[1],O.path=T[2]}O.netLoc&&!O.path&&(O.path="/");var I={scheme:O.scheme,netLoc:R.netLoc,path:null,params:R.params,query:R.query,fragment:R.fragment};if(!R.netLoc&&(I.netLoc=O.netLoc,R.path[0]!=="/"))if(!R.path)I.path=O.path,R.params||(I.params=O.params,R.query||(I.query=O.query));else{var D=O.path,M=D.substring(0,D.lastIndexOf("/")+1)+R.path;I.path=h.normalizePath(M)}return I.path===null&&(I.path=S.alwaysNormalize?h.normalizePath(R.path):R.path),h.buildURLFromParts(I)},parseURL:function(w){var g=a.exec(w);return g?{scheme:g[1]||"",netLoc:g[2]||"",path:g[3]||"",params:g[4]||"",query:g[5]||"",fragment:g[6]||""}:null},normalizePath:function(w){for(w=w.split("").reverse().join("").replace(d,"");w.length!==(w=w.replace(u,"")).length;);return w.split("").reverse().join("")},buildURLFromParts:function(w){return w.scheme+w.netLoc+w.path+w.params+w.query+w.fragment}};r.exports=h})()},"./node_modules/webworkify-webpack/index.js":function(r,n,i){function s(S){var C={};function R(T){if(C[T])return C[T].exports;var I=C[T]={i:T,l:!1,exports:{}};return S[T].call(I.exports,I,I.exports,R),I.l=!0,I.exports}R.m=S,R.c=C,R.i=function(T){return T},R.d=function(T,I,D){R.o(T,I)||Object.defineProperty(T,I,{configurable:!1,enumerable:!0,get:D})},R.r=function(T){Object.defineProperty(T,"__esModule",{value:!0})},R.n=function(T){var I=T&&T.__esModule?function(){return T.default}:function(){return T};return R.d(I,"a",I),I},R.o=function(T,I){return Object.prototype.hasOwnProperty.call(T,I)},R.p="/",R.oe=function(T){throw console.error(T),T};var O=R(R.s=ENTRY_MODULE);return O.default||O}var a="[\\.|\\-|\\+|\\w|/|@]+",l="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+a+").*?\\)";function d(S){return(S+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(S){return!isNaN(1*S)}function h(S,C,R){var O={};O[R]=[];var T=C.toString(),I=T.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!I)return O;for(var D=I[1],M=new RegExp("(\\\\n|\\W)"+d(D)+l,"g"),j;j=M.exec(T);)j[3]!=="dll-reference"&&O[R].push(j[3]);for(M=new RegExp("\\("+d(D)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+l,"g");j=M.exec(T);)S[j[2]]||(O[R].push(j[1]),S[j[2]]=i(j[1]).m),O[j[2]]=O[j[2]]||[],O[j[2]].push(j[4]);for(var B=Object.keys(O),z=0;z<B.length;z++)for(var K=0;K<O[B[z]].length;K++)u(O[B[z]][K])&&(O[B[z]][K]=1*O[B[z]][K]);return O}function w(S){var C=Object.keys(S);return C.reduce(function(R,O){return R||S[O].length>0},!1)}function g(S,C){for(var R={main:[C]},O={main:[]},T={main:{}};w(R);)for(var I=Object.keys(R),D=0;D<I.length;D++){var M=I[D],j=R[M],B=j.pop();if(T[M]=T[M]||{},!(T[M][B]||!S[M][B])){T[M][B]=!0,O[M]=O[M]||[],O[M].push(B);for(var z=h(S,S[M][B],M),K=Object.keys(z),ee=0;ee<K.length;ee++)R[K[ee]]=R[K[ee]]||[],R[K[ee]]=R[K[ee]].concat(z[K[ee]])}}return O}r.exports=function(S,C){C=C||{};var R={main:i.m},O=C.all?{main:Object.keys(R.main)}:g(R,S),T="";Object.keys(O).filter(function(B){return B!=="main"}).forEach(function(B){for(var z=0;O[B][z];)z++;O[B].push(z),R[B][z]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",T=T+"var "+B+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(z))+")({"+O[B].map(function(K){return""+JSON.stringify(K)+": "+R[B][K].toString()}).join(",")+`});
`}),T=T+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(S))+")({"+O.main.map(function(B){return""+JSON.stringify(B)+": "+R.main[B].toString()}).join(",")+"}))(self);";var I=new window.Blob([T],{type:"text/javascript"});if(C.bare)return I;var D=window.URL||window.webkitURL||window.mozURL||window.msURL,M=D.createObjectURL(I),j=new window.Worker(M);return j.objectURL=M,j}},"./src/crypt/decrypter.js":function(r,n,i){i.r(n);var s=function(){function T(D,M){this.subtle=D,this.aesIV=M}var I=T.prototype;return I.decrypt=function(M,j){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},j,M)},T}(),a=function(){function T(D,M){this.subtle=D,this.key=M}var I=T.prototype;return I.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},T}(),l=a;function d(T){var I=T.byteLength,D=I&&new DataView(T).getUint8(I-1);return D?T.slice(0,I-D):T}var u=function(){function T(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var I=T.prototype;return I.uint8ArrayToUint32Array_=function(M){for(var j=new DataView(M),B=new Uint32Array(4),z=0;z<4;z++)B[z]=j.getUint32(z*4);return B},I.initTable=function(){var M=this.sBox,j=this.invSBox,B=this.subMix,z=B[0],K=B[1],ee=B[2],Z=B[3],ce=this.invSubMix,le=ce[0],Te=ce[1],_e=ce[2],We=ce[3],Ne=new Uint32Array(256),Ue=0,oe=0,xe=0;for(xe=0;xe<256;xe++)xe<128?Ne[xe]=xe<<1:Ne[xe]=xe<<1^283;for(xe=0;xe<256;xe++){var fe=oe^oe<<1^oe<<2^oe<<3^oe<<4;fe=fe>>>8^fe&255^99,M[Ue]=fe,j[fe]=Ue;var Le=Ne[Ue],ye=Ne[Le],Ze=Ne[ye],Ce=Ne[fe]*257^fe*16843008;z[Ue]=Ce<<24|Ce>>>8,K[Ue]=Ce<<16|Ce>>>16,ee[Ue]=Ce<<8|Ce>>>24,Z[Ue]=Ce,Ce=Ze*16843009^ye*65537^Le*257^Ue*16843008,le[fe]=Ce<<24|Ce>>>8,Te[fe]=Ce<<16|Ce>>>16,_e[fe]=Ce<<8|Ce>>>24,We[fe]=Ce,Ue?(Ue=Le^Ne[Ne[Ne[Ze^Le]]],oe^=Ne[Ne[oe]]):Ue=oe=1}},I.expandKey=function(M){for(var j=this.uint8ArrayToUint32Array_(M),B=!0,z=0;z<j.length&&B;)B=j[z]===this.key[z],z++;if(!B){this.key=j;var K=this.keySize=j.length;if(K!==4&&K!==6&&K!==8)throw new Error("Invalid aes key size="+K);var ee=this.ksRows=(K+6+1)*4,Z,ce,le=this.keySchedule=new Uint32Array(ee),Te=this.invKeySchedule=new Uint32Array(ee),_e=this.sBox,We=this.rcon,Ne=this.invSubMix,Ue=Ne[0],oe=Ne[1],xe=Ne[2],fe=Ne[3],Le,ye;for(Z=0;Z<ee;Z++){if(Z<K){Le=le[Z]=j[Z];continue}ye=Le,Z%K===0?(ye=ye<<8|ye>>>24,ye=_e[ye>>>24]<<24|_e[ye>>>16&255]<<16|_e[ye>>>8&255]<<8|_e[ye&255],ye^=We[Z/K|0]<<24):K>6&&Z%K===4&&(ye=_e[ye>>>24]<<24|_e[ye>>>16&255]<<16|_e[ye>>>8&255]<<8|_e[ye&255]),le[Z]=Le=(le[Z-K]^ye)>>>0}for(ce=0;ce<ee;ce++)Z=ee-ce,ce&3?ye=le[Z]:ye=le[Z-4],ce<4||Z<=4?Te[ce]=ye:Te[ce]=Ue[_e[ye>>>24]]^oe[_e[ye>>>16&255]]^xe[_e[ye>>>8&255]]^fe[_e[ye&255]],Te[ce]=Te[ce]>>>0}},I.networkToHostOrderSwap=function(M){return M<<24|(M&65280)<<8|(M&16711680)>>8|M>>>24},I.decrypt=function(M,j,B,z){for(var K=this.keySize+6,ee=this.invKeySchedule,Z=this.invSBox,ce=this.invSubMix,le=ce[0],Te=ce[1],_e=ce[2],We=ce[3],Ne=this.uint8ArrayToUint32Array_(B),Ue=Ne[0],oe=Ne[1],xe=Ne[2],fe=Ne[3],Le=new Int32Array(M),ye=new Int32Array(Le.length),Ze,Ce,it,ft,Be,ot,Xe,Ke,mt,Pt,gt,vt,tt,Rt,kt=this.networkToHostOrderSwap;j<Le.length;){for(mt=kt(Le[j]),Pt=kt(Le[j+1]),gt=kt(Le[j+2]),vt=kt(Le[j+3]),Be=mt^ee[0],ot=vt^ee[1],Xe=gt^ee[2],Ke=Pt^ee[3],tt=4,Rt=1;Rt<K;Rt++)Ze=le[Be>>>24]^Te[ot>>16&255]^_e[Xe>>8&255]^We[Ke&255]^ee[tt],Ce=le[ot>>>24]^Te[Xe>>16&255]^_e[Ke>>8&255]^We[Be&255]^ee[tt+1],it=le[Xe>>>24]^Te[Ke>>16&255]^_e[Be>>8&255]^We[ot&255]^ee[tt+2],ft=le[Ke>>>24]^Te[Be>>16&255]^_e[ot>>8&255]^We[Xe&255]^ee[tt+3],Be=Ze,ot=Ce,Xe=it,Ke=ft,tt=tt+4;Ze=Z[Be>>>24]<<24^Z[ot>>16&255]<<16^Z[Xe>>8&255]<<8^Z[Ke&255]^ee[tt],Ce=Z[ot>>>24]<<24^Z[Xe>>16&255]<<16^Z[Ke>>8&255]<<8^Z[Be&255]^ee[tt+1],it=Z[Xe>>>24]<<24^Z[Ke>>16&255]<<16^Z[Be>>8&255]<<8^Z[ot&255]^ee[tt+2],ft=Z[Ke>>>24]<<24^Z[Be>>16&255]<<16^Z[ot>>8&255]<<8^Z[Xe&255]^ee[tt+3],tt=tt+3,ye[j]=kt(Ze^Ue),ye[j+1]=kt(ft^oe),ye[j+2]=kt(it^xe),ye[j+3]=kt(Ce^fe),Ue=mt,oe=Pt,xe=gt,fe=vt,j=j+4}return z?d(ye.buffer):ye.buffer},I.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},T}(),h=u,w=i("./src/errors.ts"),g=i("./src/utils/logger.js"),S=i("./src/events.js"),C=i("./src/utils/get-self-scope.js"),R=Object(C.getSelfScope)(),O=function(){function T(D,M,j){var B=j===void 0?{}:j,z=B.removePKCS7Padding,K=z===void 0?!0:z;if(this.logEnabled=!0,this.observer=D,this.config=M,this.removePKCS7Padding=K,K)try{var ee=R.crypto;ee&&(this.subtle=ee.subtle||ee.webkitSubtle)}catch{}this.disableWebCrypto=!this.subtle}var I=T.prototype;return I.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},I.decrypt=function(M,j,B,z){var K=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(g.logger.log("JS AES decrypt"),this.logEnabled=!1);var ee=this.decryptor;ee||(this.decryptor=ee=new h),ee.expandKey(j),z(ee.decrypt(M,0,B,this.removePKCS7Padding))}else{this.logEnabled&&(g.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var Z=this.subtle;this.key!==j&&(this.key=j,this.fastAesKey=new l(Z,j)),this.fastAesKey.expandKey().then(function(ce){var le=new s(Z,B);le.decrypt(M,ce).catch(function(Te){K.onWebCryptoError(Te,M,j,B,z)}).then(function(Te){z(Te)})}).catch(function(ce){K.onWebCryptoError(ce,M,j,B,z)})}},I.onWebCryptoError=function(M,j,B,z,K){this.config.enableSoftwareAES?(g.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(j,B,z,K)):(g.logger.error("decrypting error : "+M.message),this.observer.trigger(S.default.ERROR,{type:w.ErrorTypes.MEDIA_ERROR,details:w.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:M.message}))},I.destroy=function(){var M=this.decryptor;M&&(M.destroy(),this.decryptor=void 0)},T}();n.default=O},"./src/demux/demuxer-inline.js":function(r,n,i){i.r(n);var s=i("./src/events.js"),a=i("./src/errors.ts"),l=i("./src/crypt/decrypter.js"),d=i("./src/polyfills/number.js"),u=i("./src/utils/logger.js"),h=i("./src/utils/get-self-scope.js");function w(G,Q,$,A){var N,V,P,k,H,W=navigator.userAgent.toLowerCase(),se=A,ue=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(N=((Q[$+2]&192)>>>6)+1,V=(Q[$+2]&60)>>>2,V>ue.length-1){G.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+V});return}return k=(Q[$+2]&1)<<2,k|=(Q[$+3]&192)>>>6,u.logger.log("manifest codec:"+A+",ADTS data:type:"+N+",sampleingIndex:"+V+"["+ue[V]+"Hz],channelConfig:"+k),/firefox/i.test(W)?V>=6?(N=5,H=new Array(4),P=V-3):(N=2,H=new Array(2),P=V):W.indexOf("android")!==-1?(N=2,H=new Array(2),P=V):(N=5,H=new Array(4),A&&(A.indexOf("mp4a.40.29")!==-1||A.indexOf("mp4a.40.5")!==-1)||!A&&V>=6?P=V-3:((A&&A.indexOf("mp4a.40.2")!==-1&&(V>=6&&k===1||/vivaldi/i.test(W))||!A&&k===1)&&(N=2,H=new Array(2)),P=V)),H[0]=N<<3,H[0]|=(V&14)>>1,H[1]|=(V&1)<<7,H[1]|=k<<3,N===5&&(H[1]|=(P&14)>>1,H[2]=(P&1)<<7,H[2]|=2<<2,H[3]=0),{config:H,samplerate:ue[V],channelCount:k,codec:"mp4a.40."+N,manifestCodec:se}}function g(G,Q){return G[Q]===255&&(G[Q+1]&246)===240}function S(G,Q){return G[Q+1]&1?7:9}function C(G,Q){return(G[Q+3]&3)<<11|G[Q+4]<<3|(G[Q+5]&224)>>>5}function R(G,Q){return!!(Q+1<G.length&&g(G,Q))}function O(G,Q){if(R(G,Q)){var $=S(G,Q);if(Q+$>=G.length)return!1;var A=C(G,Q);if(A<=$)return!1;var N=Q+A;if(N===G.length||N+1<G.length&&g(G,N))return!0}return!1}function T(G,Q,$,A,N){if(!G.samplerate){var V=w(Q,$,A,N);G.config=V.config,G.samplerate=V.samplerate,G.channelCount=V.channelCount,G.codec=V.codec,G.manifestCodec=V.manifestCodec,u.logger.log("parsed codec:"+G.codec+",rate:"+V.samplerate+",nb channel:"+V.channelCount)}}function I(G){return 1024*9e4/G}function D(G,Q,$,A,N){var V,P,k,H=G.length;if(V=S(G,Q),P=C(G,Q),P-=V,P>0&&Q+V+P<=H)return k=$+A*N,{headerLength:V,frameLength:P,stamp:k}}function M(G,Q,$,A,N){var V=I(G.samplerate),P=D(Q,$,A,N,V);if(P){var k=P.stamp,H=P.headerLength,W=P.frameLength,se={unit:Q.subarray($+H,$+H+W),pts:k,dts:k};return G.samples.push(se),{sample:se,length:W+H}}}var j=i("./src/demux/id3.js"),B=function(){function G($,A,N){this.observer=$,this.config=N,this.remuxer=A}var Q=G.prototype;return Q.resetInitSegment=function(A,N,V,P){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:N,duration:P,inputTimeScale:9e4}},Q.resetTimeStamp=function(){},G.probe=function(A){if(!A)return!1;for(var N=j.default.getID3Data(A,0)||[],V=N.length,P=A.length;V<P;V++)if(O(A,V))return u.logger.log("ADTS sync word found !"),!0;return!1},Q.append=function(A,N,V,P){for(var k=this._audioTrack,H=j.default.getID3Data(A,0)||[],W=j.default.getTimeStamp(H),se=Object(d.isFiniteNumber)(W)?W*90:N*9e4,ue=0,re=se,q=A.length,Y=H.length,ie=[{pts:re,dts:re,data:H}];Y<q-1;)if(R(A,Y)&&Y+5<q){T(k,this.observer,A,Y,k.manifestCodec);var te=M(k,A,Y,se,ue);if(te)Y+=te.length,re=te.sample.pts,ue++;else{u.logger.log("Unable to parse AAC frame");break}}else j.default.isHeader(A,Y)?(H=j.default.getID3Data(A,Y),ie.push({pts:re,dts:re,data:H}),Y+=H.length):Y++;this.remuxer.remux(k,{samples:[]},{samples:ie,inputTimeScale:9e4},{samples:[]},N,V,P)},Q.destroy=function(){},G}(),z=B,K=i("./src/demux/mp4demuxer.js"),ee={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(Q,$,A,N,V){if(!(A+24>$.length)){var P=this.parseHeader($,A);if(P&&A+P.frameLength<=$.length){var k=P.samplesPerFrame*9e4/P.sampleRate,H=N+V*k,W={unit:$.subarray(A,A+P.frameLength),pts:H,dts:H};return Q.config=[],Q.channelCount=P.channelCount,Q.samplerate=P.sampleRate,Q.samples.push(W),{sample:W,length:P.frameLength}}}},parseHeader:function(Q,$){var A=Q[$+1]>>3&3,N=Q[$+1]>>1&3,V=Q[$+2]>>4&15,P=Q[$+2]>>2&3,k=Q[$+2]>>1&1;if(A!==1&&V!==0&&V!==15&&P!==3){var H=A===3?3-N:N===3?3:4,W=ee.BitratesMap[H*14+V-1]*1e3,se=A===3?0:A===2?1:2,ue=ee.SamplingRateMap[se*3+P],re=Q[$+3]>>6===3?1:2,q=ee.SamplesCoefficients[A][N],Y=ee.BytesInSlot[N],ie=q*8*Y,te=parseInt(q*W/ue+k,10)*Y;return{sampleRate:ue,channelCount:re,frameLength:te,samplesPerFrame:ie}}},isHeaderPattern:function(Q,$){return Q[$]===255&&(Q[$+1]&224)===224&&(Q[$+1]&6)!==0},isHeader:function(Q,$){return!!($+1<Q.length&&this.isHeaderPattern(Q,$))},probe:function(Q,$){if($+1<Q.length&&this.isHeaderPattern(Q,$)){var A=4,N=this.parseHeader(Q,$),V=A;N&&N.frameLength&&(V=N.frameLength);var P=$+V;if(P===Q.length||P+1<Q.length&&this.isHeaderPattern(Q,P))return!0}return!1}},Z=ee,ce=function(){function G($){this.data=$,this.bytesAvailable=$.byteLength,this.word=0,this.bitsAvailable=0}var Q=G.prototype;return Q.loadWord=function(){var A=this.data,N=this.bytesAvailable,V=A.byteLength-N,P=new Uint8Array(4),k=Math.min(4,N);if(k===0)throw new Error("no bytes available");P.set(A.subarray(V,V+k)),this.word=new DataView(P.buffer).getUint32(0),this.bitsAvailable=k*8,this.bytesAvailable-=k},Q.skipBits=function(A){var N;this.bitsAvailable>A?(this.word<<=A,this.bitsAvailable-=A):(A-=this.bitsAvailable,N=A>>3,A-=N>>3,this.bytesAvailable-=N,this.loadWord(),this.word<<=A,this.bitsAvailable-=A)},Q.readBits=function(A){var N=Math.min(this.bitsAvailable,A),V=this.word>>>32-N;return A>32&&u.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=N,this.bitsAvailable>0?this.word<<=N:this.bytesAvailable>0&&this.loadWord(),N=A-N,N>0&&this.bitsAvailable?V<<N|this.readBits(N):V},Q.skipLZ=function(){var A;for(A=0;A<this.bitsAvailable;++A)if((this.word&2147483648>>>A)!==0)return this.word<<=A,this.bitsAvailable-=A,A;return this.loadWord(),A+this.skipLZ()},Q.skipUEG=function(){this.skipBits(1+this.skipLZ())},Q.skipEG=function(){this.skipBits(1+this.skipLZ())},Q.readUEG=function(){var A=this.skipLZ();return this.readBits(A+1)-1},Q.readEG=function(){var A=this.readUEG();return 1&A?1+A>>>1:-1*(A>>>1)},Q.readBoolean=function(){return this.readBits(1)===1},Q.readUByte=function(){return this.readBits(8)},Q.readUShort=function(){return this.readBits(16)},Q.readUInt=function(){return this.readBits(32)},Q.skipScalingList=function(A){var N=8,V=8,P,k;for(P=0;P<A;P++)V!==0&&(k=this.readEG(),V=(N+k+256)%256),N=V===0?N:V},Q.readSPS=function(){var A=0,N=0,V=0,P=0,k,H,W,se,ue,re,q,Y=this.readUByte.bind(this),ie=this.readBits.bind(this),te=this.readUEG.bind(this),de=this.readBoolean.bind(this),ge=this.skipBits.bind(this),Ae=this.skipEG.bind(this),Me=this.skipUEG.bind(this),Re=this.skipScalingList.bind(this);if(Y(),k=Y(),ie(5),ge(3),Y(),Me(),k===100||k===110||k===122||k===244||k===44||k===83||k===86||k===118||k===128){var ve=te();if(ve===3&&ge(1),Me(),Me(),ge(1),de())for(re=ve!==3?8:12,q=0;q<re;q++)de()&&(q<6?Re(16):Re(64))}Me();var me=te();if(me===0)te();else if(me===1)for(ge(1),Ae(),Ae(),H=te(),q=0;q<H;q++)Ae();Me(),ge(1),W=te(),se=te(),ue=ie(1),ue===0&&ge(1),ge(1),de()&&(A=te(),N=te(),V=te(),P=te());var he=[1,1];if(de()&&de()){var Ie=Y();switch(Ie){case 1:he=[1,1];break;case 2:he=[12,11];break;case 3:he=[10,11];break;case 4:he=[16,11];break;case 5:he=[40,33];break;case 6:he=[24,11];break;case 7:he=[20,11];break;case 8:he=[32,11];break;case 9:he=[80,33];break;case 10:he=[18,11];break;case 11:he=[15,11];break;case 12:he=[64,33];break;case 13:he=[160,99];break;case 14:he=[4,3];break;case 15:he=[3,2];break;case 16:he=[2,1];break;case 255:{he=[Y()<<8|Y(),Y()<<8|Y()];break}}}return{width:Math.ceil((W+1)*16-A*2-N*2),height:(2-ue)*(se+1)*16-(ue?2:4)*(V+P),pixelRatio:he}},Q.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},G}(),le=ce,Te=function(){function G($,A,N,V){this.decryptdata=N,this.discardEPB=V,this.decrypter=new l.default($,A,{removePKCS7Padding:!1})}var Q=G.prototype;return Q.decryptBuffer=function(A,N){this.decrypter.decrypt(A,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,N)},Q.decryptAacSample=function(A,N,V,P){var k=A[N].unit,H=k.subarray(16,k.length-k.length%16),W=H.buffer.slice(H.byteOffset,H.byteOffset+H.length),se=this;this.decryptBuffer(W,function(ue){ue=new Uint8Array(ue),k.set(ue,16),P||se.decryptAacSamples(A,N+1,V)})},Q.decryptAacSamples=function(A,N,V){for(;;N++){if(N>=A.length){V();return}if(!(A[N].unit.length<32)){var P=this.decrypter.isSync();if(this.decryptAacSample(A,N,V,P),!P)return}}},Q.getAvcEncryptedData=function(A){for(var N=Math.floor((A.length-48)/160)*16+16,V=new Int8Array(N),P=0,k=32;k<=A.length-16;k+=160,P+=16)V.set(A.subarray(k,k+16),P);return V},Q.getAvcDecryptedUnit=function(A,N){N=new Uint8Array(N);for(var V=0,P=32;P<=A.length-16;P+=160,V+=16)A.set(N.subarray(V,V+16),P);return A},Q.decryptAvcSample=function(A,N,V,P,k,H){var W=this.discardEPB(k.data),se=this.getAvcEncryptedData(W),ue=this;this.decryptBuffer(se.buffer,function(re){k.data=ue.getAvcDecryptedUnit(W,re),H||ue.decryptAvcSamples(A,N,V+1,P)})},Q.decryptAvcSamples=function(A,N,V,P){for(;;N++,V=0){if(N>=A.length){P();return}for(var k=A[N].units;!(V>=k.length);V++){var H=k[V];if(!(H.data.length<=48||H.type!==1&&H.type!==5)){var W=this.decrypter.isSync();if(this.decryptAvcSample(A,N,V,P,H,W),!W)return}}}},G}(),_e=Te,We={video:1,audio:2,id3:3,text:4},Ne=function(){function G($,A,N,V){this.observer=$,this.config=N,this.typeSupported=V,this.remuxer=A,this.sampleAes=null,this.pmtUnknownTypes={}}var Q=G.prototype;return Q.setDecryptData=function(A){A!=null&&A.key!=null&&A.method==="SAMPLE-AES"?this.sampleAes=new _e(this.observer,this.config,A,this.discardEPB):this.sampleAes=null},G.probe=function(A){var N=G._syncOffset(A);return N<0?!1:(N&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+N+", junk ahead ?"),!0)},G._syncOffset=function(A){for(var N=Math.min(1e3,A.length-564),V=0;V<N;){if(A[V]===71&&A[V+188]===71&&A[V+2*188]===71)return V;V++}return-1},G.createTrack=function(A,N){return{container:A==="video"||A==="audio"?"video/mp2t":void 0,type:A,id:We[A],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:A==="video"?0:void 0,isAAC:A==="audio"?!0:void 0,duration:A==="audio"?N:void 0}},Q.resetInitSegment=function(A,N,V,P){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=G.createTrack("video",P),this._audioTrack=G.createTrack("audio",P),this._id3Track=G.createTrack("id3",P),this._txtTrack=G.createTrack("text",P),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=N,this.videoCodec=V,this._duration=P},Q.resetTimeStamp=function(){},Q.append=function(A,N,V,P){var k,H=A.length,W,se,ue,re,q,Y=!1;this.pmtUnknownTypes={},this.contiguous=V;var ie=this.pmtParsed,te=this._avcTrack,de=this._audioTrack,ge=this._id3Track,Ae=te.pid,Me=de.pid,Re=ge.pid,ve=this._pmtId,me=te.pesData,he=de.pesData,Ie=ge.pesData,$e=this._parsePAT,st=this._parsePMT.bind(this),wt=this._parsePES,dt=this._parseAVCPES.bind(this),Ft=this._parseAACPES.bind(this),qt=this._parseMPEGPES.bind(this),_r=this._parseID3PES.bind(this),Vt=G._syncOffset(A);for(H-=(H+Vt)%188,k=Vt;k<H;k+=188)if(A[k]===71){if(W=!!(A[k+1]&64),se=((A[k+1]&31)<<8)+A[k+2],ue=(A[k+3]&48)>>4,ue>1){if(re=k+5+A[k+4],re===k+188)continue}else re=k+4;switch(se){case Ae:W&&(me&&(q=wt(me))&&dt(q,!1),me={data:[],size:0}),me&&(me.data.push(A.subarray(re,k+188)),me.size+=k+188-re);break;case Me:W&&(he&&(q=wt(he))&&(de.isAAC?Ft(q):qt(q)),he={data:[],size:0}),he&&(he.data.push(A.subarray(re,k+188)),he.size+=k+188-re);break;case Re:W&&(Ie&&(q=wt(Ie))&&_r(q),Ie={data:[],size:0}),Ie&&(Ie.data.push(A.subarray(re,k+188)),Ie.size+=k+188-re);break;case 0:W&&(re+=A[re]+1),ve=this._pmtId=$e(A,re);break;case ve:W&&(re+=A[re]+1);var bt=st(A,re,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);Ae=bt.avc,Ae>0&&(te.pid=Ae),Me=bt.audio,Me>0&&(de.pid=Me,de.isAAC=bt.isAAC),Re=bt.id3,Re>0&&(ge.pid=Re),Y&&!ie&&(u.logger.log("reparse from beginning"),Y=!1,k=Vt-188),ie=this.pmtParsed=!0;break;case 17:case 8191:break;default:Y=!0;break}}else this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});me&&(q=wt(me))?(dt(q,!0),te.pesData=null):te.pesData=me,he&&(q=wt(he))?(de.isAAC?Ft(q):qt(q),de.pesData=null):(he&&he.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),de.pesData=he),Ie&&(q=wt(Ie))?(_r(q),ge.pesData=null):ge.pesData=Ie,this.sampleAes==null?this.remuxer.remux(de,te,ge,this._txtTrack,N,V,P):this.decryptAndRemux(de,te,ge,this._txtTrack,N,V,P)},Q.decryptAndRemux=function(A,N,V,P,k,H,W){if(A.samples&&A.isAAC){var se=this;this.sampleAes.decryptAacSamples(A.samples,0,function(){se.decryptAndRemuxAvc(A,N,V,P,k,H,W)})}else this.decryptAndRemuxAvc(A,N,V,P,k,H,W)},Q.decryptAndRemuxAvc=function(A,N,V,P,k,H,W){if(N.samples){var se=this;this.sampleAes.decryptAvcSamples(N.samples,0,0,function(){se.remuxer.remux(A,N,V,P,k,H,W)})}else this.remuxer.remux(A,N,V,P,k,H,W)},Q.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},Q._parsePAT=function(A,N){return(A[N+10]&31)<<8|A[N+11]},Q._trackUnknownPmt=function(A,N,V){var P=this.pmtUnknownTypes[A]||0;return P===0&&(this.pmtUnknownTypes[A]=0,N.call(u.logger,V)),this.pmtUnknownTypes[A]++,P},Q._parsePMT=function(A,N,V,P){var k,H,W,se,ue={audio:-1,avc:-1,id3:-1,isAAC:!0};for(k=(A[N+1]&15)<<8|A[N+2],H=N+3+k-4,W=(A[N+10]&15)<<8|A[N+11],N+=12+W;N<H;){switch(se=(A[N+1]&31)<<8|A[N+2],A[N]){case 207:if(!P){this._trackUnknownPmt(A[N],u.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:ue.audio===-1&&(ue.audio=se);break;case 21:ue.id3===-1&&(ue.id3=se);break;case 219:if(!P){this._trackUnknownPmt(A[N],u.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:ue.avc===-1&&(ue.avc=se);break;case 3:case 4:V?ue.audio===-1&&(ue.audio=se,ue.isAAC=!1):this._trackUnknownPmt(A[N],u.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(A[N],u.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(A[N],u.logger.log,"Unknown stream type:"+A[N]);break}N+=((A[N+3]&15)<<8|A[N+4])+5}return ue},Q._parsePES=function(A){var N=0,V,P,k,H,W,se,ue,re,q,Y=A.data;if(!A||A.size===0)return null;for(;Y[0].length<19&&Y.length>1;){var ie=new Uint8Array(Y[0].length+Y[1].length);ie.set(Y[0]),ie.set(Y[1],Y[0].length),Y[0]=ie,Y.splice(1,1)}if(V=Y[0],k=(V[0]<<16)+(V[1]<<8)+V[2],k===1){if(H=(V[4]<<8)+V[5],H&&H>A.size-6||(P=V[7],P&192&&(ue=(V[9]&14)*536870912+(V[10]&255)*4194304+(V[11]&254)*16384+(V[12]&255)*128+(V[13]&254)/2,P&64?(re=(V[14]&14)*536870912+(V[15]&255)*4194304+(V[16]&254)*16384+(V[17]&255)*128+(V[18]&254)/2,ue-re>60*9e4&&(u.logger.warn(Math.round((ue-re)/9e4)+"s delta between PTS and DTS, align them"),ue=re)):re=ue),W=V[8],q=W+9,A.size<=q))return null;A.size-=q,se=new Uint8Array(A.size);for(var te=0,de=Y.length;te<de;te++){V=Y[te];var ge=V.byteLength;if(q)if(q>ge){q-=ge;continue}else V=V.subarray(q),ge-=q,q=0;se.set(V,N),N+=ge}return H&&(H-=W+3),{data:se,pts:ue,dts:re,len:H}}else return null},Q.pushAccesUnit=function(A,N){if(A.units.length&&A.frame){var V=N.samples,P=V.length;if(isNaN(A.pts))if(P){var k=V[P-1];A.pts=k.pts,A.dts=k.dts}else{N.dropped++;return}!this.config.forceKeyFrameOnDiscontinuity||A.key===!0||N.sps&&(P||this.contiguous)?(A.id=P,V.push(A)):N.dropped++}A.debug.length&&u.logger.log(A.pts+"/"+A.dts+":"+A.debug)},Q._parseAVCPES=function(A,N){var V=this,P=this._avcTrack,k=this._parseAVCNALu(A.data),H,W=this.avcSample,se,ue=!1,re,q=this.pushAccesUnit.bind(this),Y=function(te,de,ge,Ae){return{key:te,pts:de,dts:ge,units:[],debug:Ae}};A.data=null,W&&k.length&&!P.audFound&&(q(W,P),W=this.avcSample=Y(!1,A.pts,A.dts,"")),k.forEach(function(ie){switch(ie.type){case 1:se=!0,W||(W=V.avcSample=Y(!0,A.pts,A.dts,"")),W.frame=!0;var te=ie.data;if(ue&&te.length>4){var de=new le(te).readSliceType();(de===2||de===4||de===7||de===9)&&(W.key=!0)}break;case 5:se=!0,W||(W=V.avcSample=Y(!0,A.pts,A.dts,"")),W.key=!0,W.frame=!0;break;case 6:se=!0,H=new le(V.discardEPB(ie.data)),H.readUByte();for(var ge=0,Ae=0,Me=!1,Re=0;!Me&&H.bytesAvailable>1;){ge=0;do Re=H.readUByte(),ge+=Re;while(Re===255);Ae=0;do Re=H.readUByte(),Ae+=Re;while(Re===255);if(ge===4&&H.bytesAvailable!==0){Me=!0;var ve=H.readUByte();if(ve===181){var me=H.readUShort();if(me===49){var he=H.readUInt();if(he===1195456820){var Ie=H.readUByte();if(Ie===3){var $e=H.readUByte(),st=H.readUByte(),wt=31&$e,dt=[$e,st];for(re=0;re<wt;re++)dt.push(H.readUByte()),dt.push(H.readUByte()),dt.push(H.readUByte());V._insertSampleInOrder(V._txtTrack.samples,{type:3,pts:A.pts,bytes:dt})}}}}}else if(ge===5&&H.bytesAvailable!==0){if(Me=!0,Ae>16){var Ft=[];for(re=0;re<16;re++)Ft.push(H.readUByte().toString(16)),(re===3||re===5||re===7||re===9)&&Ft.push("-");var qt=Ae-16,_r=new Uint8Array(qt);for(re=0;re<qt;re++)_r[re]=H.readUByte();V._insertSampleInOrder(V._txtTrack.samples,{pts:A.pts,payloadType:ge,uuid:Ft.join(""),userDataBytes:_r,userData:Object(j.utf8ArrayToStr)(_r.buffer)})}}else if(Ae<H.bytesAvailable)for(re=0;re<Ae;re++)H.readUByte()}break;case 7:if(se=!0,ue=!0,!P.sps){H=new le(ie.data);var Vt=H.readSPS();P.width=Vt.width,P.height=Vt.height,P.pixelRatio=Vt.pixelRatio,P.sps=[ie.data],P.duration=V._duration;var bt=ie.data.subarray(1,4),yn="avc1.";for(re=0;re<3;re++){var En=bt[re].toString(16);En.length<2&&(En="0"+En),yn+=En}P.codec=yn}break;case 8:se=!0,P.pps||(P.pps=[ie.data]);break;case 9:se=!1,P.audFound=!0,W&&q(W,P),W=V.avcSample=Y(!1,A.pts,A.dts,"");break;case 12:se=!1;break;default:se=!1,W&&(W.debug+="unknown NAL "+ie.type+" ");break}if(W&&se){var Mr=W.units;Mr.push(ie)}}),N&&W&&(q(W,P),this.avcSample=null)},Q._insertSampleInOrder=function(A,N){var V=A.length;if(V>0){if(N.pts>=A[V-1].pts)A.push(N);else for(var P=V-1;P>=0;P--)if(N.pts<A[P].pts){A.splice(P,0,N);break}}else A.push(N)},Q._getLastNalUnit=function(){var A=this.avcSample,N;if(!A||A.units.length===0){var V=this._avcTrack,P=V.samples;A=P[P.length-1]}if(A){var k=A.units;N=k[k.length-1]}return N},Q._parseAVCNALu=function(A){var N=0,V=A.byteLength,P,k,H=this._avcTrack,W=H.naluState||0,se=W,ue=[],re,q,Y=-1,ie;for(W===-1&&(Y=0,ie=A[0]&31,W=0,N=1);N<V;){if(P=A[N++],!W){W=P?0:1;continue}if(W===1){W=P?0:2;continue}if(!P)W=3;else if(P===1){if(Y>=0)re={data:A.subarray(Y,N-W-1),type:ie},ue.push(re);else{var te=this._getLastNalUnit();if(te&&(se&&N<=4-se&&te.state&&(te.data=te.data.subarray(0,te.data.byteLength-se)),k=N-W-1,k>0)){var de=new Uint8Array(te.data.byteLength+k);de.set(te.data,0),de.set(A.subarray(0,k),te.data.byteLength),te.data=de}}N<V?(q=A[N]&31,Y=N,ie=q,W=0):W=-1}else W=0}if(Y>=0&&W>=0&&(re={data:A.subarray(Y,V),type:ie,state:W},ue.push(re)),ue.length===0){var ge=this._getLastNalUnit();if(ge){var Ae=new Uint8Array(ge.data.byteLength+A.byteLength);Ae.set(ge.data,0),Ae.set(A,ge.data.byteLength),ge.data=Ae}}return H.naluState=W,ue},Q.discardEPB=function(A){for(var N=A.byteLength,V=[],P=1,k,H;P<N-2;)A[P]===0&&A[P+1]===0&&A[P+2]===3?(V.push(P+2),P+=2):P++;if(V.length===0)return A;k=N-V.length,H=new Uint8Array(k);var W=0;for(P=0;P<k;W++,P++)W===V[0]&&(W++,V.shift()),H[P]=A[W];return H},Q._parseAACPES=function(A){var N=this._audioTrack,V=A.data,P=A.pts,k=0,H=this.aacOverFlow,W=this.aacLastPTS,se,ue,re,q,Y;if(H){var ie=new Uint8Array(H.byteLength+V.byteLength);ie.set(H,0),ie.set(V,H.byteLength),V=ie}for(re=k,Y=V.length;re<Y-1&&!R(V,re);re++);if(re){var te,de;if(re<Y-1?(te="AAC PES did not start with ADTS header,offset:"+re,de=!1):(te="no ADTS header found in AAC PES",de=!0),u.logger.warn("parsing error:"+te),this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:de,reason:te}),de)return}if(T(N,this.observer,V,re,this.audioCodec),ue=0,se=I(N.samplerate),H&&W){var ge=W+se;Math.abs(ge-P)>1&&(u.logger.log("AAC: align PTS for overlapping frames by "+Math.round((ge-P)/90)),P=ge)}for(;re<Y;)if(R(V,re)){if(re+5<Y){var Ae=M(N,V,re,P,ue);if(Ae){re+=Ae.length,q=Ae.sample.pts,ue++;continue}}break}else re++;re<Y?H=V.subarray(re,Y):H=null,this.aacOverFlow=H,this.aacLastPTS=q},Q._parseMPEGPES=function(A){for(var N=A.data,V=N.length,P=0,k=0,H=A.pts;k<V;)if(Z.isHeader(N,k)){var W=Z.appendFrame(this._audioTrack,N,k,H,P);if(W)k+=W.length,P++;else break}else k++},Q._parseID3PES=function(A){this._id3Track.samples.push(A)},G}(),Ue=Ne,oe=function(){function G($,A,N){this.observer=$,this.config=N,this.remuxer=A}var Q=G.prototype;return Q.resetInitSegment=function(A,N,V,P){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:N,duration:P,inputTimeScale:9e4}},Q.resetTimeStamp=function(){},G.probe=function(A){var N,V,P=j.default.getID3Data(A,0);if(P&&j.default.getTimeStamp(P)!==void 0){for(N=P.length,V=Math.min(A.length-1,N+100);N<V;N++)if(Z.probe(A,N))return u.logger.log("MPEG Audio sync word found !"),!0}return!1},Q.append=function(A,N,V,P){for(var k=j.default.getID3Data(A,0)||[],H=j.default.getTimeStamp(k),W=H!==void 0?90*H:N*9e4,se=k.length,ue=A.length,re=0,q=0,Y=this._audioTrack,ie=[{pts:W,dts:W,data:k}];se<ue;)if(Z.isHeader(A,se)){var te=Z.appendFrame(Y,A,se,W,re);if(te)se+=te.length,q=te.sample.pts,re++;else break}else j.default.isHeader(A,se)?(k=j.default.getID3Data(A,se),ie.push({pts:q,dts:q,data:k}),se+=k.length):se++;this.remuxer.remux(Y,{samples:[]},{samples:ie,inputTimeScale:9e4},{samples:[]},N,V,P)},Q.destroy=function(){},G}(),xe=oe,fe=function(){function G(){}return G.getSilentFrame=function($,A){switch($){case"mp4a.40.2":if(A===1)return new Uint8Array([0,200,0,128,35,128]);if(A===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(A===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(A===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(A===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(A===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(A===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(A===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(A===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},G}(),Le=fe,ye=Math.pow(2,32)-1,Ze=function(){function G(){}return G.init=function(){G.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var $;for($ in G.types)G.types.hasOwnProperty($)&&(G.types[$]=[$.charCodeAt(0),$.charCodeAt(1),$.charCodeAt(2),$.charCodeAt(3)]);var A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),N=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);G.HDLR_TYPES={video:A,audio:N};var V=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]);G.STTS=G.STSC=G.STCO=P,G.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),G.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),G.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),G.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var k=new Uint8Array([105,115,111,109]),H=new Uint8Array([97,118,99,49]),W=new Uint8Array([0,0,0,1]);G.FTYP=G.box(G.types.ftyp,k,W,k,H),G.DINF=G.box(G.types.dinf,G.box(G.types.dref,V))},G.box=function($){for(var A=Array.prototype.slice.call(arguments,1),N=8,V=A.length,P=V,k;V--;)N+=A[V].byteLength;for(k=new Uint8Array(N),k[0]=N>>24&255,k[1]=N>>16&255,k[2]=N>>8&255,k[3]=N&255,k.set($,4),V=0,N=8;V<P;V++)k.set(A[V],N),N+=A[V].byteLength;return k},G.hdlr=function($){return G.box(G.types.hdlr,G.HDLR_TYPES[$])},G.mdat=function($){return G.box(G.types.mdat,$)},G.mdhd=function($,A){A*=$;var N=Math.floor(A/(ye+1)),V=Math.floor(A%(ye+1));return G.box(G.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,$>>24&255,$>>16&255,$>>8&255,$&255,N>>24,N>>16&255,N>>8&255,N&255,V>>24,V>>16&255,V>>8&255,V&255,85,196,0,0]))},G.mdia=function($){return G.box(G.types.mdia,G.mdhd($.timescale,$.duration),G.hdlr($.type),G.minf($))},G.mfhd=function($){return G.box(G.types.mfhd,new Uint8Array([0,0,0,0,$>>24,$>>16&255,$>>8&255,$&255]))},G.minf=function($){return $.type==="audio"?G.box(G.types.minf,G.box(G.types.smhd,G.SMHD),G.DINF,G.stbl($)):G.box(G.types.minf,G.box(G.types.vmhd,G.VMHD),G.DINF,G.stbl($))},G.moof=function($,A,N){return G.box(G.types.moof,G.mfhd($),G.traf(N,A))},G.moov=function($){for(var A=$.length,N=[];A--;)N[A]=G.trak($[A]);return G.box.apply(null,[G.types.moov,G.mvhd($[0].timescale,$[0].duration)].concat(N).concat(G.mvex($)))},G.mvex=function($){for(var A=$.length,N=[];A--;)N[A]=G.trex($[A]);return G.box.apply(null,[G.types.mvex].concat(N))},G.mvhd=function($,A){A*=$;var N=Math.floor(A/(ye+1)),V=Math.floor(A%(ye+1)),P=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,$>>24&255,$>>16&255,$>>8&255,$&255,N>>24,N>>16&255,N>>8&255,N&255,V>>24,V>>16&255,V>>8&255,V&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return G.box(G.types.mvhd,P)},G.sdtp=function($){var A=$.samples||[],N=new Uint8Array(4+A.length),V,P;for(P=0;P<A.length;P++)V=A[P].flags,N[P+4]=V.dependsOn<<4|V.isDependedOn<<2|V.hasRedundancy;return G.box(G.types.sdtp,N)},G.stbl=function($){return G.box(G.types.stbl,G.stsd($),G.box(G.types.stts,G.STTS),G.box(G.types.stsc,G.STSC),G.box(G.types.stsz,G.STSZ),G.box(G.types.stco,G.STCO))},G.avc1=function($){var A=[],N=[],V,P,k;for(V=0;V<$.sps.length;V++)P=$.sps[V],k=P.byteLength,A.push(k>>>8&255),A.push(k&255),A=A.concat(Array.prototype.slice.call(P));for(V=0;V<$.pps.length;V++)P=$.pps[V],k=P.byteLength,N.push(k>>>8&255),N.push(k&255),N=N.concat(Array.prototype.slice.call(P));var H=G.box(G.types.avcC,new Uint8Array([1,A[3],A[4],A[5],255,224|$.sps.length].concat(A).concat([$.pps.length]).concat(N))),W=$.width,se=$.height,ue=$.pixelRatio[0],re=$.pixelRatio[1];return G.box(G.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,W>>8&255,W&255,se>>8&255,se&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),H,G.box(G.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),G.box(G.types.pasp,new Uint8Array([ue>>24,ue>>16&255,ue>>8&255,ue&255,re>>24,re>>16&255,re>>8&255,re&255])))},G.esds=function($){var A=$.config.length;return new Uint8Array([0,0,0,0,3,23+A,0,1,0,4,15+A,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([A]).concat($.config).concat([6,1,2]))},G.mp4a=function($){var A=$.samplerate;return G.box(G.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,$.channelCount,0,16,0,0,0,0,A>>8&255,A&255,0,0]),G.box(G.types.esds,G.esds($)))},G.mp3=function($){var A=$.samplerate;return G.box(G.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,$.channelCount,0,16,0,0,0,0,A>>8&255,A&255,0,0]))},G.stsd=function($){return $.type==="audio"?!$.isAAC&&$.codec==="mp3"?G.box(G.types.stsd,G.STSD,G.mp3($)):G.box(G.types.stsd,G.STSD,G.mp4a($)):G.box(G.types.stsd,G.STSD,G.avc1($))},G.tkhd=function($){var A=$.id,N=$.duration*$.timescale,V=$.width,P=$.height,k=Math.floor(N/(ye+1)),H=Math.floor(N%(ye+1));return G.box(G.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,A>>24&255,A>>16&255,A>>8&255,A&255,0,0,0,0,k>>24,k>>16&255,k>>8&255,k&255,H>>24,H>>16&255,H>>8&255,H&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,V>>8&255,V&255,0,0,P>>8&255,P&255,0,0]))},G.traf=function($,A){var N=G.sdtp($),V=$.id,P=Math.floor(A/(ye+1)),k=Math.floor(A%(ye+1));return G.box(G.types.traf,G.box(G.types.tfhd,new Uint8Array([0,0,0,0,V>>24,V>>16&255,V>>8&255,V&255])),G.box(G.types.tfdt,new Uint8Array([1,0,0,0,P>>24,P>>16&255,P>>8&255,P&255,k>>24,k>>16&255,k>>8&255,k&255])),G.trun($,N.length+16+20+8+16+8+8),N)},G.trak=function($){return $.duration=$.duration||4294967295,G.box(G.types.trak,G.tkhd($),G.mdia($))},G.trex=function($){var A=$.id;return G.box(G.types.trex,new Uint8Array([0,0,0,0,A>>24,A>>16&255,A>>8&255,A&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},G.trun=function($,A){var N=$.samples||[],V=N.length,P=12+16*V,k=new Uint8Array(P),H,W,se,ue,re,q;for(A+=8+P,k.set([0,0,15,1,V>>>24&255,V>>>16&255,V>>>8&255,V&255,A>>>24&255,A>>>16&255,A>>>8&255,A&255],0),H=0;H<V;H++)W=N[H],se=W.duration,ue=W.size,re=W.flags,q=W.cts,k.set([se>>>24&255,se>>>16&255,se>>>8&255,se&255,ue>>>24&255,ue>>>16&255,ue>>>8&255,ue&255,re.isLeading<<2|re.dependsOn,re.isDependedOn<<6|re.hasRedundancy<<4|re.paddingValue<<1|re.isNonSync,re.degradPrio&240<<8,re.degradPrio&15,q>>>24&255,q>>>16&255,q>>>8&255,q&255],12+16*H);return G.box(G.types.trun,k)},G.initSegment=function($){G.types||G.init();var A=G.moov($),N;return N=new Uint8Array(G.FTYP.byteLength+A.byteLength),N.set(G.FTYP),N.set(A,G.FTYP.byteLength),N},G}(),Ce=Ze,it=9e4;function ft(G,Q,$,A){$===void 0&&($=1),A===void 0&&(A=!1);var N=G*Q*$;return A?Math.round(N):N}function Be(G,Q){return Q===void 0&&(Q=!1),ft(G,1e3,1/it,Q)}function ot(G,Q){return Q===void 0&&(Q=1),ft(G,it,1/Q)}var Xe=ot(10),Ke=ot(.2),mt=null,Pt=function(){function G($,A,N,V){if(this.observer=$,this.config=A,this.typeSupported=N,this.ISGenerated=!1,mt===null){var P=navigator.userAgent.match(/Chrome\/(\d+)/i);mt=P?parseInt(P[1]):0}}var Q=G.prototype;return Q.destroy=function(){},Q.resetTimeStamp=function(A){this._initPTS=this._initDTS=A},Q.resetInitSegment=function(){this.ISGenerated=!1},Q.getVideoStartPts=function(A){var N=!1,V=A.reduce(function(P,k){var H=k.pts-P;return H<-4294967296?(N=!0,gt(P,k.pts)):H>0?P:k.pts},A[0].pts);return N&&u.logger.debug("PTS rollover detected"),V},Q.remux=function(A,N,V,P,k,H,W){if(this.ISGenerated||this.generateIS(A,N,k),this.ISGenerated){var se=A.samples.length,ue=N.samples.length,re=k,q=k;if(se&&ue){var Y=this.getVideoStartPts(N.samples),ie=gt(A.samples[0].pts,Y)-Y,te=ie/N.inputTimeScale;re+=Math.max(0,te),q+=Math.max(0,-te)}if(se){A.timescale||(u.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(A,N,k));var de=this.remuxAudio(A,re,H,W);if(ue){var ge;de&&(ge=de.endPTS-de.startPTS),N.timescale||(u.logger.warn("regenerate InitSegment as video detected"),this.generateIS(A,N,k)),this.remuxVideo(N,q,H,ge)}}else if(ue){var Ae=this.remuxVideo(N,q,H,0,W);Ae&&A.codec&&this.remuxEmptyAudio(A,re,H,Ae)}}V.samples.length&&this.remuxID3(V,k),P.samples.length&&this.remuxText(P,k),this.observer.trigger(s.default.FRAG_PARSED)},Q.generateIS=function(A,N,V){var P=this.observer,k=A.samples,H=N.samples,W=this.typeSupported,se="audio/mp4",ue={},re={tracks:ue},q=this._initPTS===void 0,Y,ie;if(q&&(Y=ie=1/0),A.config&&k.length&&(A.timescale=A.samplerate,u.logger.log("audio sampling rate : "+A.samplerate),A.isAAC||(W.mpeg?(se="audio/mpeg",A.codec=""):W.mp3&&(A.codec="mp3")),ue.audio={container:se,codec:A.codec,initSegment:!A.isAAC&&W.mpeg?new Uint8Array:Ce.initSegment([A]),metadata:{channelCount:A.channelCount}},q&&(Y=ie=k[0].pts-Math.round(A.inputTimeScale*V))),N.sps&&N.pps&&H.length){var te=N.inputTimeScale;if(N.timescale=te,ue.video={container:"video/mp4",codec:N.codec,initSegment:Ce.initSegment([N]),metadata:{width:N.width,height:N.height}},q){var de=this.getVideoStartPts(H),ge=Math.round(te*V);ie=Math.min(ie,gt(H[0].dts,de)-ge),Y=Math.min(Y,de-ge),this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:Y})}}else q&&ue.audio&&this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:Y});Object.keys(ue).length?(P.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,re),this.ISGenerated=!0,q&&(this._initPTS=Y,this._initDTS=ie)):P.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},Q.remuxVideo=function(A,N,V,P){var k=A.timescale,H=A.samples,W=[],se=H.length,ue=this._initPTS,re=8,q,Y,ie,te,de,ge=Number.POSITIVE_INFINITY,Ae=Number.NEGATIVE_INFINITY,Me=0,Re=!1,ve=this.nextAvcDts;if(se!==0){if(!V){var me=N*k,he=H[0].pts-gt(H[0].dts,H[0].pts);ve=me-he}for(var Ie=0;Ie<se;Ie++){var $e=H[Ie];$e.pts=gt($e.pts-ue,ve),$e.dts=gt($e.dts-ue,ve),$e.dts>$e.pts&&(Me=Math.max(Math.min(Me,$e.pts-$e.dts),-1*Ke)),$e.dts<H[Ie>0?Ie-1:Ie].dts&&(Re=!0)}Re&&H.sort(function(js,ao){var md=js.dts-ao.dts,gd=js.pts-ao.pts;return md||gd||js.id-ao.id}),te=H[0].dts,de=H[se-1].dts;var st=Math.round((de-te)/(se-1));if(Me<0){if(Me<st*-2){u.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Be(-st,!0)+" ms");for(var wt=Me,dt=0;dt<se;dt++)H[dt].dts=wt=Math.max(wt,H[dt].pts-st),H[dt].pts=Math.max(wt,H[dt].pts)}else{u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Be(Me,!0)+" ms to overcome this issue");for(var Ft=0;Ft<se;Ft++)H[Ft].dts=H[Ft].dts+Me}te=H[0].dts,de=H[se-1].dts}if(V){var qt=te-ve,_r=qt>st,Vt=qt<-1;if(_r||Vt){_r?u.logger.warn("AVC: "+Be(qt,!0)+" ms ("+qt+"dts) hole between fragments detected, filling it"):u.logger.warn("AVC: "+Be(-qt,!0)+" ms ("+qt+"dts) overlapping between fragments detected"),te=ve;var bt=H[0].pts-qt;H[0].dts=te,H[0].pts=bt,u.logger.log("Video: First PTS/DTS adjusted: "+Be(bt,!0)+"/"+Be(te,!0)+", delta: "+Be(qt,!0)+" ms")}}mt&&mt<75&&(te=Math.max(0,te));for(var yn=0,En=0,Mr=0;Mr<se;Mr++){for(var sr=H[Mr],cn=sr.units,wn=cn.length,Rn=0,Yi=0;Yi<wn;Yi++)Rn+=cn[Yi].data.length;En+=Rn,yn+=wn,sr.length=Rn,sr.dts=Math.max(sr.dts,te),sr.pts=Math.max(sr.pts,sr.dts,0),ge=Math.min(sr.pts,ge),Ae=Math.max(sr.pts,Ae)}de=H[se-1].dts;var kn=En+4*yn+8;try{Y=new Uint8Array(kn)}catch{this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:kn,reason:"fail allocating video mdat "+kn});return}var Xi=new DataView(Y.buffer);Xi.setUint32(0,kn),Y.set(Ce.types.mdat,4);for(var ae=0;ae<se;ae++){for(var br=H[ae],ci=br.units,Qi=0,xn=void 0,no=0,hd=ci.length;no<hd;no++){var ou=ci[no],lu=ou.data,io=ou.data.byteLength;Xi.setUint32(re,io),re+=4,Y.set(lu,re),re+=io,Qi+=4+io}if(ae<se-1)q=H[ae+1].dts-br.dts;else{var uu=this.config,Ji=br.dts-H[ae>0?ae-1:ae].dts;if(uu.stretchShortVideoTrack){var pd=uu.maxBufferHole,so=Math.floor(pd*k),Vs=(P?ge+P*k:this.nextAudioPts)-br.pts;Vs>so?(q=Vs-Ji,q<0&&(q=Ji),u.logger.log("It is approximately "+Be(Vs,!1)+" ms to the next segment; using duration "+Be(q,!1)+" ms for the last video frame.")):q=Ji}else q=Ji}xn=Math.round(br.pts-br.dts),W.push({size:Qi,duration:q,cts:xn,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:br.key?2:1,isNonSync:br.key?0:1}})}this.nextAvcDts=de+q;var Zi=A.dropped;if(A.nbNalu=0,A.dropped=0,W.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var cu=W[0].flags;cu.dependsOn=2,cu.isNonSync=0}A.samples=W,ie=Ce.moof(A.sequenceNumber++,te,A),A.samples=[];var fu={data1:ie,data2:Y,startPTS:ge/k,endPTS:(Ae+q)/k,startDTS:te/k,endDTS:this.nextAvcDts/k,type:"video",hasAudio:!1,hasVideo:!0,nb:W.length,dropped:Zi};return this.observer.trigger(s.default.FRAG_PARSING_DATA,fu),fu}},Q.remuxAudio=function(A,N,V,P){var k=A.inputTimeScale,H=A.timescale,W=k/H,se=A.isAAC?1024:1152,ue=se*W,re=this._initPTS,q=!A.isAAC&&this.typeSupported.mpeg,Y,ie,te,de,ge,Ae,Me=q?0:8,Re=A.samples,ve=[],me=this.nextAudioPts;if(V|=Re.length&&me&&(P&&Math.abs(N-me/k)<.1||Math.abs(Re[0].pts-me-re)<20*ue),Re.forEach(function(xn){xn.pts=xn.dts=gt(xn.pts-re,N*k)}),Re=Re.filter(function(xn){return xn.pts>=0}),Re.length!==0){if(V||(P?me=Math.max(0,N*k):me=Re[0].pts),A.isAAC)for(var he=this.config.maxAudioFramesDrift,Ie=0,$e=me;Ie<Re.length;){var st=Re[Ie],wt=st.pts,dt=wt-$e;if(dt<=-he*ue)V||Ie>0?(u.logger.warn("Dropping 1 audio frame @ "+Be($e,!0)/1e3+"s due to "+Be(dt,!0)+" ms overlap."),Re.splice(Ie,1)):(u.logger.warn("Audio frame @ "+Be(wt,!0)/1e3+"s overlaps nextAudioPts by "+Be(dt,!0)+" ms."),$e=wt+ue,Ie++);else if(dt>=he*ue&&dt<Xe&&$e){var Ft=Math.round(dt/ue);u.logger.warn("Injecting "+Ft+" audio frames @ "+Be($e,!0)/1e3+"s due to "+Be(dt,!0)+" ms gap.");for(var qt=0;qt<Ft;qt++){var _r=Math.max($e,0);ie=Le.getSilentFrame(A.manifestCodec||A.codec,A.channelCount),ie||(u.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ie=st.unit.subarray()),Re.splice(Ie,0,{unit:ie,pts:_r,dts:_r}),$e+=ue,Ie++}st.pts=st.dts=$e,$e+=ue,Ie++}else st.pts=st.dts=$e,$e+=ue,Ie++}for(var Vt=Re.length,bt=0;Vt--;)bt+=Re[Vt].unit.byteLength;for(var yn=0,En=Re.length;yn<En;yn++){var Mr=Re[yn],sr=Mr.unit,cn=Mr.pts;if(Ae!==void 0&&Y)Y.duration=Math.round((cn-Ae)/W);else{var wn=cn-me,Rn=0;if(V&&A.isAAC&&wn){if(wn>0&&wn<Xe)Rn=Math.round((cn-me)/ue),u.logger.log(Be(wn,!0)+" ms hole between AAC samples detected,filling it"),Rn>0&&(ie=Le.getSilentFrame(A.manifestCodec||A.codec,A.channelCount),ie||(ie=sr.subarray()),bt+=Rn*ie.length);else if(wn<-12){u.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+Be(me,!0)+" ms / "+Be(cn,!0)+" ms / "+Be(-wn,!0)+" ms"),bt-=sr.byteLength;continue}cn=me}if(ge=cn,bt>0){bt+=Me;try{te=new Uint8Array(bt)}catch{this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:bt,reason:"fail allocating audio mdat "+bt});return}if(!q){var Yi=new DataView(te.buffer);Yi.setUint32(0,bt),te.set(Ce.types.mdat,4)}}else return;for(var kn=0;kn<Rn;kn++)ie=Le.getSilentFrame(A.manifestCodec||A.codec,A.channelCount),ie||(u.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),ie=sr.subarray()),te.set(ie,Me),Me+=ie.byteLength,Y={size:ie.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},ve.push(Y)}te.set(sr,Me);var Xi=sr.byteLength;Me+=Xi,Y={size:Xi,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},ve.push(Y),Ae=cn}var ae=0;if(Vt=ve.length,Vt>=2&&(ae=ve[Vt-2].duration,Y.duration=ae),Vt){this.nextAudioPts=me=Ae+W*ae,A.samples=ve,q?de=new Uint8Array:de=Ce.moof(A.sequenceNumber++,ge/W,A),A.samples=[];var br=ge/k,ci=me/k,Qi={data1:de,data2:te,startPTS:br,endPTS:ci,startDTS:br,endDTS:ci,type:"audio",hasAudio:!0,hasVideo:!1,nb:Vt};return this.observer.trigger(s.default.FRAG_PARSING_DATA,Qi),Qi}return null}},Q.remuxEmptyAudio=function(A,N,V,P){var k=A.inputTimeScale,H=A.samplerate?A.samplerate:k,W=k/H,se=this.nextAudioPts,ue=(se!==void 0?se:P.startDTS*k)+this._initDTS,re=P.endDTS*k+this._initDTS,q=1024,Y=W*q,ie=Math.ceil((re-ue)/Y),te=Le.getSilentFrame(A.manifestCodec||A.codec,A.channelCount);if(u.logger.warn("remux empty Audio"),!te){u.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}for(var de=[],ge=0;ge<ie;ge++){var Ae=ue+ge*Y;de.push({unit:te,pts:Ae,dts:Ae})}A.samples=de,this.remuxAudio(A,N,V)},Q.remuxID3=function(A,N){var V=A.samples.length;if(!!V){for(var P=A.inputTimeScale,k=this._initPTS,H=this._initDTS,W=0;W<V;W++){var se=A.samples[W];se.pts=gt(se.pts-k,N*P)/P,se.dts=gt(se.dts-H,N*P)/P}this.observer.trigger(s.default.FRAG_PARSING_METADATA,{samples:A.samples}),A.samples=[]}},Q.remuxText=function(A,N){var V=A.samples.length,P=A.inputTimeScale,k=this._initPTS;if(V){for(var H=0;H<V;H++){var W=A.samples[H];W.pts=gt(W.pts-k,N*P)/P}A.samples.sort(function(se,ue){return se.pts-ue.pts}),this.observer.trigger(s.default.FRAG_PARSING_USERDATA,{samples:A.samples})}A.samples=[]},G}();function gt(G,Q){var $;if(Q===void 0)return G;for(Q<G?$=-8589934592:$=8589934592;Math.abs(G-Q)>4294967296;)G+=$;return G}var vt=Pt,tt=function(){function G($){this.observer=$}var Q=G.prototype;return Q.destroy=function(){},Q.resetTimeStamp=function(){},Q.resetInitSegment=function(){},Q.remux=function(A,N,V,P,k,H,W,se){var ue=this.observer,re="";A&&(re+="audio"),N&&(re+="video"),ue.trigger(s.default.FRAG_PARSING_DATA,{data1:se,startPTS:k,startDTS:k,type:re,hasAudio:!!A,hasVideo:!!N,nb:1,dropped:0}),ue.trigger(s.default.FRAG_PARSED)},G}(),Rt=tt,kt=Object(h.getSelfScope)(),lt;try{lt=kt.performance.now.bind(kt.performance)}catch{u.logger.debug("Unable to use Performance API on this environment"),lt=kt.Date.now}var ir=function(){function G($,A,N,V){this.observer=$,this.typeSupported=A,this.config=N,this.vendor=V}var Q=G.prototype;return Q.destroy=function(){var A=this.demuxer;A&&A.destroy()},Q.push=function(A,N,V,P,k,H,W,se,ue,re,q,Y){var ie=this;if(A.byteLength>0&&N!=null&&N.key!=null&&N.method==="AES-128"){var te=this.decrypter;te==null&&(te=this.decrypter=new l.default(this.observer,this.config));var de=lt();te.decrypt(A,N.key.buffer,N.iv.buffer,function(ge){var Ae=lt();ie.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:de,tdecrypt:Ae}}),ie.pushDecrypted(new Uint8Array(ge),N,new Uint8Array(V),P,k,H,W,se,ue,re,q,Y)})}else this.pushDecrypted(new Uint8Array(A),N,new Uint8Array(V),P,k,H,W,se,ue,re,q,Y)},Q.pushDecrypted=function(A,N,V,P,k,H,W,se,ue,re,q,Y){var ie=this.demuxer,te=this.remuxer;if(!ie||W||se){for(var de=this.observer,ge=this.typeSupported,Ae=this.config,Me=[{demux:Ue,remux:vt},{demux:K.default,remux:Rt},{demux:z,remux:vt},{demux:xe,remux:vt}],Re,ve=0,me=Me.length;ve<me&&(Re=Me[ve],!Re.demux.probe(A));ve++);if(!Re){de.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}(!te||!(te instanceof Re.remux))&&(te=new Re.remux(de,Ae,ge,this.vendor)),(!ie||!(ie instanceof Re.demux))&&(ie=new Re.demux(de,te,Ae,ge),this.probe=Re.demux.probe),this.demuxer=ie,this.remuxer=te}(W||se)&&(ie.resetInitSegment(V,P,k,re),te.resetInitSegment()),W&&(ie.resetTimeStamp(Y),te.resetTimeStamp(Y)),typeof ie.setDecryptData=="function"&&ie.setDecryptData(N),ie.append(A,H,ue,q)},G}();n.default=ir},"./src/demux/demuxer-worker.js":function(r,n,i){i.r(n);var s=i("./src/demux/demuxer-inline.js"),a=i("./src/events.js"),l=i("./src/utils/logger.js"),d=i("./node_modules/eventemitter3/index.js"),u=function(w){var g=new d.EventEmitter;g.trigger=function(R){for(var O=arguments.length,T=new Array(O>1?O-1:0),I=1;I<O;I++)T[I-1]=arguments[I];g.emit.apply(g,[R,R].concat(T))},g.off=function(R){for(var O=arguments.length,T=new Array(O>1?O-1:0),I=1;I<O;I++)T[I-1]=arguments[I];g.removeListener.apply(g,[R].concat(T))};var S=function(R,O){w.postMessage({event:R,data:O})};w.addEventListener("message",function(C){var R=C.data;switch(R.cmd){case"init":var O=JSON.parse(R.config);w.demuxer=new s.default(g,R.typeSupported,O,R.vendor),Object(l.enableLogs)(O.debug),S("init",null);break;case"demux":w.demuxer.push(R.data,R.decryptdata,R.initSegment,R.audioCodec,R.videoCodec,R.timeOffset,R.discontinuity,R.trackSwitch,R.contiguous,R.duration,R.accurateTimeOffset,R.defaultInitPTS);break}}),g.on(a.default.FRAG_DECRYPTED,S),g.on(a.default.FRAG_PARSING_INIT_SEGMENT,S),g.on(a.default.FRAG_PARSED,S),g.on(a.default.ERROR,S),g.on(a.default.FRAG_PARSING_METADATA,S),g.on(a.default.FRAG_PARSING_USERDATA,S),g.on(a.default.INIT_PTS_FOUND,S),g.on(a.default.FRAG_PARSING_DATA,function(C,R){var O=[],T={event:C,data:R};R.data1&&(T.data1=R.data1.buffer,O.push(R.data1.buffer),delete R.data1),R.data2&&(T.data2=R.data2.buffer,O.push(R.data2.buffer),delete R.data2),w.postMessage(T,O)})};n.default=u},"./src/demux/id3.js":function(r,n,i){i.r(n),i.d(n,"utf8ArrayToStr",function(){return u});var s=i("./src/utils/get-self-scope.js"),a=function(){function h(){}return h.isHeader=function(g,S){return S+10<=g.length&&g[S]===73&&g[S+1]===68&&g[S+2]===51&&g[S+3]<255&&g[S+4]<255&&g[S+6]<128&&g[S+7]<128&&g[S+8]<128&&g[S+9]<128},h.isFooter=function(g,S){return S+10<=g.length&&g[S]===51&&g[S+1]===68&&g[S+2]===73&&g[S+3]<255&&g[S+4]<255&&g[S+6]<128&&g[S+7]<128&&g[S+8]<128&&g[S+9]<128},h.getID3Data=function(g,S){for(var C=S,R=0;h.isHeader(g,S);){R+=10;var O=h._readSize(g,S+6);R+=O,h.isFooter(g,S+10)&&(R+=10),S+=R}if(R>0)return g.subarray(C,C+R)},h._readSize=function(g,S){var C=0;return C=(g[S]&127)<<21,C|=(g[S+1]&127)<<14,C|=(g[S+2]&127)<<7,C|=g[S+3]&127,C},h.getTimeStamp=function(g){for(var S=h.getID3Frames(g),C=0;C<S.length;C++){var R=S[C];if(h.isTimeStampFrame(R))return h._readTimeStamp(R)}},h.isTimeStampFrame=function(g){return g&&g.key==="PRIV"&&g.info==="com.apple.streaming.transportStreamTimestamp"},h._getFrameData=function(g){var S=String.fromCharCode(g[0],g[1],g[2],g[3]),C=h._readSize(g,4),R=10;return{type:S,size:C,data:g.subarray(R,R+C)}},h.getID3Frames=function(g){for(var S=0,C=[];h.isHeader(g,S);){var R=h._readSize(g,S+6);S+=10;for(var O=S+R;S+8<O;){var T=h._getFrameData(g.subarray(S)),I=h._decodeFrame(T);I&&C.push(I),S+=T.size+10}h.isFooter(g,S)&&(S+=10)}return C},h._decodeFrame=function(g){return g.type==="PRIV"?h._decodePrivFrame(g):g.type[0]==="W"?h._decodeURLFrame(g):h._decodeTextFrame(g)},h._readTimeStamp=function(g){if(g.data.byteLength===8){var S=new Uint8Array(g.data),C=S[3]&1,R=(S[4]<<23)+(S[5]<<15)+(S[6]<<7)+S[7];return R/=45,C&&(R+=4772185884e-2),Math.round(R)}},h._decodePrivFrame=function(g){if(!(g.size<2)){var S=h._utf8ArrayToStr(g.data,!0),C=new Uint8Array(g.data.subarray(S.length+1));return{key:g.type,info:S,data:C.buffer}}},h._decodeTextFrame=function(g){if(!(g.size<2))if(g.type==="TXXX"){var S=1,C=h._utf8ArrayToStr(g.data.subarray(S),!0);S+=C.length+1;var R=h._utf8ArrayToStr(g.data.subarray(S));return{key:g.type,info:C,data:R}}else{var O=h._utf8ArrayToStr(g.data.subarray(1));return{key:g.type,data:O}}},h._decodeURLFrame=function(g){if(g.type==="WXXX"){if(g.size<2)return;var S=1,C=h._utf8ArrayToStr(g.data.subarray(S),!0);S+=C.length+1;var R=h._utf8ArrayToStr(g.data.subarray(S));return{key:g.type,info:C,data:R}}else{var O=h._utf8ArrayToStr(g.data);return{key:g.type,data:O}}},h._utf8ArrayToStr=function(g,S){S===void 0&&(S=!1);var C=d();if(C){var R=C.decode(g);if(S){var O=R.indexOf("\0");return O!==-1?R.substring(0,O):R}return R.replace(/\0/g,"")}for(var T=g.length,I,D,M,j="",B=0;B<T;){if(I=g[B++],I===0&&S)return j;if(I===0||I===3)continue;switch(I>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:j+=String.fromCharCode(I);break;case 12:case 13:D=g[B++],j+=String.fromCharCode((I&31)<<6|D&63);break;case 14:D=g[B++],M=g[B++],j+=String.fromCharCode((I&15)<<12|(D&63)<<6|(M&63)<<0);break}}return j},h}(),l;function d(){var h=Object(s.getSelfScope)();return!l&&typeof h.TextDecoder!="undefined"&&(l=new h.TextDecoder("utf-8")),l}var u=a._utf8ArrayToStr;n.default=a},"./src/demux/mp4demuxer.js":function(r,n,i){i.r(n);var s=i("./src/utils/logger.js"),a=i("./src/events.js"),l=Math.pow(2,32)-1,d=function(){function u(w,g){this.observer=w,this.remuxer=g}var h=u.prototype;return h.resetTimeStamp=function(g){this.initPTS=g},h.resetInitSegment=function(g,S,C,R){if(g&&g.byteLength){var O=this.initData=u.parseInitSegment(g);S==null&&(S="mp4a.40.5"),C==null&&(C="avc1.42e01e");var T={};O.audio&&O.video?T.audiovideo={container:"video/mp4",codec:S+","+C,initSegment:R?g:null}:(O.audio&&(T.audio={container:"audio/mp4",codec:S,initSegment:R?g:null}),O.video&&(T.video={container:"video/mp4",codec:C,initSegment:R?g:null})),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:T})}else S&&(this.audioCodec=S),C&&(this.videoCodec=C)},u.probe=function(g){return u.findBox({data:g,start:0,end:Math.min(g.length,16384)},["moof"]).length>0},u.bin2str=function(g){return String.fromCharCode.apply(null,g)},u.readUint16=function(g,S){g.data&&(S+=g.start,g=g.data);var C=g[S]<<8|g[S+1];return C<0?65536+C:C},u.readUint32=function(g,S){g.data&&(S+=g.start,g=g.data);var C=g[S]<<24|g[S+1]<<16|g[S+2]<<8|g[S+3];return C<0?4294967296+C:C},u.writeUint32=function(g,S,C){g.data&&(S+=g.start,g=g.data),g[S]=C>>24,g[S+1]=C>>16&255,g[S+2]=C>>8&255,g[S+3]=C&255},u.findBox=function(g,S){var C=[],R,O,T,I,D,M,j;if(g.data?(M=g.start,I=g.end,g=g.data):(M=0,I=g.byteLength),!S.length)return null;for(R=M;R<I;)O=u.readUint32(g,R),T=u.bin2str(g.subarray(R+4,R+8)),j=O>1?R+O:I,T===S[0]&&(S.length===1?C.push({data:g,start:R+8,end:j}):(D=u.findBox({data:g,start:R+8,end:j},S.slice(1)),D.length&&(C=C.concat(D)))),R=j;return C},u.parseSegmentIndex=function(g){var S=u.findBox(g,["moov"])[0],C=S?S.end:null,R=0,O=u.findBox(g,["sidx"]),T;if(!O||!O[0])return null;T=[],O=O[0];var I=O.data[0];R=I===0?8:16;var D=u.readUint32(O,R);R+=4;var M=0,j=0;I===0?R+=8:R+=16,R+=2;var B=O.end+j,z=u.readUint16(O,R);R+=2;for(var K=0;K<z;K++){var ee=R,Z=u.readUint32(O,ee);ee+=4;var ce=Z&2147483647,le=(Z&2147483648)>>>31;if(le===1){console.warn("SIDX has hierarchical references (not supported)");return}var Te=u.readUint32(O,ee);ee+=4,T.push({referenceSize:ce,subsegmentDuration:Te,info:{duration:Te/D,start:B,end:B+ce-1}}),B+=ce,ee+=4,R=ee}return{earliestPresentationTime:M,timescale:D,version:I,referencesCount:z,references:T,moovEndOffset:C}},u.parseInitSegment=function(g){var S=[],C=u.findBox(g,["moov","trak"]);return C.forEach(function(R){var O=u.findBox(R,["tkhd"])[0];if(O){var T=O.data[O.start],I=T===0?12:20,D=u.readUint32(O,I),M=u.findBox(R,["mdia","mdhd"])[0];if(M){T=M.data[M.start],I=T===0?12:20;var j=u.readUint32(M,I),B=u.findBox(R,["mdia","hdlr"])[0];if(B){var z=u.bin2str(B.data.subarray(B.start+8,B.start+12)),K={soun:"audio",vide:"video"}[z];if(K){var ee=u.findBox(R,["mdia","minf","stbl","stsd"]);if(ee.length){ee=ee[0];var Z=u.bin2str(ee.data.subarray(ee.start+12,ee.start+16));s.logger.log("MP4Demuxer:"+K+":"+Z+" found")}S[D]={timescale:j,type:K},S[K]={timescale:j,id:D}}}}}}),S},u.getStartDTS=function(g,S){var C,R,O;return C=u.findBox(S,["moof","traf"]),R=[].concat.apply([],C.map(function(T){return u.findBox(T,["tfhd"]).map(function(I){var D,M,j;return D=u.readUint32(I,4),M=g[D].timescale||9e4,j=u.findBox(T,["tfdt"]).map(function(B){var z,K;return z=B.data[B.start],K=u.readUint32(B,4),z===1&&(K*=Math.pow(2,32),K+=u.readUint32(B,8)),K})[0],j/M})})),O=Math.min.apply(null,R),isFinite(O)?O:0},u.offsetStartDTS=function(g,S,C){u.findBox(S,["moof","traf"]).map(function(R){return u.findBox(R,["tfhd"]).map(function(O){var T=u.readUint32(O,4),I=g[T].timescale||9e4;u.findBox(R,["tfdt"]).map(function(D){var M=D.data[D.start],j=u.readUint32(D,4);if(M===0)u.writeUint32(D,4,j-C*I);else{j*=Math.pow(2,32),j+=u.readUint32(D,8),j-=C*I,j=Math.max(j,0);var B=Math.floor(j/(l+1)),z=Math.floor(j%(l+1));u.writeUint32(D,4,B),u.writeUint32(D,8,z)}})})})},h.append=function(g,S,C,R){var O=this.initData;O||(this.resetInitSegment(g,this.audioCodec,this.videoCodec,!1),O=this.initData);var T,I=this.initPTS;if(I===void 0){var D=u.getStartDTS(O,g);this.initPTS=I=D-S,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:I})}u.offsetStartDTS(O,g,I),T=u.getStartDTS(O,g),this.remuxer.remux(O.audio,O.video,null,null,T,C,R,g)},h.destroy=function(){},u}();n.default=d},"./src/errors.ts":function(r,n,i){i.r(n),i.d(n,"ErrorTypes",function(){return s}),i.d(n,"ErrorDetails",function(){return a});var s;(function(l){l.NETWORK_ERROR="networkError",l.MEDIA_ERROR="mediaError",l.KEY_SYSTEM_ERROR="keySystemError",l.MUX_ERROR="muxError",l.OTHER_ERROR="otherError"})(s||(s={}));var a;(function(l){l.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",l.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",l.KEY_SYSTEM_NO_SESSION="keySystemNoSession",l.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",l.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",l.MANIFEST_LOAD_ERROR="manifestLoadError",l.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",l.MANIFEST_PARSING_ERROR="manifestParsingError",l.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",l.LEVEL_EMPTY_ERROR="levelEmptyError",l.LEVEL_LOAD_ERROR="levelLoadError",l.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",l.LEVEL_SWITCH_ERROR="levelSwitchError",l.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",l.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",l.FRAG_LOAD_ERROR="fragLoadError",l.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",l.FRAG_DECRYPT_ERROR="fragDecryptError",l.FRAG_PARSING_ERROR="fragParsingError",l.REMUX_ALLOC_ERROR="remuxAllocError",l.KEY_LOAD_ERROR="keyLoadError",l.KEY_LOAD_TIMEOUT="keyLoadTimeOut",l.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",l.BUFFER_APPEND_ERROR="bufferAppendError",l.BUFFER_APPENDING_ERROR="bufferAppendingError",l.BUFFER_STALLED_ERROR="bufferStalledError",l.BUFFER_FULL_ERROR="bufferFullError",l.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",l.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",l.INTERNAL_EXCEPTION="internalException"})(a||(a={}))},"./src/events.js":function(r,n,i){i.r(n);var s={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};n.default=s},"./src/hls.ts":function(r,n,i){i.r(n),i.d(n,"default",function(){return p0});var s={};i.r(s),i.d(s,"newCue",function(){return sC});var a=i("./node_modules/url-toolkit/src/url-toolkit.js"),l=i("./src/errors.ts"),d=i("./src/polyfills/number.js"),u=i("./src/events.js"),h=i("./src/utils/logger.js"),w={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},g=function(){function x(p){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=p,this.onEvent=this.onEvent.bind(this);for(var f=arguments.length,o=new Array(f>1?f-1:0),c=1;c<f;c++)o[c-1]=arguments[c];this.handledEvents=o,this.useGenericHandler=!0,this.registerListeners()}var v=x.prototype;return v.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},v.onHandlerDestroying=function(){},v.onHandlerDestroyed=function(){},v.isEventHandler=function(){return typeof this.handledEvents=="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},v.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(f){if(w[f])throw new Error("Forbidden event-name: "+f);this.hls.on(f,this.onEvent)},this)},v.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(f){this.hls.off(f,this.onEvent)},this)},v.onEvent=function(f,o){this.onEventGeneric(f,o)},v.onEventGeneric=function(f,o){var c=function(y,_){var b="on"+y.replace("hls","");if(typeof this[b]!="function")throw new Error("Event "+y+" has no generic handler in this "+this.constructor.name+" class (tried "+b+")");return this[b].bind(this,_)};try{c.call(this,f,o).call()}catch(m){h.logger.error("An internal error happened while handling event "+f+'. Error message: "'+m.message+'". Here is a stacktrace:',m),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:f,err:m})}},x}(),S=g,C;(function(x){x.MANIFEST="manifest",x.LEVEL="level",x.AUDIO_TRACK="audioTrack",x.SUBTITLE_TRACK="subtitleTrack"})(C||(C={}));var R;(function(x){x.MAIN="main",x.AUDIO="audio",x.SUBTITLE="subtitle"})(R||(R={}));var O=i("./src/demux/mp4demuxer.js");function T(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function I(x,v,p){return v&&T(x.prototype,v),p&&T(x,p),x}var D=function(){function x(v,p){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=v,this.reluri=p}return I(x,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(a.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),x}();function M(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function j(x,v,p){return v&&M(x.prototype,v),p&&M(x,p),x}var B;(function(x){x.AUDIO="audio",x.VIDEO="video"})(B||(B={}));var z=function(){function x(){var p;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(p={},p[B.AUDIO]=!1,p[B.VIDEO]=!1,p),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var v=x.prototype;return v.setByteRange=function(f,o){var c=f.split("@",2),m=[];c.length===1?m[0]=o?o.byteRangeEndOffset:0:m[0]=parseInt(c[1]),m[1]=parseInt(c[0])+m[0],this._byteRange=m},v.addElementaryStream=function(f){this._elementaryStreams[f]=!0},v.hasElementaryStream=function(f){return this._elementaryStreams[f]===!0},v.createInitializationVector=function(f){for(var o=new Uint8Array(16),c=12;c<16;c++)o[c]=f>>8*(15-c)&255;return o},v.setDecryptDataFromLevelKey=function(f,o){var c=f;return(f==null?void 0:f.method)&&f.uri&&!f.iv&&(c=new D(f.baseuri,f.reluri),c.method=f.method,c.iv=this.createInitializationVector(o)),c},j(x,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(f){this._url=f}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var f=this.sn;typeof f!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&h.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),f=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,f)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(d.isFiniteNumber)(this.programDateTime))return null;var f=Object(d.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+f*1e3}},{key:"encrypted",get:function(){return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null)}}]),x}();function K(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function ee(x,v,p){return v&&K(x.prototype,v),p&&K(x,p),x}var Z=function(){function x(v){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=v,this.version=null}return ee(x,[{key:"hasProgramDateTime",get:function(){return!!(this.fragments[0]&&Object(d.isFiniteNumber)(this.fragments[0].programDateTime))}}]),x}(),ce=/^(\d+)x(\d+)$/,le=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Te=function(){function x(p){typeof p=="string"&&(p=x.parseAttrList(p));for(var f in p)p.hasOwnProperty(f)&&(this[f]=p[f])}var v=x.prototype;return v.decimalInteger=function(f){var o=parseInt(this[f],10);return o>Number.MAX_SAFE_INTEGER?1/0:o},v.hexadecimalInteger=function(f){if(this[f]){var o=(this[f]||"0x").slice(2);o=(o.length&1?"0":"")+o;for(var c=new Uint8Array(o.length/2),m=0;m<o.length/2;m++)c[m]=parseInt(o.slice(m*2,m*2+2),16);return c}else return null},v.hexadecimalIntegerAsNumber=function(f){var o=parseInt(this[f],16);return o>Number.MAX_SAFE_INTEGER?1/0:o},v.decimalFloatingPoint=function(f){return parseFloat(this[f])},v.enumeratedString=function(f){return this[f]},v.decimalResolution=function(f){var o=ce.exec(this[f]);if(o!==null)return{width:parseInt(o[1],10),height:parseInt(o[2],10)}},x.parseAttrList=function(f){var o,c={};for(le.lastIndex=0;(o=le.exec(f))!==null;){var m=o[2],y='"';m.indexOf(y)===0&&m.lastIndexOf(y)===m.length-1&&(m=m.slice(1,-1)),c[o[1]]=m}return c},x}(),_e=Te,We={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function Ne(x,v){var p=We[v];return!!p&&p[x.slice(0,4)]===!0}function Ue(x,v){return MediaSource.isTypeSupported((v||"video")+'/mp4;codecs="'+x+'"')}var oe=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,xe=/#EXT-X-MEDIA:(.*)/g,fe=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),Le=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ye=/\.(mp4|m4s|m4v|m4a)$/i,Ze=function(){function x(){}return x.findGroup=function(p,f){for(var o=0;o<p.length;o++){var c=p[o];if(c.id===f)return c}},x.convertAVC1ToAVCOTI=function(p){var f=p.split("."),o;return f.length>2?(o=f.shift()+".",o+=parseInt(f.shift()).toString(16),o+=("000"+parseInt(f.shift()).toString(16)).substr(-4)):o=p,o},x.resolve=function(p,f){return a.buildAbsoluteURL(f,p,{alwaysNormalize:!0})},x.parseMasterPlaylist=function(p,f){var o=[],c={},m=!1;oe.lastIndex=0;function y(X,ne){["video","audio"].forEach(function(pe){var Se=X.filter(function(De){return Ne(De,pe)});if(Se.length){var Pe=Se.filter(function(De){return De.lastIndexOf("avc1",0)===0||De.lastIndexOf("mp4a",0)===0});ne[pe+"Codec"]=Pe.length>0?Pe[0]:Se[0],X=X.filter(function(De){return Se.indexOf(De)===-1})}}),ne.unknownCodecs=X}for(var _;(_=oe.exec(p))!=null;)if(_[1]){var b={},L=b.attrs=new _e(_[1]);b.url=x.resolve(_[2],f);var F=L.decimalResolution("RESOLUTION");F&&(b.width=F.width,b.height=F.height),b.bitrate=L.decimalInteger("AVERAGE-BANDWIDTH")||L.decimalInteger("BANDWIDTH"),b.name=L.NAME,y([].concat((L.CODECS||"").split(/[ ,]+/)),b),b.videoCodec&&b.videoCodec.indexOf("avc1")!==-1&&(b.videoCodec=x.convertAVC1ToAVCOTI(b.videoCodec)),o.push(b)}else if(_[3]){var U=new _e(_[3]);U["DATA-ID"]&&(m=!0,c[U["DATA-ID"]]=U)}return{levels:o,sessionData:m?c:null}},x.parseMasterPlaylistMedia=function(p,f,o,c){c===void 0&&(c=[]);var m,y=[],_=0;for(xe.lastIndex=0;(m=xe.exec(p))!==null;){var b=new _e(m[1]);if(b.TYPE===o){var L={attrs:b,id:_++,groupId:b["GROUP-ID"],instreamId:b["INSTREAM-ID"],name:b.NAME||b.LANGUAGE,type:o,default:b.DEFAULT==="YES",autoselect:b.AUTOSELECT==="YES",forced:b.FORCED==="YES",lang:b.LANGUAGE};if(b.URI&&(L.url=x.resolve(b.URI,f)),c.length){var F=x.findGroup(c,L.groupId);L.audioCodec=F?F.codec:c[0].codec}y.push(L)}}return y},x.parseLevelPlaylist=function(p,f,o,c,m){var y=0,_=0,b=new Z(f),L=0,F=null,U=new z,X,ne,pe,Se=null;for(fe.lastIndex=0;(X=fe.exec(p))!==null;){var Pe=X[1];if(Pe){U.duration=parseFloat(Pe);var De=(" "+X[2]).slice(1);U.title=De||null,U.tagList.push(De?["INF",Pe,De]:["INF",Pe])}else if(X[3]){if(Object(d.isFiniteNumber)(U.duration)){var Ge=y++;U.type=c,U.start=_,pe&&(U.levelkey=pe),U.sn=Ge,U.level=o,U.cc=L,U.urlId=m,U.baseurl=f,U.relurl=(" "+X[3]).slice(1),it(U,F),b.fragments.push(U),F=U,_+=U.duration,U=new z}}else if(X[4]){var qe=(" "+X[4]).slice(1);F?U.setByteRange(qe,F):U.setByteRange(qe)}else if(X[5])U.rawProgramDateTime=(" "+X[5]).slice(1),U.tagList.push(["PROGRAM-DATE-TIME",U.rawProgramDateTime]),Se===null&&(Se=b.fragments.length);else{if(X=X[0].match(Le),!X){h.logger.warn("No matches on slow regex match for level playlist!");continue}for(ne=1;ne<X.length&&typeof X[ne]=="undefined";ne++);var ut=(" "+X[ne+1]).slice(1),Ut=(" "+X[ne+2]).slice(1);switch(X[ne]){case"#":U.tagList.push(Ut?[ut,Ut]:[ut]);break;case"PLAYLIST-TYPE":b.type=ut.toUpperCase();break;case"MEDIA-SEQUENCE":y=b.startSN=parseInt(ut);break;case"TARGETDURATION":b.targetduration=parseFloat(ut);break;case"VERSION":b.version=parseInt(ut);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":L++,U.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":L=parseInt(ut);break;case"KEY":{var Yr=ut,ar=new _e(Yr),zn=ar.enumeratedString("METHOD"),Ve=ar.URI,rt=ar.hexadecimalInteger("IV"),jt=ar.KEYFORMAT||"identity";if(jt==="com.apple.streamingkeydelivery"){h.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}zn&&(pe=new D(f,Ve),Ve&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(zn)>=0&&(pe.method=zn,pe.key=null,pe.iv=rt));break}case"START":{var zs=new _e(ut),Ks=zs.decimalFloatingPoint("TIME-OFFSET");Object(d.isFiniteNumber)(Ks)&&(b.startTimeOffset=Ks);break}case"MAP":{var lo=new _e(ut);U.relurl=lo.URI,lo.BYTERANGE&&U.setByteRange(lo.BYTERANGE),U.baseurl=f,U.level=o,U.type=c,U.sn="initSegment",b.initSegment=U,U=new z,U.rawProgramDateTime=b.initSegment.rawProgramDateTime;break}default:h.logger.warn("line parsed but not handled: "+X);break}}}return U=F,U&&!U.relurl&&(b.fragments.pop(),_-=U.duration),b.totalduration=_,b.averagetargetduration=_/b.fragments.length,b.endSN=y-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=L,!b.initSegment&&b.fragments.length&&b.fragments.every(function(mu){return ye.test(mu.relurl)})&&(h.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),U=new z,U.relurl=b.fragments[0].relurl,U.baseurl=f,U.level=o,U.type=c,U.sn="initSegment",b.initSegment=U,b.needSidxRanges=!0),Se&&Ce(b.fragments,Se),b},x}();function Ce(x,v){for(var p=x[v],f=v-1;f>=0;f--){var o=x[f];o.programDateTime=p.programDateTime-o.duration*1e3,p=o}}function it(x,v){x.rawProgramDateTime?x.programDateTime=Date.parse(x.rawProgramDateTime):v!=null&&v.programDateTime&&(x.programDateTime=v.endProgramDateTime),Object(d.isFiniteNumber)(x.programDateTime)||(x.programDateTime=null,x.rawProgramDateTime=null)}function ft(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var Be=window,ot=Be.performance,Xe=function(x){ft(v,x);function v(f){var o;return o=x.call(this,f,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this,o.loaders={},o}v.canHaveQualityLevels=function(o){return o!==C.AUDIO_TRACK&&o!==C.SUBTITLE_TRACK},v.mapContextToLevelType=function(o){var c=o.type;switch(c){case C.AUDIO_TRACK:return R.AUDIO;case C.SUBTITLE_TRACK:return R.SUBTITLE;default:return R.MAIN}},v.getResponseUrl=function(o,c){var m=o.url;return(m===void 0||m.indexOf("data:")===0)&&(m=c.url),m};var p=v.prototype;return p.createInternalLoader=function(o){var c=this.hls.config,m=c.pLoader,y=c.loader,_=m||y,b=new _(c);return o.loader=b,this.loaders[o.type]=b,b},p.getInternalLoader=function(o){return this.loaders[o.type]},p.resetInternalLoader=function(o){this.loaders[o]&&delete this.loaders[o]},p.destroyInternalLoaders=function(){for(var o in this.loaders){var c=this.loaders[o];c&&c.destroy(),this.resetInternalLoader(o)}},p.destroy=function(){this.destroyInternalLoaders(),x.prototype.destroy.call(this)},p.onManifestLoading=function(o){this.load({url:o.url,type:C.MANIFEST,level:0,id:null,responseType:"text"})},p.onLevelLoading=function(o){this.load({url:o.url,type:C.LEVEL,level:o.level,id:o.id,responseType:"text"})},p.onAudioTrackLoading=function(o){this.load({url:o.url,type:C.AUDIO_TRACK,level:null,id:o.id,responseType:"text"})},p.onSubtitleTrackLoading=function(o){this.load({url:o.url,type:C.SUBTITLE_TRACK,level:null,id:o.id,responseType:"text"})},p.load=function(o){var c=this.hls.config;h.logger.debug("Loading playlist of type "+o.type+", level: "+o.level+", id: "+o.id);var m=this.getInternalLoader(o);if(m){var y=m.context;if(y&&y.url===o.url)return h.logger.trace("playlist request ongoing"),!1;h.logger.warn("aborting previous loader for type: "+o.type),m.abort()}var _,b,L,F;switch(o.type){case C.MANIFEST:_=c.manifestLoadingMaxRetry,b=c.manifestLoadingTimeOut,L=c.manifestLoadingRetryDelay,F=c.manifestLoadingMaxRetryTimeout;break;case C.LEVEL:_=0,F=0,L=0,b=c.levelLoadingTimeOut;break;default:_=c.levelLoadingMaxRetry,b=c.levelLoadingTimeOut,L=c.levelLoadingRetryDelay,F=c.levelLoadingMaxRetryTimeout;break}m=this.createInternalLoader(o);var U={timeout:b,maxRetry:_,retryDelay:L,maxRetryDelay:F},X={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return h.logger.debug("Calling internal loader delegate for URL: "+o.url),m.load(o,U,X),!0},p.loadsuccess=function(o,c,m,y){if(y===void 0&&(y=null),m.isSidxRequest){this._handleSidxRequest(o,m),this._handlePlaylistLoaded(o,c,m,y);return}if(this.resetInternalLoader(m.type),typeof o.data!="string")throw new Error('expected responseType of "text" for PlaylistLoader');var _=o.data;if(c.tload=ot.now(),_.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(o,m,"no EXTM3U delimiter",y);return}_.indexOf("#EXTINF:")>0||_.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(o,c,m,y):this._handleMasterPlaylist(o,c,m,y)},p.loaderror=function(o,c,m){m===void 0&&(m=null),this._handleNetworkError(c,m,!1,o)},p.loadtimeout=function(o,c,m){m===void 0&&(m=null),this._handleNetworkError(c,m,!0)},p._handleMasterPlaylist=function(o,c,m,y){var _=this.hls,b=o.data,L=v.getResponseUrl(o,m),F=Ze.parseMasterPlaylist(b,L),U=F.levels,X=F.sessionData;if(!U.length){this._handleManifestParsingError(o,m,"no level found in manifest",y);return}var ne=U.map(function(Ge){return{id:Ge.attrs.AUDIO,codec:Ge.audioCodec}}),pe=Ze.parseMasterPlaylistMedia(b,L,"AUDIO",ne),Se=Ze.parseMasterPlaylistMedia(b,L,"SUBTITLES"),Pe=Ze.parseMasterPlaylistMedia(b,L,"CLOSED-CAPTIONS");if(pe.length){var De=!1;pe.forEach(function(Ge){Ge.url||(De=!0)}),De===!1&&U[0].audioCodec&&!U[0].attrs.AUDIO&&(h.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),pe.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}_.trigger(u.default.MANIFEST_LOADED,{levels:U,audioTracks:pe,subtitles:Se,captions:Pe,url:L,stats:c,networkDetails:y,sessionData:X})},p._handleTrackOrLevelPlaylist=function(o,c,m,y){var _=this.hls,b=m.id,L=m.level,F=m.type,U=v.getResponseUrl(o,m),X=Object(d.isFiniteNumber)(b)?b:0,ne=Object(d.isFiniteNumber)(L)?L:X,pe=v.mapContextToLevelType(m),Se=Ze.parseLevelPlaylist(o.data,U,ne,pe,X);if(Se.tload=c.tload,!Se.fragments.length){_.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:U,reason:"no fragments found in level",level:typeof m.level=="number"?m.level:void 0});return}if(F===C.MANIFEST){var Pe={url:U,details:Se};_.trigger(u.default.MANIFEST_LOADED,{levels:[Pe],audioTracks:[],url:U,stats:c,networkDetails:y,sessionData:null})}if(c.tparsed=ot.now(),Se.needSidxRanges){var De=Se.initSegment.url;this.load({url:De,isSidxRequest:!0,type:F,level:L,levelDetails:Se,id:b,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}m.levelDetails=Se,this._handlePlaylistLoaded(o,c,m,y)},p._handleSidxRequest=function(o,c){if(typeof o.data=="string")throw new Error("sidx request must be made with responseType of array buffer");var m=O.default.parseSegmentIndex(new Uint8Array(o.data));if(!!m){var y=m.references,_=c.levelDetails;y.forEach(function(b,L){var F=b.info;if(!!_){var U=_.fragments[L];U.byteRange.length===0&&U.setByteRange(String(1+F.end-F.start)+"@"+String(F.start))}}),_&&_.initSegment.setByteRange(String(m.moovEndOffset)+"@0")}},p._handleManifestParsingError=function(o,c,m,y){this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o.url,reason:m,networkDetails:y})},p._handleNetworkError=function(o,c,m,y){m===void 0&&(m=!1),y===void 0&&(y=null),h.logger.info("A network error occured while loading a "+o.type+"-type playlist");var _,b,L=this.getInternalLoader(o);switch(o.type){case C.MANIFEST:_=m?l.ErrorDetails.MANIFEST_LOAD_TIMEOUT:l.ErrorDetails.MANIFEST_LOAD_ERROR,b=!0;break;case C.LEVEL:_=m?l.ErrorDetails.LEVEL_LOAD_TIMEOUT:l.ErrorDetails.LEVEL_LOAD_ERROR,b=!1;break;case C.AUDIO_TRACK:_=m?l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,b=!1;break;default:b=!1}L&&(L.abort(),this.resetInternalLoader(o.type));var F={type:l.ErrorTypes.NETWORK_ERROR,details:_,fatal:b,url:o.url,loader:L,context:o,networkDetails:c};y&&(F.response=y),this.hls.trigger(u.default.ERROR,F)},p._handlePlaylistLoaded=function(o,c,m,y){var _=m.type,b=m.level,L=m.id,F=m.levelDetails;if(!F||!F.targetduration){this._handleManifestParsingError(o,m,"invalid target duration",y);return}var U=v.canHaveQualityLevels(m.type);if(U)this.hls.trigger(u.default.LEVEL_LOADED,{details:F,level:b||0,id:L||0,stats:c,networkDetails:y});else switch(_){case C.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:F,id:L,stats:c,networkDetails:y});break;case C.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:F,id:L,stats:c,networkDetails:y});break}},v}(S),Ke=Xe;function mt(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var Pt=function(x){mt(v,x);function v(f){var o;return o=x.call(this,f,u.default.FRAG_LOADING)||this,o.loaders={},o}var p=v.prototype;return p.destroy=function(){var o=this.loaders;for(var c in o){var m=o[c];m&&m.destroy()}this.loaders={},x.prototype.destroy.call(this)},p.onFragLoading=function(o){var c=o.frag,m=c.type,y=this.loaders,_=this.hls.config,b=_.fLoader,L=_.loader;c.loaded=0;var F=y[m];F&&(h.logger.warn("abort previous fragment loader for type: "+m),F.abort()),F=y[m]=c.loader=_.fLoader?new b(_):new L(_);var U,X,ne;U={url:c.url,frag:c,responseType:"arraybuffer",progressData:!1};var pe=c.byteRangeStartOffset,Se=c.byteRangeEndOffset;Object(d.isFiniteNumber)(pe)&&Object(d.isFiniteNumber)(Se)&&(U.rangeStart=pe,U.rangeEnd=Se),X={timeout:_.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:_.fragLoadingMaxRetryTimeout},ne={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},F.load(U,X,ne)},p.loadsuccess=function(o,c,m,y){y===void 0&&(y=null);var _=o.data,b=m.frag;b.loader=void 0,this.loaders[b.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:_,frag:b,stats:c,networkDetails:y})},p.loaderror=function(o,c,m){m===void 0&&(m=null);var y=c.frag,_=y.loader;_&&_.abort(),this.loaders[y.type]=void 0,this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:c.frag,response:o,networkDetails:m})},p.loadtimeout=function(o,c,m){m===void 0&&(m=null);var y=c.frag,_=y.loader;_&&_.abort(),this.loaders[y.type]=void 0,this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:c.frag,networkDetails:m})},p.loadprogress=function(o,c,m,y){y===void 0&&(y=null);var _=c.frag;_.loaded=o.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:_,stats:o,networkDetails:y})},v}(S),gt=Pt;function vt(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var tt=function(x){vt(v,x);function v(f){var o;return o=x.call(this,f,u.default.KEY_LOADING)||this,o.loaders={},o.decryptkey=null,o.decrypturl=null,o}var p=v.prototype;return p.destroy=function(){for(var o in this.loaders){var c=this.loaders[o];c&&c.destroy()}this.loaders={},x.prototype.destroy.call(this)},p.onKeyLoading=function(o){var c=o.frag,m=c.type,y=this.loaders[m];if(!c.decryptdata){h.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var _=c.decryptdata.uri;if(_!==this.decrypturl||this.decryptkey===null){var b=this.hls.config;if(y&&(h.logger.warn("abort previous key loader for type:"+m),y.abort()),!_){h.logger.warn("key uri is falsy");return}c.loader=this.loaders[m]=new b.loader(b),this.decrypturl=_,this.decryptkey=null;var L={url:_,frag:c,responseType:"arraybuffer"},F={timeout:b.fragLoadingTimeOut,maxRetry:0,retryDelay:b.fragLoadingRetryDelay,maxRetryDelay:b.fragLoadingMaxRetryTimeout},U={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.loader.load(L,F,U)}else this.decryptkey&&(c.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:c}))},p.loadsuccess=function(o,c,m){var y=m.frag;if(!y.decryptdata){h.logger.error("after key load, decryptdata unset");return}this.decryptkey=y.decryptdata.key=new Uint8Array(o.data),y.loader=void 0,delete this.loaders[y.type],this.hls.trigger(u.default.KEY_LOADED,{frag:y})},p.loaderror=function(o,c){var m=c.frag,y=m.loader;y&&y.abort(),delete this.loaders[m.type],this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:m,response:o})},p.loadtimeout=function(o,c){var m=c.frag,y=m.loader;y&&y.abort(),delete this.loaders[m.type],this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:m})},v}(S),Rt=tt;function kt(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var lt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},ir=function(x){kt(v,x);function v(f){var o;return o=x.call(this,f,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this,o.bufferPadding=.2,o.fragments=Object.create(null),o.timeRanges=Object.create(null),o.config=f.config,o}var p=v.prototype;return p.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,S.prototype.destroy.call(this),x.prototype.destroy.call(this)},p.getBufferedFrag=function(o,c){var m=this.fragments,y=Object.keys(m).filter(function(b){var L=m[b];if(L.body.type!==c||!L.buffered)return!1;var F=L.body;return F.startPTS<=o&&o<=F.endPTS});if(y.length===0)return null;var _=y.pop();return m[_].body},p.detectEvictedFragments=function(o,c){var m=this;Object.keys(this.fragments).forEach(function(y){var _=m.fragments[y];if(!(!_||!_.buffered)){var b=_.range[o];if(!!b)for(var L=b.time,F=0;F<L.length;F++){var U=L[F];if(!m.isTimeBuffered(U.startPTS,U.endPTS,c)){m.removeFragment(_.body);break}}}})},p.detectPartialFragments=function(o){var c=this,m=this.getFragmentKey(o),y=this.fragments[m];y&&(y.buffered=!0,Object.keys(this.timeRanges).forEach(function(_){if(o.hasElementaryStream(_)){var b=c.timeRanges[_];y.range[_]=c.getBufferedTimes(o.startPTS,o.endPTS,b)}}))},p.getBufferedTimes=function(o,c,m){for(var y=[],_,b,L=!1,F=0;F<m.length;F++)if(_=m.start(F)-this.bufferPadding,b=m.end(F)+this.bufferPadding,o>=_&&c<=b){y.push({startPTS:Math.max(o,m.start(F)),endPTS:Math.min(c,m.end(F))});break}else if(o<b&&c>_)y.push({startPTS:Math.max(o,m.start(F)),endPTS:Math.min(c,m.end(F))}),L=!0;else if(c<=_)break;return{time:y,partial:L}},p.getFragmentKey=function(o){return o.type+"_"+o.level+"_"+o.urlId+"_"+o.sn},p.getPartialFragment=function(o){var c=this,m,y,_,b=null,L=0;return Object.keys(this.fragments).forEach(function(F){var U=c.fragments[F];c.isPartial(U)&&(y=U.body.startPTS-c.bufferPadding,_=U.body.endPTS+c.bufferPadding,o>=y&&o<=_&&(m=Math.min(o-y,_-o),L<=m&&(b=U.body,L=m)))}),b},p.getState=function(o){var c=this.getFragmentKey(o),m=this.fragments[c],y=lt.NOT_LOADED;return m!==void 0&&(m.buffered?this.isPartial(m)===!0?y=lt.PARTIAL:y=lt.OK:y=lt.APPENDING),y},p.isPartial=function(o){return o.buffered===!0&&(o.range.video!==void 0&&o.range.video.partial===!0||o.range.audio!==void 0&&o.range.audio.partial===!0)},p.isTimeBuffered=function(o,c,m){for(var y,_,b=0;b<m.length;b++){if(y=m.start(b)-this.bufferPadding,_=m.end(b)+this.bufferPadding,o>=y&&c<=_)return!0;if(c<=y)return!1}return!1},p.onFragLoaded=function(o){var c=o.frag;!Object(d.isFiniteNumber)(c.sn)||c.bitrateTest||(this.fragments[this.getFragmentKey(c)]={body:c,range:Object.create(null),buffered:!1})},p.onBufferAppended=function(o){var c=this;this.timeRanges=o.timeRanges,Object.keys(this.timeRanges).forEach(function(m){var y=c.timeRanges[m];c.detectEvictedFragments(m,y)})},p.onFragBuffered=function(o){this.detectPartialFragments(o.frag)},p.hasFragment=function(o){var c=this.getFragmentKey(o);return this.fragments[c]!==void 0},p.removeFragment=function(o){var c=this.getFragmentKey(o);delete this.fragments[c]},p.removeAllFragments=function(){this.fragments=Object.create(null)},v}(S),G={search:function(v,p){for(var f=0,o=v.length-1,c=null,m=null;f<=o;){c=(f+o)/2|0,m=v[c];var y=p(m);if(y>0)f=c+1;else if(y<0)o=c-1;else return m}return null}},Q=G,$=function(){function x(){}return x.isBuffered=function(p,f){try{if(p){for(var o=p.buffered,c=0;c<o.length;c++)if(f>=o.start(c)&&f<=o.end(c))return!0}}catch{}return!1},x.bufferInfo=function(p,f,o){try{if(p){var c=p.buffered,m=[],y;for(y=0;y<c.length;y++)m.push({start:c.start(y),end:c.end(y)});return this.bufferedInfo(m,f,o)}}catch{}return{len:0,start:f,end:f,nextStart:void 0}},x.bufferedInfo=function(p,f,o){p.sort(function(Se,Pe){var De=Se.start-Pe.start;return De||Pe.end-Se.end});var c=[];if(o)for(var m=0;m<p.length;m++){var y=c.length;if(y){var _=c[y-1].end;p[m].start-_<o?p[m].end>_&&(c[y-1].end=p[m].end):c.push(p[m])}else c.push(p[m])}else c=p;for(var b=0,L,F=f,U=f,X=0;X<c.length;X++){var ne=c[X].start,pe=c[X].end;if(f+o>=ne&&f<pe)F=ne,U=pe,b=U-f;else if(f+o<ne){L=ne;break}}return{len:b,start:F,end:U,nextStart:L}},x}(),A=i("./node_modules/eventemitter3/index.js"),N=i("./node_modules/webworkify-webpack/index.js"),V=i("./src/demux/demuxer-inline.js");function P(){return window.MediaSource||window.WebKitMediaSource}var k=i("./src/utils/get-self-scope.js");function H(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var W=function(x){H(v,x);function v(){return x.apply(this,arguments)||this}var p=v.prototype;return p.trigger=function(o){for(var c=arguments.length,m=new Array(c>1?c-1:0),y=1;y<c;y++)m[y-1]=arguments[y];this.emit.apply(this,[o,o].concat(m))},v}(A.EventEmitter),se=Object(k.getSelfScope)(),ue=P()||{isTypeSupported:function(){return!1}},re=function(){function x(p,f){var o=this;this.hls=p,this.id=f;var c=this.observer=new W,m=p.config,y=function(U,X){X=X||{},X.frag=o.frag,X.id=o.id,p.trigger(U,X)};c.on(u.default.FRAG_DECRYPTED,y),c.on(u.default.FRAG_PARSING_INIT_SEGMENT,y),c.on(u.default.FRAG_PARSING_DATA,y),c.on(u.default.FRAG_PARSED,y),c.on(u.default.ERROR,y),c.on(u.default.FRAG_PARSING_METADATA,y),c.on(u.default.FRAG_PARSING_USERDATA,y),c.on(u.default.INIT_PTS_FOUND,y);var _={mp4:ue.isTypeSupported("video/mp4"),mpeg:ue.isTypeSupported("audio/mpeg"),mp3:ue.isTypeSupported('audio/mp4; codecs="mp3"')},b=navigator.vendor;if(m.enableWorker&&typeof Worker!="undefined"){h.logger.log("demuxing in webworker");var L;try{L=this.w=N("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),L.addEventListener("message",this.onwmsg),L.onerror=function(F){p.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:F.message+" ("+F.filename+":"+F.lineno+")"}})},L.postMessage({cmd:"init",typeSupported:_,vendor:b,id:f,config:JSON.stringify(m)})}catch(F){h.logger.warn("Error in worker:",F),h.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),L&&se.URL.revokeObjectURL(L.objectURL),this.demuxer=new V.default(c,_,m,b),this.w=void 0}}else this.demuxer=new V.default(c,_,m,b)}var v=x.prototype;return v.destroy=function(){var f=this.w;if(f)f.removeEventListener("message",this.onwmsg),f.terminate(),this.w=null;else{var o=this.demuxer;o&&(o.destroy(),this.demuxer=null)}var c=this.observer;c&&(c.removeAllListeners(),this.observer=null)},v.push=function(f,o,c,m,y,_,b,L){var F=this.w,U=Object(d.isFiniteNumber)(y.startPTS)?y.startPTS:y.start,X=y.decryptdata,ne=this.frag,pe=!(ne&&y.cc===ne.cc),Se=!(ne&&y.level===ne.level),Pe=ne&&y.sn===ne.sn+1,De=!Se&&Pe;if(pe&&h.logger.log(this.id+":discontinuity detected"),Se&&h.logger.log(this.id+":switch detected"),this.frag=y,F)F.postMessage({cmd:"demux",data:f,decryptdata:X,initSegment:o,audioCodec:c,videoCodec:m,timeOffset:U,discontinuity:pe,trackSwitch:Se,contiguous:De,duration:_,accurateTimeOffset:b,defaultInitPTS:L},f instanceof ArrayBuffer?[f]:[]);else{var Ge=this.demuxer;Ge&&Ge.push(f,X,o,c,m,U,pe,Se,De,_,b,L)}},v.onWorkerMessage=function(f){var o=f.data,c=this.hls;switch(o.event){case"init":se.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:o.data.data1=new Uint8Array(o.data1),o.data2&&(o.data.data2=new Uint8Array(o.data2));default:o.data=o.data||{},o.data.frag=this.frag,o.data.id=this.id,c.trigger(o.event,o.data);break}},x}(),q=re;function Y(x,v,p){switch(v){case"audio":x.audioGroupIds||(x.audioGroupIds=[]),x.audioGroupIds.push(p);break;case"text":x.textGroupIds||(x.textGroupIds=[]),x.textGroupIds.push(p);break}}function ie(x,v,p){var f=x[v],o=x[p],c=o.startPTS;if(Object(d.isFiniteNumber)(c))p>v?(f.duration=c-f.start,f.duration<0&&h.logger.warn("negative duration computed for frag "+f.sn+",level "+f.level+", there should be some duration drift between playlist and fragment!")):(o.duration=f.start-c,o.duration<0&&h.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"));else if(p>v){var m=f.cc===o.cc;o.start=f.start+(m&&f.minEndPTS?f.minEndPTS-f.start:f.duration)}else o.start=Math.max(f.start-o.duration,0)}function te(x,v,p,f,o,c){var m=p,y=f;if(Object(d.isFiniteNumber)(v.startPTS)){var _=Math.abs(v.startPTS-p);Object(d.isFiniteNumber)(v.deltaPTS)?v.deltaPTS=Math.max(_,v.deltaPTS):v.deltaPTS=_,m=Math.max(p,v.startPTS),p=Math.min(p,v.startPTS),y=Math.min(f,v.endPTS),f=Math.max(f,v.endPTS),o=Math.min(o,v.startDTS),c=Math.max(c,v.endDTS)}var b=p-v.start;v.start=v.startPTS=p,v.maxStartPTS=m,v.endPTS=f,v.minEndPTS=y,v.startDTS=o,v.endDTS=c,v.duration=f-p;var L=v.sn;if(!x||L<x.startSN||L>x.endSN)return 0;var F,U,X;for(F=L-x.startSN,U=x.fragments,U[F]=v,X=F;X>0;X--)ie(U,X,X-1);for(X=F;X<U.length-1;X++)ie(U,X,X+1);return x.PTSKnown=!0,b}function de(x,v){v.initSegment&&x.initSegment&&(v.initSegment=x.initSegment);var p=0,f;if(Ae(x,v,function(m,y){p=m.cc-y.cc,Object(d.isFiniteNumber)(m.startPTS)&&(y.start=y.startPTS=m.startPTS,y.endPTS=m.endPTS,y.duration=m.duration,y.backtracked=m.backtracked,y.dropped=m.dropped,f=y),v.PTSKnown=!0}),!!v.PTSKnown){if(p){h.logger.log("discontinuity sliding from playlist, take drift into account");for(var o=v.fragments,c=0;c<o.length;c++)o[c].cc+=p}f?te(v,f,f.startPTS,f.endPTS,f.startDTS,f.endDTS):Me(x,v),v.PTSKnown=x.PTSKnown}}function ge(x,v,p){p===void 0&&(p=0);var f=-1;Ae(x,v,function(m,y,_){y.start=m.start,f=_});var o=v.fragments;if(f<0){o.forEach(function(m){m.start+=p});return}for(var c=f+1;c<o.length;c++)o[c].start=o[c-1].start+o[c-1].duration}function Ae(x,v,p){if(!(!x||!v))for(var f=Math.max(x.startSN,v.startSN)-v.startSN,o=Math.min(x.endSN,v.endSN)-v.startSN,c=v.startSN-x.startSN,m=f;m<=o;m++){var y=x.fragments[c+m],_=v.fragments[m];if(!y||!_)break;p(y,_,m)}}function Me(x,v){var p=v.startSN-x.startSN,f=x.fragments,o=v.fragments;if(!(p<0||p>f.length))for(var c=0;c<o.length;c++)o[c].start+=f[p].start}function Re(x,v,p){var f=1e3*(v.averagetargetduration?v.averagetargetduration:v.targetduration),o=f/2;return x&&v.endSN===x.endSN&&(f=o),p&&(f=Math.max(o,f-(window.performance.now()-p))),Math.round(f)}var ve={toString:function(v){for(var p="",f=v.length,o=0;o<f;o++)p+="["+v.start(o).toFixed(3)+","+v.end(o).toFixed(3)+"]";return p}},me=ve;function he(x,v){for(var p=null,f=0;f<x.length;f+=1){var o=x[f];if(o&&o.cc===v){p=o;break}}return p}function Ie(x,v){return Q.search(x,function(p){return p.cc<v?1:p.cc>v?-1:0})}function $e(x,v,p){var f=!1;return v&&v.details&&p&&(p.endCC>p.startCC||x&&x.cc<p.startCC)&&(f=!0),f}function st(x,v){var p=x.fragments,f=v.fragments;if(!f.length||!p.length){h.logger.log("No fragments to align");return}var o=he(p,f[0].cc);if(!o||o&&!o.startPTS){h.logger.log("No frag in previous level to align on");return}return o}function wt(x,v){v.fragments.forEach(function(p){if(p){var f=p.start+x;p.start=p.startPTS=f,p.endPTS=f+p.duration}}),v.PTSKnown=!0}function dt(x,v,p){Ft(x,p,v),!p.PTSKnown&&v&&qt(p,v.details)}function Ft(x,v,p){if($e(x,p,v)){var f=st(p.details,v);f&&(h.logger.log("Adjusting PTS using last level due to CC increase within current level"),wt(f.start,v))}}function qt(x,v){if(v&&v.fragments.length){if(!x.hasProgramDateTime||!v.hasProgramDateTime)return;var p=v.fragments[0].programDateTime,f=x.fragments[0].programDateTime,o=(f-p)/1e3+v.fragments[0].start;Object(d.isFiniteNumber)(o)&&(h.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),wt(o,x))}}function _r(x,v,p){if(v===null||!Array.isArray(x)||!x.length||!Object(d.isFiniteNumber)(v))return null;var f=x[0].programDateTime;if(v<(f||0))return null;var o=x[x.length-1].endProgramDateTime;if(v>=(o||0))return null;p=p||0;for(var c=0;c<x.length;++c){var m=x[c];if(yn(v,p,m))return m}return null}function Vt(x,v,p,f){p===void 0&&(p=0),f===void 0&&(f=0);var o=null;if(x?o=v[x.sn-v[0].sn+1]:p===0&&v[0].start===0&&(o=v[0]),o&&bt(p,f,o)===0)return o;var c=Q.search(v,bt.bind(null,p,f));return c||o}function bt(x,v,p){x===void 0&&(x=0),v===void 0&&(v=0);var f=Math.min(v,p.duration+(p.deltaPTS?p.deltaPTS:0));return p.start+p.duration-f<=x?1:p.start-f>x&&p.start?-1:0}function yn(x,v,p){var f=Math.min(v,p.duration+(p.deltaPTS?p.deltaPTS:0))*1e3,o=p.endProgramDateTime||0;return o-f>x}var En=250,Mr=2,sr=.1,cn=.05,wn=function(){function x(p,f,o,c){this.config=p,this.media=f,this.fragmentTracker=o,this.hls=c,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var v=x.prototype;return v.poll=function(f){var o=this.config,c=this.media,m=this.stalled,y=c.currentTime,_=c.seeking,b=this.seeking&&!_,L=!this.seeking&&_;if(this.seeking=_,y!==f){if(this.moved=!0,m!==null){if(this.stallReported){var F=self.performance.now()-m;h.logger.warn("playback not stuck anymore @"+y+", after "+Math.round(F)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((L||b)&&(this.stalled=null),!(c.paused||c.ended||c.playbackRate===0||!c.buffered.length)){var U=$.bufferInfo(c,y,0),X=U.len>0,ne=U.nextStart||0;if(!(!X&&!ne)){if(_){var pe=U.len>Mr,Se=!ne||ne-y>Mr&&!this.fragmentTracker.getPartialFragment(y);if(pe||Se)return;this.moved=!1}if(!this.moved&&this.stalled){var Pe=Math.max(ne,U.start||0)-y;if(Pe>0&&Pe<=Mr){this._trySkipBufferHole(null);return}}var De=self.performance.now();if(m===null){this.stalled=De;return}var Ge=De-m;!_&&Ge>=En&&this._reportStall(U.len);var qe=$.bufferInfo(c,y,o.maxBufferHole);this._tryFixBufferStall(qe,Ge)}}},v._tryFixBufferStall=function(f,o){var c=this.config,m=this.fragmentTracker,y=this.media,_=y.currentTime,b=m.getPartialFragment(_);if(b){var L=this._trySkipBufferHole(b);if(L)return}f.len>c.maxBufferHole&&o>c.highBufferWatchdogPeriod*1e3&&(h.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},v._reportStall=function(f){var o=this.hls,c=this.media,m=this.stallReported;m||(this.stallReported=!0,h.logger.warn("Playback stalling at @"+c.currentTime+" due to low buffer (buffer="+f+")"),o.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:f}))},v._trySkipBufferHole=function(f){for(var o=this.config,c=this.hls,m=this.media,y=m.currentTime,_=0,b=0;b<m.buffered.length;b++){var L=m.buffered.start(b);if(y+o.maxBufferHole>=_&&y<L){var F=Math.max(L+cn,m.currentTime+sr);return h.logger.warn("skipping hole, adjusting currentTime from "+y+" to "+F),this.moved=!0,this.stalled=null,m.currentTime=F,f&&c.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+y+" to "+F,frag:f}),F}_=m.buffered.end(b)}return 0},v._tryNudgeBuffer=function(){var f=this.config,o=this.hls,c=this.media,m=c.currentTime,y=(this.nudgeRetry||0)+1;if(this.nudgeRetry=y,y<f.nudgeMaxRetry){var _=m+y*f.nudgeOffset;h.logger.warn("Nudging 'currentTime' from "+m+" to "+_),c.currentTime=_,o.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.logger.error("Playhead still not moving while enough data buffered @"+m+" after "+f.nudgeMaxRetry+" nudges"),o.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},x}();function Rn(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function Yi(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var kn=function(x){Yi(v,x);function v(f){for(var o,c=arguments.length,m=new Array(c>1?c-1:0),y=1;y<c;y++)m[y-1]=arguments[y];return o=x.call.apply(x,[this,f].concat(m))||this,o._boundTick=void 0,o._tickTimer=null,o._tickInterval=null,o._tickCallCount=0,o._boundTick=o.tick.bind(Rn(o)),o}var p=v.prototype;return p.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},p.hasInterval=function(){return!!this._tickInterval},p.hasNextTick=function(){return!!this._tickTimer},p.setInterval=function(o){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,o),!0)},p.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},p.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},p.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},p.doTick=function(){},v}(S);function Xi(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var ae={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},br=function(x){Xi(v,x);function v(){return x.apply(this,arguments)||this}var p=v.prototype;return p.doTick=function(){},p.startLoad=function(){},p.stopLoad=function(){var o=this.fragCurrent;o&&(o.loader&&o.loader.abort(),this.fragmentTracker.removeFragment(o)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ae.STOPPED},p._streamEnded=function(o,c){var m=this.fragCurrent,y=this.fragmentTracker;if(!c.live&&m&&!m.backtracked&&m.sn===c.endSN&&!o.nextStart){var _=y.getState(m);return _===lt.PARTIAL||_===lt.OK}return!1},p.onMediaSeeking=function(){var o=this.config,c=this.media,m=this.mediaBuffer,y=this.state,_=c?c.currentTime:null,b=$.bufferInfo(m||c,_,this.config.maxBufferHole);if(h.logger.log("media seeking to "+(Object(d.isFiniteNumber)(_)?_.toFixed(3):_)),y===ae.FRAG_LOADING){var L=this.fragCurrent;if(b.len===0&&L){var F=o.maxFragLookUpTolerance,U=L.start-F,X=L.start+L.duration+F;_<U||_>X?(L.loader&&(h.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),L.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ae.IDLE):h.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else y===ae.ENDED&&(b.len===0&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ae.IDLE);c&&(this.lastCurrentTime=_),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=_),this.tick()},p.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},p.onHandlerDestroying=function(){this.stopLoad(),x.prototype.onHandlerDestroying.call(this)},p.onHandlerDestroyed=function(){this.state=ae.STOPPED,this.fragmentTracker=null},p.computeLivePosition=function(o,c){var m=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*c.targetduration;return o+Math.max(0,c.totalduration-m)},v}(kn);function ci(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function Qi(x,v,p){return v&&ci(x.prototype,v),p&&ci(x,p),x}function xn(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var no=100,hd=function(x){xn(v,x);function v(f,o){var c;return c=x.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this,c.fragmentTracker=o,c.config=f.config,c.audioCodecSwap=!1,c._state=ae.STOPPED,c.stallReported=!1,c.gapController=null,c.altAudio=!1,c.audioOnly=!1,c.bitrateTest=!1,c}var p=v.prototype;return p.startLoad=function(o){if(this.levels){var c=this.lastCurrentTime,m=this.hls;if(this.stopLoad(),this.setInterval(no),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var y=m.startLevel;y===-1&&(m.config.testBandwidth?(y=0,this.bitrateTest=!0):y=m.nextAutoLevel),this.level=m.nextLoadLevel=y,this.loadedmetadata=!1}c>0&&o===-1&&(h.logger.log("override startPosition with lastCurrentTime @"+c.toFixed(3)),o=c),this.state=ae.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()}else this.forceStartLoad=!0,this.state=ae.STOPPED},p.stopLoad=function(){this.forceStartLoad=!1,x.prototype.stopLoad.call(this)},p.doTick=function(){switch(this.state){case ae.BUFFER_FLUSHING:this.fragLoadError=0;break;case ae.IDLE:this._doTickIdle();break;case ae.WAITING_LEVEL:var o=this.levels[this.level];o&&o.details&&(this.state=ae.IDLE);break;case ae.FRAG_LOADING_WAITING_RETRY:var c=window.performance.now(),m=this.retryDate;(!m||c>=m||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ae.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},p._doTickIdle=function(){var o=this.hls,c=o.config,m=this.media;if(!(this.levelLastLoaded===void 0||!m&&(this.startFragRequested||!c.startFragPrefetch))){if(this.altAudio&&this.audioOnly){this.demuxer.frag=null;return}var y;this.loadedmetadata?y=m.currentTime:y=this.nextLoadPosition;var _=o.nextLoadLevel,b=this.levels[_];if(!!b){var L=b.bitrate,F;L?F=Math.max(8*c.maxBufferSize/L,c.maxBufferLength):F=c.maxBufferLength,F=Math.min(F,c.maxMaxBufferLength);var U=y<c.maxBufferHole?Math.max(Mr,c.maxBufferHole):c.maxBufferHole,X=$.bufferInfo(this.mediaBuffer?this.mediaBuffer:m,y,U),ne=X.len;if(!(ne>=F)){h.logger.trace("buffer length of "+ne.toFixed(3)+" is below max of "+F.toFixed(3)+". checking for more payload ..."),this.level=o.nextLoadLevel=_;var pe=b.details;if(!pe||pe.live&&this.levelLastLoaded!==_){this.state=ae.WAITING_LEVEL;return}if(this._streamEnded(X,pe)){var Se={};this.altAudio&&(Se.type="video"),this.hls.trigger(u.default.BUFFER_EOS,Se),this.state=ae.ENDED;return}this._fetchPayloadOrEos(y,X,pe)}}}},p._fetchPayloadOrEos=function(o,c,m){var y=this.fragPrevious;this.level;var _=m.fragments,b=_.length;if(b!==0){var L=_[0].start,F=_[b-1].start+_[b-1].duration,U=c.end,X;if(m.initSegment&&!m.initSegment.data)X=m.initSegment;else if(m.live){var ne=this.config.initialLiveManifestSize;if(b<ne){h.logger.warn("Can not start playback of a level, reason: not enough fragments "+b+" < "+ne);return}if(X=this._ensureFragmentAtLivePoint(m,U,L,F,y,_),X===null)return}else U<L&&(X=_[0]);X||(X=this._findFragment(L,y,b,_,U,F,m)),X&&(X.encrypted?this._loadKey(X,m):this._loadFragment(X,m,o,U))}},p._ensureFragmentAtLivePoint=function(o,c,m,y,_,b){var L=this.hls.config,F=this.media,U,X=1/0;if(L.liveMaxLatencyDuration!==void 0?X=L.liveMaxLatencyDuration:Object(d.isFiniteNumber)(L.liveMaxLatencyDurationCount)&&(X=L.liveMaxLatencyDurationCount*o.targetduration),c<Math.max(m-L.maxFragLookUpTolerance,y-X)){var ne=this.liveSyncPosition=this.computeLivePosition(m,o);c=ne,F&&!F.paused&&F.readyState&&F.duration>ne&&ne>F.currentTime&&(h.logger.log("buffer end: "+c.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+ne.toFixed(3)),F.currentTime=ne),this.nextLoadPosition=ne}if(o.PTSKnown&&c>y&&F&&F.readyState)return null;if(this.startFragRequested&&!o.PTSKnown&&_)if(o.hasProgramDateTime)h.logger.log("live playlist, switching playlist, load frag with same PDT: "+_.programDateTime),U=_r(b,_.endProgramDateTime,L.maxFragLookUpTolerance);else{var pe=_.sn+1;if(pe>=o.startSN&&pe<=o.endSN){var Se=b[pe-o.startSN];_.cc===Se.cc&&(U=Se,h.logger.log("live playlist, switching playlist, load frag with next SN: "+U.sn))}U||(U=Q.search(b,function(Pe){return _.cc-Pe.cc}),U&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+U.sn))}return U},p._findFragment=function(o,c,m,y,_,b,L){var F=this.hls.config,U;if(_<b){var X=_>b-F.maxFragLookUpTolerance?0:F.maxFragLookUpTolerance;U=Vt(c,y,_,X)}else U=y[m-1];if(U){var ne=U.sn-L.startSN,pe=c&&U.level===c.level,Se=y[ne-1],Pe=y[ne+1];if(c&&U.sn===c.sn)if(pe&&!U.backtracked)if(U.sn<L.endSN){var De=c.deltaPTS;De&&De>F.maxBufferHole&&c.dropped&&ne?(U=Se,h.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(U=Pe,this.fragmentTracker.getState(U)!==lt.OK&&h.logger.log("Re-loading fragment with SN: "+U.sn))}else U=null;else U.backtracked&&(Pe&&Pe.backtracked?(h.logger.warn("Already backtracked from fragment "+Pe.sn+", will not backtrack to fragment "+U.sn+". Loading fragment "+Pe.sn),U=Pe):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),U.dropped=0,Se?(U=Se,U.backtracked=!0):ne&&(U=null)))}return U},p._loadKey=function(o,c){h.logger.log("Loading key for "+o.sn+" of ["+c.startSN+"-"+c.endSN+"], level "+this.level),this.state=ae.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:o})},p._loadFragment=function(o,c,m,y){var _=this.fragmentTracker.getState(o);this.fragCurrent=o,o.sn!=="initSegment"&&(this.startFragRequested=!0),Object(d.isFiniteNumber)(o.sn)&&!o.bitrateTest&&(this.nextLoadPosition=o.start+o.duration),o.backtracked||_===lt.NOT_LOADED||_===lt.PARTIAL?(o.autoLevel=this.hls.autoLevelEnabled,o.bitrateTest=this.bitrateTest,h.logger.log("Loading "+o.sn+" of ["+c.startSN+"-"+c.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(m.toFixed(3))+", bufferEnd: "+parseFloat(y.toFixed(3))),this.hls.trigger(u.default.FRAG_LOADING,{frag:o}),this.demuxer||(this.demuxer=new q(this.hls,"main")),this.state=ae.FRAG_LOADING):_===lt.APPENDING&&this._reduceMaxBufferLength(o.duration)&&this.fragmentTracker.removeFragment(o)},p.getBufferedFrag=function(o){return this.fragmentTracker.getBufferedFrag(o,R.MAIN)},p.followingBufferedFrag=function(o){return o?this.getBufferedFrag(o.endPTS+.5):null},p._checkFragmentChanged=function(){var o,c,m=this.media;if(m&&m.readyState&&m.seeking===!1&&(c=m.currentTime,c>this.lastCurrentTime&&(this.lastCurrentTime=c),$.isBuffered(m,c)?o=this.getBufferedFrag(c):$.isBuffered(m,c+.1)&&(o=this.getBufferedFrag(c+.1)),o)){var y=o;if(y!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:y});var _=y.level;(!this.fragPlaying||this.fragPlaying.level!==_)&&this.hls.trigger(u.default.LEVEL_SWITCHED,{level:_}),this.fragPlaying=y}}},p.immediateLevelSwitch=function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var o=this.media,c;o?(c=o.paused,c||o.pause()):c=!0,this.previouslyPaused=c}var m=this.fragCurrent;m&&m.loader&&m.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},p.immediateLevelSwitchEnd=function(){var o=this.media;o&&o.buffered.length&&(this.immediateSwitch=!1,o.currentTime>0&&$.isBuffered(o,o.currentTime)&&(o.currentTime-=1e-4),this.previouslyPaused||o.play())},p.nextLevelSwitch=function(){var o=this.media;if(o&&o.readyState){var c,m=this.getBufferedFrag(o.currentTime);if(m&&m.startPTS>1&&this.flushMainBuffer(0,m.startPTS-1),o.paused)c=0;else{var y=this.hls.nextLoadLevel,_=this.levels[y],b=this.fragLastKbps;b&&this.fragCurrent?c=this.fragCurrent.duration*_.bitrate/(1e3*b)+1:c=0}var L=this.getBufferedFrag(o.currentTime+c);if(L){var F=this.followingBufferedFrag(L);if(F){var U=this.fragCurrent;U&&U.loader&&U.loader.abort(),this.fragCurrent=null;var X=Math.max(L.endPTS,F.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,F.duration));this.flushMainBuffer(X,Number.POSITIVE_INFINITY)}}}},p.flushMainBuffer=function(o,c){this.state=ae.BUFFER_FLUSHING;var m={startOffset:o,endOffset:c};this.altAudio&&(m.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,m)},p.onMediaAttached=function(o){var c=this.media=this.mediaBuffer=o.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),c.addEventListener("seeking",this.onvseeking),c.addEventListener("seeked",this.onvseeked),c.addEventListener("ended",this.onvended);var m=this.config;this.levels&&m.autoStartLoad&&this.hls.startLoad(m.startPosition),this.gapController=new wn(m,c,this.fragmentTracker,this.hls)},p.onMediaDetaching=function(){var o=this.media;o&&o.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var c=this.levels;c&&c.forEach(function(m){m.details&&m.details.fragments.forEach(function(y){y.backtracked=void 0})}),o&&(o.removeEventListener("seeking",this.onvseeking),o.removeEventListener("seeked",this.onvseeked),o.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},p.onMediaSeeked=function(){var o=this.media,c=o?o.currentTime:void 0;Object(d.isFiniteNumber)(c)&&h.logger.log("media seeked to "+c.toFixed(3)),this.tick()},p.onManifestLoading=function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},p.onManifestParsed=function(o){var c=!1,m=!1,y;o.levels.forEach(function(b){y=b.audioCodec,y&&(y.indexOf("mp4a.40.2")!==-1&&(c=!0),y.indexOf("mp4a.40.5")!==-1&&(m=!0))}),this.audioCodecSwitch=c&&m,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=o.altAudio,this.levels=o.levels,this.startFragRequested=!1;var _=this.config;(_.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(_.startPosition)},p.onLevelLoaded=function(o){var c=o.details,m=o.level,y=this.levels[this.levelLastLoaded],_=this.levels[m],b=c.totalduration,L=0;if(h.logger.log("level "+m+" loaded ["+c.startSN+","+c.endSN+"],duration:"+b),c.live||_.details&&_.details.live){var F=_.details;F&&c.fragments.length>0?(de(F,c),L=c.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(L,F),c.PTSKnown&&Object(d.isFiniteNumber)(L)?h.logger.log("live playlist sliding:"+L.toFixed(3)):(h.logger.log("live playlist - outdated PTS, unknown sliding"),dt(this.fragPrevious,y,c))):(h.logger.log("live playlist - first load, unknown sliding"),c.PTSKnown=!1,dt(this.fragPrevious,y,c))}else c.PTSKnown=!1;if(_.details=c,this.levelLastLoaded=m,this.hls.trigger(u.default.LEVEL_UPDATED,{details:c,level:m}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var U=c.startTimeOffset;Object(d.isFiniteNumber)(U)?(U<0&&(h.logger.log("negative start time offset "+U+", count from end of last fragment"),U=L+b+U),h.logger.log("start time offset found in playlist, adjust startPosition to "+U),this.startPosition=U):c.live?(this.startPosition=this.computeLivePosition(L,c),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ae.WAITING_LEVEL&&(this.state=ae.IDLE),this.tick()},p.onKeyLoaded=function(){this.state===ae.KEY_LOADING&&(this.state=ae.IDLE,this.tick())},p.onFragLoaded=function(o){var c=this.fragCurrent,m=this.hls,y=this.levels,_=this.media,b=o.frag;if(this.state===ae.FRAG_LOADING&&c&&b.type==="main"&&b.level===c.level&&b.sn===c.sn){var L=o.stats,F=y[c.level],U=F.details;if(this.bitrateTest=!1,this.stats=L,h.logger.log("Loaded "+c.sn+" of ["+U.startSN+" ,"+U.endSN+"],level "+c.level),b.bitrateTest&&m.nextLoadLevel)this.state=ae.IDLE,this.startFragRequested=!1,L.tparsed=L.tbuffered=window.performance.now(),m.trigger(u.default.FRAG_BUFFERED,{stats:L,frag:c,id:"main"}),this.tick();else if(b.sn==="initSegment")this.state=ae.IDLE,L.tparsed=L.tbuffered=window.performance.now(),U.initSegment.data=o.payload,m.trigger(u.default.FRAG_BUFFERED,{stats:L,frag:c,id:"main"}),this.tick();else{h.logger.log("Parsing "+c.sn+" of ["+U.startSN+" ,"+U.endSN+"],level "+c.level+", cc "+c.cc),this.state=ae.PARSING,this.pendingBuffering=!0,this.appended=!1,b.bitrateTest&&(b.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:b}));var X=!(_&&_.seeking)&&(U.PTSKnown||!U.live),ne=U.initSegment?U.initSegment.data:[],pe=this._getAudioCodec(F),Se=this.demuxer=this.demuxer||new q(this.hls,"main");Se.push(o.payload,ne,pe,F.videoCodec,c,U.totalduration,X)}}this.fragLoadError=0},p.onFragParsingInitSegment=function(o){var c=this.fragCurrent,m=o.frag;if(c&&o.id==="main"&&m.sn===c.sn&&m.level===c.level&&this.state===ae.PARSING){var y=o.tracks,_,b;if(this.audioOnly=y.audio&&!y.video,this.altAudio&&!this.audioOnly&&delete y.audio,b=y.audio,b){var L=this.levels[this.level].audioCodec,F=navigator.userAgent.toLowerCase();L&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),L.indexOf("mp4a.40.5")!==-1?L="mp4a.40.2":L="mp4a.40.5"),this.audioCodecSwitch&&b.metadata.channelCount!==1&&F.indexOf("firefox")===-1&&(L="mp4a.40.5"),F.indexOf("android")!==-1&&b.container!=="audio/mpeg"&&(L="mp4a.40.2",h.logger.log("Android: force audio codec to "+L)),b.levelCodec=L,b.id=o.id}b=y.video,b&&(b.levelCodec=this.levels[this.level].videoCodec,b.id=o.id),this.hls.trigger(u.default.BUFFER_CODECS,y);for(_ in y){b=y[_],h.logger.log("main track:"+_+",container:"+b.container+",codecs[level/parsed]=["+b.levelCodec+"/"+b.codec+"]");var U=b.initSegment;U&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:_,data:U,parent:"main",content:"initSegment"}))}this.tick()}},p.onFragParsingData=function(o){var c=this,m=this.fragCurrent,y=o.frag;if(m&&o.id==="main"&&y.sn===m.sn&&y.level===m.level&&!(o.type==="audio"&&this.altAudio)&&this.state===ae.PARSING){var _=this.levels[this.level],b=m;if(Object(d.isFiniteNumber)(o.endPTS)||(o.endPTS=o.startPTS+m.duration,o.endDTS=o.startDTS+m.duration),o.hasAudio===!0&&b.addElementaryStream(B.AUDIO),o.hasVideo===!0&&b.addElementaryStream(B.VIDEO),h.logger.log("Parsed "+o.type+",PTS:["+o.startPTS.toFixed(3)+","+o.endPTS.toFixed(3)+"],DTS:["+o.startDTS.toFixed(3)+"/"+o.endDTS.toFixed(3)+"],nb:"+o.nb+",dropped:"+(o.dropped||0)),o.type==="video")if(b.dropped=o.dropped,b.dropped)if(b.backtracked)h.logger.warn("Already backtracked on this fragment, appending with the gap",b.sn);else{var L=_.details;if(L&&b.sn===L.startSN)h.logger.warn("missing video frame(s) on first frag, appending with gap",b.sn);else{h.logger.warn("missing video frame(s), backtracking fragment",b.sn),this.fragmentTracker.removeFragment(b),b.backtracked=!0,this.nextLoadPosition=o.startPTS,this.state=ae.IDLE,this.fragPrevious=b,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.tick();return}}else b.backtracked=!1;var F=te(_.details,b,o.startPTS,o.endPTS,o.startDTS,o.endDTS),U=this.hls;U.trigger(u.default.LEVEL_PTS_UPDATED,{details:_.details,level:this.level,drift:F,type:o.type,start:o.startPTS,end:o.endPTS}),[o.data1,o.data2].forEach(function(X){X&&X.length&&c.state===ae.PARSING&&(c.appended=!0,c.pendingBuffering=!0,U.trigger(u.default.BUFFER_APPENDING,{type:o.type,data:X,parent:"main",content:"data"}))}),this.tick()}},p.onFragParsed=function(o){var c=this.fragCurrent,m=o.frag;c&&o.id==="main"&&m.sn===c.sn&&m.level===c.level&&this.state===ae.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=ae.PARSED,this._checkAppendedParsed())},p.onAudioTrackSwitching=function(o){var c=this.altAudio,m=!!o.url,y=o.id;if(!m){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var _=this.fragCurrent;_.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),_.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ae.IDLE}var b=this.hls;c&&b.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),b.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:y})}},p.onAudioTrackSwitched=function(o){var c=o.id,m=!!this.hls.audioTracks[c].url;if(m){var y=this.videoBuffer;y&&this.mediaBuffer!==y&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=y)}this.altAudio=m,this.tick()},p.onBufferCreated=function(o){var c=o.tracks,m,y,_=!1;for(var b in c){var L=c[b];L.id==="main"?(y=b,m=L,b==="video"&&(this.videoBuffer=c[b].buffer)):_=!0}_&&m?(h.logger.log("alternate track found, use "+y+".buffered to schedule main fragment loading"),this.mediaBuffer=m.buffer):this.mediaBuffer=this.media},p.onBufferAppended=function(o){if(o.parent==="main"){var c=this.state;(c===ae.PARSING||c===ae.PARSED)&&(this.pendingBuffering=o.pending>0,this._checkAppendedParsed())}},p._checkAppendedParsed=function(){if(this.state===ae.PARSED&&(!this.appended||!this.pendingBuffering)){var o=this.fragCurrent;if(o){var c=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+me.toString(c.buffered)),this.fragPrevious=o;var m=this.stats;m.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*m.total/(m.tbuffered-m.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:m,frag:o,id:"main"}),this.state=ae.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},p.onError=function(o){var c=o.frag||this.fragCurrent;if(!(c&&c.type!=="main")){var m=!!this.media&&$.isBuffered(this.media,this.media.currentTime)&&$.isBuffered(this.media,this.media.currentTime+.5);switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:if(!o.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var y=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+y+" ms"),this.retryDate=window.performance.now()+y,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ae.FRAG_LOADING_WAITING_RETRY}else h.logger.error("mediaController: "+o.details+" reaches max retry, redispatch as fatal ..."),o.fatal=!0,this.state=ae.ERROR;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==ae.ERROR&&(o.fatal?(this.state=ae.ERROR,h.logger.warn("streamController: "+o.details+",switch to "+this.state+" state ...")):!o.levelRetry&&this.state===ae.WAITING_LEVEL&&(this.state=ae.IDLE));break;case l.ErrorDetails.BUFFER_FULL_ERROR:o.parent==="main"&&(this.state===ae.PARSING||this.state===ae.PARSED)&&(m?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ae.IDLE):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},p._reduceMaxBufferLength=function(o){var c=this.config;return c.maxMaxBufferLength>=o?(c.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+c.maxMaxBufferLength+"s"),!0):!1},p._checkBuffer=function(){var o=this.media;if(!(!o||o.readyState===0)){var c=this.mediaBuffer?this.mediaBuffer:o,m=c.buffered;!this.loadedmetadata&&m.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,m)}},p.onFragLoadEmergencyAborted=function(){this.state=ae.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},p.onBufferFlushed=function(){var o=this.mediaBuffer?this.mediaBuffer:this.media;if(o){var c=this.audioOnly?B.AUDIO:B.VIDEO;this.fragmentTracker.detectEvictedFragments(c,o.buffered)}this.state=ae.IDLE,this.fragPrevious=null},p.onLevelsUpdated=function(o){this.levels=o.levels},p.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},p._seekToStartPos=function(){var o=this.media,c=o.currentTime,m=this.startPosition;if(c!==m&&m>=0){if(o.seeking){h.logger.log("could not seek to "+m+", already seeking at "+c);return}var y=o.buffered.length?o.buffered.start(0):0,_=y-m;_>0&&_<this.config.maxBufferHole&&(h.logger.log("adjusting start position by "+_+" to match buffer start"),m+=_,this.startPosition=m),h.logger.log("seek to target start position "+m+" from current time "+c+". ready state "+o.readyState),o.currentTime=m}},p._getAudioCodec=function(o){var c=this.config.defaultAudioCodec||o.audioCodec;return this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5")),c},Qi(v,[{key:"state",set:function(o){if(this.state!==o){var c=this.state;this._state=o,h.logger.log("main stream-controller: "+c+"->"+o),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:c,nextState:o})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var o=this.media;if(o){var c=this.getBufferedFrag(o.currentTime);if(c)return c.level}return-1}},{key:"nextBufferedFrag",get:function(){var o=this.media;return o?this.followingBufferedFrag(this.getBufferedFrag(o.currentTime)):null}},{key:"nextLevel",get:function(){var o=this.nextBufferedFrag;return o?o.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(o){this._liveSyncPosition=o}}]),v}(br),ou=hd;function lu(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function io(x,v,p){return v&&lu(x.prototype,v),p&&lu(x,p),x}function uu(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var Ji,pd=function(x){uu(v,x);function v(f){var o;return o=x.call(this,f,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this,o.canload=!1,o.currentLevelIndex=null,o.manualLevelIndex=-1,o.timer=null,Ji=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),o}var p=v.prototype;return p.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},p.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},p.startLoad=function(){var o=this._levels;this.canload=!0,this.levelRetryCount=0,o&&o.forEach(function(c){c.loadError=0;var m=c.details;m&&m.live&&(c.details=void 0)}),this.timer!==null&&this.loadLevel()},p.stopLoad=function(){this.canload=!1},p.onManifestLoaded=function(o){var c=[],m=[],y,_={},b=null,L=!1,F=!1;if(o.levels.forEach(function(ne){var pe=ne.attrs;ne.loadError=0,ne.fragmentError=!1,L=L||!!ne.videoCodec,F=F||!!ne.audioCodec,Ji&&ne.audioCodec&&ne.audioCodec.indexOf("mp4a.40.34")!==-1&&(ne.audioCodec=void 0),b=_[ne.bitrate],b?b.url.push(ne.url):(ne.url=[ne.url],ne.urlId=0,_[ne.bitrate]=ne,c.push(ne)),pe&&(pe.AUDIO&&Y(b||ne,"audio",pe.AUDIO),pe.SUBTITLES&&Y(b||ne,"text",pe.SUBTITLES))}),L&&F&&(c=c.filter(function(ne){var pe=ne.videoCodec;return!!pe})),c=c.filter(function(ne){var pe=ne.audioCodec,Se=ne.videoCodec;return(!pe||Ue(pe,"audio"))&&(!Se||Ue(Se,"video"))}),o.audioTracks&&(m=o.audioTracks.filter(function(ne){return!ne.audioCodec||Ue(ne.audioCodec,"audio")}),m.forEach(function(ne,pe){ne.id=pe})),c.length>0){y=c[0].bitrate,c.sort(function(ne,pe){return ne.bitrate-pe.bitrate}),this._levels=c;for(var U=0;U<c.length;U++)if(c[U].bitrate===y){this._firstLevel=U,h.logger.log("manifest loaded,"+c.length+" level(s) found, first bitrate:"+y);break}var X=F&&!L;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:c,audioTracks:m,firstLevel:this._firstLevel,stats:o.stats,audio:F,video:L,altAudio:!X&&m.some(function(ne){return!!ne.url})})}else this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},p.setLevelInternal=function(o){var c=this._levels,m=this.hls;if(o>=0&&o<c.length){if(this.clearTimer(),this.currentLevelIndex!==o){h.logger.log("switching to level "+o),this.currentLevelIndex=o;var y=c[o];y.level=o,m.trigger(u.default.LEVEL_SWITCHING,y)}var _=c[o],b=_.details;if(!b||b.live){var L=_.urlId;m.trigger(u.default.LEVEL_LOADING,{url:_.url[L],level:o,id:L})}}else m.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:o,fatal:!1,reason:"invalid level idx"})},p.onError=function(o){if(o.fatal){o.type===l.ErrorTypes.NETWORK_ERROR&&this.clearTimer();return}var c=!1,m=!1,y;switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:y=o.frag.level,m=!0;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:y=o.context.level,c=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:y=o.level,c=!0;break}y!==void 0&&this.recoverLevel(o,y,c,m)},p.recoverLevel=function(o,c,m,y){var _=this,b=this.hls.config,L=o.details,F=this._levels[c],U,X,ne;if(F.loadError++,F.fragmentError=y,m)if(this.levelRetryCount+1<=b.levelLoadingMaxRetry)X=Math.min(Math.pow(2,this.levelRetryCount)*b.levelLoadingRetryDelay,b.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return _.loadLevel()},X),o.levelRetry=!0,this.levelRetryCount++,h.logger.warn("level controller, "+L+", retry in "+X+" ms, current retry count is "+this.levelRetryCount);else{h.logger.error("level controller, cannot recover from "+L+" error"),this.currentLevelIndex=null,this.clearTimer(),o.fatal=!0;return}(m||y)&&(U=F.url.length,U>1&&F.loadError<U?(F.urlId=(F.urlId+1)%U,F.details=void 0,h.logger.warn("level controller, "+L+" for level "+c+": switching to redundant URL-id "+F.urlId)):this.manualLevelIndex===-1?(ne=c===0?this._levels.length-1:c-1,h.logger.warn("level controller, "+L+": switch to "+ne),this.hls.nextAutoLevel=this.currentLevelIndex=ne):y&&(h.logger.warn("level controller, "+L+": reload a fragment"),this.currentLevelIndex=null))},p.onFragLoaded=function(o){var c=o.frag;if(c!==void 0&&c.type==="main"){var m=this._levels[c.level];m!==void 0&&(m.fragmentError=!1,m.loadError=0,this.levelRetryCount=0)}},p.onLevelLoaded=function(o){var c=this,m=o.level,y=o.details;if(m===this.currentLevelIndex){var _=this._levels[m];if(_.fragmentError||(_.loadError=0,this.levelRetryCount=0),y.live){var b=Re(_.details,y,o.stats.trequest);h.logger.log("live playlist, reload in "+Math.round(b)+" ms"),this.timer=setTimeout(function(){return c.loadLevel()},b)}else this.clearTimer()}},p.onAudioTrackSwitched=function(o){var c=this.hls.audioTracks[o.id].groupId,m=this.hls.levels[this.currentLevelIndex];if(!!m&&m.audioGroupIds){for(var y=-1,_=0;_<m.audioGroupIds.length;_++)if(m.audioGroupIds[_]===c){y=_;break}y!==m.urlId&&(m.urlId=y,this.startLoad())}},p.loadLevel=function(){if(h.logger.debug("call to loadLevel"),this.currentLevelIndex!==null&&this.canload){var o=this._levels[this.currentLevelIndex];if(typeof o=="object"&&o.url.length>0){var c=this.currentLevelIndex,m=o.urlId,y=o.url[m];h.logger.log("Attempt loading level index "+c+" with URL-id "+m),this.hls.trigger(u.default.LEVEL_LOADING,{url:y,level:c,id:m})}}},p.removeLevel=function(o,c){var m=this.levels.filter(function(y,_){return _!==o?!0:y.url.length>1&&c!==void 0?(y.url=y.url.filter(function(b,L){return L!==c}),y.urlId=0,!0):!1}).map(function(y,_){var b=y.details;return b&&b.fragments&&b.fragments.forEach(function(L){L.level=_}),y});this._levels=m,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:m})},io(v,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(o){var c=this._levels;c&&(o=Math.min(o,c.length-1),(this.currentLevelIndex!==o||!c[o].details)&&this.setLevelInternal(o))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(o){this.manualLevelIndex=o,this._startLevel===void 0&&(this._startLevel=o),o!==-1&&(this.level=o)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(o){this._firstLevel=o}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var o=this.hls.config.startLevel;return o!==void 0?o:this._firstLevel}else return this._startLevel},set:function(o){this._startLevel=o}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(o){this.level=o,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=o)}}]),v}(S),so=i("./src/demux/id3.js");function Vs(x,v){var p;try{p=new Event("addtrack")}catch{p=document.createEvent("Event"),p.initEvent("addtrack",!1,!1)}p.track=x,v.dispatchEvent(p)}function Zi(x){if(x!=null&&x.cues)for(;x.cues.length>0;)x.removeCue(x.cues[0])}function cu(x,v){if(v<x[0].endTime)return x[0];if(v>x[x.length-1].endTime)return x[x.length-1];for(var p=0,f=x.length-1;p<=f;){var o=Math.floor((f+p)/2);if(v<x[o].endTime)f=o-1;else if(v>x[o].endTime)p=o+1;else return x[o]}return x[p].endTime-v<v-x[f].endTime?x[p]:x[f]}function fu(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var js=.25,ao=function(x){fu(v,x);function v(f){var o;return o=x.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this,o.id3Track=void 0,o.media=void 0,o}var p=v.prototype;return p.destroy=function(){S.prototype.destroy.call(this)},p.onMediaAttached=function(o){this.media=o.media,this.media},p.onMediaDetaching=function(){Zi(this.id3Track),this.id3Track=void 0,this.media=void 0},p.getID3Track=function(o){for(var c=0;c<o.length;c++){var m=o[c];if(m.kind==="metadata"&&m.label==="id3")return Vs(m,this.media),m}return this.media.addTextTrack("metadata","id3")},p.onFragParsingMetadata=function(o){var c=o.frag,m=o.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var y=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,_=0;_<m.length;_++){var b=so.default.getID3Frames(m[_].data);if(b){var L=Math.max(m[_].pts,0),F=_<m.length-1?m[_+1].pts:c.endPTS;F||(F=c.start+c.duration);var U=F-L;U<=0&&(F=L+js);for(var X=0;X<b.length;X++){var ne=b[X];if(!so.default.isTimeStampFrame(ne)){var pe=new y(L,F,"");pe.value=ne,this.id3Track.addCue(pe)}}}}},p.onLiveBackBufferReached=function(o){var c=o.bufferEnd,m=this.id3Track;if(!(!m||!m.cues||!m.cues.length)){var y=cu(m.cues,c);if(!!y)for(;m.cues[0]!==y;)m.removeCue(m.cues[0])}},v}(S),md=ao;function gd(){var x=P();if(!x)return!1;var v=self.SourceBuffer||self.WebKitSourceBuffer,p=x&&typeof x.isTypeSupported=="function"&&x.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),f=!v||v.prototype&&typeof v.prototype.appendBuffer=="function"&&typeof v.prototype.remove=="function";return!!p&&!!f}var Sb=function(){function x(p){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=p?Math.exp(Math.log(.5)/p):0,this.estimate_=0,this.totalWeight_=0}var v=x.prototype;return v.sample=function(f,o){var c=Math.pow(this.alpha_,f);this.estimate_=o*(1-c)+c*this.estimate_,this.totalWeight_+=f},v.getTotalWeight=function(){return this.totalWeight_},v.getEstimate=function(){if(this.alpha_){var f=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/f}else return this.estimate_},x}(),Uv=Sb,Tb=function(){function x(p,f,o,c){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=p,this.defaultEstimate_=c,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Uv(f),this.fast_=new Uv(o)}var v=x.prototype;return v.sample=function(f,o){f=Math.max(f,this.minDelayMs_);var c=8*o,m=f/1e3,y=c/m;this.fast_.sample(m,y),this.slow_.sample(m,y)},v.canEstimate=function(){var f=this.fast_;return f&&f.getTotalWeight()>=this.minWeight_},v.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},v.destroy=function(){},x}(),_b=Tb;function Bv(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function bb(x,v,p){return v&&Bv(x.prototype,v),p&&Bv(x,p),x}function Cb(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function Ib(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var Ab=window,Rb=Ab.performance,kb=function(x){Ib(v,x);function v(f){var o;return o=x.call(this,f,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this,o.lastLoadedFragLevel=0,o._nextAutoLevel=-1,o.hls=f,o.timer=null,o._bwEstimator=null,o.onCheck=o._abandonRulesCheck.bind(Cb(o)),o}var p=v.prototype;return p.destroy=function(){this.clearTimer(),S.prototype.destroy.call(this)},p.onFragLoading=function(o){var c=o.frag;if(c.type==="main"&&(this.timer||(this.fragCurrent=c,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var m=this.hls,y=m.config,_=c.level,b=m.levels[_].details.live,L,F;b?(L=y.abrEwmaFastLive,F=y.abrEwmaSlowLive):(L=y.abrEwmaFastVoD,F=y.abrEwmaSlowVoD),this._bwEstimator=new _b(m,F,L,y.abrEwmaDefaultEstimate)}},p._abandonRulesCheck=function(){var o=this.hls,c=o.media,m=this.fragCurrent;if(!!m){var y=m.loader;if(!y||y.stats&&y.stats.aborted){h.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var _=y.stats;if(c&&_&&(!c.paused&&c.playbackRate!==0||!c.readyState)&&m.autoLevel&&m.level){var b=Rb.now()-_.trequest,L=Math.abs(c.playbackRate);if(b>500*m.duration/L){var F=o.levels,U=Math.max(1,_.bw?_.bw/8:_.loaded*1e3/b),X=F[m.level];if(!X)return;var ne=X.realBitrate?Math.max(X.realBitrate,X.bitrate):X.bitrate,pe=_.total?_.total:Math.max(_.loaded,Math.round(m.duration*ne/8)),Se=c.currentTime,Pe=(pe-_.loaded)/U,De=($.bufferInfo(c,Se,o.config.maxBufferHole).end-Se)/L;if(De<2*m.duration/L&&Pe>De){var Ge=o.minAutoLevel,qe,ut;for(ut=m.level-1;ut>Ge;ut--){var Ut=F[ut].realBitrate?Math.max(F[ut].realBitrate,F[ut].bitrate):F[ut].bitrate,Yr=m.duration*Ut/(8*.8*U);if(Yr<De)break}qe<Pe&&(h.logger.warn("loading too slow, abort fragment loading and switch to level "+ut+":fragLoadedDelay["+ut+"]<fragLoadedDelay["+(m.level-1)+"];bufferStarvationDelay:"+qe.toFixed(1)+"<"+Pe.toFixed(1)+":"+De.toFixed(1)),o.nextLoadLevel=ut,this._bwEstimator.sample(b,_.loaded),y.abort(),this.clearTimer(),o.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:m,stats:_}))}}}}},p.onFragLoaded=function(o){var c=o.frag;if(c.type==="main"&&Object(d.isFiniteNumber)(c.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=c.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var m=this.hls.levels[c.level],y=(m.loaded?m.loaded.bytes:0)+o.stats.loaded,_=(m.loaded?m.loaded.duration:0)+o.frag.duration;m.loaded={bytes:y,duration:_},m.realBitrate=Math.round(8*y/_)}if(o.frag.bitrateTest){var b=o.stats;b.tparsed=b.tbuffered=b.tload,this.onFragBuffered(o)}}},p.onFragBuffered=function(o){var c=o.stats,m=o.frag;if(c.aborted!==!0&&m.type==="main"&&Object(d.isFiniteNumber)(m.sn)&&(!m.bitrateTest||c.tload===c.tbuffered)){var y=c.tparsed-c.trequest;h.logger.log("latency/loading/parsing/append/kbps:"+Math.round(c.tfirst-c.trequest)+"/"+Math.round(c.tload-c.tfirst)+"/"+Math.round(c.tparsed-c.tload)+"/"+Math.round(c.tbuffered-c.tparsed)+"/"+Math.round(8*c.loaded/(c.tbuffered-c.trequest))),this._bwEstimator.sample(y,c.loaded),c.bwEstimate=this._bwEstimator.getEstimate(),m.bitrateTest?this.bitrateTestDelay=y/1e3:this.bitrateTestDelay=0}},p.onError=function(o){switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},p.clearTimer=function(){clearInterval(this.timer),this.timer=null},p._findBestLevel=function(o,c,m,y,_,b,L,F,U){for(var X=_;X>=y;X--){var ne=U[X];if(!!ne){var pe=ne.details,Se=pe?pe.totalduration/pe.fragments.length:c,Pe=pe?pe.live:!1,De=void 0;X<=o?De=L*m:De=F*m;var Ge=U[X].realBitrate?Math.max(U[X].realBitrate,U[X].bitrate):U[X].bitrate,qe=Ge*Se/De;if(h.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+X+"/"+Math.round(De)+"/"+Ge+"/"+Se+"/"+b+"/"+qe),De>Ge&&(!qe||Pe&&!this.bitrateTestDelay||qe<b))return X}}return-1},bb(v,[{key:"nextAutoLevel",get:function(){var o=this._nextAutoLevel,c=this._bwEstimator;if(o!==-1&&(!c||!c.canEstimate()))return o;var m=this._nextABRAutoLevel;return o!==-1&&(m=Math.min(o,m)),m},set:function(o){this._nextAutoLevel=o}},{key:"_nextABRAutoLevel",get:function(){var o=this.hls,c=o.maxAutoLevel,m=o.levels,y=o.config,_=o.minAutoLevel,b=o.media,L=this.lastLoadedFragLevel,F=this.fragCurrent?this.fragCurrent.duration:0,U=b?b.currentTime:0,X=b&&b.playbackRate!==0?Math.abs(b.playbackRate):1,ne=this._bwEstimator?this._bwEstimator.getEstimate():y.abrEwmaDefaultEstimate,pe=($.bufferInfo(b,U,y.maxBufferHole).end-U)/X,Se=this._findBestLevel(L,F,ne,_,c,pe,y.abrBandWidthFactor,y.abrBandWidthUpFactor,m);if(Se>=0)return Se;h.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var Pe=F?Math.min(F,y.maxStarvationDelay):y.maxStarvationDelay,De=y.abrBandWidthFactor,Ge=y.abrBandWidthUpFactor;if(pe===0){var qe=this.bitrateTestDelay;if(qe){var ut=F?Math.min(F,y.maxLoadingDelay):y.maxLoadingDelay;Pe=ut-qe,h.logger.trace("bitrate test took "+Math.round(1e3*qe)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*Pe)+" ms"),De=Ge=1}}return Se=this._findBestLevel(L,F,ne,_,c,pe+Pe,De,Ge,m),Math.max(Se,0)}}]),v}(S),Lb=kb;function Db(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var $v=P(),Ob=function(x){Db(v,x);function v(f){var o;return o=x.call(this,f,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this,o._msDuration=null,o._levelDuration=null,o._levelTargetDuration=10,o._live=null,o._objectUrl=null,o._needsFlush=!1,o._needsEos=!1,o.config=void 0,o.audioTimestampOffset=void 0,o.bufferCodecEventsExpected=0,o._bufferCodecEventsTotal=0,o.media=null,o.mediaSource=null,o.segments=[],o.parent=void 0,o.appending=!1,o.appended=0,o.appendError=0,o.flushBufferCounter=0,o.tracks={},o.pendingTracks={},o.sourceBuffer={},o.flushRange=[],o._onMediaSourceOpen=function(){h.logger.log("media source opened"),o.hls.trigger(u.default.MEDIA_ATTACHED,{media:o.media});var c=o.mediaSource;c&&c.removeEventListener("sourceopen",o._onMediaSourceOpen),o.checkPendingTracks()},o._onMediaSourceClose=function(){h.logger.log("media source closed")},o._onMediaSourceEnded=function(){h.logger.log("media source ended")},o._onSBUpdateEnd=function(){if(o.audioTimestampOffset&&o.sourceBuffer.audio){var c=o.sourceBuffer.audio;h.logger.warn("change mpeg audio timestamp offset from "+c.timestampOffset+" to "+o.audioTimestampOffset),c.timestampOffset=o.audioTimestampOffset,delete o.audioTimestampOffset}o._needsFlush&&o.doFlush(),o._needsEos&&o.checkEos(),o.appending=!1;var m=o.parent,y=o.segments.reduce(function(U,X){return X.parent===m?U+1:U},0),_={},b=o.sourceBuffer;for(var L in b){var F=b[L];if(!F)throw Error("handling source buffer update end error: source buffer for "+L+" uninitilized and unable to update buffered TimeRanges.");_[L]=F.buffered}o.hls.trigger(u.default.BUFFER_APPENDED,{parent:m,pending:y,timeRanges:_}),o._needsFlush||o.doAppending(),o.updateMediaElementDuration(),y===0&&o.flushLiveBackBuffer()},o._onSBUpdateError=function(c){h.logger.error("sourceBuffer error:",c),o.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},o.config=f.config,o}var p=v.prototype;return p.destroy=function(){S.prototype.destroy.call(this)},p.onLevelPtsUpdated=function(o){var c=o.type,m=this.tracks.audio;if(c==="audio"&&m&&m.container==="audio/mpeg"){var y=this.sourceBuffer.audio;if(!y)throw Error("Level PTS Updated and source buffer for audio uninitalized");var _=Math.abs(y.timestampOffset-o.start);if(_>.1){var b=y.updating;try{y.abort()}catch(L){h.logger.warn("can not abort audio buffer: "+L)}b?this.audioTimestampOffset=o.start:(h.logger.warn("change mpeg audio timestamp offset from "+y.timestampOffset+" to "+o.start),y.timestampOffset=o.start)}}},p.onManifestParsed=function(o){var c=2;(o.audio&&!o.video||!o.altAudio)&&(c=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=c,h.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},p.onMediaAttaching=function(o){var c=this.media=o.media;if(c&&$v){var m=this.mediaSource=new $v;m.addEventListener("sourceopen",this._onMediaSourceOpen),m.addEventListener("sourceended",this._onMediaSourceEnded),m.addEventListener("sourceclose",this._onMediaSourceClose),c.src=window.URL.createObjectURL(m),this._objectUrl=c.src}},p.onMediaDetaching=function(){h.logger.log("media source detaching");var o=this.mediaSource;if(o){if(o.readyState==="open")try{o.endOfStream()}catch(c){h.logger.warn("onMediaDetaching:"+c.message+" while calling endOfStream")}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):h.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},p.checkPendingTracks=function(){var o=this.bufferCodecEventsExpected,c=this.pendingTracks,m=Object.keys(c).length;(m&&!o||m===2)&&(this.createSourceBuffers(c),this.pendingTracks={},this.doAppending())},p.onBufferReset=function(){var o=this.sourceBuffer;for(var c in o){var m=o[c];try{m&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(m),m.removeEventListener("updateend",this._onSBUpdateEnd),m.removeEventListener("error",this._onSBUpdateError))}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},p.onBufferCodecs=function(o){var c=this;Object.keys(this.sourceBuffer).length||(Object.keys(o).forEach(function(m){c.pendingTracks[m]=o[m]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},p.createSourceBuffers=function(o){var c=this.sourceBuffer,m=this.mediaSource;if(!m)throw Error("createSourceBuffers called when mediaSource was null");for(var y in o)if(!c[y]){var _=o[y];if(!_)throw Error("source buffer exists for track "+y+", however track does not");var b=_.levelCodec||_.codec,L=_.container+";codecs="+b;h.logger.log("creating sourceBuffer("+L+")");try{var F=c[y]=m.addSourceBuffer(L);F.addEventListener("updateend",this._onSBUpdateEnd),F.addEventListener("error",this._onSBUpdateError),this.tracks[y]={buffer:F,codec:b,id:_.id,container:_.container,levelCodec:_.levelCodec}}catch(U){h.logger.error("error while trying to add sourceBuffer:"+U.message),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:U,mimeType:L})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},p.onBufferAppending=function(o){this._needsFlush||(this.segments?this.segments.push(o):this.segments=[o],this.doAppending())},p.onBufferEos=function(o){for(var c in this.sourceBuffer)if(!o.type||o.type===c){var m=this.sourceBuffer[c];m&&!m.ended&&(m.ended=!0,h.logger.log(c+" sourceBuffer now EOS"))}this.checkEos()},p.checkEos=function(){var o=this.sourceBuffer,c=this.mediaSource;if(!c||c.readyState!=="open"){this._needsEos=!1;return}for(var m in o){var y=o[m];if(!!y){if(!y.ended)return;if(y.updating){this._needsEos=!0;return}}}h.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{c.endOfStream()}catch{h.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},p.onBufferFlushing=function(o){o.type?this.flushRange.push({start:o.startOffset,end:o.endOffset,type:o.type}):(this.flushRange.push({start:o.startOffset,end:o.endOffset,type:"video"}),this.flushRange.push({start:o.startOffset,end:o.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},p.flushLiveBackBuffer=function(){if(!!this._live){var o=this.config.liveBackBufferLength;if(!(!isFinite(o)||o<0)){if(!this.media){h.logger.error("flushLiveBackBuffer called without attaching media");return}for(var c=this.media.currentTime,m=this.sourceBuffer,y=Object.keys(m),_=c-Math.max(o,this._levelTargetDuration),b=y.length-1;b>=0;b--){var L=y[b],F=m[L];if(F){var U=F.buffered;U.length>0&&_>U.start(0)&&this.removeBufferRange(L,F,0,_)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:_})}}}}},p.onLevelUpdated=function(o){var c=o.details;c.fragments.length>0&&(this._levelDuration=c.totalduration+c.fragments[0].start,this._levelTargetDuration=c.averagetargetduration||c.targetduration||10,this._live=c.live,this.updateMediaElementDuration())},p.updateMediaElementDuration=function(){var o=this.config,c;if(!(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")){for(var m in this.sourceBuffer){var y=this.sourceBuffer[m];if(y&&y.updating===!0)return}c=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration),this._live===!0&&o.liveDurationInfinity===!0?(h.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>c||!Object(d.isFiniteNumber)(c))&&(h.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},p.doFlush=function(){for(;this.flushRange.length;){var o=this.flushRange[0];if(this.flushBuffer(o.start,o.end,o.type))this.flushRange.shift(),this.flushBufferCounter=0;else{this._needsFlush=!0;return}}if(this.flushRange.length===0){this._needsFlush=!1;var c=0,m=this.sourceBuffer;try{for(var y in m){var _=m[y];_&&(c+=_.buffered.length)}}catch{h.logger.error("error while accessing sourceBuffer.buffered")}this.appended=c,this.hls.trigger(u.default.BUFFER_FLUSHED)}},p.doAppending=function(){var o=this.config,c=this.hls,m=this.segments,y=this.sourceBuffer;if(!!Object.keys(y).length){if(!this.media||this.media.error){this.segments=[],h.logger.error("trying to append although a media error occured, flush segment and abort");return}if(!this.appending){var _=m.shift();if(!!_)try{var b=y[_.type];if(!b){this._onSBUpdateEnd();return}if(b.updating){m.unshift(_);return}b.ended=!1,this.parent=_.parent,b.appendBuffer(_.data),this.appendError=0,this.appended++,this.appending=!0}catch(F){h.logger.error("error while trying to append buffer:"+F.message),m.unshift(_);var L={type:l.ErrorTypes.MEDIA_ERROR,parent:_.parent,details:"",fatal:!1};F.code===22?(this.segments=[],L.details=l.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,L.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>o.appendErrorMaxRetry&&(h.logger.log("fail "+o.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],L.fatal=!0)),c.trigger(u.default.ERROR,L)}}}},p.flushBuffer=function(o,c,m){var y=this.sourceBuffer;if(!Object.keys(y).length)return!0;var _="null";if(this.media&&(_=this.media.currentTime.toFixed(3)),h.logger.log("flushBuffer,pos/start/end: "+_+"/"+o+"/"+c),this.flushBufferCounter>=this.appended)return h.logger.warn("abort flushing too many retries"),!0;var b=y[m];if(b){if(b.ended=!1,b.updating)return h.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(m,b,o,c))return this.flushBufferCounter++,!1}return h.logger.log("buffer flushed"),!0},p.removeBufferRange=function(o,c,m,y){try{for(var _=0;_<c.buffered.length;_++){var b=c.buffered.start(_),L=c.buffered.end(_),F=Math.max(b,m),U=Math.min(L,y);if(Math.min(U,L)-F>.5){var X="null";return this.media&&(X=this.media.currentTime.toString()),h.logger.log("sb remove "+o+" ["+F+","+U+"], of ["+b+","+L+"], pos:"+X),c.remove(F,U),!0}}}catch(ne){h.logger.warn("removeBufferRange failed",ne)}return!1},v}(S),Pb=Ob;function Vv(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function Nb(x,v,p){return v&&Vv(x.prototype,v),p&&Vv(x,p),x}function Mb(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var Fb=function(x){Mb(v,x);function v(f){var o;return o=x.call(this,f,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this,o.autoLevelCapping=Number.POSITIVE_INFINITY,o.firstLevel=null,o.levels=[],o.media=null,o.restrictedLevels=[],o.timer=null,o.clientRect=null,o}var p=v.prototype;return p.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},p.onFpsDropLevelCapping=function(o){v.isLevelAllowed(o.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(o.droppedLevel)},p.onMediaAttaching=function(o){this.media=o.media instanceof window.HTMLVideoElement?o.media:null},p.onManifestParsed=function(o){var c=this.hls;this.restrictedLevels=[],this.levels=o.levels,this.firstLevel=o.firstLevel,c.config.capLevelToPlayerSize&&o.video&&this.startCapping()},p.onBufferCodecs=function(o){var c=this.hls;c.config.capLevelToPlayerSize&&o.video&&this.startCapping()},p.onLevelsUpdated=function(o){this.levels=o.levels},p.onMediaDetaching=function(){this.stopCapping()},p.detectPlayerSize=function(){if(this.media){var o=this.levels?this.levels.length:0;if(o){var c=this.hls;c.autoLevelCapping=this.getMaxLevel(o-1),c.autoLevelCapping>this.autoLevelCapping&&c.streamController.nextLevelSwitch(),this.autoLevelCapping=c.autoLevelCapping}}},p.getMaxLevel=function(o){var c=this;if(!this.levels)return-1;var m=this.levels.filter(function(y,_){return v.isLevelAllowed(_,c.restrictedLevels)&&_<=o});return this.clientRect=null,v.getMaxLevelByMediaSize(m,this.mediaWidth,this.mediaHeight)},p.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},p.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},p.getDimensions=function(){if(this.clientRect)return this.clientRect;var o=this.media,c={width:0,height:0};if(o){var m=o.getBoundingClientRect();c.width=m.width,c.height=m.height,!c.width&&!c.height&&(c.width=m.right-m.left||o.width||0,c.height=m.bottom-m.top||o.height||0)}return this.clientRect=c,c},v.isLevelAllowed=function(o,c){return c===void 0&&(c=[]),c.indexOf(o)===-1},v.getMaxLevelByMediaSize=function(o,c,m){if(!o||o&&!o.length)return-1;for(var y=function(U,X){return X?U.width!==X.width||U.height!==X.height:!0},_=o.length-1,b=0;b<o.length;b+=1){var L=o[b];if((L.width>=c||L.height>=m)&&y(L,o[b+1])){_=b;break}}return _},Nb(v,[{key:"mediaWidth",get:function(){return this.getDimensions().width*v.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*v.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var o=1;try{o=window.devicePixelRatio}catch{}return o}}]),v}(S),Ub=Fb;function Bb(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var $b=window,Vb=$b.performance,jb=function(x){Bb(v,x);function v(f){return x.call(this,f,u.default.MEDIA_ATTACHING)||this}var p=v.prototype;return p.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},p.onMediaAttaching=function(o){var c=this.hls.config;if(c.capLevelOnFPSDrop){var m=this.video=o.media instanceof window.HTMLVideoElement?o.media:null;typeof m.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),c.fpsDroppedMonitoringPeriod)}},p.checkFPS=function(o,c,m){var y=Vb.now();if(c){if(this.lastTime){var _=y-this.lastTime,b=m-this.lastDroppedFrames,L=c-this.lastDecodedFrames,F=1e3*b/_,U=this.hls;if(U.trigger(u.default.FPS_DROP,{currentDropped:b,currentDecoded:L,totalDroppedFrames:m}),F>0&&b>U.config.fpsDroppedMonitoringThreshold*L){var X=U.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+X),X>0&&(U.autoLevelCapping===-1||U.autoLevelCapping>=X)&&(X=X-1,U.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:X,droppedLevel:U.currentLevel}),U.autoLevelCapping=X,U.streamController.nextLevelSwitch())}}this.lastTime=y,this.lastDroppedFrames=m,this.lastDecodedFrames=c}},p.checkFPSInterval=function(){var o=this.video;if(o)if(this.isVideoPlaybackQualityAvailable){var c=o.getVideoPlaybackQuality();this.checkFPS(o,c.totalVideoFrames,c.droppedVideoFrames)}else this.checkFPS(o,o.webkitDecodedFrameCount,o.webkitDroppedFrameCount)},v}(S),Gb=jb,Hb=function(){function x(p){p&&p.xhrSetup&&(this.xhrSetup=p.xhrSetup)}var v=x.prototype;return v.destroy=function(){this.abort(),this.loader=null},v.abort=function(){var f=this.loader;f&&f.readyState!==4&&(this.stats.aborted=!0,f.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},v.load=function(f,o,c){this.context=f,this.config=o,this.callbacks=c,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=o.retryDelay,this.loadInternal()},v.loadInternal=function(){var f,o=this.context;f=this.loader=new window.XMLHttpRequest;var c=this.stats;c.tfirst=0,c.loaded=0;var m=this.xhrSetup;try{if(m)try{m(f,o.url)}catch{f.open("GET",o.url,!0),m(f,o.url)}f.readyState||f.open("GET",o.url,!0)}catch(y){this.callbacks.onError({code:f.status,text:y.message},o,f);return}o.rangeEnd&&f.setRequestHeader("Range","bytes="+o.rangeStart+"-"+(o.rangeEnd-1)),f.onreadystatechange=this.readystatechange.bind(this),f.onprogress=this.loadprogress.bind(this),f.responseType=o.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),f.send()},v.readystatechange=function(f){var o=f.currentTarget,c=o.readyState,m=this.stats,y=this.context,_=this.config;if(!m.aborted&&c>=2)if(window.clearTimeout(this.requestTimeout),m.tfirst===0&&(m.tfirst=Math.max(window.performance.now(),m.trequest)),c===4){var b=o.status;if(b>=200&&b<300){m.tload=Math.max(m.tfirst,window.performance.now());var L,F;y.responseType==="arraybuffer"?(L=o.response,F=L.byteLength):(L=o.responseText,F=L.length),m.loaded=m.total=F;var U={url:o.responseURL,data:L};this.callbacks.onSuccess(U,m,y,o)}else m.retry>=_.maxRetry||b>=400&&b<499?(h.logger.error(b+" while loading "+y.url),this.callbacks.onError({code:b,text:o.statusText},y,o)):(h.logger.warn(b+" while loading "+y.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,_.maxRetryDelay),m.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),_.timeout)},v.loadtimeout=function(){h.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},v.loadprogress=function(f){var o=f.currentTarget,c=this.stats;c.loaded=f.loaded,f.lengthComputable&&(c.total=f.total);var m=this.callbacks.onProgress;m&&m(c,this.context,null,o)},x}(),zb=Hb;function jv(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function Kb(x,v,p){return v&&jv(x.prototype,v),p&&jv(x,p),x}function Wb(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var qb=function(x){Wb(v,x);function v(f){var o;return o=x.call(this,f,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this,o._trackId=-1,o._selectDefaultTrack=!0,o.tracks=[],o.trackIdBlacklist=Object.create(null),o.audioGroupId=null,o}var p=v.prototype;return p.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},p.onManifestParsed=function(o){var c=this.tracks=o.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:c}),this._selectAudioGroup(this.hls.nextLoadLevel)},p.onAudioTrackLoaded=function(o){if(o.id>=this.tracks.length){h.logger.warn("Invalid audio track id:",o.id);return}if(h.logger.log("audioTrack "+o.id+" loaded"),this.tracks[o.id].details=o.details,o.details.live&&!this.hasInterval()){var c=o.details.targetduration*1e3;this.setInterval(c)}!o.details.live&&this.hasInterval()&&this.clearInterval()},p.onAudioTrackSwitched=function(o){var c=this.tracks[o.id].groupId;c&&this.audioGroupId!==c&&(this.audioGroupId=c)},p.onLevelLoaded=function(o){this._selectAudioGroup(o.level)},p.onError=function(o){o.type===l.ErrorTypes.NETWORK_ERROR&&(o.fatal&&this.clearInterval(),o.details===l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(h.logger.warn("Network failure on audio-track id:",o.context.id),this._handleLoadError()))},p._setAudioTrack=function(o){if(this._trackId===o&&this.tracks[this._trackId].details){h.logger.debug("Same id as current audio-track passed, and track details available -> no-op");return}if(o<0||o>=this.tracks.length){h.logger.warn("Invalid id passed to audio-track controller");return}var c=this.tracks[o];h.logger.log("Now switching to audio-track index "+o),this.clearInterval(),this._trackId=o;var m=c.url,y=c.type,_=c.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:_,type:y,url:m}),this._loadTrackDetailsIfNeeded(c)},p.doTick=function(){this._updateTrack(this._trackId)},p._selectAudioGroup=function(o){var c=this.hls.levels[o];if(!(!c||!c.audioGroupIds)){var m=c.audioGroupIds[c.urlId];this.audioGroupId!==m&&(this.audioGroupId=m,this._selectInitialAudioTrack())}},p._selectInitialAudioTrack=function(){var o=this,c=this.tracks;if(!!c.length){var m=this.tracks[this._trackId],y=null;if(m&&(y=m.name),this._selectDefaultTrack){var _=c.filter(function(F){return F.default});_.length?c=_:h.logger.warn("No default audio tracks defined")}var b=!1,L=function(){c.forEach(function(U){b||(!o.audioGroupId||U.groupId===o.audioGroupId)&&(!y||y===U.name)&&(o._setAudioTrack(U.id),b=!0)})};L(),b||(y=null,L()),b||(h.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},p._needsTrackLoading=function(o){var c=o.details,m=o.url;return!c||c.live?!!m:!1},p._loadTrackDetailsIfNeeded=function(o){if(this._needsTrackLoading(o)){var c=o.url,m=o.id;h.logger.log("loading audio-track playlist for id: "+m),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:c,id:m})}},p._updateTrack=function(o){if(!(o<0||o>=this.tracks.length)){this.clearInterval(),this._trackId=o,h.logger.log("trying to update audio-track "+o);var c=this.tracks[o];this._loadTrackDetailsIfNeeded(c)}},p._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var o=this._trackId,c=this.tracks[o],m=c.name,y=c.language,_=c.groupId;h.logger.warn("Loading failed on audio track id: "+o+", group-id: "+_+', name/language: "'+m+'" / "'+y+'"');for(var b=o,L=0;L<this.tracks.length;L++)if(!this.trackIdBlacklist[L]){var F=this.tracks[L];if(F.name===m){b=L;break}}if(b===o){h.logger.warn('No fallback audio-track found for name/language: "'+m+'" / "'+y+'"');return}h.logger.log("Attempting audio-track fallback id:",b,"group-id:",this.tracks[b].groupId),this._setAudioTrack(b)},Kb(v,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(o){this._setAudioTrack(o),this._selectDefaultTrack=!1}}]),v}(kn),Yb=qb;function Gv(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function Xb(x,v,p){return v&&Gv(x.prototype,v),p&&Gv(x,p),x}function Qb(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var Jb=window,oo=Jb.performance,Hv=100,Zb=function(x){Qb(v,x);function v(f,o){var c;return c=x.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this,c.fragmentTracker=o,c.config=f.config,c.audioCodecSwap=!1,c._state=ae.STOPPED,c.initPTS=[],c.waitingFragment=null,c.videoTrackCC=null,c.waitingVideoCC=null,c}var p=v.prototype;return p.onInitPtsFound=function(o){var c=o.id,m=o.frag.cc,y=o.initPTS;c==="main"&&(this.initPTS[m]=y,this.videoTrackCC=m,h.logger.log("InitPTS for cc: "+m+" found from main: "+y),this.state===ae.WAITING_INIT_PTS&&this.tick())},p.startLoad=function(o){if(this.tracks){var c=this.lastCurrentTime;this.stopLoad(),this.setInterval(Hv),this.fragLoadError=0,c>0&&o===-1?(h.logger.log("audio:override startPosition with lastCurrentTime @"+c.toFixed(3)),this.state=ae.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:o,this.state=ae.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=o,this.state=ae.STOPPED},p.doTick=function(){var o,c,m,y=this.hls,_=y.config;switch(this.state){case ae.ERROR:case ae.PAUSED:case ae.BUFFER_FLUSHING:break;case ae.STARTING:this.state=ae.WAITING_TRACK,this.loadedmetadata=!1;break;case ae.IDLE:var b=this.tracks;if(!b||!this.media&&(this.startFragRequested||!_.startFragPrefetch))break;if(this.loadedmetadata)o=this.media.currentTime;else if(o=this.nextLoadPosition,o===void 0)break;var L=this.mediaBuffer?this.mediaBuffer:this.media,F=this.videoBuffer?this.videoBuffer:this.media,U=o<_.maxBufferHole?Math.max(Mr,_.maxBufferHole):_.maxBufferHole,X=$.bufferInfo(L,o,U),ne=$.bufferInfo(F,o,U),pe=X.len,Se=X.end,Pe=this.fragPrevious,De=Math.min(_.maxBufferLength,_.maxMaxBufferLength),Ge=Math.max(De,ne.len),qe=this.audioSwitch,ut=this.trackId;if((pe<Ge||qe)&&ut<b.length){if(m=b[ut].details,typeof m=="undefined"){this.state=ae.WAITING_TRACK;break}if(!qe&&this._streamEnded(X,m)){this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),this.state=ae.ENDED;return}var Ut=m.fragments,Yr=Ut.length,ar=Ut[0].start,zn=Ut[Yr-1].start+Ut[Yr-1].duration,Ve;if(qe){if(m.live&&!m.PTSKnown)h.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),Se=0;else if(Se=o,m.PTSKnown&&o<ar)if(X.end>ar||X.nextStart)h.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=ar+.05;else return}if(m.initSegment&&!m.initSegment.data)Ve=m.initSegment;else if(Se<=ar){if(Ve=Ut[0],this.videoTrackCC!==null&&Ve.cc!==this.videoTrackCC&&(Ve=Ie(Ut,this.videoTrackCC)),m.live&&Ve.loadIdx&&Ve.loadIdx===this.fragLoadIdx){var rt=X.nextStart?X.nextStart:ar;h.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(rt+.05)),this.media.currentTime=rt+.05;return}}else{var jt,zs=_.maxFragLookUpTolerance,Ks=Pe?Ut[Pe.sn-Ut[0].sn+1]:void 0;Se<zn?(Se>zn-zs&&(zs=0),Ks&&!bt(Se,zs,Ks)?jt=Ks:jt=Q.search(Ut,function(WC){return bt(Se,zs,WC)})):jt=Ut[Yr-1],jt&&(Ve=jt,ar=jt.start,Pe&&Ve.level===Pe.level&&Ve.sn===Pe.sn&&(Ve.sn<m.endSN?(Ve=Ut[Ve.sn+1-m.startSN],this.fragmentTracker.getState(Ve)!==lt.OK&&h.logger.log("SN just loaded, load next one: "+Ve.sn)):Ve=null))}Ve&&(Ve.encrypted?(h.logger.log("Loading key for "+Ve.sn+" of ["+m.startSN+" ,"+m.endSN+"],track "+ut),this.state=ae.KEY_LOADING,y.trigger(u.default.KEY_LOADING,{frag:Ve})):(this.fragCurrent=Ve,(qe||this.fragmentTracker.getState(Ve)===lt.NOT_LOADED)&&(h.logger.log("Loading "+Ve.sn+", cc: "+Ve.cc+" of ["+m.startSN+" ,"+m.endSN+"],track "+ut+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+o+", bufferEnd: "+Se.toFixed(3)),Ve.sn!=="initSegment"&&(this.startFragRequested=!0),Object(d.isFiniteNumber)(Ve.sn)&&(this.nextLoadPosition=Ve.start+Ve.duration),y.trigger(u.default.FRAG_LOADING,{frag:Ve}),this.state=ae.FRAG_LOADING)))}break;case ae.WAITING_TRACK:c=this.tracks[this.trackId],c&&c.details&&(this.state=ae.IDLE);break;case ae.FRAG_LOADING_WAITING_RETRY:var lo=oo.now(),mu=this.retryDate;L=this.media;var zC=L&&L.seeking;(!mu||lo>=mu||zC)&&(h.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=ae.IDLE);break;case ae.WAITING_INIT_PTS:var uo=this.waitingFragment;if(uo){var Td=uo.frag.cc;if(this.initPTS[Td]!==void 0)this.waitingFragment=null,this.state=ae.FRAG_LOADING,this.onFragLoaded(uo);else if(this.videoTrackCC!==this.waitingVideoCC)h.logger.log("Waiting fragment cc ("+Td+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m0=$.bufferInfo(this.mediaBuffer,this.media.currentTime,_.maxBufferHole),KC=bt(m0.end,_.maxFragLookUpTolerance,uo.frag);KC<0&&(h.logger.log("Waiting fragment cc ("+Td+") @ "+uo.frag.start+" cancelled because another fragment at "+m0.end+" is needed"),this.clearWaitingFragment())}}else this.state=ae.IDLE;break}},p.clearWaitingFragment=function(){var o=this.waitingFragment;o&&(this.fragmentTracker.removeFragment(o.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=ae.IDLE)},p.onMediaAttached=function(o){var c=this.media=this.mediaBuffer=o.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),c.addEventListener("seeking",this.onvseeking),c.addEventListener("ended",this.onvended);var m=this.config;this.tracks&&m.autoStartLoad&&this.startLoad(m.startPosition)},p.onMediaDetaching=function(){var o=this.media;o&&o.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),o&&(o.removeEventListener("seeking",this.onvseeking),o.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},p.onAudioTracksUpdated=function(o){h.logger.log("audio tracks updated"),this.tracks=o.audioTracks},p.onAudioTrackSwitching=function(o){var c=!!o.url;this.trackId=o.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=ae.PAUSED,c?this.setInterval(Hv):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),c&&(this.audioSwitch=!0,this.state=ae.IDLE),this.tick()},p.onAudioTrackLoaded=function(o){var c=o.details,m=o.id,y=this.tracks[m],_=y.details,b=c.totalduration,L=0;if(h.logger.log("track "+m+" loaded ["+c.startSN+","+c.endSN+"],duration:"+b),c.live||_&&_.live?_&&c.fragments.length>0?(de(_,c),L=c.fragments[0].start,c.PTSKnown?h.logger.log("live audio playlist sliding:"+L.toFixed(3)):h.logger.log("live audio playlist - outdated PTS, unknown sliding")):(c.PTSKnown=!1,h.logger.log("live audio playlist - first load, unknown sliding")):c.PTSKnown=!1,y.details=c,!this.startFragRequested){if(this.startPosition===-1){var F=c.startTimeOffset;Object(d.isFiniteNumber)(F)?(h.logger.log("start time offset found in playlist, adjust startPosition to "+F),this.startPosition=F):c.live?(this.startPosition=this.computeLivePosition(L,c),h.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ae.WAITING_TRACK&&(this.state=ae.IDLE),this.tick()},p.onKeyLoaded=function(){this.state===ae.KEY_LOADING&&(this.state=ae.IDLE,this.tick())},p.onFragLoaded=function(o){var c=this.fragCurrent,m=o.frag;if(this.state===ae.FRAG_LOADING&&c&&m.type==="audio"&&m.level===c.level&&m.sn===c.sn){var y=this.tracks[this.trackId],_=y.details,b=_.totalduration,L=c.level,F=c.sn,U=c.cc,X=this.config.defaultAudioCodec||y.audioCodec||"mp4a.40.2",ne=this.stats=o.stats;if(F==="initSegment")this.state=ae.IDLE,ne.tparsed=ne.tbuffered=oo.now(),_.initSegment.data=o.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:ne,frag:c,id:"audio"}),this.tick();else{this.state=ae.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new q(this.hls,"audio"));var pe=this.initPTS[U],Se=_.initSegment?_.initSegment.data:[];if(pe!==void 0){this.pendingBuffering=!0,h.logger.log("Demuxing "+F+" of ["+_.startSN+" ,"+_.endSN+"],track "+L);var Pe=!1;this.demuxer.push(o.payload,Se,X,null,c,b,Pe,pe)}else h.logger.log("Unknown video PTS for cc "+U+", waiting for video PTS before demuxing audio frag "+F+" of ["+_.startSN+" ,"+_.endSN+"],track "+L),this.waitingFragment=o,this.waitingVideoCC=this.videoTrackCC,this.state=ae.WAITING_INIT_PTS}}this.fragLoadError=0},p.onFragParsingInitSegment=function(o){var c=this.fragCurrent,m=o.frag;if(c&&o.id==="audio"&&m.sn===c.sn&&m.level===c.level&&this.state===ae.PARSING){var y=o.tracks,_;if(y.video&&delete y.video,_=y.audio,_){_.levelCodec=_.codec,_.id=o.id,this.hls.trigger(u.default.BUFFER_CODECS,y),h.logger.log("audio track:audio,container:"+_.container+",codecs[level/parsed]=["+_.levelCodec+"/"+_.codec+"]");var b=_.initSegment;if(b){var L={type:"audio",data:b,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[L]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,L))}this.tick()}}},p.onFragParsingData=function(o){var c=this,m=this.fragCurrent,y=o.frag;if(m&&o.id==="audio"&&o.type==="audio"&&y.sn===m.sn&&y.level===m.level&&this.state===ae.PARSING){var _=this.trackId,b=this.tracks[_],L=this.hls;Object(d.isFiniteNumber)(o.endPTS)||(o.endPTS=o.startPTS+m.duration,o.endDTS=o.startDTS+m.duration),m.addElementaryStream(B.AUDIO),h.logger.log("parsed "+o.type+",PTS:["+o.startPTS.toFixed(3)+","+o.endPTS.toFixed(3)+"],DTS:["+o.startDTS.toFixed(3)+"/"+o.endDTS.toFixed(3)+"],nb:"+o.nb),te(b.details,m,o.startPTS,o.endPTS);var F=this.media,U=!1;if(this.audioSwitch)if(F&&F.readyState){var X=F.currentTime;h.logger.log("switching audio track : currentTime:"+X),X>=o.startPTS&&(h.logger.log("switching audio track : flushing all audio"),this.state=ae.BUFFER_FLUSHING,L.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),U=!0,this.audioSwitch=!1,L.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:_}))}else this.audioSwitch=!1,L.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:_});var ne=this.pendingData;if(!ne){h.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),L.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([o.data1,o.data2].forEach(function(pe){pe&&pe.length&&ne.push({type:o.type,data:pe,parent:"audio",content:"data"})}),!U&&ne.length&&(ne.forEach(function(pe){c.state===ae.PARSING&&(c.pendingBuffering=!0,c.hls.trigger(u.default.BUFFER_APPENDING,pe))}),this.pendingData=[],this.appended=!0)),this.tick()}},p.onFragParsed=function(o){var c=this.fragCurrent,m=o.frag;c&&o.id==="audio"&&m.sn===c.sn&&m.level===c.level&&this.state===ae.PARSING&&(this.stats.tparsed=oo.now(),this.state=ae.PARSED,this._checkAppendedParsed())},p.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},p.onBufferCreated=function(o){var c=o.tracks.audio;c&&(this.mediaBuffer=c.buffer,this.loadedmetadata=!0),o.tracks.video&&(this.videoBuffer=o.tracks.video.buffer)},p.onBufferAppended=function(o){if(o.parent==="audio"){var c=this.state;(c===ae.PARSING||c===ae.PARSED)&&(this.pendingBuffering=o.pending>0,this._checkAppendedParsed())}},p._checkAppendedParsed=function(){if(this.state===ae.PARSED&&(!this.appended||!this.pendingBuffering)){var o=this.fragCurrent,c=this.stats,m=this.hls;if(o){this.fragPrevious=o,c.tbuffered=oo.now(),m.trigger(u.default.FRAG_BUFFERED,{stats:c,frag:o,id:"audio"});var y=this.mediaBuffer?this.mediaBuffer:this.media;y&&h.logger.log("audio buffered : "+me.toString(y.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,m.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ae.IDLE}this.tick()}},p.onError=function(o){var c=o.frag;if(!(c&&c.type!=="audio"))switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:var m=o.frag;if(m&&m.type!=="audio")break;if(!o.fatal){var y=this.fragLoadError;y?y++:y=1;var _=this.config;if(y<=_.fragLoadingMaxRetry){this.fragLoadError=y;var b=Math.min(Math.pow(2,y-1)*_.fragLoadingRetryDelay,_.fragLoadingMaxRetryTimeout);h.logger.warn("AudioStreamController: frag loading failed, retry in "+b+" ms"),this.retryDate=oo.now()+b,this.state=ae.FRAG_LOADING_WAITING_RETRY}else h.logger.error("AudioStreamController: "+o.details+" reaches max retry, redispatch as fatal ..."),o.fatal=!0,this.state=ae.ERROR}break;case l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==ae.ERROR&&(this.state=o.fatal?ae.ERROR:ae.IDLE,h.logger.warn("AudioStreamController: "+o.details+" while loading frag, now switching to "+this.state+" state ..."));break;case l.ErrorDetails.BUFFER_FULL_ERROR:if(o.parent==="audio"&&(this.state===ae.PARSING||this.state===ae.PARSED)){var L=this.mediaBuffer,F=this.media.currentTime,U=L&&$.isBuffered(L,F)&&$.isBuffered(L,F+.5);if(U){var X=this.config;X.maxMaxBufferLength>=X.maxBufferLength&&(X.maxMaxBufferLength/=2,h.logger.warn("AudioStreamController: reduce max buffer length to "+X.maxMaxBufferLength+"s")),this.state=ae.IDLE}else h.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=ae.BUFFER_FLUSHING,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},p.onBufferFlushed=function(){var o=this,c=this.pendingData;c&&c.length?(h.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),c.forEach(function(m){o.hls.trigger(u.default.BUFFER_APPENDING,m)}),this.appended=!0,this.pendingData=[],this.state=ae.PARSED):(this.state=ae.IDLE,this.fragPrevious=null,this.tick())},Xb(v,[{key:"state",set:function(o){if(this.state!==o){var c=this.state;this._state=o,h.logger.log("audio stream:"+c+"->"+o)}},get:function(){return this._state}}]),v}(br),eC=Zb,zv=function(){if(typeof window!="undefined"&&window.VTTCue)return window.VTTCue;var x="auto",v={"":!0,lr:!0,rl:!0},p={start:!0,middle:!0,end:!0,left:!0,right:!0};function f(y){if(typeof y!="string")return!1;var _=v[y.toLowerCase()];return _?y.toLowerCase():!1}function o(y){if(typeof y!="string")return!1;var _=p[y.toLowerCase()];return _?y.toLowerCase():!1}function c(y){for(var _=1;_<arguments.length;_++){var b=arguments[_];for(var L in b)y[L]=b[L]}return y}function m(y,_,b){var L=this,F={};F.enumerable=!0,L.hasBeenReset=!1;var U="",X=!1,ne=y,pe=_,Se=b,Pe=null,De="",Ge=!0,qe="auto",ut="start",Ut=50,Yr="middle",ar=50,zn="middle";Object.defineProperty(L,"id",c({},F,{get:function(){return U},set:function(rt){U=""+rt}})),Object.defineProperty(L,"pauseOnExit",c({},F,{get:function(){return X},set:function(rt){X=!!rt}})),Object.defineProperty(L,"startTime",c({},F,{get:function(){return ne},set:function(rt){if(typeof rt!="number")throw new TypeError("Start time must be set to a number.");ne=rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"endTime",c({},F,{get:function(){return pe},set:function(rt){if(typeof rt!="number")throw new TypeError("End time must be set to a number.");pe=rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"text",c({},F,{get:function(){return Se},set:function(rt){Se=""+rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"region",c({},F,{get:function(){return Pe},set:function(rt){Pe=rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"vertical",c({},F,{get:function(){return De},set:function(rt){var jt=f(rt);if(jt===!1)throw new SyntaxError("An invalid or illegal string was specified.");De=jt,this.hasBeenReset=!0}})),Object.defineProperty(L,"snapToLines",c({},F,{get:function(){return Ge},set:function(rt){Ge=!!rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"line",c({},F,{get:function(){return qe},set:function(rt){if(typeof rt!="number"&&rt!==x)throw new SyntaxError("An invalid number or illegal string was specified.");qe=rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"lineAlign",c({},F,{get:function(){return ut},set:function(rt){var jt=o(rt);if(!jt)throw new SyntaxError("An invalid or illegal string was specified.");ut=jt,this.hasBeenReset=!0}})),Object.defineProperty(L,"position",c({},F,{get:function(){return Ut},set:function(rt){if(rt<0||rt>100)throw new Error("Position must be between 0 and 100.");Ut=rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"positionAlign",c({},F,{get:function(){return Yr},set:function(rt){var jt=o(rt);if(!jt)throw new SyntaxError("An invalid or illegal string was specified.");Yr=jt,this.hasBeenReset=!0}})),Object.defineProperty(L,"size",c({},F,{get:function(){return ar},set:function(rt){if(rt<0||rt>100)throw new Error("Size must be between 0 and 100.");ar=rt,this.hasBeenReset=!0}})),Object.defineProperty(L,"align",c({},F,{get:function(){return zn},set:function(rt){var jt=o(rt);if(!jt)throw new SyntaxError("An invalid or illegal string was specified.");zn=jt,this.hasBeenReset=!0}})),L.displayState=void 0}return m.prototype.getCueAsHTML=function(){var y=window.WebVTT;return y.convertCueToDOMTree(window,this.text)},m}(),tC=function(){return{decode:function(p){if(!p)return"";if(typeof p!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(p))}}};function Kv(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new tC,this.regionList=[]}function rC(x){function v(f,o,c,m){return(f|0)*3600+(o|0)*60+(c|0)+(m|0)/1e3}var p=x.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return p?p[3]?v(p[1],p[2],p[3].replace(":",""),p[4]):p[1]>59?v(p[1],p[2],0,p[4]):v(0,p[1],p[2],p[4]):null}function Wv(){this.values=Object.create(null)}Wv.prototype={set:function(v,p){!this.get(v)&&p!==""&&(this.values[v]=p)},get:function(v,p,f){return f?this.has(v)?this.values[v]:p[f]:this.has(v)?this.values[v]:p},has:function(v){return v in this.values},alt:function(v,p,f){for(var o=0;o<f.length;++o)if(p===f[o]){this.set(v,p);break}},integer:function(v,p){/^-?\d+$/.test(p)&&this.set(v,parseInt(p,10))},percent:function(v,p){return p.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(p=parseFloat(p),p>=0&&p<=100)?(this.set(v,p),!0):!1}};function qv(x,v,p,f){var o=f?x.split(f):[x];for(var c in o)if(typeof o[c]=="string"){var m=o[c].split(p);if(m.length===2){var y=m[0],_=m[1];v(y,_)}}}var vd=new zv(0,0,0),du=vd.align==="middle"?"middle":"center";function nC(x,v,p){var f=x;function o(){var y=rC(x);if(y===null)throw new Error("Malformed timestamp: "+f);return x=x.replace(/^[^\sa-zA-Z-]+/,""),y}function c(y,_){var b=new Wv;qv(y,function(U,X){switch(U){case"region":for(var ne=p.length-1;ne>=0;ne--)if(p[ne].id===X){b.set(U,p[ne].region);break}break;case"vertical":b.alt(U,X,["rl","lr"]);break;case"line":var pe=X.split(","),Se=pe[0];b.integer(U,Se),b.percent(U,Se)&&b.set("snapToLines",!1),b.alt(U,Se,["auto"]),pe.length===2&&b.alt("lineAlign",pe[1],["start",du,"end"]);break;case"position":pe=X.split(","),b.percent(U,pe[0]),pe.length===2&&b.alt("positionAlign",pe[1],["start",du,"end","line-left","line-right","auto"]);break;case"size":b.percent(U,X);break;case"align":b.alt(U,X,["start",du,"end","left","right"]);break}},/:/,/\s/),_.region=b.get("region",null),_.vertical=b.get("vertical","");var L=b.get("line","auto");L==="auto"&&vd.line===-1&&(L=-1),_.line=L,_.lineAlign=b.get("lineAlign","start"),_.snapToLines=b.get("snapToLines",!0),_.size=b.get("size",100),_.align=b.get("align",du);var F=b.get("position","auto");F==="auto"&&vd.position===50&&(F=_.align==="start"||_.align==="left"?0:_.align==="end"||_.align==="right"?100:50),_.position=F}function m(){x=x.replace(/^\s+/,"")}if(m(),v.startTime=o(),m(),x.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+f);x=x.substr(3),m(),v.endTime=o(),m(),c(x,v)}function Yv(x){return x.replace(/<br(?: \/)?>/gi,`
`)}Kv.prototype={parse:function(v){var p=this;v&&(p.buffer+=p.decoder.decode(v,{stream:!0}));function f(){var b=p.buffer,L=0;for(b=Yv(b);L<b.length&&b[L]!=="\r"&&b[L]!==`
`;)++L;var F=b.substr(0,L);return b[L]==="\r"&&++L,b[L]===`
`&&++L,p.buffer=b.substr(L),F}function o(b){qv(b,function(L,F){},/:/)}try{var c;if(p.state==="INITIAL"){if(!/\r\n|\n/.test(p.buffer))return this;c=f();var m=c.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!m||!m[0])throw new Error("Malformed WebVTT signature.");p.state="HEADER"}for(var y=!1;p.buffer;){if(!/\r\n|\n/.test(p.buffer))return this;switch(y?y=!1:c=f(),p.state){case"HEADER":/:/.test(c)?o(c):c||(p.state="ID");continue;case"NOTE":c||(p.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){p.state="NOTE";break}if(!c)continue;if(p.cue=new zv(0,0,""),p.state="CUE",c.indexOf("-->")===-1){p.cue.id=c;continue}case"CUE":try{nC(c,p.cue,p.regionList)}catch{p.cue=null,p.state="BADCUE";continue}p.state="CUETEXT";continue;case"CUETEXT":var _=c.indexOf("-->")!==-1;if(!c||_&&(y=!0)){p.oncue&&p.oncue(p.cue),p.cue=null,p.state="ID";continue}p.cue.text&&(p.cue.text+=`
`),p.cue.text+=c;continue;case"BADCUE":c||(p.state="ID");continue}}}catch{p.state==="CUETEXT"&&p.cue&&p.oncue&&p.oncue(p.cue),p.cue=null,p.state=p.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var v=this;try{if(v.buffer+=v.decoder.decode(),(v.cue||v.state==="HEADER")&&(v.buffer+=`

`,v.parse()),v.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(p){throw p}return v.onflush&&v.onflush(),this}};var iC=Kv;function sC(x,v,p,f){for(var o=[],c,m,y,_,b,L=window.VTTCue||TextTrackCue,F=0;F<f.rows.length;F++)if(c=f.rows[F],y=!0,_=0,b="",!c.isEmpty()){for(var U=0;U<c.chars.length;U++)c.chars[U].uchar.match(/\s/)&&y?_++:(b+=c.chars[U].uchar,y=!1);c.cueStartTime=v,v===p&&(p+=1e-4),m=new L(v,p,Yv(b.trim())),_>=16?_--:_++,navigator.userAgent.match(/Firefox\//)?m.line=F+1:m.line=F>7?F-2:F+1,m.align="left",m.position=Math.max(0,Math.min(100,100*(_/32))),o.push(m),x&&x.addCue(m)}return o}var Xv={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Qv=function(v){var p=v;return Xv.hasOwnProperty(v)&&(p=Xv[v]),String.fromCharCode(p)},Sn=15,Hn=100,aC={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},oC={17:2,18:4,21:6,22:8,23:10,19:13,20:15},lC={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},uC={25:2,26:4,29:6,30:8,31:10,27:13,28:15},cC=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],at;(function(x){x[x.ERROR=0]="ERROR",x[x.TEXT=1]="TEXT",x[x.WARNING=2]="WARNING",x[x.INFO=2]="INFO",x[x.DEBUG=3]="DEBUG",x[x.DATA=3]="DATA"})(at||(at={}));var fC=function(){function x(){this.time=null,this.verboseLevel=at.ERROR}var v=x.prototype;return v.log=function(f,o){this.verboseLevel>=f&&h.logger.log(this.time+" ["+f+"] "+o)},x}(),es=function(v){for(var p=[],f=0;f<v.length;f++)p.push(v[f].toString(16));return p},Jv=function(){function x(p,f,o,c,m){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=p||"white",this.underline=f||!1,this.italics=o||!1,this.background=c||"black",this.flash=m||!1}var v=x.prototype;return v.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},v.setStyles=function(f){for(var o=["foreground","underline","italics","background","flash"],c=0;c<o.length;c++){var m=o[c];f.hasOwnProperty(m)&&(this[m]=f[m])}},v.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},v.equals=function(f){return this.foreground===f.foreground&&this.underline===f.underline&&this.italics===f.italics&&this.background===f.background&&this.flash===f.flash},v.copy=function(f){this.foreground=f.foreground,this.underline=f.underline,this.italics=f.italics,this.background=f.background,this.flash=f.flash},v.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},x}(),dC=function(){function x(p,f,o,c,m,y){this.uchar=void 0,this.penState=void 0,this.uchar=p||" ",this.penState=new Jv(f,o,c,m,y)}var v=x.prototype;return v.reset=function(){this.uchar=" ",this.penState.reset()},v.setChar=function(f,o){this.uchar=f,this.penState.copy(o)},v.setPenState=function(f){this.penState.copy(f)},v.equals=function(f){return this.uchar===f.uchar&&this.penState.equals(f.penState)},v.copy=function(f){this.uchar=f.uchar,this.penState.copy(f.penState)},v.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},x}(),hC=function(){function x(p){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var f=0;f<Hn;f++)this.chars.push(new dC);this.logger=p,this.pos=0,this.currPenState=new Jv}var v=x.prototype;return v.equals=function(f){for(var o=!0,c=0;c<Hn;c++)if(!this.chars[c].equals(f.chars[c])){o=!1;break}return o},v.copy=function(f){for(var o=0;o<Hn;o++)this.chars[o].copy(f.chars[o])},v.isEmpty=function(){for(var f=!0,o=0;o<Hn;o++)if(!this.chars[o].isEmpty()){f=!1;break}return f},v.setCursor=function(f){this.pos!==f&&(this.pos=f),this.pos<0?(this.logger.log(at.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Hn&&(this.logger.log(at.DEBUG,"Too large cursor position "+this.pos),this.pos=Hn)},v.moveCursor=function(f){var o=this.pos+f;if(f>1)for(var c=this.pos+1;c<o+1;c++)this.chars[c].setPenState(this.currPenState);this.setCursor(o)},v.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},v.insertChar=function(f){f>=144&&this.backSpace();var o=Qv(f);if(this.pos>=Hn){this.logger.log(at.ERROR,"Cannot insert "+f.toString(16)+" ("+o+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(o,this.currPenState),this.moveCursor(1)},v.clearFromPos=function(f){var o;for(o=f;o<Hn;o++)this.chars[o].reset()},v.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},v.clearToEndOfRow=function(){this.clearFromPos(this.pos)},v.getTextString=function(){for(var f=[],o=!0,c=0;c<Hn;c++){var m=this.chars[c].uchar;m!==" "&&(o=!1),f.push(m)}return o?"":f.join("")},v.setPenStyles=function(f){this.currPenState.setStyles(f);var o=this.chars[this.pos];o.setPenState(this.currPenState)},x}(),yd=function(){function x(p){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var f=0;f<Sn;f++)this.rows.push(new hC(p));this.logger=p,this.currRow=Sn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var v=x.prototype;return v.reset=function(){for(var f=0;f<Sn;f++)this.rows[f].clear();this.currRow=Sn-1},v.equals=function(f){for(var o=!0,c=0;c<Sn;c++)if(!this.rows[c].equals(f.rows[c])){o=!1;break}return o},v.copy=function(f){for(var o=0;o<Sn;o++)this.rows[o].copy(f.rows[o])},v.isEmpty=function(){for(var f=!0,o=0;o<Sn;o++)if(!this.rows[o].isEmpty()){f=!1;break}return f},v.backSpace=function(){var f=this.rows[this.currRow];f.backSpace()},v.clearToEndOfRow=function(){var f=this.rows[this.currRow];f.clearToEndOfRow()},v.insertChar=function(f){var o=this.rows[this.currRow];o.insertChar(f)},v.setPen=function(f){var o=this.rows[this.currRow];o.setPenStyles(f)},v.moveCursor=function(f){var o=this.rows[this.currRow];o.moveCursor(f)},v.setCursor=function(f){this.logger.log(at.INFO,"setCursor: "+f);var o=this.rows[this.currRow];o.setCursor(f)},v.setPAC=function(f){this.logger.log(at.INFO,"pacData = "+JSON.stringify(f));var o=f.row-1;if(this.nrRollUpRows&&o<this.nrRollUpRows-1&&(o=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==o){for(var c=0;c<Sn;c++)this.rows[c].clear();var m=this.currRow+1-this.nrRollUpRows,y=this.lastOutputScreen;if(y){var _=y.rows[m].cueStartTime,b=this.logger.time;if(_&&b!==null&&_<b)for(var L=0;L<this.nrRollUpRows;L++)this.rows[o-this.nrRollUpRows+L+1].copy(y.rows[m+L])}}this.currRow=o;var F=this.rows[this.currRow];if(f.indent!==null){var U=f.indent,X=Math.max(U-1,0);F.setCursor(f.indent),f.color=F.chars[X].penState.foreground}var ne={foreground:f.color,underline:f.underline,italics:f.italics,background:"black",flash:!1};this.setPen(ne)},v.setBkgData=function(f){this.logger.log(at.INFO,"bkgData = "+JSON.stringify(f)),this.backSpace(),this.setPen(f),this.insertChar(32)},v.setRollUpRows=function(f){this.nrRollUpRows=f},v.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(at.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(at.TEXT,this.getDisplayText());var f=this.currRow+1-this.nrRollUpRows,o=this.rows.splice(f,1)[0];o.clear(),this.rows.splice(this.currRow,0,o),this.logger.log(at.INFO,"Rolling up")},v.getDisplayText=function(f){f=f||!1;for(var o=[],c="",m=-1,y=0;y<Sn;y++){var _=this.rows[y].getTextString();_&&(m=y+1,f?o.push("Row "+m+": '"+_+"'"):o.push(_.trim()))}return o.length>0&&(f?c="["+o.join(" | ")+"]":c=o.join(`
`)),c},v.getTextAndFormat=function(){return this.rows},x}(),Zv=function(){function x(p,f,o){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=p,this.outputFilter=f,this.mode=null,this.verbose=0,this.displayedMemory=new yd(o),this.nonDisplayedMemory=new yd(o),this.lastOutputScreen=new yd(o),this.currRollUpRow=this.displayedMemory.rows[Sn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=o}var v=x.prototype;return v.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Sn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},v.getHandler=function(){return this.outputFilter},v.setHandler=function(f){this.outputFilter=f},v.setPAC=function(f){this.writeScreen.setPAC(f)},v.setBkgData=function(f){this.writeScreen.setBkgData(f)},v.setMode=function(f){f!==this.mode&&(this.mode=f,this.logger.log(at.INFO,"MODE="+f),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=f)},v.insertChars=function(f){for(var o=0;o<f.length;o++)this.writeScreen.insertChar(f[o]);var c=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(at.INFO,c+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(at.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},v.ccRCL=function(){this.logger.log(at.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},v.ccBS=function(){this.logger.log(at.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},v.ccAOF=function(){},v.ccAON=function(){},v.ccDER=function(){this.logger.log(at.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},v.ccRU=function(f){this.logger.log(at.INFO,"RU("+f+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(f)},v.ccFON=function(){this.logger.log(at.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},v.ccRDC=function(){this.logger.log(at.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},v.ccTR=function(){this.logger.log(at.INFO,"TR"),this.setMode("MODE_TEXT")},v.ccRTD=function(){this.logger.log(at.INFO,"RTD"),this.setMode("MODE_TEXT")},v.ccEDM=function(){this.logger.log(at.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},v.ccCR=function(){this.logger.log(at.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},v.ccENM=function(){this.logger.log(at.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},v.ccEOC=function(){if(this.logger.log(at.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var f=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=f,this.writeScreen=this.nonDisplayedMemory,this.logger.log(at.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},v.ccTO=function(f){this.logger.log(at.INFO,"TO("+f+") - Tab Offset"),this.writeScreen.moveCursor(f)},v.ccMIDROW=function(f){var o={flash:!1};if(o.underline=f%2===1,o.italics=f>=46,o.italics)o.foreground="white";else{var c=Math.floor(f/2)-16,m=["white","green","blue","cyan","red","yellow","magenta"];o.foreground=m[c]}this.logger.log(at.INFO,"MIDROW: "+JSON.stringify(o)),this.writeScreen.setPen(o)},v.outputDataUpdate=function(f){f===void 0&&(f=!1);var o=this.logger.time;o!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=o:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,o,this.lastOutputScreen),f&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:o),this.lastOutputScreen.copy(this.displayedMemory))},v.cueSplitAtTime=function(f){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.displayedMemory),this.cueStartTime=f))},x}(),pC=function(){function x(p,f,o){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var c=new fC;this.channels=[null,new Zv(p,f,c),new Zv(p+1,o,c)],this.cmdHistory=t0(),this.logger=c}var v=x.prototype;return v.getHandler=function(f){return this.channels[f].getHandler()},v.setHandler=function(f,o){this.channels[f].setHandler(o)},v.addData=function(f,o){var c,m,y,_=!1;this.logger.time=f;for(var b=0;b<o.length;b+=2)if(m=o[b]&127,y=o[b+1]&127,!(m===0&&y===0)){if(this.logger.log(at.DATA,"["+es([o[b],o[b+1]])+"] -> ("+es([m,y])+")"),c=this.parseCmd(m,y),c||(c=this.parseMidrow(m,y)),c||(c=this.parsePAC(m,y)),c||(c=this.parseBackgroundAttributes(m,y)),!c&&(_=this.parseChars(m,y),_)){var L=this.currentChannel;if(L&&L>0){var F=this.channels[L];F.insertChars(_)}else this.logger.log(at.WARNING,"No channel found yet. TEXT-MODE?")}!c&&!_&&this.logger.log(at.WARNING,"Couldn't parse cleaned data "+es([m,y])+" orig: "+es([o[b],o[b+1]]))}},v.parseCmd=function(f,o){var c=this.cmdHistory,m=(f===20||f===28||f===21||f===29)&&o>=32&&o<=47,y=(f===23||f===31)&&o>=33&&o<=35;if(!(m||y))return!1;if(e0(f,o,c))return Gs(null,null,c),this.logger.log(at.DEBUG,"Repeated command ("+es([f,o])+") is dropped"),!0;var _=f===20||f===21||f===23?1:2,b=this.channels[_];return f===20||f===21||f===28||f===29?o===32?b.ccRCL():o===33?b.ccBS():o===34?b.ccAOF():o===35?b.ccAON():o===36?b.ccDER():o===37?b.ccRU(2):o===38?b.ccRU(3):o===39?b.ccRU(4):o===40?b.ccFON():o===41?b.ccRDC():o===42?b.ccTR():o===43?b.ccRTD():o===44?b.ccEDM():o===45?b.ccCR():o===46?b.ccENM():o===47&&b.ccEOC():b.ccTO(o-32),Gs(f,o,c),this.currentChannel=_,!0},v.parseMidrow=function(f,o){var c=0;if((f===17||f===25)&&o>=32&&o<=47){if(f===17?c=1:c=2,c!==this.currentChannel)return this.logger.log(at.ERROR,"Mismatch channel in midrow parsing"),!1;var m=this.channels[c];return m?(m.ccMIDROW(o),this.logger.log(at.DEBUG,"MIDROW ("+es([f,o])+")"),!0):!1}return!1},v.parsePAC=function(f,o){var c,m=this.cmdHistory,y=(f>=17&&f<=23||f>=25&&f<=31)&&o>=64&&o<=127,_=(f===16||f===24)&&o>=64&&o<=95;if(!(y||_))return!1;if(e0(f,o,m))return Gs(null,null,m),!0;var b=f<=23?1:2;o>=64&&o<=95?c=b===1?aC[f]:lC[f]:c=b===1?oC[f]:uC[f];var L=this.channels[b];return L?(L.setPAC(this.interpretPAC(c,o)),Gs(f,o,m),this.currentChannel=b,!0):!1},v.interpretPAC=function(f,o){var c=o,m={color:null,italics:!1,indent:null,underline:!1,row:f};return o>95?c=o-96:c=o-64,m.underline=(c&1)===1,c<=13?m.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(c/2)]:c<=15?(m.italics=!0,m.color="white"):m.indent=Math.floor((c-16)/2)*4,m},v.parseChars=function(f,o){var c,m=null,y=null;if(f>=25?(c=2,y=f-8):(c=1,y=f),y>=17&&y<=19){var _=o;y===17?_=o+80:y===18?_=o+112:_=o+144,this.logger.log(at.INFO,"Special char '"+Qv(_)+"' in channel "+c),m=[_]}else f>=32&&f<=127&&(m=o===0?[f]:[f,o]);if(m){var b=es(m);this.logger.log(at.DEBUG,"Char codes =  "+b.join(",")),Gs(f,o,this.cmdHistory)}return m},v.parseBackgroundAttributes=function(f,o){var c=(f===16||f===24)&&o>=32&&o<=47,m=(f===23||f===31)&&o>=45&&o<=47;if(!(c||m))return!1;var y,_={};f===16||f===24?(y=Math.floor((o-32)/2),_.background=cC[y],o%2===1&&(_.background=_.background+"_semi")):o===45?_.background="transparent":(_.foreground="black",o===47&&(_.underline=!0));var b=f<=23?1:2,L=this.channels[b];return L.setBkgData(_),Gs(f,o,this.cmdHistory),!0},v.reset=function(){for(var f=0;f<Object.keys(this.channels).length;f++){var o=this.channels[f];o&&o.reset()}this.cmdHistory=t0()},v.cueSplitAtTime=function(f){for(var o=0;o<this.channels.length;o++){var c=this.channels[o];c&&c.cueSplitAtTime(f)}},x}();function Gs(x,v,p){p.a=x,p.b=v}function e0(x,v,p){return p.a===x&&p.b===v}function t0(){return{a:null,b:null}}var r0=pC,hu=function(){function x(p,f){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=p,this.trackName=f}var v=x.prototype;return v.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},v.newCue=function(f,o,c){(this.startTime===null||this.startTime>f)&&(this.startTime=f),this.endTime=o,this.screen=c,this.timelineController.createCaptionsTrack(this.trackName)},v.reset=function(){this.cueRanges=[]},x}(),Ed=function(v,p,f){return v.substr(f||0,p.length)===p},mC=function(v){var p=parseInt(v.substr(-3)),f=parseInt(v.substr(-6,2)),o=parseInt(v.substr(-9,2)),c=v.length>9?parseInt(v.substr(0,v.indexOf(":"))):0;if(!Object(d.isFiniteNumber)(p)||!Object(d.isFiniteNumber)(f)||!Object(d.isFiniteNumber)(o)||!Object(d.isFiniteNumber)(c))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+v);return p+=1e3*f,p+=60*1e3*o,p+=60*60*1e3*c,p},wd=function(v){for(var p=5381,f=v.length;f;)p=p*33^v.charCodeAt(--f);return(p>>>0).toString()},gC=function(v,p,f){var o=v[p],c=v[o.prevCC];if(!c||!c.new&&o.new){v.ccOffset=v.presentationOffset=o.start,o.new=!1;return}for(;c&&c.new;)v.ccOffset+=o.start-c.start,o.new=!1,o=c,c=v[o.prevCC];v.presentationOffset=f},vC={parse:function(v,p,f,o,c,m){var y=/\r\n|\n\r|\n|\r/g,_=Object(so.utf8ArrayToStr)(new Uint8Array(v)).trim().replace(y,`
`).split(`
`),b="00:00.000",L=0,F=0,U=0,X=[],ne,pe=!0,Se=!1,Pe=new iC;Pe.oncue=function(De){var Ge=f[o],qe=f.ccOffset;Ge&&Ge.new&&(F!==void 0?qe=f.ccOffset=Ge.start:gC(f,o,U)),U&&(qe=U-f.presentationOffset),Se&&(De.startTime+=qe-F,De.endTime+=qe-F),De.id=wd(De.startTime.toString())+wd(De.endTime.toString())+wd(De.text),De.text=decodeURIComponent(encodeURIComponent(De.text)),De.endTime>0&&X.push(De)},Pe.onparsingerror=function(De){ne=De},Pe.onflush=function(){if(ne&&m){m(ne);return}c(X)},_.forEach(function(De){if(pe)if(Ed(De,"X-TIMESTAMP-MAP=")){pe=!1,Se=!0,De.substr(16).split(",").forEach(function(Ge){Ed(Ge,"LOCAL:")?b=Ge.substr(6):Ed(Ge,"MPEGTS:")&&(L=parseInt(Ge.substr(7)))});try{p+(f[o].start*9e4||0)<0&&(p+=8589934592),L-=p,F=mC(b)/1e3,U=L/9e4}catch(Ge){Se=!1,ne=Ge}return}else De===""&&(pe=!1);Pe.parse(De+`
`)}),Pe.flush()}},yC=vC;function pu(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function EC(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var wC=function(x){EC(v,x);function v(f){var o;if(o=x.call(this,f,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this,o.media=null,o.config=void 0,o.enabled=!0,o.Cues=void 0,o.textTracks=[],o.tracks=[],o.initPTS=[],o.unparsedVttFrags=[],o.captionsTracks={},o.nonNativeCaptionsTracks={},o.captionsProperties=void 0,o.cea608Parser1=void 0,o.cea608Parser2=void 0,o.lastSn=-1,o.prevCC=-1,o.vttCCs=n0(),o.hls=f,o.config=f.config,o.Cues=f.config.cueHandler,o.captionsProperties={textTrack1:{label:o.config.captionsTextTrack1Label,languageCode:o.config.captionsTextTrack1LanguageCode},textTrack2:{label:o.config.captionsTextTrack2Label,languageCode:o.config.captionsTextTrack2LanguageCode},textTrack3:{label:o.config.captionsTextTrack3Label,languageCode:o.config.captionsTextTrack3LanguageCode},textTrack4:{label:o.config.captionsTextTrack4Label,languageCode:o.config.captionsTextTrack4LanguageCode}},o.config.enableCEA708Captions){var c=new hu(pu(o),"textTrack1"),m=new hu(pu(o),"textTrack2"),y=new hu(pu(o),"textTrack3"),_=new hu(pu(o),"textTrack4");o.cea608Parser1=new r0(1,c,m),o.cea608Parser2=new r0(3,y,_)}return o}var p=v.prototype;return p.addCues=function(o,c,m,y,_){for(var b=!1,L=_.length;L--;){var F=_[L],U=SC(F[0],F[1],c,m);if(U>=0&&(F[0]=Math.min(F[0],c),F[1]=Math.max(F[1],m),b=!0,U/(m-c)>.5))return}if(b||_.push([c,m]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[o],c,m,y);else{var X=this.Cues.newCue(null,c,m,y);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:X,track:o})}},p.onInitPtsFound=function(o){var c=this,m=o.frag,y=o.id,_=o.initPTS,b=this.unparsedVttFrags;y==="main"&&(this.initPTS[m.cc]=_),b.length&&(this.unparsedVttFrags=[],b.forEach(function(L){c.onFragLoaded(L)}))},p.getExistingTrack=function(o){var c=this.media;if(c)for(var m=0;m<c.textTracks.length;m++){var y=c.textTracks[m];if(y[o])return y}return null},p.createCaptionsTrack=function(o){this.config.renderTextTracksNatively?this.createNativeTrack(o):this.createNonNativeTrack(o)},p.createNativeTrack=function(o){if(!this.captionsTracks[o]){var c=this.captionsProperties,m=this.captionsTracks,y=this.media,_=c[o],b=_.label,L=_.languageCode,F=this.getExistingTrack(o);if(F)m[o]=F,Zi(m[o]),Vs(m[o],y);else{var U=this.createTextTrack("captions",b,L);U&&(U[o]=!0,m[o]=U)}}},p.createNonNativeTrack=function(o){if(!this.nonNativeCaptionsTracks[o]){var c=this.captionsProperties[o];if(!!c){var m=c.label,y={_id:o,label:m,kind:"captions",default:c.media?!!c.media.default:!1,closedCaptions:c.media};this.nonNativeCaptionsTracks[o]=y,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[y]})}}},p.createTextTrack=function(o,c,m){var y=this.media;if(!!y)return y.addTextTrack(o,c,m)},p.destroy=function(){x.prototype.destroy.call(this)},p.onMediaAttaching=function(o){this.media=o.media,this._cleanTracks()},p.onMediaDetaching=function(){var o=this.captionsTracks;Object.keys(o).forEach(function(c){Zi(o[c]),delete o[c]}),this.nonNativeCaptionsTracks={}},p.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=n0(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},p._cleanTracks=function(){var o=this.media;if(!!o){var c=o.textTracks;if(c)for(var m=0;m<c.length;m++)Zi(c[m])}},p.onManifestLoaded=function(o){var c=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var m=o.subtitles||[],y=this.tracks&&m&&this.tracks.length===m.length;if(this.tracks=o.subtitles||[],this.config.renderTextTracksNatively){var _=this.media?this.media.textTracks:[];this.tracks.forEach(function(L,F){var U;if(F<_.length){for(var X=null,ne=0;ne<_.length;ne++)if(xC(_[ne],L)){X=_[ne];break}X&&(U=X)}U||(U=c.createTextTrack("subtitles",L.name,L.lang)),L.default?U.mode=c.hls.subtitleDisplay?"showing":"hidden":U.mode="disabled",c.textTracks.push(U)})}else if(!y&&this.tracks&&this.tracks.length){var b=this.tracks.map(function(L){return{label:L.name,kind:L.type.toLowerCase(),default:L.default,subtitleTrack:L}});this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:b})}}this.config.enableCEA708Captions&&o.captions&&o.captions.forEach(function(L){var F=/(?:CC|SERVICE)([1-4])/.exec(L.instreamId);if(!!F){var U="textTrack"+F[1],X=c.captionsProperties[U];!X||(X.label=L.name,L.lang&&(X.languageCode=L.lang),X.media=L)}})},p.onFragLoaded=function(o){var c=o.frag,m=o.payload,y=this.cea608Parser1,_=this.cea608Parser2,b=this.initPTS,L=this.lastSn,F=this.unparsedVttFrags;if(c.type==="main"){var U=c.sn;c.sn!==L+1&&y&&_&&(y.reset(),_.reset()),this.lastSn=U}else if(c.type==="subtitle")if(m.byteLength){if(!Object(d.isFiniteNumber)(b[c.cc])){F.push(o),b.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c});return}var X=c.decryptdata;(X==null||X.key==null||X.method!=="AES-128")&&this._parseVTTs(c,m)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c})},p._parseVTTs=function(o,c){var m=this,y=this.hls,_=this.prevCC,b=this.textTracks,L=this.vttCCs;L[o.cc]||(L[o.cc]={start:o.start,prevCC:_,new:!0},this.prevCC=o.cc),yC.parse(c,this.initPTS[o.cc],L,o.cc,function(F){if(m.config.renderTextTracksNatively){var U=b[o.level];if(U.mode==="disabled"){y.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o});return}F.forEach(function(ne){if(!U.cues.getCueById(ne.id))try{if(U.addCue(ne),!U.cues.getCueById(ne.id))throw new Error("addCue is failed for: "+ne)}catch(Se){h.logger.debug("Failed occurred on adding cues: "+Se);var pe=new window.TextTrackCue(ne.startTime,ne.endTime,ne.text);pe.id=ne.id,U.addCue(pe)}})}else{var X=m.tracks[o.level].default?"default":"subtitles"+o.level;y.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:F,track:X})}y.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:o})},function(F){h.logger.log("Failed to parse VTT cue: "+F),y.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o})})},p.onFragDecrypted=function(o){var c=o.frag,m=o.payload;if(c.type==="subtitle"){if(!Object(d.isFiniteNumber)(this.initPTS[c.cc])){this.unparsedVttFrags.push(o);return}this._parseVTTs(c,m)}},p.onFragParsingUserdata=function(o){var c=this.cea608Parser1,m=this.cea608Parser2;if(!(!this.enabled||!(c&&m)))for(var y=0;y<o.samples.length;y++){var _=o.samples[y].bytes;if(_){var b=this.extractCea608Data(_);c.addData(o.samples[y].pts,b[0]),m.addData(o.samples[y].pts,b[1])}}},p.extractCea608Data=function(o){for(var c=o[0]&31,m=2,y=[[],[]],_=0;_<c;_++){var b=o[m++],L=127&o[m++],F=127&o[m++],U=(4&b)!==0,X=3&b;L===0&&F===0||U&&(X===0||X===1)&&(y[X].push(L),y[X].push(F))}return y},v}(S);function xC(x,v){return x&&x.label===v.name&&!(x.textTrack1||x.textTrack2)}function SC(x,v,p,f){return Math.min(v,f)-Math.max(x,p)}function n0(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}var TC=wC;function i0(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function _C(x,v,p){return v&&i0(x.prototype,v),p&&i0(x,p),x}function bC(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var CC=function(x){bC(v,x);function v(f){var o;return o=x.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this,o.tracks=[],o.trackId=-1,o.media=null,o.stopped=!0,o.subtitleDisplay=!0,o.queuedDefaultTrack=null,o}var p=v.prototype;return p.destroy=function(){S.prototype.destroy.call(this)},p.onMediaAttached=function(o){var c=this;this.media=o.media,this.media&&(Object(d.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){c.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},p.onMediaDetaching=function(){if(!!this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(d.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var o=xd(this.media.textTracks);o.forEach(function(c){Zi(c)}),this.subtitleTrack=-1,this.media=null}},p.onManifestLoaded=function(o){var c=this,m=o.subtitles||[];this.tracks=m,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:m}),m.forEach(function(y){y.default&&(c.media?c.subtitleTrack=y.id:c.queuedDefaultTrack=y.id)})},p.onSubtitleTrackLoaded=function(o){var c=this,m=o.id,y=o.details,_=this.trackId,b=this.tracks,L=b[_];if(m>=b.length||m!==_||!L||this.stopped){this._clearReloadTimer();return}if(h.logger.log("subtitle track "+m+" loaded"),y.live){var F=Re(L.details,y,o.stats.trequest);h.logger.log("Reloading live subtitle playlist in "+F+"ms"),this.timer=setTimeout(function(){c._loadCurrentTrack()},F)}else this._clearReloadTimer()},p.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},p.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},p._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},p._loadCurrentTrack=function(){var o=this.trackId,c=this.tracks,m=this.hls,y=c[o];o<0||!y||y.details&&!y.details.live||(h.logger.log("Loading subtitle track "+o),m.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:y.url,id:o}))},p._toggleTrackModes=function(o){var c=this.media,m=this.subtitleDisplay,y=this.trackId;if(!!c){var _=xd(c.textTracks);if(o===-1)[].slice.call(_).forEach(function(F){F.mode="disabled"});else{var b=_[y];b&&(b.mode="disabled")}var L=_[o];L&&(L.mode=m?"showing":"hidden")}},p._setSubtitleTrackInternal=function(o){var c=this.hls,m=this.tracks;!Object(d.isFiniteNumber)(o)||o<-1||o>=m.length||(this.trackId=o,h.logger.log("Switching to subtitle track "+o),c.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:o}),this._loadCurrentTrack())},p._onTextTracksChanged=function(){if(!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var o=-1,c=xd(this.media.textTracks),m=0;m<c.length;m++)if(c[m].mode==="hidden")o=m;else if(c[m].mode==="showing"){o=m;break}this.subtitleTrack=o}},_C(v,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(o){this.trackId!==o&&(this._toggleTrackModes(o),this._setSubtitleTrackInternal(o))}}]),v}(S);function xd(x){for(var v=[],p=0;p<x.length;p++){var f=x[p];f.kind==="subtitles"&&f.label&&v.push(x[p])}return v}var IC=CC,AC=i("./src/crypt/decrypter.js");function RC(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function kC(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var LC=window,s0=LC.performance,Sd=500,DC=function(x){kC(v,x);function v(f,o){var c;return c=x.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this,c.fragmentTracker=o,c.config=f.config,c.state=ae.STOPPED,c.tracks=[],c.tracksBuffered=[],c.currentTrackId=-1,c.decrypter=new AC.default(f,f.config),c.lastAVStart=0,c._onMediaSeeking=c.onMediaSeeking.bind(RC(c)),c}var p=v.prototype;return p.startLoad=function(){this.stopLoad(),this.state=ae.IDLE;var o=this.tracks[this.currentTrackId];o&&o.details&&(this.setInterval(Sd),this.tick())},p.onSubtitleFragProcessed=function(o){var c=o.frag,m=o.success;if(this.fragPrevious=c,this.state=ae.IDLE,!!m){var y=this.tracksBuffered[this.currentTrackId];if(!!y){for(var _,b=c.start,L=0;L<y.length;L++)if(b>=y[L].start&&b<=y[L].end){_=y[L];break}var F=c.start+c.duration;_?_.end=F:(_={start:b,end:F},y.push(_))}}},p.onMediaAttached=function(o){var c=o.media;this.media=c,c.addEventListener("seeking",this._onMediaSeeking),this.state=ae.IDLE},p.onMediaDetaching=function(){var o=this;!this.media||(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(c){o.tracksBuffered[c.id]=[]}),this.media=null,this.state=ae.STOPPED)},p.onError=function(o){var c=o.frag;!c||c.type!=="subtitle"||(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=ae.IDLE)},p.onSubtitleTracksUpdated=function(o){var c=this;h.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=o.subtitleTracks,this.tracks.forEach(function(m){c.tracksBuffered[m.id]=[]})},p.onSubtitleTrackSwitch=function(o){if(this.currentTrackId=o.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1){this.clearInterval();return}var c=this.tracks[this.currentTrackId];c&&c.details&&this.setInterval(Sd)},p.onSubtitleTrackLoaded=function(o){var c=o.id,m=o.details,y=this.currentTrackId,_=this.tracks,b=_[y];c>=_.length||c!==y||!b||(m.live&&ge(b.details,m,this.lastAVStart),b.details=m,this.setInterval(Sd))},p.onKeyLoaded=function(){this.state===ae.KEY_LOADING&&(this.state=ae.IDLE)},p.onFragLoaded=function(o){var c=this.fragCurrent,m=o.frag.decryptdata,y=o.frag,_=this.hls;if(this.state===ae.FRAG_LOADING&&c&&o.frag.type==="subtitle"&&c.sn===o.frag.sn&&o.payload.byteLength>0&&m&&m.key&&m.method==="AES-128"){var b=s0.now();this.decrypter.decrypt(o.payload,m.key.buffer,m.iv.buffer,function(L){var F=s0.now();_.trigger(u.default.FRAG_DECRYPTED,{frag:y,payload:L,stats:{tstart:b,tdecrypt:F}})})}},p.onLevelUpdated=function(o){var c=o.details,m=c.fragments;this.lastAVStart=m.length?m[0].start:0},p.doTick=function(){if(!this.media){this.state=ae.IDLE;return}switch(this.state){case ae.IDLE:{var o=this.config,c=this.currentTrackId,m=this.fragmentTracker,y=this.media,_=this.tracks;if(!_||!_[c]||!_[c].details)break;var b=o.maxBufferHole,L=o.maxFragLookUpTolerance,F=Math.min(o.maxBufferLength,o.maxMaxBufferLength),U=$.bufferedInfo(this._getBuffered(),y.currentTime,b),X=U.end,ne=U.len,pe=_[c].details,Se=pe.fragments,Pe=Se.length,De=Se[Pe-1].start+Se[Pe-1].duration;if(ne>F)return;var Ge,qe=this.fragPrevious;X<De?(qe&&pe.hasProgramDateTime&&(Ge=_r(Se,qe.endProgramDateTime,L)),Ge||(Ge=Vt(qe,Se,X,L))):Ge=Se[Pe-1],Ge&&Ge.encrypted?(h.logger.log("Loading key for "+Ge.sn),this.state=ae.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:Ge})):Ge&&m.getState(Ge)===lt.NOT_LOADED&&(this.fragCurrent=Ge,this.state=ae.FRAG_LOADING,this.hls.trigger(u.default.FRAG_LOADING,{frag:Ge}))}}},p.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,x.prototype.stopLoad.call(this)},p._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},p.onMediaSeeking=function(){if(this.fragCurrent){var o=this.media?this.media.currentTime:0,c=this.config.maxFragLookUpTolerance,m=this.fragCurrent.start-c,y=this.fragCurrent.start+this.fragCurrent.duration+c;(o<m||o>y)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=ae.IDLE,this.tick())}},v}(br),Hs;(function(x){x.WIDEVINE="com.widevine.alpha",x.PLAYREADY="com.microsoft.playready"})(Hs||(Hs={}));var OC=function(){return typeof window!="undefined"&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function a0(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function PC(x,v,p){return v&&a0(x.prototype,v),p&&a0(x,p),x}function NC(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var o0=3,MC=function(v,p,f){var o={audioCapabilities:[],videoCapabilities:[]};return v.forEach(function(c){o.audioCapabilities.push({contentType:'audio/mp4; codecs="'+c+'"',robustness:f.audioRobustness||""})}),p.forEach(function(c){o.videoCapabilities.push({contentType:'video/mp4; codecs="'+c+'"',robustness:f.videoRobustness||""})}),[o]},FC=function(v,p,f,o){switch(v){case Hs.WIDEVINE:return MC(p,f,o);default:throw new Error("Unknown key-system: "+v)}},UC=function(x){NC(v,x);function v(f){var o;return o=x.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this,o._widevineLicenseUrl=void 0,o._licenseXhrSetup=void 0,o._emeEnabled=void 0,o._requestMediaKeySystemAccess=void 0,o._drmSystemOptions=void 0,o._config=void 0,o._mediaKeysList=[],o._media=null,o._hasSetMediaKeys=!1,o._requestLicenseFailureCount=0,o.mediaKeysPromise=null,o._onMediaEncrypted=function(c){if(h.logger.log('Media is encrypted using "'+c.initDataType+'" init data type'),!o.mediaKeysPromise){h.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),o.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var m=function(_){!o._media||(o._attemptSetMediaKeys(_),o._generateRequestWithPreferredKeySession(c.initDataType,c.initData))};o.mediaKeysPromise.then(m).catch(m)},o._config=f.config,o._widevineLicenseUrl=o._config.widevineLicenseUrl,o._licenseXhrSetup=o._config.licenseXhrSetup,o._emeEnabled=o._config.emeEnabled,o._requestMediaKeySystemAccess=o._config.requestMediaKeySystemAccessFunc,o._drmSystemOptions=f.config.drmSystemOptions,o}var p=v.prototype;return p.getLicenseServerUrl=function(o){switch(o){case Hs.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+o+'"')},p._attemptKeySystemAccess=function(o,c,m){var y=this,_=FC(o,c,m,this._drmSystemOptions);h.logger.log("Requesting encrypted media key-system access");var b=this.requestMediaKeySystemAccess(o,_);this.mediaKeysPromise=b.then(function(L){return y._onMediaKeySystemAccessObtained(o,L)}),b.catch(function(L){h.logger.error('Failed to obtain key-system "'+o+'" access:',L)})},p._onMediaKeySystemAccessObtained=function(o,c){var m=this;h.logger.log('Access for key-system "'+o+'" obtained');var y={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:c,mediaKeySystemDomain:o};this._mediaKeysList.push(y);var _=Promise.resolve().then(function(){return c.createMediaKeys()}).then(function(b){return y.mediaKeys=b,h.logger.log('Media-keys created for key-system "'+o+'"'),m._onMediaKeysCreated(),b});return _.catch(function(b){h.logger.error("Failed to create media-keys:",b)}),_},p._onMediaKeysCreated=function(){var o=this;this._mediaKeysList.forEach(function(c){c.mediaKeysSession||(c.mediaKeysSession=c.mediaKeys.createSession(),o._onNewMediaKeySession(c.mediaKeysSession))})},p._onNewMediaKeySession=function(o){var c=this;h.logger.log("New key-system session "+o.sessionId),o.addEventListener("message",function(m){c._onKeySessionMessage(o,m.message)},!1)},p._onKeySessionMessage=function(o,c){h.logger.log("Got EME message event, creating license request"),this._requestLicense(c,function(m){h.logger.log("Received license data (length: "+(m&&m.byteLength)+"), updating key-session"),o.update(m)})},p._attemptSetMediaKeys=function(o){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var c=this._mediaKeysList[0];if(!c||!c.mediaKeys){h.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}h.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(c.mediaKeys),this._hasSetMediaKeys=!0}},p._generateRequestWithPreferredKeySession=function(o,c){var m=this,y=this._mediaKeysList[0];if(!y){h.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(y.mediaKeysSessionInitialized){h.logger.warn("Key-Session already initialized but requested again");return}var _=y.mediaKeysSession;if(!_){h.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!c){h.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}h.logger.log('Generating key-session request for "'+o+'" init data type'),y.mediaKeysSessionInitialized=!0,_.generateRequest(o,c).then(function(){h.logger.debug("Key-session generation succeeded")}).catch(function(b){h.logger.error("Error generating key-session request:",b),m.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},p._createLicenseXhr=function(o,c,m){var y=new XMLHttpRequest,_=this._licenseXhrSetup;try{if(_)try{_(y,o)}catch{y.open("POST",o,!0),_(y,o)}y.readyState||y.open("POST",o,!0)}catch(b){throw new Error("issue setting up KeySystem license XHR "+b)}return y.responseType="arraybuffer",y.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,y,o,c,m),y},p._onLicenseRequestReadyStageChange=function(o,c,m,y){switch(o.readyState){case 4:if(o.status===200)this._requestLicenseFailureCount=0,h.logger.log("License request succeeded"),o.responseType!=="arraybuffer"&&h.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),y(o.response);else{if(h.logger.error("License Request XHR failed ("+c+"). Status: "+o.status+" ("+o.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>o0){this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var _=o0-this._requestLicenseFailureCount+1;h.logger.warn("Retrying license request, "+_+" attempts left"),this._requestLicense(m,y)}break}},p._generateLicenseRequestChallenge=function(o,c){switch(o.mediaKeySystemDomain){case Hs.WIDEVINE:return c}throw new Error("unsupported key-system: "+o.mediaKeySystemDomain)},p._requestLicense=function(o,c){h.logger.log("Requesting content license for key-system");var m=this._mediaKeysList[0];if(!m){h.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var y=this.getLicenseServerUrl(m.mediaKeySystemDomain),_=this._createLicenseXhr(y,o,c);h.logger.log("Sending license request to URL: "+y);var b=this._generateLicenseRequestChallenge(m,o);_.send(b)}catch(L){h.logger.error("Failure requesting DRM license: "+L),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},p.onMediaAttached=function(o){if(!!this._emeEnabled){var c=o.media;this._media=c,c.addEventListener("encrypted",this._onMediaEncrypted)}},p.onMediaDetached=function(){var o=this._media,c=this._mediaKeysList;!o||(o.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(c.map(function(m){if(m.mediaKeysSession)return m.mediaKeysSession.close().catch(function(){})})).then(function(){return o.setMediaKeys(null)}).catch(function(){}))},p.onManifestParsed=function(o){if(!!this._emeEnabled){var c=o.levels.map(function(y){return y.audioCodec}),m=o.levels.map(function(y){return y.videoCodec});this._attemptKeySystemAccess(Hs.WIDEVINE,c,m)}},PC(v,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),v}(S),BC=UC;function l0(x,v){var p=Object.keys(x);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(x);v&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(x,o).enumerable})),p.push.apply(p,f)}return p}function u0(x){for(var v=1;v<arguments.length;v++){var p=arguments[v]!=null?arguments[v]:{};v%2?l0(Object(p),!0).forEach(function(f){$C(x,f,p[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(p)):l0(Object(p)).forEach(function(f){Object.defineProperty(x,f,Object.getOwnPropertyDescriptor(p,f))})}return x}function $C(x,v,p){return v in x?Object.defineProperty(x,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):x[v]=p,x}var VC=u0(u0({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:zb,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Lb,bufferController:Pb,capLevelController:Ub,fpsController:Gb,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:OC,testBandwidth:!0},jC()),{},{subtitleStreamController:DC,subtitleTrackController:IC,timelineController:TC,audioStreamController:eC,audioTrackController:Yb,emeController:BC});function jC(){return{cueHandler:s,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function c0(x,v){var p=Object.keys(x);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(x);v&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(x,o).enumerable})),p.push.apply(p,f)}return p}function f0(x){for(var v=1;v<arguments.length;v++){var p=arguments[v]!=null?arguments[v]:{};v%2?c0(Object(p),!0).forEach(function(f){GC(x,f,p[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(p)):c0(Object(p)).forEach(function(f){Object.defineProperty(x,f,Object.getOwnPropertyDescriptor(p,f))})}return x}function GC(x,v,p){return v in x?Object.defineProperty(x,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):x[v]=p,x}function Qt(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function d0(x,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(x,f.key,f)}}function h0(x,v,p){return v&&d0(x.prototype,v),p&&d0(x,p),x}function HC(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,x.__proto__=v}var p0=function(x){HC(v,x),v.isSupported=function(){return gd()},h0(v,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return l.ErrorTypes}},{key:"ErrorDetails",get:function(){return l.ErrorDetails}},{key:"DefaultConfig",get:function(){return v.defaultConfig?v.defaultConfig:VC},set:function(o){v.defaultConfig=o}}]);function v(f){var o;f===void 0&&(f={}),o=x.call(this)||this,o.config=void 0,o._autoLevelCapping=void 0,o.abrController=void 0,o.capLevelController=void 0,o.levelController=void 0,o.streamController=void 0,o.networkControllers=void 0,o.audioTrackController=void 0,o.subtitleTrackController=void 0,o.emeController=void 0,o.coreComponents=void 0,o.media=null,o.url=null;var c=v.DefaultConfig;if((f.liveSyncDurationCount||f.liveMaxLatencyDurationCount)&&(f.liveSyncDuration||f.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");o.config=f0(f0({},c),f);var m=Qt(o),y=m.config;if(y.liveMaxLatencyDurationCount!==void 0&&y.liveMaxLatencyDurationCount<=y.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(y.liveMaxLatencyDuration!==void 0&&(y.liveSyncDuration===void 0||y.liveMaxLatencyDuration<=y.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(h.enableLogs)(y.debug),o._autoLevelCapping=-1;var _=o.abrController=new y.abrController(Qt(o)),b=new y.bufferController(Qt(o)),L=o.capLevelController=new y.capLevelController(Qt(o)),F=new y.fpsController(Qt(o)),U=new Ke(Qt(o)),X=new gt(Qt(o)),ne=new Rt(Qt(o)),pe=new md(Qt(o)),Se=o.levelController=new pd(Qt(o)),Pe=new ir(Qt(o)),De=o.streamController=new ou(Qt(o),Pe),Ge=[Se,De],qe=y.audioStreamController;qe&&Ge.push(new qe(Qt(o),Pe)),o.networkControllers=Ge;var ut=[U,X,ne,_,b,L,F,pe,Pe];if(qe=y.audioTrackController,qe){var Ut=new qe(Qt(o));o.audioTrackController=Ut,ut.push(Ut)}if(qe=y.subtitleTrackController,qe){var Yr=new qe(Qt(o));o.subtitleTrackController=Yr,Ge.push(Yr)}if(qe=y.emeController,qe){var ar=new qe(Qt(o));o.emeController=ar,ut.push(ar)}return qe=y.subtitleStreamController,qe&&Ge.push(new qe(Qt(o),Pe)),qe=y.timelineController,qe&&ut.push(new qe(Qt(o))),o.coreComponents=ut,o}var p=v.prototype;return p.destroy=function(){h.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(o){o.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},p.attachMedia=function(o){h.logger.log("attachMedia"),this.media=o,this.trigger(u.default.MEDIA_ATTACHING,{media:o})},p.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},p.loadSource=function(o){o=a.buildAbsoluteURL(window.location.href,o,{alwaysNormalize:!0}),h.logger.log("loadSource:"+o),this.url=o,this.trigger(u.default.MANIFEST_LOADING,{url:o})},p.startLoad=function(o){o===void 0&&(o=-1),h.logger.log("startLoad("+o+")"),this.networkControllers.forEach(function(c){c.startLoad(o)})},p.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach(function(o){o.stopLoad()})},p.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},p.recoverMediaError=function(){h.logger.log("recoverMediaError");var o=this.media;this.detachMedia(),o&&this.attachMedia(o)},p.removeLevel=function(o,c){c===void 0&&(c=0),this.levelController.removeLevel(o,c)},h0(v,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(o){h.logger.log("set currentLevel:"+o),this.loadLevel=o,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(o){h.logger.log("set nextLevel:"+o),this.levelController.manualLevel=o,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(o){h.logger.log("set loadLevel:"+o),this.levelController.manualLevel=o}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(o){this.levelController.nextLoadLevel=o}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(o){h.logger.log("set firstLevel:"+o),this.levelController.firstLevel=o}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(o){h.logger.log("set startLevel:"+o),o!==-1&&(o=Math.max(o,this.minAutoLevel)),this.levelController.startLevel=o}},{key:"capLevelToPlayerSize",set:function(o){var c=!!o;c!==this.config.capLevelToPlayerSize&&(c?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=c)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(o){h.logger.log("set autoLevelCapping:"+o),this._autoLevelCapping=o}},{key:"bandwidthEstimate",get:function(){var o=this.abrController._bwEstimator;return o?o.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var o=this.levels,c=this.config.minAutoBitrate,m=o?o.length:0,y=0;y<m;y++){var _=o[y].realBitrate?Math.max(o[y].realBitrate,o[y].bitrate):o[y].bitrate;if(_>c)return y}return 0}},{key:"maxAutoLevel",get:function(){var o=this.levels,c=this.autoLevelCapping,m;return c===-1&&o&&o.length?m=o.length-1:m=c,m}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(o){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,o)}},{key:"audioTracks",get:function(){var o=this.audioTrackController;return o?o.audioTracks:[]}},{key:"audioTrack",get:function(){var o=this.audioTrackController;return o?o.audioTrack:-1},set:function(o){var c=this.audioTrackController;c&&(c.audioTrack=o)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var o=this.subtitleTrackController;return o?o.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var o=this.subtitleTrackController;return o?o.subtitleTrack:-1},set:function(o){var c=this.subtitleTrackController;c&&(c.subtitleTrack=o)}},{key:"subtitleDisplay",get:function(){var o=this.subtitleTrackController;return o?o.subtitleDisplay:!1},set:function(o){var c=this.subtitleTrackController;c&&(c.subtitleDisplay=o)}}]),v}(W);p0.defaultConfig=void 0},"./src/polyfills/number.js":function(r,n,i){i.r(n),i.d(n,"isFiniteNumber",function(){return s}),i.d(n,"MAX_SAFE_INTEGER",function(){return a});var s=Number.isFinite||function(l){return typeof l=="number"&&isFinite(l)},a=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(r,n,i){i.r(n),i.d(n,"getSelfScope",function(){return s});function s(){return typeof window=="undefined"?self:window}},"./src/utils/logger.js":function(r,n,i){i.r(n),i.d(n,"enableLogs",function(){return S}),i.d(n,"logger",function(){return C});var s=i("./src/utils/get-self-scope.js");function a(){}var l={trace:a,debug:a,log:a,warn:a,info:a,error:a},d=l;function u(R,O){return O="["+R+"] > "+O,O}var h=Object(s.getSelfScope)();function w(R){var O=h.console[R];return O?function(){for(var T=arguments.length,I=new Array(T),D=0;D<T;D++)I[D]=arguments[D];I[0]&&(I[0]=u(R,I[0])),O.apply(h.console,I)}:a}function g(R){for(var O=arguments.length,T=new Array(O>1?O-1:0),I=1;I<O;I++)T[I-1]=arguments[I];T.forEach(function(D){d[D]=R[D]?R[D].bind(R):w(D)})}var S=function(O){if(h.console&&O===!0||typeof O=="object"){g(O,"debug","log","info","warn","error");try{d.log()}catch{d=l}}else d=l},C=d}}).default})})(yb);var di=ZC(yb.exports),Wo=globalThis&&globalThis.__assign||function(){return Wo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Wo.apply(this,arguments)},GU=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function Eb(t){var e=t.hlsConfig,r=t.playerRef,n=r===void 0?E.createRef():r,i=t.src,s=t.autoPlay,a=GU(t,["hlsConfig","playerRef","src","autoPlay"]);return J.exports.useEffect(function(){var l;function d(){l!=null&&l.destroy();var u=new di(Wo({enableWorker:!1},e));n.current!=null&&u.attachMedia(n.current),u.on(di.Events.MEDIA_ATTACHED,function(){u.loadSource(i),u.on(di.Events.MANIFEST_PARSED,function(){var h;s&&((h=n==null?void 0:n.current)===null||h===void 0||h.play().catch(function(){return console.log("Unable to autoplay prior to user interaction with the dom.")}))})}),u.on(di.Events.ERROR,function(h,w){if(w.fatal)switch(w.type){case di.ErrorTypes.NETWORK_ERROR:u.startLoad();break;case di.ErrorTypes.MEDIA_ERROR:u.recoverMediaError();break;default:d();break}}),l=u}return di.isSupported()&&d(),function(){l!=null&&l.destroy()}},[s,e,n,i]),di.isSupported()?E.createElement("video",Wo({ref:n},a)):E.createElement("video",Wo({ref:n,src:i,autoPlay:s},a))}function Xt(){return Xt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xt.apply(this,arguments)}function HU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fm(t,e)}function fm(t,e){return fm=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fm(t,e)}var zU=function(e){var r=e.children,n=J.exports.useState(typeof window=="object"),i=n[0],s=n[1],a=typeof window;return J.exports.useEffect(function(){window&&s(!0)},[a]),i?r:E.createElement(E.Fragment,null)},KU=function(t){HU(e,t);function e(n){var i;return i=t.call(this,n)||this,i.state={hasError:!1},i.playerRef=J.exports.createRef(),i.videoProps={crossOrigin:"anonymous",playsInline:!0,controls:!0,src:typeof i.props.src=="string"?i.props.src:i.props.src[0].url,children:E.createElement(E.Fragment,null,i.props.subtitles&&i.props.subtitles.length>0&&i.props.subtitles.map(function(s,a){return E.createElement("track",{key:s.lang,kind:"subtitles",srcLang:s.lang,label:s.language,src:s.url,default:a===0})}))},i}e.getDerivedStateFromError=function(){return{hasError:!0}};var r=e.prototype;return r.render=function(){return this.state.hasError?E.createElement("div",{className:"tuby-container"},this.props.renderer?this.props.renderer(this.playerRef,this.videoProps):E.createElement("video",Object.assign({ref:this.playerRef},this.videoProps))):this.props.children},e}(J.exports.Component),Ch=function(e){try{var r=new Date(0);r.setSeconds(e);var n=r.toISOString().slice(11,19),i=n.startsWith("00:0")?n.slice(4):n.startsWith("00")?n.slice(3):n;return i}catch{return"0:00"}},Ih=function(){var e,r;return/iPhone|iPad|iPod|Android/i.test((e=window)==null||(r=e.navigator)==null?void 0:r.userAgent)},WU=function(){return E.createElement("svg",{className:"tuby-progress",viewBox:"25 25 50 50"},E.createElement("circle",{cx:"50",cy:"50",r:"20"}))},qU=function(e){var r=e.children,n=e.onClickAway,i=J.exports.useRef(null);return J.exports.useEffect(function(){var s=function(l){i.current&&!i.current.contains(l.target)&&n()};return window.addEventListener("click",s),function(){return window.removeEventListener("click",s)}},[n]),E.createElement(E.Fragment,null,r(i))},YU=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M44.1242 27.4467C44.2208 26.6625 44.2852 25.8469 44.2852 25C44.2852 24.1531 44.2208 23.3689 44.1242 22.5533L49.5331 18.4128C50.016 18.0364 50.1448 17.3777 49.8228 16.8131L44.6715 8.15558C44.3818 7.62233 43.6735 7.40276 43.1262 7.62233L36.7192 10.1317C35.3992 9.12798 33.9504 8.31242 32.3728 7.68507L31.4069 1.03513C31.3425 0.439147 30.7952 0 30.1513 0H19.8487C19.2048 0 18.6897 0.439147 18.5931 1.03513L17.6272 7.68507C16.0818 8.31242 14.633 9.15935 13.2808 10.1317L6.87385 7.62233C6.29432 7.40276 5.61822 7.62233 5.32846 8.15558L0.17715 16.8131C-0.144806 17.3463 0.0161725 18.0364 0.466912 18.4128L5.87578 22.5533C5.7792 23.3375 5.7148 24.1844 5.7148 25C5.7148 25.8156 5.7792 26.6311 5.87578 27.4467L0.466912 31.5872C-0.0160232 31.9636 -0.144806 32.6223 0.17715 33.187L5.32846 41.8444C5.61822 42.3777 6.32652 42.5972 6.87385 42.3777L13.2808 39.8683C14.6008 40.872 16.0496 41.6876 17.6272 42.3149L18.5931 48.9649C18.6575 49.5609 19.2048 50 19.8487 50H30.1513C30.7952 50 31.3103 49.5609 31.4069 48.9649L32.3728 42.3149C33.9182 41.6876 35.367 40.8407 36.7192 39.8683L43.1262 42.3777C43.7057 42.5972 44.3818 42.3777 44.6715 41.8444L49.8228 33.187C50.1126 32.6537 49.9838 31.9636 49.5331 31.5872L44.1242 27.4467V27.4467ZM25 33.7516C20.0419 33.7516 15.9852 29.8306 15.9852 24.9686C15.9852 20.138 20.0097 16.1857 25 16.1857C29.9581 16.1857 34.0148 20.1067 34.0148 24.9686C34.0148 29.7992 29.9903 33.7516 25 33.7516Z",fill:"white"}))},XU=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M12.5 12.5H0V18.75H18.75V0H12.5V12.5Z",fill:"white"}),E.createElement("path",{d:"M37.5 12.5V1.14441e-05H31.25V18.75H50V12.5H37.5Z",fill:"white"}),E.createElement("path",{d:"M31.25 50H37.5V37.5H50V31.25H31.25V50Z",fill:"white"}),E.createElement("path",{d:"M0 37.5H12.5V50H18.75V31.25H0V37.5Z",fill:"white"}))},QU=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M0 18.75H6.25V6.25H18.75V0H0V18.75Z",fill:"white"}),E.createElement("path",{d:"M31.25 0V6.25H43.75V18.75H50V0H31.25Z",fill:"white"}),E.createElement("path",{d:"M43.75 43.75H31.25V50H50V31.25H43.75V43.75Z",fill:"white"}),E.createElement("path",{d:"M6.25 31.25H0V50H18.75V43.75H6.25V31.25Z",fill:"white"}))},wb=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M5 50H17.3077V0H5V50ZM32.6923 50H45V0H32.6923V50Z",fill:"white"}))},JU=function(){return E.createElement("div",{className:"tuby-fade-zoom-out tuby-effect-icon"},E.createElement(wb,{className:"tuby-icon-md"}))},ZU=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M40.9091 22.6667H22.7273V36.6667H40.9091V22.6667ZM50 41.3333V8.62C50 6.05333 47.9545 4 45.4545 4H4.54545C2.04545 4 0 6.05333 0 8.62V41.3333C0 43.9 2.04545 46 4.54545 46H45.4545C47.9545 46 50 43.9 50 41.3333ZM45.4545 41.38H4.54545V8.59667H45.4545V41.38Z",fill:"white"}))},dm=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({width:"50",height:"50",viewBox:"0 0 26 26",fill:"#FFFFFF",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M3 1V25L23 13L3 1Z"}))},e5=function(){return E.createElement("div",{className:"tuby-fade-zoom-out tuby-effect-icon"},E.createElement(dm,{className:"tuby-icon-md"}))},qu=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M48.9536 8.08584C50.3488 9.53131 50.3488 11.8672 48.9536 13.3127L20.3806 42.9159C18.9854 44.3614 16.7308 44.3614 15.3357 42.9159L1.04604 28.1143C-0.34868 26.6688 -0.34868 24.3329 1.04604 22.8875C2.44098 21.442 4.70227 21.442 6.09744 22.8875L17.7577 35.0641L43.9087 8.08584C45.3039 6.63805 47.5585 6.63805 48.9536 8.08584Z",fill:"#fff"}))},Ah=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M40 5.875L21.4575 25L40 44.125L34.2915 50L10 25L34.2915 0L40 5.875Z",fill:"white"}))},Rh=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M10 44.125L28.5425 25L10 5.875L15.7085 0L40 25L15.7085 50L10 44.125Z",fill:"white"}))},t5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M33.3333 40.5294H50V43.3529H33.3333V40.5294ZM22.2222 40.5294H0V43.3529H22.2222V49H25V43.3529V40.5294V34.8824H22.2222V40.5294ZM30.5556 15.1176H33.3333V9.47059V6.64706V1H30.5556V6.64706H0V9.47059H30.5556V15.1176ZM41.6667 6.64706V9.47059H50V6.64706H41.6667ZM8.33333 32.0588H11.1111V26.4118V23.5882V17.9412H8.33333V23.5882H0V26.4118H8.33333V32.0588ZM19.4444 26.4118H50V23.5882H19.4444V26.4118Z",fill:"white"}))},r5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M8.33333 30.5556V19.4444C8.33333 17.9167 9.58333 16.6667 11.1111 16.6667H19.4444C20.9722 16.6667 22.2222 17.9167 22.2222 19.4444V22.2222H18.0556V20.8333H12.5V29.1667H18.0556V27.7778H22.2222V30.5556C22.2222 32.0833 20.9722 33.3333 19.4444 33.3333H11.1111C9.58333 33.3333 8.33333 32.0833 8.33333 30.5556ZM30.5556 33.3333H38.8889C40.4167 33.3333 41.6667 32.0833 41.6667 30.5556V27.7778H37.5V29.1667H31.9444V20.8333H37.5V22.2222H41.6667V19.4444C41.6667 17.9167 40.4167 16.6667 38.8889 16.6667H30.5556C29.0278 16.6667 27.7778 17.9167 27.7778 19.4444V30.5556C27.7778 32.0833 29.0278 33.3333 30.5556 33.3333ZM47.2222 2.77778H2.77778V47.2222H47.2222V2.77778ZM50 0V50H0V0.0277778C0 -2.58701e-08 -2.58701e-08 0 0.0277778 0H50Z",fill:"white"}))},n5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M20 15V35L35 25L20 15ZM10.75 7.5L9.25 5.5C13 2.5 17.5 0.5 22.5 0L22.75 2.5C18.25 3 14.25 4.75 10.75 7.5ZM7.5 10.75L5.5 9.25C2.5 13 0.5 17.5 0 22.5L2.5 22.75C3 18.25 4.75 14.25 7.5 10.75ZM7.5 39.25C4.75 35.75 3 31.5 2.5 27.25L0 27.5C0.5 32.5 2.5 37 5.5 41L7.5 39.25ZM22.75 47.5C18.25 47 14.25 45.25 10.75 42.5L9.25 44.5C13 47.5 17.5 49.5 22.5 50L22.75 47.5ZM50 25C50 12 40.25 1.5 27.5 0L27.25 2.5C38.75 3.75 47.5 13.25 47.5 25C47.5 36.75 38.75 46.25 27.25 47.5L27.5 50C40.5 48.75 50 38 50 25Z",fill:"white"}))},i5=function(e){var r=e.settingsActive,n=e.src,i=e.subtitles,s=e.playbackSpeed,a=e.setPlaybackSpeed,l=e.subtitleIndex,d=e.setSubtitleIndex,u=e.quality,h=e.setQuality,w=e.internationalization,g=J.exports.useState(0),S=g[0],C=g[1],R=J.exports.useState("main"),O=R[0],T=R[1],I=J.exports.useRef(null),D=J.exports.useRef(null),M=J.exports.useRef(null),j=J.exports.useRef(null),B={main:I,speed:D,subtitles:M,quality:j};return J.exports.useEffect(function(){if(B[O].current){var z=B[O].current.offsetHeight;C(z>250?250:z),B[O].current.scrollTo&&B[O].current.scrollTo(0,0)}},[O]),E.createElement("div",{className:"tuby-settings-dialog "+(r?"tuby-show":"")},E.createElement("div",{style:{height:S},className:"tuby-settings-outer"},E.createElement("div",{ref:I,className:"tuby-settings-section tuby-settings-py "+(O==="main"?"tuby-settings-translate-center":"tuby-settings-translate-left")},E.createElement("div",{onClick:function(){return T("speed")},className:"tuby-settings-item"},E.createElement("div",{className:"tuby-settings-item-left"},E.createElement(n5,{className:"tuby-icon-sm"}),E.createElement("p",null,(w==null?void 0:w.settingsPlaybackSpeed)||"Playback Speed")),E.createElement(Rh,{className:"tuby-chevron"})),i&&E.createElement("div",{onClick:function(){return T("subtitles")},className:"tuby-settings-item"},E.createElement("div",{className:"tuby-settings-item-left"},E.createElement(r5,{className:"tuby-icon-sm"}),E.createElement("p",null,(w==null?void 0:w.settingsSubtitles)||"Subtitles")),E.createElement(Rh,{style:{width:15,height:15}})),typeof n!="string"&&E.createElement("div",{onClick:function(){return T("quality")},className:"tuby-settings-item"},E.createElement("div",{className:"tuby-settings-item-left"},E.createElement(t5,{className:"tuby-icon-sm"}),E.createElement("p",null,(w==null?void 0:w.settingsQuality)||"Quality")),E.createElement(Rh,{className:"tuby-chevron"}))),E.createElement("div",{ref:D,className:"tuby-settings-section "+(O==="speed"?"tuby-settings-translate-center":"tuby-settings-translate-right")},E.createElement("div",{onClick:function(){return T("main")},className:"tuby-settings-section-header"},E.createElement(Ah,{className:"tuby-chevron"}),E.createElement("span",null,(w==null?void 0:w.settingsPlaybackSpeed)||"Playback speed")),E.createElement("div",{className:"tuby-settings-py"},new Array(8).fill("").map(function(z,K){return K===3?(w==null?void 0:w.settingsPlaybackSpeedNormal)||"Normal":(K+1)/4}).map(function(z,K){return E.createElement("div",{key:z,onClick:function(){a((K+1)/4),T("main")},className:"tuby-settings-item-2"},s===(K+1)/4?E.createElement(qu,{className:"tuby-chevron"}):E.createElement("div",{style:{width:15,height:15}}),E.createElement("span",null,z))}))),i&&E.createElement("div",{ref:M,className:"tuby-settings-section "+(O==="subtitles"?"tuby-settings-translate-center":"tuby-settings-translate-right")},E.createElement("div",{onClick:function(){return T("main")},className:"tuby-settings-section-header"},E.createElement(Ah,{className:"tuby-chevron"}),E.createElement("span",null,(w==null?void 0:w.settingsSubtitles)||"Subtitles")),E.createElement("div",{className:"tuby-settings-py"},E.createElement("div",{onClick:function(){d(-1),T("main")},className:"tuby-settings-item-2"},l===-1?E.createElement(qu,{className:"tuby-chevron"}):E.createElement("div",{style:{width:15,height:15}}),E.createElement("span",null,(w==null?void 0:w.settingsSubtitlesOff)||"Off")),i.map(function(z,K){return E.createElement("div",{key:z.lang,onClick:function(){d(K),T("main")},className:"tuby-settings-item-2"},l===K?E.createElement(qu,{className:"tuby-chevron"}):E.createElement("div",{style:{width:15,height:15}}),E.createElement("span",null,z.language))}))),typeof n!="string"&&E.createElement("div",{ref:j,className:"tuby-settings-section "+(O==="quality"?"tuby-settings-translate-center":"tuby-settings-translate-right")},E.createElement("div",{onClick:function(){return T("main")},className:"tuby-settings-section-header"},E.createElement(Ah,{className:"tuby-chevron"}),E.createElement("span",null,(w==null?void 0:w.settingsQuality)||"Quality")),E.createElement("div",{className:"tuby-settings-py"},n.map(function(z,K){return E.createElement("div",{key:z.quality,onClick:function(){h(K),T("main")},className:"tuby-settings-item-2"},u===K?E.createElement(qu,{className:"tuby-chevron"}):E.createElement("div",{style:{width:15,height:15}}),E.createElement("span",null,typeof z.quality=="number"?z.quality+"p":z.quality))})))))},s5=function(e){var r=e.settingsActive,n=e.setSettingsActive,i=e.src,s=e.subtitles,a=e.playbackSpeed,l=e.setPlaybackSpeed,d=e.subtitleIndex,u=e.setSubtitleIndex,h=e.quality,w=e.setQuality,g=e.internationalization;return E.createElement("div",{onClick:function(){return n(!1)},className:"tuby-backdrop "+(r?"tuby-show":"")},E.createElement("div",{onClick:function(C){return C.stopPropagation()},className:"tuby-modal"},E.createElement("h1",null,(g==null?void 0:g.tooltipsSettings)||"Settings"),E.createElement("div",null,E.createElement("p",null,(g==null?void 0:g.settingsPlaybackSpeed)||"Speed"),E.createElement("select",{value:a*4-1,onChange:function(C){return l((+C.target.value+1)/4)}},new Array(8).fill("").map(function(S,C){return C===3?(g==null?void 0:g.settingsPlaybackSpeedNormal)||"Normal":(C+1)/4}).map(function(S,C){return E.createElement("option",{key:S,value:C},S)}))),s&&E.createElement("div",null,E.createElement("p",null,(g==null?void 0:g.settingsSubtitles)||"Subtitles"),E.createElement("select",{value:d,onChange:function(C){return u(+C.target.value)}},E.createElement("option",{value:-1},(g==null?void 0:g.settingsSubtitlesOff)||"Off"),s.map(function(S,C){return E.createElement("option",{key:S.lang,onClick:function(){u(C)},value:C},S.language)}))),typeof i=="object"&&E.createElement("div",null,E.createElement("p",null,(g==null?void 0:g.settingsQuality)||"Quality"),E.createElement("select",{value:h,onChange:function(C){return w(+C.target.value)}},i.map(function(S,C){return E.createElement("option",{key:S.quality,onClick:function(){w(C)},value:C},typeof S.quality=="number"?S.quality+"p":S.quality)}))),E.createElement("div",{className:"tuby-modal-btn-container"},E.createElement("button",{style:{padding:5},onClick:function(){return n(!1)}},(g==null?void 0:g.settingsModalOff)||"OK"))))},a5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M5.55556 5C2.47222 5 0 7.57143 0 10.7143V39.2857C0 42.4286 2.47222 45 5.55556 45H44.4444C47.5 45 50 42.4286 50 39.2857V10.7143C50 7.57143 47.5 5 44.4444 5H5.55556ZM22.2222 22.1429H18.0556V20.7143H12.5V29.2857H18.0556V27.8571H22.2222V30.7143C22.2222 32.2857 20.9722 33.5714 19.4444 33.5714H11.1111C9.58333 33.5714 8.33333 32.2857 8.33333 30.7143V19.2857C8.33333 17.7143 9.58333 16.4286 11.1111 16.4286H19.4444C20.9722 16.4286 22.2222 17.7143 22.2222 19.2857V22.1429ZM41.6667 22.1429H37.5V20.7143H31.9444V29.2857H37.5V27.8571H41.6667V30.7143C41.6667 32.2857 40.4167 33.5714 38.8889 33.5714H30.5556C29.0278 33.5714 27.7778 32.2857 27.7778 30.7143V19.2857C27.7778 17.7143 29.0278 16.4286 30.5556 16.4286H38.8889C40.4167 16.4286 41.6667 17.7143 41.6667 19.2857V22.1429Z",fill:"white"}))},o5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M0 33.5519H11.1111L25 47.805V2.19498L11.1111 16.4481H0V33.5519ZM30.5556 13.5975V36.4025C34.6667 34.4641 37.5 30.0456 37.5 25C37.5 20.0399 34.6667 15.707 30.5556 13.5975ZM30.5556 5.87229C38.5833 8.32383 44.4444 15.9635 44.4444 25C44.4444 34.0365 38.5833 41.6762 30.5556 44.1277V50C41.6944 47.4059 50 37.2007 50 25C50 12.7993 41.6944 2.59407 30.5556 0V5.87229Z",fill:"white"}))},l5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M0 34.375H14.8148L33.3333 50V0L14.8148 15.625H0V34.375ZM40.7407 12.5V37.5C46.2222 35.375 50 30.5312 50 25C50 19.5625 46.2222 14.8125 40.7407 12.5Z",fill:"white"}))},u5=function(e){var r=Xt({},e);return E.createElement("svg",Object.assign({viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),E.createElement("path",{d:"M37.5 25.0139C37.5 20.0945 34.6667 15.8699 30.5556 13.8132V19.9555L37.3611 26.7649C37.4444 26.209 37.5 25.6253 37.5 25.0139ZM44.4444 25.0139C44.4444 27.6265 43.8889 30.0723 42.9444 32.3513L47.1389 36.5481C48.9722 33.1017 50 29.1829 50 25.0139C50 13.1184 41.6944 3.16843 30.5556 0.667039V6.36465C38.5833 8.75487 44.4444 16.2034 44.4444 25.0139V25.0139ZM3.52778 0L0 3.50195L13.1111 16.6481H0V33.3241H11.1111L25 47.2207V28.5158L36.8056 40.328C34.9444 41.7732 32.8611 42.9127 30.5556 43.6076V49.333C34.3889 48.4714 37.8611 46.6926 40.8056 44.3024L46.4722 50L50 46.4703L25 21.4564L3.55556 0H3.52778ZM24.9722 2.75153L19.1667 8.53252L24.9722 14.3413V2.77932V2.75153Z",fill:"white"}))},kh=function(e,r){var n=J.exports.useRef(!1);J.exports.useEffect(function(){if(!n.current){n.current=!0;return}e()},r)},c5=function(e){var r,n,i,s,a=e.playerKey,l=e.src,d=e.subtitles,u=e.children,h=e.poster,w=e.seekDuration,g=w===void 0?10:w,S=e.internationalization,C=e.playerRef,R=e.pictureInPicture,O=R===void 0?!1:R,T=J.exports.useState(0),I=T[0],D=T[1],M=J.exports.useState(Number(localStorage.getItem("tuby-speed"))||1),j=M[0],B=M[1],z=J.exports.useState(!0),K=z[0],ee=z[1],Z=J.exports.useState(!1),ce=Z[0],le=Z[1],Te=J.exports.useState(!1),_e=Te[0],We=Te[1],Ne=J.exports.useState(!1),Ue=Ne[0],oe=Ne[1],xe=J.exports.useState(0),fe=xe[0],Le=xe[1],ye=J.exports.useState(0),Ze=ye[0],Ce=ye[1],it=J.exports.useState(0),ft=it[0],Be=it[1],ot=J.exports.useState(null),Xe=ot[0],Ke=ot[1],mt=J.exports.useState(!1),Pt=mt[0],gt=mt[1],vt=J.exports.useState(isNaN(parseInt(localStorage.getItem("tuby-volume")))?100:Number(localStorage.getItem("tuby-volume"))),tt=vt[0],Rt=vt[1],kt=J.exports.useState(Boolean(Number(localStorage.getItem("tuby-muted")))),lt=kt[0],ir=kt[1],G=J.exports.useState(!0),Q=G[0],$=G[1],A=J.exports.useState(!1),N=A[0],V=A[1],P=J.exports.useRef(null),k=C||P,H=J.exports.useRef(null),W=J.exports.useRef(null),se=J.exports.useRef(!1),ue=J.exports.useRef(null),re=J.exports.useRef(null),q=J.exports.useRef(null),Y=J.exports.useRef(null),ie=function(me){k.current&&(k.current.currentTime+=me)},te=function(){ir(!lt),Rt(tt===0?100:tt)},de=function(me){if(!(!k.current||!W.current)){var he=(me-W.current.getBoundingClientRect().left)/W.current.offsetWidth,Ie=(Math.abs(he)===1/0||isNaN(he)?0:he)*k.current.duration;k.current.currentTime=Ie,Ce(Ie)}},ge=function(me){if(!(!k.current||!W.current)){var he=W.current.getBoundingClientRect().left,Ie=(me-he)/W.current.offsetWidth;Ie=Math.abs(Ie)===1/0||isNaN(Ie)?0:Ie;var $e=Ie*W.current.offsetWidth,st=Ie*k.current.duration;isNaN(st)&&Ke(null),st<0&&(st=0),Ke({time:Math.round(st),offset:$e})}},Ae=function(){var me=function($e){ge($e.clientX),se.current&&de($e.clientX)};window.addEventListener("mousemove",me);var he=function($e){var st,wt;if(ge((st=$e.touches)==null||(wt=st[0])==null?void 0:wt.pageX),se.current){var dt,Ft;de((dt=$e.touches)==null||(Ft=dt[0])==null?void 0:Ft.pageX)}};window.addEventListener("touchmove",he),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",me),se.current=!1,Ke(null)}),window.addEventListener("touchend",function(){window.removeEventListener("touchmove",he),se.current=!1,Ke(null)})},Me=function(me){Ue?oe(!1):ee(function(he){return!he}),me.detail===2&&!Ih()&&le(function(he){return!he})};kh(function(){var ve,me;if(V(!0),K){var he;(he=k.current)==null||he.pause()}else{var Ie;(Ie=k.current)==null||Ie.play()}(ve=document)==null||(me=ve.activeElement)==null||me.blur()},[K]),J.exports.useEffect(function(){k.current&&(k.current.muted=lt,k.current.volume=lt?0:tt/100),localStorage.setItem("tuby-volume",String(tt)),localStorage.setItem("tuby-muted",String(+lt))},[tt,lt]),J.exports.useEffect(function(){var ve=function(){var $e=document,st=$e.fullscreenElement||$e.webkitFullscreenElement||$e.webkitCurrentFullScreenElement||$e.mozFullScreenElement||$e.msFullscreenElement;le(!!st)};document.addEventListener("fullscreenchange",ve),document.addEventListener("webkitfullscreenchange",ve),document.addEventListener("mozfullscreenchange",ve),document.addEventListener("MSFullscreenChange",ve);var me=function(){ve(),ee(!0)},he=k.current;return he==null||he.addEventListener("webkitendfullscreen",me),function(){document.removeEventListener("fullscreenchange",ve),document.removeEventListener("webkitfullscreenchange",ve),document.removeEventListener("mozfullscreenchange",ve),document.removeEventListener("MSFullscreenChange",ve),he==null||he.removeEventListener("webkitendfullscreen",me)}},[]),kh(function(){try{if(ce)if(Ih()){var ve=k.current,me=ve.requestFullscreen||ve.webkitRequestFullscreen||ve.webkitRequestFullScreen||ve.webkitEnterFullscreen||ve.mozRequestFullScreen||ve.msRequestFullscreen;me==null||me.call(ve)}else{var he=H.current,Ie=he.requestFullscreen||he.webkitRequestFullscreen||he.webkitRequestFullScreen||he.webkitEnterFullscreen||he.mozRequestFullScreen||he.msRequestFullscreen;Ie==null||Ie.call(he)}else{var $e=document,st=$e.exitFullscreen||$e.webkitExitFullscreen||$e.webkitCancelFullScreen||$e.mozCancelFullScreen||$e.msExitFullscreen;st==null||st.call(document)}}catch{}},[ce]),kh(function(){!k.current||(k.current.addEventListener("loadeddata",function(){k.current&&Ze&&(k.current.currentTime=Ze,k.current.play())},{once:!0}),k.current.addEventListener("error",function(){var ve;(ve=k.current)==null||ve.pause()}))},[I]),J.exports.useEffect(function(){!k.current||(localStorage.setItem("tuby-speed",String(j)),k.current.playbackRate=j)},[j]),J.exports.useEffect(function(){var ve=function(Ie){var $e,st,wt,dt,Ft;($e=H.current)!=null&&$e.contains(document.activeElement)&&((st=document.activeElement)==null||st.blur()),(Ie.key===" "||Ie.key==="k")&&((wt=q.current)==null||wt.click()),Ie.key==="ArrowLeft"&&ie(-g),Ie.key==="ArrowRight"&&ie(g),Ie.key==="f"&&((dt=re.current)==null||dt.click()),Ie.key==="m"&&((Ft=Y.current)==null||Ft.click())},me=function(Ie){Ie.key===" "&&Ie.preventDefault()};return window.addEventListener("keyup",ve),window.addEventListener("keydown",me),function(){window.removeEventListener("keyup",ve),window.removeEventListener("keydown",me)}},[g]);var Re={crossOrigin:"anonymous",playsInline:!0,onClickCapture:Me,controls:!1,src:typeof l=="string"?l:l[I].url,onWaiting:function(){return We(!0)},onPlaying:function(){We(!1),ee(!1)},onLoadedData:function(){var me;gt(!0),Be(((me=k.current)==null?void 0:me.duration)||0);var he;a?he=Number(localStorage.getItem(a+"-time")):he=0,Ce(he),k.current&&(k.current.currentTime=he)},onTimeUpdate:function(){var me,he,Ie;a&&localStorage.setItem(a+"-time",String(((me=k.current)==null?void 0:me.currentTime)||0)),Ce(((he=k.current)==null?void 0:he.currentTime)||0),Be(((Ie=k.current)==null?void 0:Ie.duration)||0)},onEnded:function(){ee(!0)},onMouseMove:function(){ue.current&&clearTimeout(ue.current),$(!0),ue.current=setTimeout(function(){$(!1)},2e3)},children:E.createElement(E.Fragment,null,d&&d.length>0&&fe>=0&&Pt&&E.createElement("track",{kind:"subtitles",srcLang:d[fe].lang,label:d[fe].language,src:d[fe].url,default:!0}))};return E.createElement(E.Fragment,null,h&&!N&&E.createElement("img",{src:h,className:"tuby-poster",alt:"Tuby Poster"}),E.createElement("div",{ref:H,className:"tuby-container"},u?u(k,Re):E.createElement("video",Object.assign({ref:k},Re)),(!Pt&&N||_e&&!K)&&E.createElement("div",{className:"tuby-center"},E.createElement(WU,null)),K&&N&&E.createElement("div",{className:"tuby-center",onClickCapture:Me},E.createElement(JU,null)),!K&&N&&E.createElement("div",{className:"tuby-center",onClickCapture:Me},E.createElement(e5,null)),!N&&E.createElement("div",{className:"tuby-center",onClickCapture:Me},E.createElement(dm,{className:"tuby-icon-md"})),E.createElement("div",{onTouchEnd:function(){return $(!0)},onClick:function(){return $(!0)},onMouseEnter:function(){return ue.current&&clearTimeout(ue.current)},className:"tuby-controls "+(K||Ue?"tuby-show":"")+" "+(Q?"tuby-controls-hovered":"")},E.createElement("div",{ref:W,onMouseDown:function(me){se.current=!0,de(me.clientX),Ae()},onTouchStart:function(me){var he,Ie;se.current=!0,de((he=me.touches)==null||(Ie=he[0])==null?void 0:Ie.pageX),Ae()},onMouseMove:function(me){return ge(me.clientX)},onMouseLeave:function(){return Ke(null)},className:"tuby-seek"},E.createElement("div",{className:"tuby-seek-bar"},E.createElement("div",{style:{width:ft!==0?Math.round(Ze/ft*1e3)/10+"%":0},className:"tuby-seek-left"})),Xe!==null&&E.createElement("div",{className:"tuby-seek-preview",style:{left:Xe.offset<16?0:Xe.offset>(((r=W.current)==null?void 0:r.offsetWidth)||0)-16?"auto":Xe.offset,right:Xe.offset>(((n=W.current)==null?void 0:n.offsetWidth)||0)-16?0:"auto",transform:Xe.offset<16||Xe.offset>(((i=W.current)==null?void 0:i.offsetWidth)||0)-16?"none":"translateX(-50%)"}},Ch(Xe.time))),E.createElement("div",{className:"tuby-controls-main"},E.createElement("div",{className:"tuby-controls-left"},E.createElement("button",{ref:q,className:"tuby-center-container tuby-tooltips-left","data-tuby-tooltips":K?(S==null?void 0:S.tooltipsPlay)||"Play (k)":(S==null?void 0:S.tooltipsPause)||"Pause (k)",onClickCapture:function(){return ee(function(me){return!me})}},K?E.createElement(dm,{className:"tuby-icon-sm"}):E.createElement(wb,{className:"tuby-icon-sm"})),E.createElement("div",{className:"tuby-volume-container"},E.createElement("button",{ref:Y,className:"tuby-center-container","data-tuby-tooltips":lt||tt===0?(S==null?void 0:S.tooltipsUnmute)||"Unmute (m)":(S==null?void 0:S.tooltipsMute)||"Mute (m)",onClickCapture:te},lt||tt===0?E.createElement(u5,{className:"tuby-icon-sm"}):tt===100?E.createElement(o5,{className:"tuby-icon-sm"}):E.createElement(l5,{className:"tuby-icon-sm"})),E.createElement("div",{className:"tuby-volume-wrapper"},E.createElement("input",{className:"tuby-volume-slider",type:"range",min:0,max:100,value:lt?0:tt,onChange:function(me){Rt(+me.target.value),ir(+me.target.value==0)}}),E.createElement("div",{className:"tuby-volume-left-bar",style:{width:lt?0:tt*.52}}))),E.createElement("div",{className:"tuby-time"},Ch(Ze)," / ",Ch(ft))),E.createElement("div",{className:"tuby-controls-right"},Boolean(d)&&E.createElement("button",{className:"tuby-center-container "+(fe>=0?"tuby-icon-underline":""),"data-tuby-tooltips":(S==null?void 0:S.tooltipsSubtitles)||"Subtitles (c)",onClickCapture:function(){return fe>=0?Le(-1):Le(0)}},E.createElement(a5,{className:"tuby-icon-sm"})),E.createElement(qU,{onClickAway:function(){return oe(!1)}},function(ve){return E.createElement("div",{ref:ve,style:{position:"relative"}},E.createElement("button",Object.assign({className:"tuby-center-container",onClickCapture:function(){return oe(function(he){return!he})}},Ue?{}:{"data-tuby-tooltips":(S==null?void 0:S.tooltipsSettings)||"Settings"}),E.createElement(YU,{className:"tuby-icon-sm"})),Ih()?E.createElement(s5,{settingsActive:Ue,setSettingsActive:oe,src:l,subtitles:d,playbackSpeed:j,setPlaybackSpeed:B,subtitleIndex:fe,setSubtitleIndex:Le,quality:I,setQuality:D,internationalization:S}):E.createElement(i5,{settingsActive:Ue,setSettingsActive:oe,src:l,subtitles:d,playbackSpeed:j,setPlaybackSpeed:B,subtitleIndex:fe,setSubtitleIndex:Le,quality:I,setQuality:D,internationalization:S}))}),O&&((s=document)==null?void 0:s.pictureInPictureEnabled)&&E.createElement("button",{className:"tuby-center-container",ref:re,"data-tuby-tooltips":"Picture in Picture",onClickCapture:function(){try{var me,he=document;he!=null&&he.pictureInPictureElement?he==null||he.exitPictureInPicture():(me=k.current)==null||me.requestPictureInPicture()}catch{}}},E.createElement(ZU,{className:"tuby-icon-sm"})),E.createElement("button",{className:"tuby-center-container tuby-tooltips-right",ref:re,"data-tuby-tooltips":""+(ce?(S==null?void 0:S.tooltipsExitFullscreen)||"Exit full screen (f)":(S==null?void 0:S.tooltipsFullscreen)||"Full screen (f)"),onClickCapture:function(){return le(function(me){return!me})}},ce?E.createElement(XU,{className:"tuby-icon-sm"}):E.createElement(QU,{className:"tuby-icon-sm"})))))))},f5=function(e){var r,n=e.dimensions,i=e.primaryColor;return E.createElement("div",{className:"tuby",style:Xt({},typeof n=="number"?{width:"100%",height:0,paddingBottom:n+"%"}:typeof n=="object"?{width:n.width,height:n.height}:{width:"100%",height:0,paddingBottom:"56.25%"},i?(r={},r["--tuby-primary-color"]=i,r):{})},E.createElement(zU,null,E.createElement(KU,Object.assign({renderer:e.children},e),E.createElement(c5,Object.assign({},e)))))};const hm=i=>{var s=i,{className:t,onLoad:e,crossOrigin:r}=s,n=co(s,["className","onLoad","crossOrigin"]);const[a,l]=J.exports.useState(!1);return E.createElement("img",Ws(ts({className:`${a?"opacity-100":"opacity-0"} transition duration-300 ${t}`,onLoad:d=>{l(!0),e&&e(d)}},n),{alt:""}))},d5=({data:t})=>E.createElement("div",{className:"flex-shrink-0 md:w-[300px]"},t?E.createElement(J.exports.Fragment,null,(t==null?void 0:t.refList)&&(t==null?void 0:t.refList.filter(e=>e.id!==t.id).length)>0&&E.createElement(J.exports.Fragment,null,E.createElement("h1",{className:"text-2xl my-3"},"In the series"),E.createElement("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2"},t==null?void 0:t.refList.filter(e=>e.id!==t.id).map(e=>E.createElement(St,{key:e.id,to:`/${e.category===0?"movie":"tv"}/${e.id}`,className:"flex gap-3 pr-2 hover:brightness-[85%] transition duration-300"},E.createElement("div",{className:"flex-shrink-0 h-[100px] w-[70px]"},E.createElement(hm,{className:"h-full w-full object-cover",src:an(e.coverVerticalUrl,"","100"),alt:""})),E.createElement("div",{className:"my-2 flex-grow"},E.createElement("p",null,e.name)))))),(t==null?void 0:t.likeList)&&t.likeList.length>0&&E.createElement(J.exports.Fragment,null,E.createElement("h1",{className:"text-2xl my-3"},"Similar to this"),E.createElement("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2"},t.likeList.map(e=>E.createElement(St,{key:e.id,to:`/${e.category===0?"movie":"tv"}/${e.id}`,className:"flex gap-3 pr-2 hover:brightness-[85%] transition duration-300"},E.createElement("div",{className:"flex-shrink-0 h-[100px] w-[70px]"},E.createElement(hm,{className:"h-full w-full object-cover",src:an(e.coverVerticalUrl,"","100"),alt:""})),E.createElement("div",{className:"my-2 flex-grow"},E.createElement("p",null,e.name),E.createElement("div",{className:"flex items-center gap-2"},E.createElement("img",{className:"w-4 h-4",src:"/star.png",alt:""}),E.createElement("p",null,e==null?void 0:e.score.toFixed(1))))))))):E.createElement(J.exports.Fragment,null,[...new Array(2)].map((e,r)=>E.createElement("div",{key:r},E.createElement(Gr,{className:"w-[60%] h-7 my-6"}),E.createElement("div",{key:r,className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2"},[...new Array(10)].map((n,i)=>E.createElement("div",{key:i,className:"flex gap-3 pr-2"},E.createElement(Gr,{className:"w-[70px] h-[100px] flex-shrink-0"}),E.createElement("div",{className:"flex-grow"},E.createElement(Gr,{className:"w-full h-4"}),E.createElement(Gr,{className:"w-[70%] h-4 mt-3"})))))))));const h5=({data:t,episodeIndex:e})=>{var r;return E.createElement(J.exports.Fragment,null,t?E.createElement("div",{className:"flex flex-col gap-[10px]"},E.createElement("h1",{className:"text-3xl mt-5"},t.name),E.createElement("div",{className:"flex gap-4"},E.createElement("div",{className:"flex items-center gap-1"},E.createElement("img",{src:"/star.png",className:"w-4 h-4",alt:""}),E.createElement("p",null,(r=t==null?void 0:t.score)==null?void 0:r.toFixed(1))),E.createElement("div",{className:"flex items-center gap-1"},E.createElement("img",{src:"/calendar.png",className:"w-4 h-4",alt:""}),E.createElement("p",null,t==null?void 0:t.year))),E.createElement("div",{className:"flex flex-wrap gap-3"},t.tagList.map(n=>E.createElement(St,{key:n.id,to:`/category/${n.id}`,className:"bg-dark-lighten px-3 py-1 rounded-full hover:brightness-125 transition duration-300"},n.name))),E.createElement("p",null,t.introduction),t.episodeVo.length>1&&E.createElement(J.exports.Fragment,null,E.createElement("h1",{className:"text-xl my-3"},"Episodes"),E.createElement("div",{className:"flex gap-3 overflow-auto max-w-[92vw] md:max-w-[calc(88vw - 300px)]"},t.episodeVo.map((n,i)=>E.createElement(St,{key:i,to:`/tv/${t.id}?episode=${i}`,className:`py-2 px-4 bg-dark-lighten rounded hover:brightness-125 transition duration-300 ${i===e?"!bg-primary text-white":""}`},i+1))))):E.createElement(J.exports.Fragment,null,E.createElement(Gr,{className:"w-[70%] h-8 mt-6"}),E.createElement(Gr,{className:"w-[60%] h-8 mt-6"})))},p5=(t,e)=>{const[r,n]=J.exports.useState(null),[i,s]=J.exports.useState(!Boolean(r)),[a,l]=J.exports.useState(!1);return J.exports.useEffect(()=>{const d=kU(e,u=>{n(u),s(!1)},u=>{console.log(u),n(null),s(!1),l(!0)});return()=>{d()}},[t,e]),{loading:i,error:a,data:r}},m5=({data:t,episodeIndex:e})=>{const r=dd(T=>T.currentUser),n=An(),[i,s]=J.exports.useState(""),[a,l]=J.exports.useState(!1),u=`${typeof e=="undefined"?"movie":"tv"}-${t.id}`,[h,w]=J.exports.useState(10),g=async T=>{T.preventDefault(),i.trim()&&(l(!0),RU(vw(bh,u),{user:r,value:i.trim(),reactions:{},createdAt:DU()}).finally(()=>l(!1)),s(""))},S=async(T,I)=>{r!=null&&r.uid&&AU(tb(bh,u,T),{[`reactions.${r==null?void 0:r.uid}`]:I})},{data:C,error:R,loading:O}=p5(`${u}-${h}`,wU(vw(bh,u),SU("createdAt","desc"),_U(h)));return E.createElement("div",null,E.createElement("h1",{className:"text-2xl mt-10"},"Comments"),R?E.createElement("div",{className:"my-3"},"Cannot load comments"):E.createElement(E.Fragment,null,r?E.createElement("form",{onSubmit:g,className:"relative border border-gray-600 rounded-full my-6"},E.createElement("img",{className:"w-[30px] h-[30px] rounded-full absolute top-1/2 -translate-y-1/2 left-[10px]",src:an(r.photoURL,"30","30"),alt:""}),E.createElement("input",{value:i,onChange:T=>s(T.target.value),onKeyDown:T=>T.stopPropagation(),onKeyUp:T=>T.stopPropagation(),onKeyPress:T=>T.stopPropagation(),className:"w-full h-12 bg-transparent outline-none text-white px-12",placeholder:"Comment what you think...",type:"text"}),a?E.createElement("div",{className:"absolute right-[14px] top-1/2 -translate-y-1/2"},E.createElement("div",{className:"w-[25px] h-[25px] rounded-full border-white border-t-transparent border-[3px] animate-spin"})):E.createElement("button",{className:"absolute right-[14px] top-1/2 -translate-y-1/2",type:"submit"},E.createElement("i",{className:"fas fa-paper-plane text-xl"}))):E.createElement("div",{className:"flex items-center gap-3 h-12 border border-gray-600 rounded-full my-6 px-3"},E.createElement("img",{className:"w-[30px] h-[30px] rounded-full",src:"/default-avatar.png",alt:""}),E.createElement("p",null,"You need to"," ",E.createElement(St,{className:"text-primary",to:`/sign-in?redirect=${encodeURIComponent(n.pathname)}`},"Sign in")," ","to comment")),E.createElement("div",{className:"flex flex-col items-stretch gap-3"},C==null?void 0:C.docs.map(T=>{var D,M,j;const I=T.data();return E.createElement("div",{key:T.id,className:"flex gap-2"},E.createElement("img",{className:"w-[50px] h-[50px] rounded-full",src:an(I.user.photoURL,"50","50"),alt:""}),E.createElement("div",{className:"flex flex-col items-stretch"},E.createElement("div",{className:"flex gap-2 items-end"},E.createElement("p",{className:"font-bold"},I.user.displayName),E.createElement("p",{className:"text-gray-400 text-sm"},(D=I==null?void 0:I.createdAt)!=null&&D.seconds?QL(I.createdAt.seconds*1e3):"Just now")),E.createElement("p",null,I.value),E.createElement("div",{className:"flex gap-3 items-center"},E.createElement("button",{onClick:()=>{var B;return S(T.id,((B=Object.entries(I.reactions).find(z=>z[0]===(r==null?void 0:r.uid)))==null?void 0:B[1])===1?0:1)},className:`flex items-center gap-1 transition ${r?"hover:brightness-75":"cursor-default"} ${((M=Object.entries(I.reactions).find(B=>B[0]===(r==null?void 0:r.uid)))==null?void 0:M[1])===1?"text-primary":""}`},E.createElement("i",{className:"fas fa-thumbs-up"}),E.createElement("span",null,Object.values(I.reactions).filter(B=>B===1).length)),E.createElement("button",{onClick:()=>{var B;return S(T.id,((B=Object.entries(I.reactions).find(z=>z[0]===(r==null?void 0:r.uid)))==null?void 0:B[1])===2?0:2)},className:`flex items-center gap-1 transition ${r?"hover:brightness-75":"cursor-default"} ${((j=Object.entries(I.reactions).find(B=>B[0]===(r==null?void 0:r.uid)))==null?void 0:j[1])===2?"text-primary":""}`},E.createElement("i",{className:"fas fa-thumbs-down"}),E.createElement("span",null,Object.values(I.reactions).filter(B=>B===2).length)))))})),!O&&!(C!=null&&C.size)&&E.createElement("p",{className:"text-center text-gray-400"},"No one has commented"),!O&&Boolean(C==null?void 0:C.size)&&(C==null?void 0:C.size)>=h&&E.createElement("div",{className:"flex justify-center mt-8"},E.createElement("button",{onClick:()=>w(h+10),className:"bg-primary text-white px-4 py-2 rounded hover:brightness-[115%] transition"},"Load more"))))},xb=({data:t,sources:e,subtitles:r,episodeIndex:n})=>{const s=`${typeof n=="undefined"?"movie":"tv"}-${t==null?void 0:t.id}${n?`-${n}`:""}`;return J.exports.useEffect(()=>{if(!t)return;let a=JSON.parse(localStorage.getItem("filmhot-recent")||"[]");!Array.isArray(a)||(a=a.filter(l=>l.id!==t.id),a.unshift({id:t.id,category:t.category,coverVerticalUrl:t.coverVerticalUrl,name:t.name}),localStorage.setItem("filmhot-recent",JSON.stringify(a)))},[t]),E.createElement(J.exports.Fragment,null,t&&E.createElement(Ui,{value:`Watch ${t.name} ${typeof n!="undefined"?`- Episode ${n+1}`:""} - FilmHot`}),E.createElement("div",{className:"flex justify-center"},E.createElement("div",{className:"mx-[4vw] lg:mx-[6vw] flex-1"},E.createElement(Ul,null),E.createElement("div",{className:"flex flex-col md:flex-row gap-10 my-7"},E.createElement("div",{className:"flex flex-col items-stretch flex-grow"},E.createElement("div",{key:n,className:"w-full"},t&&e&&r?E.createElement(f5,{src:e,playerKey:s,primaryColor:"#0D90F3",subtitles:(r==null?void 0:r.map(a=>Ws(ts({},a),{url:zL(a.url)})))||[]},(a,l)=>E.createElement(Eb,Ws(ts({playerRef:a},l),{src:`${KL}${l.src}`}))):E.createElement("div",{className:"w-full h-0 pb-[56.25%] relative"},E.createElement(Gr,{className:"absolute w-full h-full top-0 left-0"}))),E.createElement(h5,{data:t,episodeIndex:n}),t&&E.createElement(m5,{data:t,episodeIndex:n})),E.createElement(d5,{data:t})))))},g5=async t=>{const e=(await sn.get("movieDrama/get",{params:{id:t,category:0}})).data.data,r=(await Promise.all(e.episodeVo[0].definitionList.map(async i=>(await sn.get("media/previewInfo",{params:{category:0,contentId:t,episodeId:e.episodeVo[0].id,definition:i.code}})).data.data.mediaUrl))).map((i,s)=>({quality:Number(e.episodeVo[0].definitionList[s].description.toLowerCase().replace("p","")),url:i})).sort((i,s)=>s.quality-i.quality),n=e.episodeVo[0].subtitlingList.map(i=>({language:`${i.language}${i.translateType?" (Auto)":""}`,url:i.subtitlingUrl,lang:i.languageAbbr})).reduce((i,s)=>s.lang==="en"?[s,...i]:[...i,s],[]).reduce((i,s)=>s.lang==="vi"?[s,...i]:[...i,s],[]);return{data:e,sources:r,subtitles:n}},v5=()=>{const{id:t}=hg(),{data:e,error:r}=Ms(`movie-${t}`,()=>g5(t),{revalidateOnFocus:!1});return r?E.createElement(Bn,null):E.createElement(xb,{data:e==null?void 0:e.data,sources:e==null?void 0:e.sources,subtitles:e==null?void 0:e.subtitles})},y5=async(t,e)=>{const r=(await sn.get("movieDrama/get",{params:{id:t,category:1}})).data.data,n=(await Promise.all(r.episodeVo[e].definitionList.map(async s=>(await sn.get("media/previewInfo",{params:{category:1,contentId:t,episodeId:r.episodeVo[e].id,definition:s.code}})).data.data.mediaUrl))).map((s,a)=>({quality:Number(r.episodeVo[e].definitionList[a].description.toLowerCase().replace("p","")),url:s})).sort((s,a)=>a.quality-s.quality),i=r.episodeVo[e].subtitlingList.map(s=>({language:`${s.language}${s.translateType?" (Auto)":""}`,url:s.subtitlingUrl,lang:s.languageAbbr})).reduce((s,a)=>a.lang==="en"?[a,...s]:[...s,a],[]).reduce((s,a)=>a.lang==="vi"?[a,...s]:[...s,a],[]);return{data:r,sources:n,subtitles:i}},E5=()=>{const{id:t}=hg(),e=Fv(),r=Number(e.get("episode"))||0,{data:n,error:i}=Ms(`tv-${t}-${r}`,()=>y5(t,r),{revalidateOnFocus:!1});return i?E.createElement(Bn,null):E.createElement(xb,{data:n==null?void 0:n.data,sources:n==null?void 0:n.sources,subtitles:n==null?void 0:n.subtitles,episodeIndex:r})};function pm(){return pm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pm.apply(this,arguments)}function w5(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,mm(t,e)}function mm(t,e){return mm=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},mm(t,e)}function x5(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var gm=new Map,Yu=new WeakMap,xw=0,S5=void 0;function T5(t){return t?(Yu.has(t)||(xw+=1,Yu.set(t,xw.toString())),Yu.get(t)):"0"}function _5(t){return Object.keys(t).sort().filter(function(e){return t[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?T5(t.root):t[e])}).toString()}function b5(t){var e=_5(t),r=gm.get(e);if(!r){var n=new Map,i,s=new IntersectionObserver(function(a){a.forEach(function(l){var d,u=l.isIntersecting&&i.some(function(h){return l.intersectionRatio>=h});t.trackVisibility&&typeof l.isVisible=="undefined"&&(l.isVisible=u),(d=n.get(l.target))==null||d.forEach(function(h){h(u,l)})})},t);i=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:e,observer:s,elements:n},gm.set(e,r)}return r}function C5(t,e,r,n){if(r===void 0&&(r={}),n===void 0&&(n=S5),typeof window.IntersectionObserver=="undefined"&&n!==void 0){var i=t.getBoundingClientRect();return e(n,{isIntersecting:n,target:t,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var s=b5(r),a=s.id,l=s.observer,d=s.elements,u=d.get(t)||[];return d.has(t)||d.set(t,u),u.push(e),l.observe(t),function(){u.splice(u.indexOf(e),1),u.length===0&&(d.delete(t),l.unobserve(t)),d.size===0&&(l.disconnect(),gm.delete(a))}}var I5=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function Sw(t){return typeof t.children!="function"}var A5=function(t){w5(e,t);function e(n){var i;return i=t.call(this,n)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(s){i.node&&(i.unobserve(),!s&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=s||null,i.observeNode()},i.handleChange=function(s,a){s&&i.props.triggerOnce&&i.unobserve(),Sw(i.props)||i.setState({inView:s,entry:a}),i.props.onChange&&i.props.onChange(s,a)},i.state={inView:!!n.initialInView,entry:void 0},i}var r=e.prototype;return r.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},r.componentWillUnmount=function(){this.unobserve(),this.node=null},r.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,s=i.threshold,a=i.root,l=i.rootMargin,d=i.trackVisibility,u=i.delay,h=i.fallbackInView;this._unobserveCb=C5(this.node,this.handleChange,{threshold:s,root:a,rootMargin:l,trackVisibility:d,delay:u},h)}},r.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},r.render=function(){if(!Sw(this.props)){var i=this.state,s=i.inView,a=i.entry;return this.props.children({inView:s,entry:a,ref:this.handleNode})}var l=this.props,d=l.children,u=l.as,h=x5(l,I5);return J.exports.createElement(u||"div",pm({ref:this.handleNode},h),d)},e}(J.exports.Component);const R5=async(t=0)=>{const e=(await sn.get("recommendPool/getVideoFromRecommondPool",{params:{page:t},headers:{deviceid:Math.random().toString(36).slice(-8)}})).data.data,r=(await sn.post("media/bathGetplayInfo",e.map(n=>({category:n.category,contentId:n.id,episodeId:n.mediaInfo.id,definition:n.mediaInfo.definitionList.slice(-1)[0].code})))).data.data.map(n=>n.mediaUrl);return e.map((n,i)=>Ws(ts({},n),{mediaUrl:r[i]}))},k5=()=>{var l,d;const[t,e]=J.exports.useState(!1),r=An(),n=u=>`discovery-${u||0}`,{data:i,error:s,setSize:a}=kf(n,u=>R5(Number(u.split("-").slice(-1)[0])),{revalidateFirstPage:!1});return J.exports.useEffect(()=>{e(!1)},[r]),s?E.createElement(Bn,null):E.createElement(J.exports.Fragment,null,E.createElement("div",{className:"flex justify-between px-[4vw] mt-6 sm:hidden"},E.createElement(St,{to:"/",className:"flex gap-2 items-center"},E.createElement("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),E.createElement("span",{className:"text-2xl font-medium"},"FilmHot")),E.createElement("button",{onClick:()=>e(!t)},E.createElement("i",{className:"fas fa-bars text-2xl"}))),E.createElement("div",{className:"flex"},E.createElement(gb,{sidebarActive:t,setSidebarActive:e}),E.createElement("div",{className:"flex-grow py-10 px-[4vw]"},!i&&E.createElement("div",{className:"w-full h-screen flex justify-center items-center"},E.createElement("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})),E.createElement(Rf,{dataLength:(i==null?void 0:i.length)||0,next:()=>a(u=>u+1),hasMore:!s&&((d=(l=i==null?void 0:i.slice(-1))==null?void 0:l[0])==null?void 0:d.length)!==0,loader:E.createElement(E.Fragment,null)},E.createElement("div",{className:"flex flex-col items-center w-full gap-24"},i==null?void 0:i.reduce((u,h)=>[...u,...h],[]).map(u=>{var h,w,g;return E.createElement("div",{key:u.id,className:"w-full max-w-[600px] flex gap-2"},E.createElement(hm,{className:"w-12 h-12 rounded-full flex-shrink-0 bg-gray-500",src:an(u.upInfo.upImgUrl),alt:""}),E.createElement("div",{className:"flex flex-col items-stretch flex-grow gap-3"},E.createElement("p",{className:"font-semibold"},((h=u.refList[0])==null?void 0:h.name)||u.name),E.createElement("p",null,u.introduction),E.createElement(A5,{threshold:.5},({ref:S,inView:C})=>E.createElement("div",{ref:S,className:"h-0 relative pb-[100%]"},E.createElement(Eb,{controls:!0,muted:!0,autoPlay:C,playsInline:!0,src:u.mediaUrl,className:"absolute top-0 left-0 w-full h-full object-contain"})))),E.createElement("div",{className:"flex flex-col justify-center items-center w-20 gap-5"},E.createElement("div",{className:"flex flex-col items-center gap-2"},E.createElement("button",{className:"bg-dark-lighten w-10 h-10 rounded-full flex justify-center items-center"},E.createElement("i",{className:"fas fa-heart text-red-500"})),E.createElement("span",null,u.likeCount)),((g=(w=u==null?void 0:u.refList)==null?void 0:w[0])==null?void 0:g.id)&&E.createElement("div",{className:"flex flex-col items-center gap-2"},E.createElement(St,{to:u.refList[0].category===0?`/movie/${u.refList[0].id}`:`/tv/${u.refList[0].id}`,className:"bg-dark-lighten w-10 h-10 rounded-full flex justify-center items-center"},E.createElement("i",{className:"fas fa-external-link-alt"})),E.createElement("span",null,"Open"))))}))))))},L5=()=>{const[t,e]=J.exports.useState(!1),[r,n]=J.exports.useState(""),i=dd(l=>l.currentUser),s=Fv(),a=l=>{e(!0),k2(Mv,l).then(d=>console.log(d.user)).catch(d=>n(`Error: ${d.code}`)).finally(()=>e(!1))};return i?E.createElement(GR,{to:s.get("redirect")||"/"}):E.createElement(J.exports.Fragment,null,E.createElement(Ui,{value:"Sign In - FilmHot"}),E.createElement("div",{className:"min-h-screen w-screen bg-[url('/bg.png')] bg-no-repeat bg-cover bg-center"},E.createElement("div",{className:"w-full min-h-screen flex justify-center items-center bg-[#00000056]"},E.createElement("div",{className:"w-[90vw] max-w-[350px] bg-black p-10 flex flex-col items-center gap-6 rounded-xl"},E.createElement("h1",{className:"text-3xl font-semibold"},"Sign In"),r&&E.createElement("div",{className:"p-3 bg-red-200 text-red-600 border border-red-400 rounded w-full"},r),E.createElement("button",{disabled:t,onClick:()=>a(new qn),className:"w-full flex items-center gap-3 p-3 text-black rounded-md bg-white cursor-pointer hover:brightness-90 disabled:!brightness-75 disabled:cursor-default transition duration-300"},E.createElement("img",{className:"w-6 h-6",src:"/google.svg",alt:""}),E.createElement("span",null,"Sign in with Google"))))))},Tw=()=>{try{return JSON.parse(localStorage.getItem("filmhot-recent")||"[]")}catch{return"[]"}},D5=()=>{const[t,e]=J.exports.useState(Tw()),r=()=>{localStorage.removeItem("filmhot-recent"),e(Tw())};return E.createElement(J.exports.Fragment,null,E.createElement(Ui,{value:"History - FilmHot"}),E.createElement("div",{className:"flex flex-col items-stretch mx-[7vw] mb-8"},E.createElement(Ul,null),E.createElement("div",{className:"flex justify-between mb-6"},E.createElement("h1",{className:"text-3xl"},"Watch history"),E.createElement("button",{onClick:r,className:"text-primary text-xl"},E.createElement("i",{className:"fas fa-trash"})," ",E.createElement("span",null,"Clear"))),t.length===0?E.createElement("div",{className:"flex flex-col items-center my-10 gap-6"},E.createElement("img",{alt:"",src:"/cinema.svg",className:"w-40 h-40 object-cover"}),E.createElement("p",{className:"text-xl"},"No history found"),E.createElement(St,{className:"text-primary text-xl",to:"/"},"Discover more")):E.createElement("div",{className:"grid gap-6 grid-cols-sm md:grid-cols-lg"},t.map(n=>E.createElement(St,{title:n.name,to:n.category===0?`/movie/${n.id}`:`/tv/${n.id}`,key:n.id,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group"},E.createElement("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch"},E.createElement("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300"},E.createElement(zi.exports.LazyLoadImage,{src:an(n.coverVerticalUrl,"250"),className:"absolute top-0 left-0 w-full h-full object-cover",effect:"opacity",alt:""})),E.createElement("div",{className:"flex flex-grow items-center"},E.createElement("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300"},n.name))))))))},O5=()=>{const t=dd(r=>r.setCurrentUser),e=An();return J.exports.useEffect(()=>{s2(Mv,r=>{t(r?{uid:r.uid,email:r.email,photoURL:r.photoURL,displayName:r.displayName}:null)})},[t]),J.exports.useEffect(()=>{window.scrollTo(0,0)},[e.pathname,e.search]),E.createElement(zR,null,E.createElement(Tn,{index:!0,element:E.createElement($U,null)}),E.createElement(Tn,{path:"explore",element:E.createElement(rD,null)}),E.createElement(Tn,{path:"category/:id",element:E.createElement(ZL,null)}),E.createElement(Tn,{path:"search",element:E.createElement(jU,null)}),E.createElement(Tn,{path:"discovery",element:E.createElement(k5,null)}),E.createElement(Tn,{path:"sign-in",element:E.createElement(L5,null)}),E.createElement(Tn,{path:"history",element:E.createElement(D5,null)}),E.createElement(Tn,{path:"movie/:id",element:E.createElement(v5,null)}),E.createElement(Tn,{path:"tv/:id",element:E.createElement(E5,null)}),E.createElement(Tn,{path:"/*",element:E.createElement(Bn,null)}))};vR.render(E.createElement(E.StrictMode,null,E.createElement(qR,null,E.createElement(yk,{value:{revalidateOnFocus:!1,shouldRetryOnError:!1}},E.createElement(O5,null)))),document.getElementById("root"));
